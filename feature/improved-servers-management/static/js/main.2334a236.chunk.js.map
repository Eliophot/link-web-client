{"version":3,"sources":["servers/helpers/withoutSelectedServer.tsx","utils/helpers/files.ts","common/img/ShlinkLogo.tsx","servers/helpers/withSelectedServer.tsx","common/NotFound.tsx","servers/ServersListGroup.tsx","utils/helpers/hooks.ts","utils/utils.ts","servers/data/index.ts","common/services/provideServices.ts","common/ScrollToTop.tsx","common/ErrorHandler.tsx","utils/SimpleCard.tsx","common/services/ImageDownloader.ts","utils/services/provideServices.ts","utils/services/LocalStorage.ts","utils/services/ColorGenerator.ts","common/ShlinkVersions.tsx","common/ShlinkVersionsContainer.tsx","common/MainHeader.tsx","common/Home.tsx","common/MenuLayout.tsx","common/AsideMenu.tsx","utils/helpers/features.ts","utils/theme/index.ts","utils/helpers/query.ts","utils/Message.tsx","common/NoMenuLayout.tsx","utils/SearchField.tsx","api/services/ShlinkApiClient.ts","api/services/ShlinkApiClientBuilder.ts","api/services/provideServices.ts","short-urls/ShortUrls.tsx","tags/helpers/Tag.tsx","utils/DropdownBtn.tsx","utils/helpers/date.ts","utils/dates/types/index.ts","utils/DateInput.tsx","utils/dates/DateRangeRow.tsx","utils/dates/DateIntervalDropdownItems.tsx","utils/dates/DateRangeSelector.tsx","short-urls/SearchBar.tsx","utils/SortingDropdown.tsx","mercure/helpers/boundToMercureHub.tsx","mercure/helpers/index.ts","mercure/helpers/Topics.ts","utils/helpers/redux.ts","visits/VisitsStats.tsx","short-urls/helpers/index.ts","visits/reducers/visitCreation.ts","api/utils/index.ts","short-urls/reducers/shortUrlDeletion.ts","short-urls/reducers/shortUrlCreation.ts","short-urls/reducers/shortUrlEdition.ts","short-urls/reducers/shortUrlsList.ts","short-urls/reducers/shortUrlsListParams.ts","utils/helpers/numbers.ts","utils/helpers/pagination.ts","short-urls/Paginator.tsx","short-urls/ShortUrlsList.tsx","utils/CopyToClipboardIcon.tsx","utils/Time.tsx","short-urls/helpers/ShortUrlDetailLink.tsx","short-urls/helpers/ShortUrlVisitsCount.tsx","short-urls/helpers/ShortUrlsRow.tsx","utils/DropdownBtnMenu.tsx","short-urls/helpers/ShortUrlsRowMenu.tsx","short-urls/CreateShortUrl.tsx","utils/Result.tsx","api/ShlinkApiError.tsx","short-urls/helpers/DeleteShortUrlModal.tsx","short-urls/helpers/CreateShortUrlResult.tsx","short-urls/ShortUrlsTable.tsx","short-urls/helpers/qr-codes/QrFormatDropdown.tsx","short-urls/helpers/qr-codes/QrErrorCorrectionDropdown.tsx","short-urls/helpers/QrCodeModal.tsx","utils/helpers/qrCodes.ts","utils/BooleanControl.tsx","utils/Checkbox.tsx","short-urls/UseExistingIfFoundInfoIcon.tsx","utils/InfoTooltip.tsx","short-urls/helpers/ShortUrlFormCheckboxGroup.tsx","short-urls/ShortUrlForm.tsx","short-urls/EditShortUrl.tsx","short-urls/reducers/shortUrlDetail.ts","short-urls/services/provideServices.ts","utils/FormGroupContainer.tsx","servers/helpers/ServerForm.tsx","servers/CreateServer.tsx","servers/ServersDropdown.tsx","servers/DeleteServerModal.tsx","servers/DeleteServerButton.tsx","servers/EditServer.tsx","servers/helpers/ImportServersBtn.tsx","servers/reducers/selectedServer.ts","servers/reducers/servers.ts","servers/reducers/remoteServers.ts","servers/helpers/ForServerVersion.tsx","servers/helpers/ServerError.tsx","servers/Overview.tsx","servers/ManageServers.tsx","servers/ManageServersRow.tsx","servers/ManageServersRowDropdown.tsx","servers/services/ServersImporter.ts","servers/services/ServersExporter.ts","servers/services/provideServices.ts","visits/VisitsHeader.tsx","visits/ShortUrlVisitsHeader.tsx","utils/helpers/visits.ts","utils/ToggleSwitch.tsx","utils/helpers/charts.ts","visits/charts/LineChartCard.tsx","common/SimplePaginator.tsx","visits/VisitsTable.tsx","visits/helpers/MapModal.tsx","visits/helpers/OpenMapModalBtn.tsx","visits/types/helpers.ts","visits/services/VisitsParser.ts","visits/helpers/VisitsFilterDropdown.tsx","visits/charts/DoughnutChartLegend.tsx","visits/charts/DoughnutChart.tsx","visits/charts/ChartCard.tsx","visits/charts/DoughnutChartCard.tsx","utils/PaginationDropdown.tsx","visits/charts/HorizontalBarChart.tsx","visits/charts/SortableBarChartCard.tsx","visits/ShortUrlVisits.tsx","visits/reducers/common.ts","visits/reducers/shortUrlVisits.ts","visits/TagVisitsHeader.tsx","visits/TagVisits.tsx","visits/reducers/tagVisits.ts","visits/OrphanVisitsHeader.tsx","visits/OrphanVisits.tsx","visits/reducers/orphanVisits.ts","visits/reducers/visitsOverview.ts","visits/services/VisitsExporter.ts","visits/services/provideServices.ts","tags/helpers/TagBullet.tsx","tags/helpers/TagsSelector.tsx","tags/TagCard.tsx","tags/helpers/DeleteTagConfirmModal.tsx","tags/helpers/EditTagModal.tsx","tags/TagsModeDropdown.tsx","tags/TagsList.tsx","tags/reducers/tagDelete.ts","tags/reducers/tagEdit.ts","tags/reducers/tagsList.ts","tags/TagsCards.tsx","tags/TagsTable.tsx","tags/TagsTableRow.tsx","tags/services/provideServices.ts","mercure/reducers/mercureInfo.ts","mercure/services/provideServices.ts","settings/RealTimeUpdates.tsx","settings/Settings.tsx","settings/reducers/settings.ts","settings/ShortUrlCreation.tsx","settings/UserInterface.tsx","utils/dates/DateIntervalSelector.tsx","settings/Visits.tsx","settings/services/provideServices.ts","domains/reducers/domainRedirects.ts","domains/reducers/domainsList.ts","domains/DomainSelector.tsx","domains/helpers/EditDomainRedirectsModal.tsx","domains/DomainRow.tsx","domains/ManageDomains.tsx","domains/services/provideServices.ts","app/reducers/appUpdates.ts","common/AppUpdateBanner.tsx","utils/helpers/sw.ts","app/App.tsx","app/services/provideServices.ts","container/index.ts","reducers/index.ts","container/store.ts","serviceWorkerRegistration.ts","utils/helpers/leaflet.ts","index.tsx","utils/helpers/version.ts"],"names":["withoutSelectedServer","WrappedComponent","props","useEffect","resetSelectedServer","saveUrl","url","filename","document","link","createElement","setAttribute","style","visibility","body","appendChild","click","removeChild","saveCsv","window","csv","blob","Blob","type","URL","createObjectURL","ShlinkLogo","color","MAIN_COLOR","className","viewBox","version","xmlns","fill","d","withSelectedServer","ServerError","selectServer","selectedServer","match","params","serverId","isNotFoundServer","loading","NotFound","to","children","ServerListItem","id","name","ListGroupItem","tag","Link","icon","chevronIcon","ServersListGroup","servers","embedded","length","ListGroup","classNames","map","useStateFlagTimeout","setTimeout","clearTimeout","initialValue","delay","useState","flag","setFlag","timeout","useRef","undefined","callback","current","useToggle","useSwipeable","showSidebar","hideSidebar","swipeMenuIfNoModalExists","e","event","composedPath","some","classList","contains","querySelector","useReactSwipeable","delta","onSwipedLeft","onSwipedRight","useQueryState","paramName","initialState","value","setValue","location","history","query","parseQuery","search","pushState","pathname","stringifyQuery","determineOrderDir","currentField","newField","currentOrderDir","ASC","DESC","rangeOf","size","mappingFn","startAt","range","hasValue","isNil","isEmpty","handleEventPreventingDefault","handler","pipe","preventDefault","nonEmptyValueOrNull","capitalize","charAt","toUpperCase","slice","hasServerData","server","apiKey","isServerWithId","hasOwnProperty","isReachableServer","getServerId","provideServices","bottle","connect","withRouter","constant","global","console","axios","service","ImageDownloader","serviceFactory","ScrollToTop","decorator","MainHeader","Home","MenuLayout","AsideMenu","ShlinkVersionsContainer","ErrorHandler","scrollTo","error","state","hasError","this","outline","onClick","reload","Component","SimpleCard","title","bodyClassName","rest","imgUrl","get","responseType","data","localStorage","LocalStorage","ColorGenerator","buildPath","path","key","item","getItem","JSON","parse","set","setItem","stringify","floor","Math","random","letters","normalizeKey","toLowerCase","trim","storage","colors","getColorForKey","normalizedKey","setColorForKey","join","normalizeVersion","versionToSemVer","versionToPrintable","VersionLink","project","href","ShlinkVersions","clientVersion","normalizedClientVersion","printableVersion","classes","ServersDropdown","isOpen","toggleOpen","close","settingsPath","toggleClass","Navbar","dark","fixed","expand","NavbarBrand","NavbarToggler","arrowIcon","Collapse","navbar","Nav","NavItem","NavLink","active","cogsIcon","serversList","values","hasServers","Card","Row","noGutters","faPlus","faExternalLinkAlt","TagsList","ShortUrls","CreateShortUrl","ShortUrlVisits","TagVisits","OrphanVisits","Overview","EditShortUrl","ManageDomains","sidebarVisible","toggleSidebar","addOrphanVisitsRoute","supportsOrphanVisits","addManageDomainsRoute","supportsDomainRedirects","burgerClasses","swipeableProps","burgerIcon","showOnMobile","exact","from","component","render","AsideMenuItem","activeClassName","DeleteServerButton","addManageDomainsLink","asideClass","suffix","fixedWidth","overviewIcon","isActive","_","listIcon","createIcon","flip","tagsIcon","domainsIcon","editIcon","textClassName","serverMatchesVersions","versions","versionMatch","supportsQrCodeSizeInQuery","minVersion","supportsShortUrlTitle","supportsQrCodeMargin","supportsTagsInPatch","supportsBotVisits","supportsCrawlableVisits","supportsQrErrorCorrection","supportsForwardQuery","MAIN_COLOR_ALPHA","HIGHLIGHTED_COLOR","HIGHLIGHTED_COLOR_ALPHA","PRIMARY_LIGHT_COLOR","PRIMARY_DARK_COLOR","changeThemeInMarkup","theme","html","getElementsByTagName","isDarkThemeEnabled","getAttribute","qs","ignoreQueryPrefix","arrayFormat","getClassForType","default","getTextClassForType","Message","fullWidth","preloader","spin","NoMenuLayout","timer","buildShlinkBaseUrl","apiVersion","rejectNilProps","reject","ShlinkApiClient","baseUrl","listShortUrls","a","performRequest","then","shortUrls","createShortUrl","options","filteredOptions","resp","getShortUrlVisits","shortCode","visits","getTagVisits","getOrphanVisits","getVisitsOverview","getShortUrl","domain","deleteShortUrl","updateShortUrlTags","tags","updateShortUrl","listTags","withStats","stats","deleteTags","editTag","oldName","newName","health","mercureInfo","listDomains","domains","editDomainRedirects","domainRedirects","method","headers","paramsSerializer","response","apiClients","buildShlinkApiClient","getStateOrSelectedServer","getState","isGetState","prop","Error","clientKey","SearchBar","ShortUrlsList","page","urlsListKey","setUrlsListKey","SearchField","onChange","large","noBorder","searchTerm","setSearchTerm","resetTimer","searchTermChanged","newSearchTerm","placeholder","target","searchIcon","hidden","Tag","text","clearable","colorGenerator","onClose","backgroundColor","cursor","DropdownBtn","disabled","dropdownClassName","right","minWidth","toggle","toggleClasses","Dropdown","DropdownToggle","caret","DropdownMenu","isDateObject","date","formatDateFromFormat","theFormat","format","formatISO","formatIsoDate","formatInternational","formatDate","dateRangeIsEmpty","dateRange","filter","Boolean","rangeIsInterval","INTERVAL_TO_STRING_MAP","today","yesterday","last7Days","last30Days","last90Days","last180days","last365Days","all","DATE_INTERVALS","Object","keys","rangeOrIntervalToString","startDate","endDate","dateRangeToString","startOfDaysAgo","daysAgo","startOfDay","subDays","Date","endingToday","endOfDay","intervalToDateRange","dateInterval","DateInput","isClearable","selected","showCalendarIcon","ref","dateFormat","calendarIcon","input","focus","DateRangeRow","onStartDateChange","onEndDateChange","placeholderText","maxDate","minDate","DateIntervalDropdownItems","allText","DropdownItem","divider","interval","DateRangeSelector","onDatesChange","initialDateRange","defaultText","activeInterval","setActiveInterval","activeDateRange","setActiveDateRange","updateDateRange","header","dateOrNull","parseISO","shortUrlsListParams","selectedTags","setDates","dates","selectedTag","SortingDropdown","items","orderField","orderDir","isButton","handleItemClick","fieldKey","newOrderDir","UncontrolledDropdown","toPairs","fieldValue","sortAscIcon","sortDescIcon","boundToMercureHub","getTopicsForProps","pendingUpdates","Set","createNewVisits","loadMercureInfo","closeEventSource","topics","onMessage","onTokenExpired","mercureHubUrl","token","onEventSourceMessage","onEventSourceError","status","subscriptions","topic","hubUrl","searchParams","append","es","EventSource","Authorization","onmessage","onerror","forEach","bindToMercureTopic","visit","add","setInterval","clear","clearInterval","Topics","orphanVisits","shortUrlVisits","selectedBar","buildReducer","action","actionHandler","currentState","buildActionCreator","shortUrlMatches","shortUrl","CREATE_VISITS","createdVisits","parseApiError","isInvalidDeletionError","DELETE_SHORT_URL_START","DELETE_SHORT_URL_ERROR","SHORT_URL_DELETED","RESET_DELETE_SHORT_URL","errorData","dispatch","resetDeleteShortUrl","CREATE_SHORT_URL_START","CREATE_SHORT_URL_ERROR","CREATE_SHORT_URL","RESET_CREATE_SHORT_URL","result","saving","resetCreateShortUrl","EDIT_SHORT_URL_START","EDIT_SHORT_URL_ERROR","SHORT_URL_EDITED","editShortUrl","sendTagsSeparately","Promise","LIST_SHORT_URLS_START","LIST_SHORT_URLS_ERROR","LIST_SHORT_URLS","assocPath","pagination","totalItems","currentShortUrl","lastVisit","last","assoc","visitsCount","init","editedShortUrl","RESET_SHORT_URL_PARAMS","SORTABLE_FIELDS","dateCreated","longUrl","orderBy","resetShortUrlParams","ceil","formatter","Intl","NumberFormat","prettify","number","Number","ELLIPSIS","progressivePagination","currentPage","pageCount","pages","max","min","unshift","push","pageIsEllipsis","pageNumber","prettifyPageNumber","keyForPage","index","Paginator","paginator","pagesCount","Pagination","listClassName","PaginationItem","PaginationLink","previous","next","ShortUrlsTable","shortUrlsList","head","order","setOrder","refreshList","extraParams","handleOrderBy","decodeURIComponent","itemsPerPage","orderByColumn","field","renderOrderIcon","caretUpIcon","caretDownIcon","onTagClick","CopyToClipboardIcon","onCopy","copyIcon","Time","relative","dateObject","dateTime","getUnixTime","formatDistance","buildUrl","ShortUrlDetailLink","ShortUrlVisitsCount","maxVisits","meta","visitsLink","prettifiedMaxVisits","tooltipRef","el","infoIcon","UncontrolledTooltip","placement","ShortUrlsRow","ShortUrlsRowMenu","copiedToClipboard","setCopiedToClipboard","setActive","isFirstRun","data-th","DropdownBtnMenu","ButtonDropdown","menuIcon","DeleteShortUrlModal","QrCodeModal","isQrModalOpen","toggleQrCode","isDeleteModalOpen","toggleDelete","pieChartIcon","qrIcon","deleteIcon","ShortUrlForm","CreateShortUrlResult","shortUrlCreationResult","basicMode","shortUrlCreationSettings","settings","shortUrlCreation","useMemo","customSlug","shortCodeLength","validSince","validUntil","findIfExists","validateUrl","validateUrls","forwardQuery","getInitialState","mode","onSave","canBeClosed","Result","small","ShlinkApiError","fallbackMessage","detail","invalidElements","shortUrlDeletion","inputValue","setInputValue","handleDeleteUrl","catch","identity","Modal","centered","onSubmit","ModalHeader","ModalBody","ModalFooter","showCopyTooltip","setShowCopyTooltip","closeIcon","Tooltip","actionableFieldClasses","orderableColumnsClasses","tableClasses","supportsTitle","colSpan","QrFormatDropdown","setFormat","QrErrorCorrectionDropdown","errorCorrection","setErrorCorrection","imageDownloader","ForServerVersion","setSize","margin","setMargin","capabilities","useSizeInPath","marginIsSupported","errorCorrectionIsSupported","willRenderThreeControls","qrCodeUrl","buildQrCodeUrl","totalSize","modalSize","step","src","alt","Button","block","saveImage","downloadIcon","BooleanControl","checked","inline","uuid","typeClasses","display","htmlFor","Checkbox","InfoModal","UseExistingIfFoundInfoIcon","isModalOpen","toggleModal","InfoTooltip","ShortUrlFormCheckboxGroup","infoTooltip","normalizeTag","replace","toDate","dynamicColClasses","TagsSelector","DomainSelector","shortUrlData","setShortUrlData","isEdit","hadTitleOriginally","resolveNewTitle","hasNewTitle","cond","T","matcher","submit","renderOptionalInput","Input","renderDateInput","basicComponents","bsSize","required","showCustomizeCard","limitAccessCardClasses","showCrawlableControl","showForwardQueryControl","showBehaviorCard","extraChecksCardClasses","crawlable","goBack","shortUrlDetail","getShortUrlDetail","shortUrlEdition","savingError","savingErrorData","savingSucceeded","isSuccessful","isNotSuccessful","faArrowLeft","GET_SHORT_URL_DETAIL_START","GET_SHORT_URL_DETAIL_ERROR","GET_SHORT_URL_DETAIL","find","FormGroupContainer","labelClassName","forId","FormGroup","ServerForm","initialValues","setName","setUrl","setApiKey","handleSubmit","ImportResult","CreateServer","ImportServersBtn","createServer","serversImported","setServersImported","errorImporting","setErrorImporting","serverData","tooltipPlacement","onImport","onImportError","nav","inNavbar","serverIcon","plusIcon","DeleteServerModal","deleteServer","redirectHome","showModal","hideModal","EditServer","editServer","importServersFromFile","createServers","fileRef","files","importIcon","accept","SELECT_SERVER","RESET_SELECTED_SERVER","toSemVer","getServerVersion","memoizeWith","_serverId","serverNotFound","serverNotReachable","EDIT_SERVER","DELETE_SERVER","CREATE_SERVERS","SET_AUTO_CONNECT","newServers","dissoc","autoConnect","fromPairs","evaluatedServerId","serversListToMap","reduce","acc","setAutoConnect","responseToServersList","Array","isArray","fetchServers","homepage","remoteList","maxVersion","tagsList","loadVisitsOverview","visitsOverview","loadingTags","loadingVisits","orphanVisitsCount","useHistory","CardTitle","CardText","CardHeader","CardBody","ManageServers","serversExporter","ManageServersRow","allServers","setServersList","hasAutoConnect","exportServers","exportIcon","width","ManageServersRowDropdown","checkIcon","isMenuOpen","toggleMenu","serverUrl","isAutoConnect","autoConnectIcon","toggleOffIcon","toggleOnIcon","connectIcon","validateServer","validateServers","every","ServersImporter","csvJson","fileReaderFactory","file","reader","resolve","addEventListener","content","toString","toObject","readAsText","ServersExporter","csvjson","toCSV","FileReader","VisitsHeader","ShortUrlVisitsHeader","shortLink","longLink","visitsStatsTitle","DEFAULT","BROWSERS_WHITELIST","extractDomain","split","includes","fillTheGaps","labels","zipObj","ToggleSwitch","pointerOnHover","native","firstElement","renderChartLabel","dataset","formattedValue","label","renderPieChartLabel","STEPS_MAP","monthly","weekly","daily","hourly","STEP_TO_DURATION_MAP","hours","days","weeks","months","STEP_TO_DIFF_FUNC_MAP","differenceInHours","differenceInDays","differenceInWeeks","differenceInMonths","STEP_TO_DATE_FORMAT","firstWeekDay","startOfISOWeek","lastWeekDay","endOfISOWeek","groupVisitsByStep","countBy","generateLabelsAndGroupedVisits","groupedVisitsWithGaps","skipNoElements","diffFunc","newerDate","oldestDate","duration","num","generateLabels","generateDataset","tension","borderColor","selectedLabel","chartElementAtEvent","datasetsByPoint","setSelectedVisits","chart","LineChartCard","highlightedVisits","highlightedLabel","oldestVisitDate","now","always","determineInitialStep","setStep","skipNoVisits","toggleSkipNoVisits","visitsToDatasetGroups","reverse","groupedVisits","groupedHighlighted","generateChartDatasets","mainDataset","maintainAspectRatio","plugins","legend","tooltip","intersect","axis","callbacks","scales","y","beginAtZero","ticks","precision","x","onHover","renderLineChart","datasets","getElementAtEvent","entries","menuText","SimplePaginator","setCurrentPage","searchVisits","browser","os","referer","country","city","visitedUrl","visitMatchesSearch","VisitsTable","selectedVisits","matchMedia","isOrphanVisits","headerCellsClass","matchMobile","matches","isMobileDevice","setIsMobileDevice","dir","resultSet","allVisits","sortedVisits","sort","b","greaterThan","smallerThan","sortVisits","total","visitsGroups","splitEvery","calculateVisits","isFirstLoad","setPage","end","start","supportsBots","fullSizeColSpan","listener","removeEventListener","flat","botIcon","isSelected","v","potentialBot","OpenStreetMapTile","TileLayer","attribution","calculateMapProps","locations","bounds","zoom","center","latLong","MapModal","contentClassName","MapContainer","cityName","count","Marker","position","Popup","OpenMapModalBtn","modalTitle","activeCities","mapIsOpened","openMap","closeMap","dropdownIsOpened","toggleDropdown","openDropdown","locationsToShow","setLocationsToShow","buttonRef","openMapWithLocations","filtered","mapIcon","isOrphanVisit","groupNewVisitsByType","groupBy","newVisit","regularVisits","highlightedVisitsToStats","property","toApiParams","excludeBots","visitHasProperty","propertyName","optionalNumericToNumber","numeric","parseFloat","updateLocationsStatsForVisit","updateCountriesStatsForVisit","updateCitiesStatsForVisit","processStatsFromVisits","osStats","updateOsStatsForVisit","browsersStats","updateBrowsersStatsForVisit","browsers","referrersStats","updateReferrersStatsForVisit","referrers","countries","cities","citiesForMapStats","latitude","longitude","currentCity","updateCitiesForMapForVisit","citiesForMap","visitedUrlsStats","isNormalizedOrphanVisit","updateVisitedUrlsForVisit","visitedUrls","normalizeVisits","userAgent","visitLocation","common","bowser","parseUserAgent","countryName","VisitsFilterDropdown","botsSupported","orphanVisitsType","propsForOrphanVisitsTypeItem","DoughnutChartLegend","config","defaultColor","borderWidth","DoughnutChart","memo","chartRef","setChartRef","chartData","generateChartData","height","element","ChartCard","footer","CardFooter","DoughnutChartCard","PaginationDropdown","toggleClassName","ranges","Infinity","dropLabelIfHidden","startsWith","highlightedData","HorizontalBarChart","highlightedStats","statsAreDefined","highlightedKey","stacked","indexAxis","determineHeight","renderChartComponent","customKey","toLowerIfString","toLower","pickKeyFromPair","pickValueFromPair","SortableBarChartCard","sortingItems","extraHeaderContent","withPagination","setItemsPerPage","determineCurrentPagePairs","firstPageLength","i","sortedPairs","pairs","sortBy","getSortedPairsForStats","sortedKeys","sortedHighlightedPairs","currentPageStats","currentPageHighlightedStats","highlightedPages","determineStats","sections","byTime","subPath","faCalendarAlt","byContext","faChartPie","byLocation","faMapMarkedAlt","list","faList","VisitsNavLink","RouterNavLink","endsWith","VisitsStats","visitsInfo","getVisits","cancelGetVisits","exportCsv","initialInterval","defaultInterval","setDateRange","setHighlightedVisits","setHighlightedLabel","visitsFilter","setVisitsFilter","buildSectionUrl","loadingLarge","progress","normalizedVisits","mapLocations","highlightVisitsForProp","newSelectedBar","propEq","faFileDownload","Progress","striped","pills","section","amount","exportVisits","cancelGetShortUrlVisits","ITEMS_PER_PAGE","isLastPage","calcProgress","getVisitsWithLoader","visitsLoader","extraFinishActionData","actionMap","shouldCancel","loadVisitsInParallel","flatten","loadPagesBlocks","pagesBlocks","concat","loadVisits","pagesRange","finish","GET_SHORT_URL_VISITS_START","GET_SHORT_URL_VISITS_ERROR","GET_SHORT_URL_VISITS","GET_SHORT_URL_VISITS_LARGE","GET_SHORT_URL_VISITS_CANCEL","GET_SHORT_URL_VISITS_PROGRESS_CHANGED","cancelLoad","newVisits","TagVisitsHeader","tagVisits","cancelGetTagVisits","GET_TAG_VISITS_START","GET_TAG_VISITS_ERROR","GET_TAG_VISITS","GET_TAG_VISITS_LARGE","GET_TAG_VISITS_CANCEL","GET_TAG_VISITS_PROGRESS_CHANGED","OrphanVisitsHeader","cancelGetOrphanVisits","GET_ORPHAN_VISITS_START","GET_ORPHAN_VISITS_ERROR","GET_ORPHAN_VISITS","GET_ORPHAN_VISITS_LARGE","GET_ORPHAN_VISITS_CANCEL","GET_ORPHAN_VISITS_PROGRESS_CHANGED","matchesType","GET_OVERVIEW_START","GET_OVERVIEW_ERROR","GET_OVERVIEW","VisitsExporter","visitsParser","TagBullet","toComponentTag","searchMode","tagFilteringMode","tagComponent","onDelete","suggestions","suggestionComponent","allowNew","addOnBlur","minQueryLength","delimiters","suggestionsTransform","removedTagIndex","tagsCopy","splice","onAddition","newTag","TagCard","DeleteTagConfirmModal","EditTagModal","tagStats","displayed","isEditModalOpen","toggleEdit","hasTitle","displayTitle","titleRef","scrollWidth","clientWidth","encodeURIComponent","faLink","shortUrlsCount","faEye","deleteTag","tagDelete","tagDeleted","deleting","doDelete","tagEdited","tagEdit","newTagName","setNewTagName","setColor","showColorPicker","toggleColorPicker","hideColorPicker","editing","saveTag","onClosed","colorIcon","Popover","disableAlpha","hex","TagsModeDropdown","renderTitle","cardsIcon","TagsCards","TagsTable","filterTags","forceListTags","ui","tagsMode","setMode","filteredTags","DELETE_TAG_START","DELETE_TAG_ERROR","DELETE_TAG","TAG_DELETED","EDIT_TAG_START","EDIT_TAG_ERROR","EDIT_TAG","TAG_EDITED","pick","LIST_TAGS_START","LIST_TAGS_ERROR","LIST_TAGS","FILTER_TAGS","renameTag","rejectTag","tagToReject","calculateVisitsPerTag","increase","displayedTag","setDisplayedTag","tagsCount","tagsGroups","group","TagsTableRow","pageFromQuery","sortedTags","showPaginator","isDropdownOpen","listTagsActionFactory","force","processedStats","factory","GET_MERCURE_INFO_START","GET_MERCURE_INFO_ERROR","GET_MERCURE_INFO","realTimeUpdates","enabled","info","RealTimeUpdates","toggleRealTimeUpdates","setRealTimeUpdatesInterval","SettingsSections","child","subChild","subIndex","Settings","ShortUrlCreation","UserInterface","Visits","SET_SETTINGS","mergeDeepRight","setShortUrlCreationSettings","setUiSettings","setVisitsSettings","tagFilteringModeText","changeTagsFilteringMode","faMoon","faSun","useDarkTheme","DateIntervalSelector","EDIT_DOMAIN_REDIRECTS","redirects","LIST_DOMAINS_START","LIST_DOMAINS_ERROR","LIST_DOMAINS","FILTER_DOMAINS","filteredDomains","replaceRedirectsOnDomain","filterDomains","domainsList","inputDisplayed","showInput","hideInput","valueIsEmpty","unselectDomain","InputGroup","InputGroupAddon","addonType","faUndo","trigger","isDefault","isLast","EditDomainRedirectsModal","baseUrlRedirect","setBaseUrlRedirect","regular404Redirect","setRegular404Redirect","invalidShortUrlRedirect","setInvalidShortUrlRedirect","Nr","fallback","DefaultDomain","defaultDomainIcon","DomainRow","defaultRedirects","authority","domainId","forbiddenIcon","column","APP_UPDATE_AVAILABLE","RESET_APP_UPDATE","appUpdateAvailable","resetAppUpdate","AppUpdateBanner","forceUpdate","isUpdating","setUpdating","Alert","reloadIcon","navigator","serviceWorker","getRegistrations","registrations","registration","waiting","postMessage","App","appUpdated","Bottle","container","mapActionService","actionName","serviceName","lazyService","propsFromState","actionServiceNames","reduxConnect","provideAppServices","provideCommonServices","provideApiServices","provideShortUrlsServices","provideServersServices","provideTagsServices","provideVisitsServices","provideUtilsServices","provideMercureServices","provideSettingsServices","provideDomainsServices","combineReducers","serversReducer","selectedServerReducer","shortUrlsListReducer","shortUrlsListParamsReducer","shortUrlCreationReducer","shortUrlDeletionReducer","shortUrlEditionReducer","shortUrlVisitsReducer","tagVisitsReducer","orphanVisitsReducer","shortUrlDetailReducer","tagsListReducer","tagDeleteReducer","tagEditReducer","mercureInfoReducer","settingsReducer","domainsListReducer","visitsOverviewReducer","appUpdatesReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","localStorageConfig","states","namespace","namespaceSeparator","debounce","store","createStore","reducers","load","applyMiddleware","save","ReduxThunk","isLocalhost","hostname","registerValidSW","swUrl","register","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","L","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","marker2x","iconUrl","marker","shadowUrl","markerShadow","basename","getElementById","process","origin","fetch","contentType","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker","versionToMatch","matchesMinVersion","compare","versionIsValidSemVer","defaultValue"],"mappings":"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","file":"static/js/main.2334a236.chunk.js","sourcesContent":["import { FC, useEffect } from 'react';\n\ninterface WithoutSelectedServerProps {\n  resetSelectedServer: Function;\n}\n\nexport function withoutSelectedServer<T = {}>(WrappedComponent: FC<WithoutSelectedServerProps & T>) {\n  return (props: WithoutSelectedServerProps & T) => {\n    useEffect(() => {\n      props.resetSelectedServer();\n    }, []);\n\n    return <WrappedComponent {...props} />;\n  };\n}\n","export const saveUrl = ({ document }: Window, url: string, filename: string) => {\n  const link = document.createElement('a');\n\n  link.setAttribute('href', url);\n  link.setAttribute('download', filename);\n  link.style.visibility = 'hidden';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n};\n\nexport const saveCsv = (window: Window, csv: string, filename: string) => {\n  const blob = new Blob([ csv ], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n\n  saveUrl(window, url, filename);\n};\n","import { MAIN_COLOR } from '../../utils/theme';\n\nexport interface ShlinkLogoProps {\n  color?: string;\n  className?: string;\n}\n\nexport const ShlinkLogo = ({ color = MAIN_COLOR, className }: ShlinkLogoProps) => (\n  <svg className={className} viewBox=\"0 0 512 512\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n    <g fill={color}>\n      <path\n        d=\" M 23.71 85.08 C 17.22 49.81 49.44 14.86 85.08 18.12 C 118.83 19.21 145.72 53.33 139.45 86.37 C 155.64 102.30 171.32 118.83 187.87 134.36 C 198.32 111.73 208.84 89.12 219.57 66.62 C 226.05 53.84 243.47 48.74 255.73 56.27 C 263.76 62.10 270.34 69.69 277.25 76.75 C 286.28 86.61 285.72 102.89 276.31 112.31 C 223.38 165.37 170.38 218.37 117.35 271.34 C 107.72 280.99 91.01 281.25 81.11 271.86 C 74.39 264.94 66.82 258.69 61.24 250.77 C 53.72 238.52 58.85 221.07 71.64 214.62 C 94.11 203.87 116.72 193.38 139.33 182.91 C 123.81 166.36 107.30 150.68 91.37 134.49 C 60.20 140.28 27.37 116.78 23.71 85.08 Z\"\n      />\n      <path\n        d=\" M 205.21 201.23 C 225.32 181.36 260.88 181.11 281.14 200.86 C 299.25 218.75 317.37 236.65 335.10 254.93 C 356.73 278.01 352.01 318.70 326.03 336.56 C 320.07 330.47 313.73 324.65 308.12 318.28 C 323.86 309.39 328.76 286.18 316.63 272.39 C 301.73 256.95 286.30 242.03 271.24 226.75 C 264.49 219.65 256.80 212.00 246.37 211.52 C 224.65 208.64 205.52 233.36 214.49 253.58 C 221.09 266.81 234.22 275.12 243.62 286.24 C 240.43 295.96 238.09 306.13 238.29 316.46 C 225.55 304.29 213.16 291.73 200.89 279.09 C 180.97 257.57 183.10 220.45 205.21 201.23 Z\"\n      />\n      <path\n        d=\" M 273.90 352.07 C 252.28 328.99 256.98 288.31 282.96 270.46 C 288.93 276.54 295.26 282.36 300.88 288.72 C 285.14 297.62 280.23 320.82 292.38 334.61 C 307.27 350.05 322.70 364.96 337.75 380.25 C 344.51 387.35 352.20 395.00 362.64 395.48 C 384.35 398.37 403.49 373.64 394.51 353.42 C 387.92 340.18 374.78 331.88 365.38 320.76 C 368.56 311.04 370.91 300.86 370.71 290.54 C 383.45 302.70 395.84 315.27 408.11 327.91 C 428.03 349.43 425.90 386.55 403.78 405.77 C 383.68 425.64 348.13 425.89 327.86 406.14 C 309.75 388.25 291.60 370.37 273.90 352.07 Z\"\n      />\n      <path\n        d=\" M 422.11 403.83 C 431.96 394.07 441.60 384.06 451.66 374.51 C 460.90 383.74 471.89 392.70 474.89 406.11 C 480.16 429.97 484.08 454.13 488.76 478.12 C 490.00 483.41 484.47 488.29 479.35 486.63 C 454.66 481.52 429.55 478.12 405.14 471.84 C 393.17 467.97 385.20 457.75 376.55 449.27 C 386.39 439.49 396.13 429.60 406.06 419.91 C 416.37 433.45 435.74 414.00 422.11 403.83 Z\"\n      />\n    </g>\n  </svg>\n);\n","import { FC, useEffect } from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport Message from '../../utils/Message';\nimport { isNotFoundServer, SelectedServer } from '../data';\nimport NoMenuLayout from '../../common/NoMenuLayout';\n\ninterface WithSelectedServerProps extends RouteComponentProps<{ serverId: string }> {\n  selectServer: (serverId: string) => void;\n  selectedServer: SelectedServer;\n}\n\nexport function withSelectedServer<T = {}>(WrappedComponent: FC<WithSelectedServerProps & T>, ServerError: FC) {\n  return (props: WithSelectedServerProps & T) => {\n    const { selectServer, selectedServer, match } = props;\n\n    useEffect(() => {\n      selectServer(match.params.serverId);\n    }, [ match.params.serverId ]);\n\n    if (!selectedServer) {\n      return (\n        <NoMenuLayout>\n          <Message loading />\n        </NoMenuLayout>\n      );\n    }\n\n    if (isNotFoundServer(selectedServer)) {\n      return <ServerError />;\n    }\n\n    return <WrappedComponent {...props} />;\n  };\n}\n","import { FC } from 'react';\nimport { Link } from 'react-router-dom';\nimport { SimpleCard } from '../utils/SimpleCard';\n\ninterface NotFoundProps {\n  to?: string;\n}\n\nconst NotFound: FC<NotFoundProps> = ({ to = '/', children = 'Home' }) => (\n  <div className=\"home\">\n    <SimpleCard className=\"p-4\">\n      <h2>Oops! We could not find requested route.</h2>\n      <p>\n        Use your browser&apos;s back button to navigate to the page you have previously come from, or just press this\n        button.\n      </p>\n      <br />\n      <Link to={to} className=\"btn btn-outline-primary btn-lg\">{children}</Link>\n    </SimpleCard>\n  </div>\n);\n\nexport default NotFound;\n","import { FC } from 'react';\nimport { ListGroup, ListGroupItem } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport classNames from 'classnames';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronRight as chevronIcon } from '@fortawesome/free-solid-svg-icons';\nimport { ServerWithId } from './data';\nimport './ServersListGroup.scss';\n\ninterface ServersListGroupProps {\n  servers: ServerWithId[];\n  embedded?: boolean;\n}\n\nconst ServerListItem = ({ id, name }: { id: string; name: string }) => (\n  <ListGroupItem tag={Link} to={`/server/${id}`} className=\"servers-list__server-item\">\n    {name}\n    <FontAwesomeIcon icon={chevronIcon} className=\"servers-list__server-item-icon\" />\n  </ListGroupItem>\n);\n\nconst ServersListGroup: FC<ServersListGroupProps> = ({ servers, children, embedded = false }) => (\n  <>\n    {children && <h5 className=\"mb-md-3\">{children}</h5>}\n    {servers.length > 0 && (\n      <ListGroup\n        className={classNames('servers-list__list-group', { 'servers-list__list-group--embedded': embedded })}\n      >\n        {servers.map(({ id, name }) => <ServerListItem key={id} id={id} name={name} />)}\n      </ListGroup>\n    )}\n  </>\n);\n\nexport default ServersListGroup;\n","import { useState, useRef } from 'react';\nimport { useSwipeable as useReactSwipeable } from 'react-swipeable';\nimport { parseQuery, stringifyQuery } from './query';\n\nconst DEFAULT_DELAY = 2000;\n\nexport type StateFlagTimeout = (initialValue?: boolean, delay?: number) => [ boolean, () => void ];\n\nexport const useStateFlagTimeout = (\n  setTimeout: (callback: Function, timeout: number) => number,\n  clearTimeout: (timer: number) => void,\n): StateFlagTimeout => (initialValue = false, delay = DEFAULT_DELAY) => {\n  const [ flag, setFlag ] = useState<boolean>(initialValue);\n  const timeout = useRef<number | undefined>(undefined);\n  const callback = () => {\n    setFlag(!initialValue);\n\n    if (timeout.current) {\n      clearTimeout(timeout.current);\n    }\n\n    timeout.current = setTimeout(() => setFlag(initialValue), delay);\n  };\n\n  return [ flag, callback ];\n};\n\ntype ToggleResult = [ boolean, () => void, () => void, () => void ];\n\nexport const useToggle = (initialValue = false): ToggleResult => {\n  const [ flag, setFlag ] = useState<boolean>(initialValue);\n\n  return [ flag, () => setFlag(!flag), () => setFlag(true), () => setFlag(false) ];\n};\n\nexport const useSwipeable = (showSidebar: () => void, hideSidebar: () => void) => {\n  const swipeMenuIfNoModalExists = (callback: () => void) => (e: any) => {\n    const swippedOnVisitsTable = (e.event.composedPath() as HTMLElement[]).some( // eslint-disable-line @typescript-eslint/no-unsafe-call\n      ({ classList }) => classList?.contains('visits-table'),\n    );\n\n    if (swippedOnVisitsTable || document.querySelector('.modal')) {\n      return;\n    }\n\n    callback();\n  };\n\n  return useReactSwipeable({\n    delta: 40,\n    onSwipedLeft: swipeMenuIfNoModalExists(hideSidebar),\n    onSwipedRight: swipeMenuIfNoModalExists(showSidebar),\n  });\n};\n\nexport const useQueryState = <T>(paramName: string, initialState: T): [ T, (newValue: T) => void ] => {\n  const [ value, setValue ] = useState(initialState);\n  const setValueWithLocation = (value: T) => {\n    const { location, history } = window;\n    const query = parseQuery<any>(location.search);\n\n    query[paramName] = value;\n    history.pushState(null, '', `${location.pathname}?${stringifyQuery(query)}`);\n    setValue(value);\n  };\n\n  return [ value, setValueWithLocation ];\n};\n","import { isEmpty, isNil, pipe, range } from 'ramda';\nimport { SyntheticEvent } from 'react';\n\nexport type OrderDir = 'ASC' | 'DESC' | undefined;\n\nexport const determineOrderDir = <T extends string = string>(\n  currentField: T,\n  newField?: T,\n  currentOrderDir?: OrderDir,\n): OrderDir => {\n  if (currentField !== newField) {\n    return 'ASC';\n  }\n\n  const newOrderMap: Record<'ASC' | 'DESC', OrderDir> = {\n    ASC: 'DESC',\n    DESC: undefined,\n  };\n\n  return currentOrderDir ? newOrderMap[currentOrderDir] : 'ASC';\n};\n\nexport const rangeOf = <T>(size: number, mappingFn: (value: number) => T, startAt = 1): T[] =>\n  range(startAt, size + 1).map(mappingFn);\n\nexport type Empty = null | undefined | '' | never[];\n\nexport const hasValue = <T>(value: T | Empty): value is T => !isNil(value) && !isEmpty(value);\n\nexport const handleEventPreventingDefault = <T>(handler: () => T) => pipe(\n  (e: SyntheticEvent) => e.preventDefault(),\n  handler,\n);\n\nexport type Nullable<T> = {\n  [P in keyof T]: T[P] | null\n};\n\ntype Optional<T> = T | null | undefined;\n\nexport type OptionalString = Optional<string>;\n\nexport type RecursivePartial<T> = {\n  [P in keyof T]?: RecursivePartial<T[P]>;\n};\n\nexport const nonEmptyValueOrNull = <T>(value: T): T | null => isEmpty(value) ? null : value;\n\nexport const capitalize = <T extends string>(value: T): string => `${value.charAt(0).toUpperCase()}${value.slice(1)}`;\n","import { SemVer } from '../../utils/helpers/version';\n\nexport interface ServerData {\n  name: string;\n  url: string;\n  apiKey: string;\n}\n\nexport interface ServerWithId extends ServerData {\n  id: string;\n  autoConnect?: boolean;\n}\n\nexport interface ReachableServer extends ServerWithId {\n  version: SemVer;\n  printableVersion: string;\n}\n\nexport interface NonReachableServer extends ServerWithId {\n  serverNotReachable: true;\n}\n\nexport interface NotFoundServer {\n  serverNotFound: true;\n}\n\nexport type RegularServer = ReachableServer | NonReachableServer;\n\nexport type SelectedServer = RegularServer | NotFoundServer | null;\n\nexport type ServersMap = Record<string, ServerWithId>;\n\nexport const hasServerData = (server: SelectedServer | ServerData): server is ServerData =>\n  !!(server as ServerData)?.url && !!(server as ServerData)?.apiKey;\n\nexport const isServerWithId = (server: SelectedServer | ServerWithId): server is ServerWithId =>\n  !!server?.hasOwnProperty('id');\n\nexport const isReachableServer = (server: SelectedServer): server is ReachableServer =>\n  !!server?.hasOwnProperty('version');\n\nexport const isNotFoundServer = (server: SelectedServer): server is NotFoundServer =>\n  !!server?.hasOwnProperty('serverNotFound');\n\nexport const getServerId = (server: SelectedServer) => isServerWithId(server) ? server.id : '';\n","import axios from 'axios';\nimport Bottle, { Decorator } from 'bottlejs';\nimport ScrollToTop from '../ScrollToTop';\nimport MainHeader from '../MainHeader';\nimport Home from '../Home';\nimport MenuLayout from '../MenuLayout';\nimport AsideMenu from '../AsideMenu';\nimport ErrorHandler from '../ErrorHandler';\nimport ShlinkVersionsContainer from '../ShlinkVersionsContainer';\nimport { ConnectDecorator } from '../../container/types';\nimport { withoutSelectedServer } from '../../servers/helpers/withoutSelectedServer';\nimport { ImageDownloader } from './ImageDownloader';\n\nconst provideServices = (bottle: Bottle, connect: ConnectDecorator, withRouter: Decorator) => {\n  // Services\n  bottle.constant('window', (global as any).window);\n  bottle.constant('console', global.console);\n  bottle.constant('axios', axios);\n\n  bottle.service('ImageDownloader', ImageDownloader, 'axios', 'window');\n\n  // Components\n  bottle.serviceFactory('ScrollToTop', ScrollToTop);\n  bottle.decorator('ScrollToTop', withRouter);\n\n  bottle.serviceFactory('MainHeader', MainHeader, 'ServersDropdown');\n  bottle.decorator('MainHeader', withRouter);\n\n  bottle.serviceFactory('Home', () => Home);\n  bottle.decorator('Home', withoutSelectedServer);\n  bottle.decorator('Home', connect([ 'servers' ], [ 'resetSelectedServer' ]));\n\n  bottle.serviceFactory(\n    'MenuLayout',\n    MenuLayout,\n    'TagsList',\n    'ShortUrls',\n    'AsideMenu',\n    'CreateShortUrl',\n    'ShortUrlVisits',\n    'TagVisits',\n    'OrphanVisits',\n    'ServerError',\n    'Overview',\n    'EditShortUrl',\n    'ManageDomains',\n  );\n  bottle.decorator('MenuLayout', connect([ 'selectedServer', 'shortUrlsListParams' ], [ 'selectServer' ]));\n  bottle.decorator('MenuLayout', withRouter);\n\n  bottle.serviceFactory('AsideMenu', AsideMenu, 'DeleteServerButton');\n\n  bottle.serviceFactory('ShlinkVersionsContainer', () => ShlinkVersionsContainer);\n  bottle.decorator('ShlinkVersionsContainer', connect([ 'selectedServer' ]));\n\n  bottle.serviceFactory('ErrorHandler', ErrorHandler, 'window', 'console');\n};\n\nexport default provideServices;\n","import { PropsWithChildren, useEffect } from 'react';\nimport { RouteComponentProps } from 'react-router';\n\nconst ScrollToTop = () => ({ location, children }: PropsWithChildren<RouteComponentProps>) => {\n  useEffect(() => {\n    scrollTo(0, 0);\n  }, [ location ]);\n\n  return <>{children}</>;\n};\n\nexport default ScrollToTop;\n","import { Component, ReactNode } from 'react';\nimport { Button } from 'reactstrap';\nimport { SimpleCard } from '../utils/SimpleCard';\n\ninterface ErrorHandlerState {\n  hasError: boolean;\n}\n\nconst ErrorHandler = (\n  { location }: Window,\n  { error }: Console,\n) => class ErrorHandler extends Component<any, ErrorHandlerState> {\n  public constructor(props: object) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  public static getDerivedStateFromError(): ErrorHandlerState {\n    return { hasError: true };\n  }\n\n  public componentDidCatch(e: Error): void {\n    if (process.env.NODE_ENV !== 'development') {\n      error(e);\n    }\n  }\n\n  public render(): ReactNode {\n    if (this.state.hasError) {\n      return (\n        <div className=\"home\">\n          <SimpleCard className=\"p-4\">\n            <h1>Oops! This is awkward :S</h1>\n            <p>It seems that something went wrong. Try refreshing the page or just click this button.</p>\n            <br />\n            <Button outline color=\"primary\" onClick={() => location.reload()}>Take me back</Button>\n          </SimpleCard>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n};\n\nexport default ErrorHandler;\n","import { CardProps } from 'reactstrap/lib/Card';\nimport { Card, CardBody, CardHeader } from 'reactstrap';\nimport { ReactNode } from 'react';\n\ninterface SimpleCardProps extends Omit<CardProps, 'title'> {\n  title?: ReactNode;\n  bodyClassName?: string;\n}\n\nexport const SimpleCard = ({ title, children, bodyClassName, ...rest }: SimpleCardProps) => (\n  <Card {...rest}>\n    {title && <CardHeader>{title}</CardHeader>}\n    <CardBody className={bodyClassName}>{children}</CardBody>\n  </Card>\n);\n","import { AxiosInstance } from 'axios';\nimport { saveUrl } from '../../utils/helpers/files';\n\nexport class ImageDownloader {\n  public constructor(private readonly axios: AxiosInstance, private readonly window: Window) {}\n\n  public async saveImage(imgUrl: string, filename: string): Promise<void> {\n    const { data } = await this.axios.get(imgUrl, { responseType: 'blob' });\n    const url = URL.createObjectURL(data);\n\n    saveUrl(this.window, url, filename);\n  }\n}\n","import Bottle from 'bottlejs';\nimport { useStateFlagTimeout } from '../helpers/hooks';\nimport LocalStorage from './LocalStorage';\nimport ColorGenerator from './ColorGenerator';\n\nconst provideServices = (bottle: Bottle) => {\n  bottle.constant('localStorage', (global as any).localStorage);\n  bottle.service('Storage', LocalStorage, 'localStorage');\n  bottle.service('ColorGenerator', ColorGenerator, 'Storage');\n\n  bottle.constant('setTimeout', global.setTimeout);\n  bottle.constant('clearTimeout', global.clearTimeout);\n  bottle.serviceFactory('useStateFlagTimeout', useStateFlagTimeout, 'setTimeout', 'clearTimeout');\n};\n\nexport default provideServices;\n","const PREFIX = 'shlink';\nconst buildPath = (path: string) => `${PREFIX}.${path}`;\n\nexport default class LocalStorage {\n  public constructor(private readonly localStorage: Storage) {}\n\n  public readonly get = <T>(key: string): T | undefined => {\n    const item = this.localStorage.getItem(buildPath(key));\n\n    return item ? JSON.parse(item) as T : undefined;\n  };\n\n  public readonly set = (key: string, value: any) => this.localStorage.setItem(buildPath(key), JSON.stringify(value));\n}\n","import { rangeOf } from '../utils';\nimport LocalStorage from './LocalStorage';\n\nconst HEX_COLOR_LENGTH = 6;\nconst { floor, random } = Math;\nconst letters = '0123456789ABCDEF';\nconst buildRandomColor = () => `#${rangeOf(HEX_COLOR_LENGTH, () => letters[floor(random() * letters.length)]).join('')}`;\nconst normalizeKey = (key: string) => key.toLowerCase().trim();\n\nexport default class ColorGenerator {\n  private readonly colors: Record<string, string>;\n\n  public constructor(private readonly storage: LocalStorage) {\n    this.colors = this.storage.get<Record<string, string>>('colors') ?? {};\n  }\n\n  public readonly getColorForKey = (key: string) => {\n    const normalizedKey = normalizeKey(key);\n    const color = this.colors[normalizedKey];\n\n    // If a color has not been set yet, generate a random one and save it\n    if (!color) {\n      return this.setColorForKey(normalizedKey, buildRandomColor());\n    }\n\n    return color;\n  };\n\n  public readonly setColorForKey = (key: string, color: string) => {\n    const normalizedKey = normalizeKey(key);\n\n    this.colors[normalizedKey] = color;\n    this.storage.set('colors', this.colors);\n\n    return color;\n  };\n}\n","import { pipe } from 'ramda';\nimport { ExternalLink } from 'react-external-link';\nimport { versionToPrintable, versionToSemVer } from '../utils/helpers/version';\nimport { isReachableServer } from '../servers/data';\nimport { ShlinkVersionsContainerProps } from './ShlinkVersionsContainer';\n\nconst SHLINK_WEB_CLIENT_VERSION = '%_VERSION_%';\nconst normalizeVersion = pipe(versionToSemVer(), versionToPrintable);\n\nexport interface ShlinkVersionsProps extends ShlinkVersionsContainerProps {\n  clientVersion?: string;\n}\n\nconst VersionLink = ({ project, version }: { project: 'shlink' | 'shlink-web-client'; version: string }) => (\n  <ExternalLink href={`https://github.com/shlinkio/${project}/releases/${version}`} className=\"text-muted\">\n    <b>{version}</b>\n  </ExternalLink>\n);\n\nconst ShlinkVersions = ({ selectedServer, clientVersion = SHLINK_WEB_CLIENT_VERSION }: ShlinkVersionsProps) => {\n  const normalizedClientVersion = normalizeVersion(clientVersion);\n\n  return (\n    <small className=\"text-muted\">\n      {isReachableServer(selectedServer) &&\n        <>Server: <VersionLink project=\"shlink\" version={selectedServer.printableVersion} /> - </>\n      }\n      Client: <VersionLink project=\"shlink-web-client\" version={normalizedClientVersion} />\n    </small>\n  );\n};\n\nexport default ShlinkVersions;\n","import classNames from 'classnames';\nimport { isReachableServer, SelectedServer } from '../servers/data';\nimport ShlinkVersions from './ShlinkVersions';\nimport './ShlinkVersionsContainer.scss';\n\nexport interface ShlinkVersionsContainerProps {\n  selectedServer: SelectedServer;\n}\n\nconst ShlinkVersionsContainer = ({ selectedServer }: ShlinkVersionsContainerProps) => {\n  const classes = classNames('text-center', {\n    'shlink-versions-container--with-server': isReachableServer(selectedServer),\n  });\n\n  return (\n    <div className={classes}>\n      <ShlinkVersions selectedServer={selectedServer} />\n    </div>\n  );\n};\n\nexport default ShlinkVersionsContainer;\n","import { faChevronDown as arrowIcon, faCogs as cogsIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { FC, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Collapse, Nav, Navbar, NavbarBrand, NavbarToggler, NavItem, NavLink } from 'reactstrap';\nimport classNames from 'classnames';\nimport { RouteComponentProps } from 'react-router';\nimport { useToggle } from '../utils/helpers/hooks';\nimport { ShlinkLogo } from './img/ShlinkLogo';\nimport './MainHeader.scss';\n\nconst MainHeader = (ServersDropdown: FC) => ({ location }: RouteComponentProps) => {\n  const [ isOpen, toggleOpen, , close ] = useToggle();\n  const { pathname } = location;\n\n  useEffect(close, [ location ]);\n\n  const settingsPath = '/settings';\n  const toggleClass = classNames('main-header__toggle-icon', { 'main-header__toggle-icon--opened': isOpen });\n\n  return (\n    <Navbar color=\"primary\" dark fixed=\"top\" className=\"main-header\" expand=\"md\">\n      <NavbarBrand tag={Link} to=\"/\">\n        <ShlinkLogo className=\"main-header__brand-logo\" color=\"white\" /> Shlink\n      </NavbarBrand>\n\n      <NavbarToggler onClick={toggleOpen}>\n        <FontAwesomeIcon icon={arrowIcon} className={toggleClass} />\n      </NavbarToggler>\n\n      <Collapse navbar isOpen={isOpen}>\n        <Nav navbar className=\"ml-auto\">\n          <NavItem>\n            <NavLink tag={Link} to={settingsPath} active={pathname === settingsPath}>\n              <FontAwesomeIcon icon={cogsIcon} />&nbsp; Settings\n            </NavLink>\n          </NavItem>\n          <ServersDropdown />\n        </Nav>\n      </Collapse>\n    </Navbar>\n  );\n};\n\nexport default MainHeader;\n","import { isEmpty, values } from 'ramda';\nimport { Link } from 'react-router-dom';\nimport { Card, Row } from 'reactstrap';\nimport { ExternalLink } from 'react-external-link';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faExternalLinkAlt, faPlus } from '@fortawesome/free-solid-svg-icons';\nimport ServersListGroup from '../servers/ServersListGroup';\nimport { ServersMap } from '../servers/data';\nimport { ShlinkLogo } from './img/ShlinkLogo';\nimport './Home.scss';\n\nexport interface HomeProps {\n  servers: ServersMap;\n}\n\nconst Home = ({ servers }: HomeProps) => {\n  const serversList = values(servers);\n  const hasServers = !isEmpty(serversList);\n\n  return (\n    <div className=\"home\">\n      <Card className=\"home__main-card\">\n        <Row noGutters>\n          <div className=\"col-md-5 d-none d-md-block\">\n            <div className=\"p-4\">\n              <ShlinkLogo />\n            </div>\n          </div>\n          <div className=\"col-md-7 home__servers-container\">\n            <div className=\"p-4\">\n              <h1 className=\"home__title\">Welcome!</h1>\n            </div>\n            <ServersListGroup embedded servers={serversList}>\n              {!hasServers && (\n                <div className=\"p-4 text-center\">\n                  <p className=\"mb-5\">This application will help you manage your Shlink servers.</p>\n                  <p>\n                    <Link to=\"/server/create\" className=\"btn btn-outline-primary btn-lg mr-2\">\n                      <FontAwesomeIcon icon={faPlus} /> <span className=\"ml-1\">Add a server</span>\n                    </Link>\n                  </p>\n                  <p className=\"mb-0 mt-5\">\n                    <ExternalLink href=\"https://shlink.io/documentation\">\n                      <small>\n                        <span className=\"mr-1\">Learn more about Shlink</span> <FontAwesomeIcon icon={faExternalLinkAlt} />\n                      </small>\n                    </ExternalLink>\n                  </p>\n                </div>\n              )}\n            </ServersListGroup>\n          </div>\n        </Row>\n      </Card>\n    </div>\n  );\n};\n\nexport default Home;\n","import { FC, useEffect } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { faBars as burgerIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport classNames from 'classnames';\nimport { withSelectedServer } from '../servers/helpers/withSelectedServer';\nimport { useSwipeable, useToggle } from '../utils/helpers/hooks';\nimport { supportsDomainRedirects, supportsOrphanVisits } from '../utils/helpers/features';\nimport { isReachableServer } from '../servers/data';\nimport NotFound from './NotFound';\nimport { AsideMenuProps } from './AsideMenu';\nimport './MenuLayout.scss';\n\nconst MenuLayout = (\n  TagsList: FC,\n  ShortUrls: FC,\n  AsideMenu: FC<AsideMenuProps>,\n  CreateShortUrl: FC,\n  ShortUrlVisits: FC,\n  TagVisits: FC,\n  OrphanVisits: FC,\n  ServerError: FC,\n  Overview: FC,\n  EditShortUrl: FC,\n  ManageDomains: FC,\n) => withSelectedServer(({ location, selectedServer }) => {\n  const [ sidebarVisible, toggleSidebar, showSidebar, hideSidebar ] = useToggle();\n\n  useEffect(() => hideSidebar(), [ location ]);\n\n  if (!isReachableServer(selectedServer)) {\n    return <ServerError />;\n  }\n\n  const addOrphanVisitsRoute = supportsOrphanVisits(selectedServer);\n  const addManageDomainsRoute = supportsDomainRedirects(selectedServer);\n  const burgerClasses = classNames('menu-layout__burger-icon', { 'menu-layout__burger-icon--active': sidebarVisible });\n  const swipeableProps = useSwipeable(showSidebar, hideSidebar);\n\n  return (\n    <>\n      <FontAwesomeIcon icon={burgerIcon} className={burgerClasses} onClick={toggleSidebar} />\n\n      <div {...swipeableProps} className=\"menu-layout__swipeable\">\n        <div className=\"menu-layout__swipeable-inner\">\n          <AsideMenu selectedServer={selectedServer} showOnMobile={sidebarVisible} />\n          <div className=\"menu-layout__container\" onClick={() => hideSidebar()}>\n            <div className=\"container-xl\">\n              <Switch>\n                <Redirect exact from=\"/server/:serverId\" to=\"/server/:serverId/overview\" />\n                <Route exact path=\"/server/:serverId/overview\" component={Overview} />\n                <Route exact path=\"/server/:serverId/list-short-urls/:page\" component={ShortUrls} />\n                <Route exact path=\"/server/:serverId/create-short-url\" component={CreateShortUrl} />\n                <Route path=\"/server/:serverId/short-code/:shortCode/visits\" component={ShortUrlVisits} />\n                <Route path=\"/server/:serverId/short-code/:shortCode/edit\" component={EditShortUrl} />\n                <Route path=\"/server/:serverId/tag/:tag/visits\" component={TagVisits} />\n                {addOrphanVisitsRoute && <Route path=\"/server/:serverId/orphan-visits\" component={OrphanVisits} />}\n                <Route exact path=\"/server/:serverId/manage-tags\" component={TagsList} />\n                {addManageDomainsRoute && <Route exact path=\"/server/:serverId/manage-domains\" component={ManageDomains} />}\n                <Route\n                  render={() => <NotFound to={`/server/${selectedServer.id}/list-short-urls/1`}>List short URLs</NotFound>}\n                />\n              </Switch>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}, ServerError);\n\nexport default MenuLayout;\n","import {\n  faList as listIcon,\n  faLink as createIcon,\n  faTags as tagsIcon,\n  faPen as editIcon,\n  faHome as overviewIcon,\n  faGlobe as domainsIcon,\n} from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { FC } from 'react';\nimport { NavLink, NavLinkProps } from 'react-router-dom';\nimport classNames from 'classnames';\nimport { Location } from 'history';\nimport { DeleteServerButtonProps } from '../servers/DeleteServerButton';\nimport { isServerWithId, SelectedServer } from '../servers/data';\nimport { supportsDomainRedirects } from '../utils/helpers/features';\nimport './AsideMenu.scss';\n\nexport interface AsideMenuProps {\n  selectedServer: SelectedServer;\n  className?: string;\n  showOnMobile?: boolean;\n}\n\ninterface AsideMenuItemProps extends NavLinkProps {\n  to: string;\n}\n\nconst AsideMenuItem: FC<AsideMenuItemProps> = ({ children, to, className, ...rest }) => (\n  <NavLink\n    className={classNames('aside-menu__item', className)}\n    activeClassName=\"aside-menu__item--selected\"\n    to={to}\n    {...rest}\n  >\n    {children}\n  </NavLink>\n);\n\nconst AsideMenu = (DeleteServerButton: FC<DeleteServerButtonProps>) => (\n  { selectedServer, showOnMobile = false }: AsideMenuProps,\n) => {\n  const serverId = isServerWithId(selectedServer) ? selectedServer.id : '';\n  const addManageDomainsLink = supportsDomainRedirects(selectedServer);\n  const asideClass = classNames('aside-menu', {\n    'aside-menu--hidden': !showOnMobile,\n  });\n  const shortUrlsIsActive = (_: null, location: Location) => location.pathname.match('/list-short-urls') !== null;\n  const buildPath = (suffix: string) => `/server/${serverId}${suffix}`;\n\n  return (\n    <aside className={asideClass}>\n      <nav className=\"nav flex-column aside-menu__nav\">\n        <AsideMenuItem to={buildPath('/overview')}>\n          <FontAwesomeIcon fixedWidth icon={overviewIcon} />\n          <span className=\"aside-menu__item-text\">Overview</span>\n        </AsideMenuItem>\n        <AsideMenuItem to={buildPath('/list-short-urls/1')} isActive={shortUrlsIsActive}>\n          <FontAwesomeIcon fixedWidth icon={listIcon} />\n          <span className=\"aside-menu__item-text\">List short URLs</span>\n        </AsideMenuItem>\n        <AsideMenuItem to={buildPath('/create-short-url')}>\n          <FontAwesomeIcon fixedWidth icon={createIcon} flip=\"horizontal\" />\n          <span className=\"aside-menu__item-text\">Create short URL</span>\n        </AsideMenuItem>\n        <AsideMenuItem to={buildPath('/manage-tags')}>\n          <FontAwesomeIcon fixedWidth icon={tagsIcon} />\n          <span className=\"aside-menu__item-text\">Manage tags</span>\n        </AsideMenuItem>\n        {addManageDomainsLink && (\n          <AsideMenuItem to={buildPath('/manage-domains')}>\n            <FontAwesomeIcon fixedWidth icon={domainsIcon} />\n            <span className=\"aside-menu__item-text\">Manage domains</span>\n          </AsideMenuItem>\n        )}\n        <AsideMenuItem to={buildPath('/edit')} className=\"aside-menu__item--push\">\n          <FontAwesomeIcon fixedWidth icon={editIcon} />\n          <span className=\"aside-menu__item-text\">Edit this server</span>\n        </AsideMenuItem>\n        {isServerWithId(selectedServer) && (\n          <DeleteServerButton\n            className=\"aside-menu__item aside-menu__item--danger\"\n            textClassName=\"aside-menu__item-text\"\n            server={selectedServer}\n          />\n        )}\n      </nav>\n    </aside>\n  );\n};\n\nexport default AsideMenu;\n","import { isReachableServer, SelectedServer } from '../../servers/data';\nimport { versionMatch, Versions } from './version';\n\nconst serverMatchesVersions = (versions: Versions) => (selectedServer: SelectedServer): boolean =>\n  isReachableServer(selectedServer) && versionMatch(selectedServer.version, versions);\n\nexport const supportsQrCodeSizeInQuery = serverMatchesVersions({ minVersion: '2.5.0' });\n\nexport const supportsShortUrlTitle = serverMatchesVersions({ minVersion: '2.6.0' });\n\nexport const supportsOrphanVisits = supportsShortUrlTitle;\n\nexport const supportsQrCodeMargin = supportsShortUrlTitle;\n\nexport const supportsTagsInPatch = supportsShortUrlTitle;\n\nexport const supportsBotVisits = serverMatchesVersions({ minVersion: '2.7.0' });\n\nexport const supportsCrawlableVisits = supportsBotVisits;\n\nexport const supportsQrErrorCorrection = serverMatchesVersions({ minVersion: '2.8.0' });\n\nexport const supportsDomainRedirects = supportsQrErrorCorrection;\n\nexport const supportsForwardQuery = serverMatchesVersions({ minVersion: '2.9.0' });\n","export const MAIN_COLOR = '#4696e5';\n\nexport const MAIN_COLOR_ALPHA = 'rgba(70, 150, 229, 0.4)';\n\nexport const HIGHLIGHTED_COLOR = '#f77f28';\n\nexport const HIGHLIGHTED_COLOR_ALPHA = 'rgba(247, 127, 40, 0.4)';\n\nexport const PRIMARY_LIGHT_COLOR = 'white';\n\nexport const PRIMARY_DARK_COLOR = '#161b22';\n\nexport type Theme = 'dark' | 'light';\n\nexport const changeThemeInMarkup = (theme: Theme) => {\n  const html = document.getElementsByTagName('html');\n\n  html?.[0]?.setAttribute('data-theme', theme);\n};\n\nexport const isDarkThemeEnabled = (): boolean => {\n  const html = document.getElementsByTagName('html');\n\n  return html?.[0]?.getAttribute('data-theme') === 'dark';\n};\n","import qs from 'qs';\n\nexport const parseQuery = <T>(search: string) => qs.parse(search, { ignoreQueryPrefix: true }) as unknown as T;\n\nexport const stringifyQuery = (query: any): string => qs.stringify(query, { arrayFormat: 'brackets' });\n","import { FC } from 'react';\nimport { Card, Row } from 'reactstrap';\nimport classNames from 'classnames';\nimport { faCircleNotch as preloader } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\ntype MessageType = 'default' | 'error';\n\nconst getClassForType = (type: MessageType) => {\n  const map: Record<MessageType, string> = {\n    error: 'border-danger',\n    default: '',\n  };\n\n  return map[type];\n};\nconst getTextClassForType = (type: MessageType) => {\n  const map: Record<MessageType, string> = {\n    error: 'text-danger',\n    default: 'text-muted',\n  };\n\n  return map[type];\n};\n\nexport interface MessageProps {\n  className?: string;\n  loading?: boolean;\n  fullWidth?: boolean;\n  type?: MessageType;\n}\n\nconst Message: FC<MessageProps> = ({ className, children, loading = false, type = 'default', fullWidth = false }) => {\n  const classes = classNames({\n    'col-md-12': fullWidth,\n    'col-md-10 offset-md-1': !fullWidth,\n  });\n\n  return (\n    <Row noGutters className={className}>\n      <div className={classes}>\n        <Card className={getClassForType(type)} body>\n          <h3 className={classNames('text-center mb-0', getTextClassForType(type))}>\n            {loading && <FontAwesomeIcon icon={preloader} spin />}\n            {loading && <span className=\"ml-2\">{children ?? 'Loading...'}</span>}\n            {!loading && children}\n          </h3>\n        </Card>\n      </div>\n    </Row>\n  );\n};\n\nexport default Message;\n","import { FC } from 'react';\nimport './NoMenuLayout.scss';\n\nconst NoMenuLayout: FC = ({ children }) => <div className=\"no-menu-wrapper container-xl\">{children}</div>;\n\nexport default NoMenuLayout;\n","import { useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSearch as searchIcon } from '@fortawesome/free-solid-svg-icons';\nimport classNames from 'classnames';\nimport './SearchField.scss';\n\nconst DEFAULT_SEARCH_INTERVAL = 500;\nlet timer: NodeJS.Timeout | null;\n\ninterface SearchFieldProps {\n  onChange: (value: string) => void;\n  className?: string;\n  large?: boolean;\n  noBorder?: boolean;\n}\n\nconst SearchField = ({ onChange, className, large = true, noBorder = false }: SearchFieldProps) => {\n  const [ searchTerm, setSearchTerm ] = useState('');\n\n  const resetTimer = () => {\n    timer && clearTimeout(timer);\n    timer = null;\n  };\n  const searchTermChanged = (newSearchTerm: string, timeout = DEFAULT_SEARCH_INTERVAL) => {\n    setSearchTerm(newSearchTerm);\n\n    resetTimer();\n\n    timer = setTimeout(() => {\n      onChange(newSearchTerm);\n      resetTimer();\n    }, timeout);\n  };\n\n  return (\n    <div className={classNames('search-field', className)}>\n      <input\n        type=\"text\"\n        className={classNames('form-control search-field__input', {\n          'form-control-lg': large,\n          'search-field__input--no-border': noBorder,\n        })}\n        placeholder=\"Search...\"\n        value={searchTerm}\n        onChange={(e) => searchTermChanged(e.target.value)}\n      />\n      <FontAwesomeIcon icon={searchIcon} className=\"search-field__icon\" />\n      <div\n        className=\"close search-field__close\"\n        hidden={searchTerm === ''}\n        id=\"search-field__close\"\n        onClick={() => searchTermChanged('', 0)}\n      >\n        &times;\n      </div>\n    </div>\n  );\n};\n\nexport default SearchField;\n","import { isEmpty, isNil, reject } from 'ramda';\nimport { AxiosInstance, AxiosResponse, Method } from 'axios';\nimport { ShortUrlsListParams } from '../../short-urls/reducers/shortUrlsListParams';\nimport { ShortUrl, ShortUrlData } from '../../short-urls/data';\nimport { OptionalString } from '../../utils/utils';\nimport {\n  ShlinkHealth,\n  ShlinkMercureInfo,\n  ShlinkShortUrlsResponse,\n  ShlinkTags,\n  ShlinkTagsResponse,\n  ShlinkVisits,\n  ShlinkVisitsParams,\n  ShlinkShortUrlData,\n  ShlinkDomain,\n  ShlinkDomainsResponse,\n  ShlinkVisitsOverview,\n  ShlinkEditDomainRedirects,\n  ShlinkDomainRedirects,\n} from '../types';\nimport { stringifyQuery } from '../../utils/helpers/query';\n\nconst buildShlinkBaseUrl = (url: string, apiVersion: number) => url ? `${url}/rest/v${apiVersion}` : '';\nconst rejectNilProps = reject(isNil);\n\nexport default class ShlinkApiClient {\n  private apiVersion: number;\n\n  public constructor(\n    private readonly axios: AxiosInstance,\n    private readonly baseUrl: string,\n    private readonly apiKey: string,\n  ) {\n    this.apiVersion = 2;\n  }\n\n  public readonly listShortUrls = async (params: ShortUrlsListParams = {}): Promise<ShlinkShortUrlsResponse> =>\n    this.performRequest<{ shortUrls: ShlinkShortUrlsResponse }>('/short-urls', 'GET', params)\n      .then(({ data }) => data.shortUrls);\n\n  public readonly createShortUrl = async (options: ShortUrlData): Promise<ShortUrl> => {\n    const filteredOptions = reject((value) => isEmpty(value) || isNil(value), options as any);\n\n    return this.performRequest<ShortUrl>('/short-urls', 'POST', {}, filteredOptions)\n      .then((resp) => resp.data);\n  };\n\n  public readonly getShortUrlVisits = async (shortCode: string, query?: ShlinkVisitsParams): Promise<ShlinkVisits> =>\n    this.performRequest<{ visits: ShlinkVisits }>(`/short-urls/${shortCode}/visits`, 'GET', query)\n      .then(({ data }) => data.visits);\n\n  public readonly getTagVisits = async (tag: string, query?: Omit<ShlinkVisitsParams, 'domain'>): Promise<ShlinkVisits> =>\n    this.performRequest<{ visits: ShlinkVisits }>(`/tags/${tag}/visits`, 'GET', query)\n      .then(({ data }) => data.visits);\n\n  public readonly getOrphanVisits = async (query?: Omit<ShlinkVisitsParams, 'domain'>): Promise<ShlinkVisits> =>\n    this.performRequest<{ visits: ShlinkVisits }>('/visits/orphan', 'GET', query)\n      .then(({ data }) => data.visits);\n\n  public readonly getVisitsOverview = async (): Promise<ShlinkVisitsOverview> =>\n    this.performRequest<{ visits: ShlinkVisitsOverview }>('/visits', 'GET')\n      .then(({ data }) => data.visits);\n\n  public readonly getShortUrl = async (shortCode: string, domain?: OptionalString): Promise<ShortUrl> =>\n    this.performRequest<ShortUrl>(`/short-urls/${shortCode}`, 'GET', { domain })\n      .then(({ data }) => data);\n\n  public readonly deleteShortUrl = async (shortCode: string, domain?: OptionalString): Promise<void> =>\n    this.performRequest(`/short-urls/${shortCode}`, 'DELETE', { domain })\n      .then(() => {});\n\n  /* @deprecated. If using Shlink 2.6.0 or greater, use updateShortUrl instead */\n  public readonly updateShortUrlTags = async (\n    shortCode: string,\n    domain: OptionalString,\n    tags: string[],\n  ): Promise<string[]> =>\n    this.performRequest<{ tags: string[] }>(`/short-urls/${shortCode}/tags`, 'PUT', { domain }, { tags })\n      .then(({ data }) => data.tags);\n\n  public readonly updateShortUrl = async (\n    shortCode: string,\n    domain: OptionalString,\n    data: ShlinkShortUrlData,\n  ): Promise<ShortUrl> =>\n    this.performRequest<ShortUrl>(`/short-urls/${shortCode}`, 'PATCH', { domain }, data)\n      .then(({ data }) => data);\n\n  public readonly listTags = async (): Promise<ShlinkTags> =>\n    this.performRequest<{ tags: ShlinkTagsResponse }>('/tags', 'GET', { withStats: 'true' })\n      .then((resp) => resp.data.tags)\n      .then(({ data, stats }) => ({ tags: data, stats }));\n\n  public readonly deleteTags = async (tags: string[]): Promise<{ tags: string[] }> =>\n    this.performRequest('/tags', 'DELETE', { tags })\n      .then(() => ({ tags }));\n\n  public readonly editTag = async (oldName: string, newName: string): Promise<{ oldName: string; newName: string }> =>\n    this.performRequest('/tags', 'PUT', {}, { oldName, newName })\n      .then(() => ({ oldName, newName }));\n\n  public readonly health = async (): Promise<ShlinkHealth> =>\n    this.performRequest<ShlinkHealth>('/health', 'GET')\n      .then((resp) => resp.data);\n\n  public readonly mercureInfo = async (): Promise<ShlinkMercureInfo> =>\n    this.performRequest<ShlinkMercureInfo>('/mercure-info', 'GET')\n      .then((resp) => resp.data);\n\n  public readonly listDomains = async (): Promise<ShlinkDomain[]> =>\n    this.performRequest<{ domains: ShlinkDomainsResponse }>('/domains', 'GET').then(({ data }) => data.domains.data);\n\n  public readonly editDomainRedirects = async (\n    domainRedirects: ShlinkEditDomainRedirects,\n  ): Promise<ShlinkDomainRedirects> =>\n    this.performRequest<ShlinkDomainRedirects>('/domains/redirects', 'PATCH', {}, domainRedirects).then(({ data }) => data);\n\n  private readonly performRequest = async <T>(url: string, method: Method = 'GET', query = {}, body = {}): Promise<AxiosResponse<T>> => {\n    try {\n      return await this.axios({\n        method,\n        url: `${buildShlinkBaseUrl(this.baseUrl, this.apiVersion)}${url}`,\n        headers: { 'X-Api-Key': this.apiKey },\n        params: rejectNilProps(query),\n        data: body,\n        paramsSerializer: stringifyQuery,\n      });\n    } catch (e) {\n      const { response } = e;\n\n      // Due to a bug on all previous Shlink versions, requests to non-matching URLs will always result on a CORS error\n      // when performed from the browser (due to the preflight request not returning a 2xx status.\n      // See https://github.com/shlinkio/shlink/issues/614), which will make the \"response\" prop not to be set here.\n      // The bug will be fixed on upcoming Shlink patches, but for other versions, we can consider this situation as\n      // if a request has been performed to a not supported API version.\n      const apiVersionIsNotSupported = !response;\n\n      // When the request is not invalid or we have already tried both API versions, throw the error and let the\n      // caller handle it\n      if (!apiVersionIsNotSupported || this.apiVersion === 2) {\n        throw e;\n      }\n\n      this.apiVersion = this.apiVersion - 1;\n\n      return await this.performRequest(url, method, query, body);\n    }\n  };\n}\n","import { AxiosInstance } from 'axios';\nimport { prop } from 'ramda';\nimport { hasServerData, SelectedServer, ServerWithId } from '../../servers/data';\nimport { GetState } from '../../container/types';\nimport ShlinkApiClient from './ShlinkApiClient';\n\nconst apiClients: Record<string, ShlinkApiClient> = {};\n\nconst isGetState = (getStateOrSelectedServer: GetState | ServerWithId): getStateOrSelectedServer is GetState =>\n  typeof getStateOrSelectedServer === 'function';\nconst getSelectedServerFromState = (getState: GetState): SelectedServer => prop('selectedServer', getState());\n\nexport type ShlinkApiClientBuilder = (getStateOrSelectedServer: GetState | ServerWithId) => ShlinkApiClient;\n\nconst buildShlinkApiClient = (axios: AxiosInstance): ShlinkApiClientBuilder => (\n  getStateOrSelectedServer: GetState | ServerWithId,\n) => {\n  const server = isGetState(getStateOrSelectedServer)\n    ? getSelectedServerFromState(getStateOrSelectedServer)\n    : getStateOrSelectedServer;\n\n  if (!hasServerData(server)) {\n    throw new Error('There\\'s no selected server or it is not found');\n  }\n\n  const { url, apiKey } = server;\n  const clientKey = `${url}_${apiKey}`;\n\n  if (!apiClients[clientKey]) {\n    apiClients[clientKey] = new ShlinkApiClient(axios, url, apiKey);\n  }\n\n  return apiClients[clientKey];\n};\n\nexport default buildShlinkApiClient;\n","import Bottle from 'bottlejs';\nimport buildShlinkApiClient from './ShlinkApiClientBuilder';\n\nconst provideServices = (bottle: Bottle) => {\n  bottle.serviceFactory('buildShlinkApiClient', buildShlinkApiClient, 'axios');\n};\n\nexport default provideServices;\n","import { FC, useEffect, useState } from 'react';\nimport { ShortUrlsListProps } from './ShortUrlsList';\n\nconst ShortUrls = (SearchBar: FC, ShortUrlsList: FC<ShortUrlsListProps>) => (props: ShortUrlsListProps) => {\n  const { match } = props;\n  const { page = '1', serverId = '' } = match?.params ?? {};\n  const [ urlsListKey, setUrlsListKey ] = useState(`${serverId}_${page}`);\n\n  // Using a key on a component makes react to create a new instance every time the key changes\n  // Without it, pagination on the URL will not make the component to be refreshed\n  useEffect(() => {\n    setUrlsListKey(`${serverId}_${page}`);\n  }, [ serverId, page ]);\n\n  return (\n    <>\n      <div className=\"form-group\"><SearchBar /></div>\n      <ShortUrlsList {...props} key={urlsListKey} />\n    </>\n  );\n};\n\nexport default ShortUrls;\n","import { FC, MouseEventHandler } from 'react';\nimport ColorGenerator from '../../utils/services/ColorGenerator';\nimport './Tag.scss';\n\ninterface TagProps {\n  colorGenerator: ColorGenerator;\n  text: string;\n  className?: string;\n  clearable?: boolean;\n  onClick?: MouseEventHandler;\n  onClose?: MouseEventHandler;\n}\n\nconst Tag: FC<TagProps> = ({ text, children, clearable, className = '', colorGenerator, onClick, onClose }) => (\n  <span\n    className={`badge tag ${className}`}\n    style={{ backgroundColor: colorGenerator.getColorForKey(text), cursor: clearable || !onClick ? 'auto' : 'pointer' }}\n    onClick={onClick}\n  >\n    {children ?? text}\n    {clearable && <span className=\"close tag__close-selected-tag\" onClick={onClose}>&times;</span>}\n  </span>\n);\n\nexport default Tag;\n","import { FC } from 'react';\nimport { Dropdown, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { useToggle } from './helpers/hooks';\nimport './DropdownBtn.scss';\n\nexport interface DropdownBtnProps {\n  text: string;\n  disabled?: boolean;\n  className?: string;\n  dropdownClassName?: string;\n  right?: boolean;\n  minWidth?: number;\n}\n\nexport const DropdownBtn: FC<DropdownBtnProps> = (\n  { text, disabled = false, className = '', children, dropdownClassName, right = false, minWidth },\n) => {\n  const [ isOpen, toggle ] = useToggle();\n  const toggleClasses = `dropdown-btn__toggle btn-block ${className}`;\n  const style = { minWidth: minWidth && `${minWidth}px` };\n\n  return (\n    <Dropdown isOpen={isOpen} toggle={toggle} disabled={disabled} className={dropdownClassName}>\n      <DropdownToggle caret className={toggleClasses} color=\"primary\">{text}</DropdownToggle>\n      <DropdownMenu className=\"w-100\" right={right} style={style}>{children}</DropdownMenu>\n    </Dropdown>\n  );\n};\n","import { format, formatISO, parse } from 'date-fns';\nimport { OptionalString } from '../utils';\n\ntype DateOrString = Date | string;\ntype NullableDate = DateOrString | null;\n\nexport const isDateObject = (date: DateOrString): date is Date => typeof date !== 'string';\n\nconst formatDateFromFormat = (date?: NullableDate, theFormat?: string): OptionalString => {\n  if (!date || !isDateObject(date)) {\n    return date;\n  }\n\n  return theFormat ? format(date, theFormat) : formatISO(date);\n};\n\nexport const formatDate = (format = 'yyyy-MM-dd') => (date?: NullableDate) => formatDateFromFormat(date, format);\n\nexport const formatIsoDate = (date?: NullableDate) => formatDateFromFormat(date, undefined);\n\nexport const formatInternational = formatDate();\n\nexport const parseDate = (date: string, format: string) => parse(date, format, new Date());\n","import { subDays, startOfDay, endOfDay } from 'date-fns';\nimport { filter, isEmpty } from 'ramda';\nimport { formatInternational } from '../../helpers/date';\n\nexport interface DateRange {\n  startDate?: Date | null;\n  endDate?: Date | null;\n}\n\nexport type DateInterval = 'all' | 'today' | 'yesterday' | 'last7Days' | 'last30Days' | 'last90Days' | 'last180days' | 'last365Days';\n\nexport const dateRangeIsEmpty = (dateRange?: DateRange): boolean => dateRange === undefined\n  || isEmpty(filter(Boolean, dateRange as any));\n\nexport const rangeIsInterval = (range?: DateRange | DateInterval): range is DateInterval =>\n  typeof range === 'string';\n\nconst INTERVAL_TO_STRING_MAP: Record<DateInterval, string | undefined> = {\n  today: 'Today',\n  yesterday: 'Yesterday',\n  last7Days: 'Last 7 days',\n  last30Days: 'Last 30 days',\n  last90Days: 'Last 90 days',\n  last180days: 'Last 180 days',\n  last365Days: 'Last 365 days',\n  all: undefined,\n};\n\nexport const DATE_INTERVALS = Object.keys(INTERVAL_TO_STRING_MAP).filter((value) => value !== 'all') as DateInterval[];\n\nconst dateRangeToString = (range?: DateRange): string | undefined => {\n  if (!range || dateRangeIsEmpty(range)) {\n    return undefined;\n  }\n\n  if (range.startDate && !range.endDate) {\n    return `Since ${formatInternational(range.startDate)}`;\n  }\n\n  if (!range.startDate && range.endDate) {\n    return `Until ${formatInternational(range.endDate)}`;\n  }\n\n  return `${formatInternational(range.startDate)} - ${formatInternational(range.endDate)}`;\n};\n\nexport const rangeOrIntervalToString = (range?: DateRange | DateInterval): string | undefined => {\n  if (!range || range === 'all') {\n    return undefined;\n  }\n\n  if (!rangeIsInterval(range)) {\n    return dateRangeToString(range);\n  }\n\n  return INTERVAL_TO_STRING_MAP[range];\n};\n\nconst startOfDaysAgo = (daysAgo: number) => startOfDay(subDays(new Date(), daysAgo));\nconst endingToday = (startDate: Date): DateRange => ({ startDate, endDate: endOfDay(new Date()) });\n\nexport const intervalToDateRange = (dateInterval?: DateInterval): DateRange => {\n  if (!dateInterval || dateInterval === 'all') {\n    return {};\n  }\n\n  switch (dateInterval) {\n    case 'today':\n      return endingToday(startOfDay(new Date()));\n    case 'yesterday':\n      return { startDate: startOfDaysAgo(1), endDate: endOfDay(subDays(new Date(), 1)) };\n    case 'last7Days':\n      return endingToday(startOfDaysAgo(7));\n    case 'last30Days':\n      return endingToday(startOfDaysAgo(30));\n    case 'last90Days':\n      return endingToday(startOfDaysAgo(90));\n    case 'last180days':\n      return endingToday(startOfDaysAgo(180));\n    case 'last365Days':\n      return endingToday(startOfDaysAgo(365));\n  }\n\n  return {};\n};\n","import { useRef } from 'react';\nimport { isNil } from 'ramda';\nimport DatePicker, { ReactDatePickerProps } from 'react-datepicker';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCalendarAlt as calendarIcon } from '@fortawesome/free-regular-svg-icons';\nimport classNames from 'classnames';\nimport './DateInput.scss';\n\nexport type DateInputProps = ReactDatePickerProps;\n\nconst DateInput = (props: DateInputProps) => {\n  const { className, isClearable, selected } = props;\n  const showCalendarIcon = !isClearable || isNil(selected);\n  const ref = useRef<{ input: HTMLInputElement }>();\n\n  return (\n    <div className=\"date-input-container\">\n      <DatePicker\n        {...props}\n        dateFormat=\"yyyy-MM-dd\"\n        className={classNames('date-input-container__input form-control', className)}\n        // @ts-expect-error The DatePicker type definition is wrong. It has a ref prop\n        ref={ref}\n      />\n      {showCalendarIcon && (\n        <FontAwesomeIcon\n          icon={calendarIcon}\n          className=\"date-input-container__icon\"\n          onClick={() => ref.current?.input.focus()}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default DateInput;\n","import DateInput from '../DateInput';\nimport { DateRange } from './types';\n\ninterface DateRangeRowProps extends DateRange {\n  onStartDateChange: (date: Date | null) => void;\n  onEndDateChange: (date: Date | null) => void;\n  disabled?: boolean;\n}\n\nconst DateRangeRow = (\n  { startDate = null, endDate = null, disabled = false, onStartDateChange, onEndDateChange }: DateRangeRowProps,\n) => (\n  <div className=\"row\">\n    <div className=\"col-md-6\">\n      <DateInput\n        selected={startDate}\n        placeholderText=\"Since...\"\n        isClearable\n        maxDate={endDate ?? undefined}\n        disabled={disabled}\n        onChange={onStartDateChange}\n      />\n    </div>\n    <div className=\"col-md-6\">\n      <DateInput\n        className=\"mt-2 mt-md-0\"\n        selected={endDate}\n        placeholderText=\"Until...\"\n        isClearable\n        minDate={startDate ?? undefined}\n        disabled={disabled}\n        onChange={onEndDateChange}\n      />\n    </div>\n  </div>\n);\n\nexport default DateRangeRow;\n","import { DropdownItem } from 'reactstrap';\nimport { FC } from 'react';\nimport { DATE_INTERVALS, DateInterval, rangeOrIntervalToString } from './types';\n\nexport interface DateIntervalDropdownProps {\n  active?: DateInterval;\n  allText: string;\n  onChange: (interval: DateInterval) => void;\n}\n\nexport const DateIntervalDropdownItems: FC<DateIntervalDropdownProps> = ({ active, allText, onChange }) => (\n  <>\n    <DropdownItem active={active === 'all'} onClick={() => onChange('all')}>\n      {allText}\n    </DropdownItem>\n    <DropdownItem divider />\n    {DATE_INTERVALS.map(\n      (interval) => (\n        <DropdownItem key={interval} active={active === interval} onClick={() => onChange(interval)}>\n          {rangeOrIntervalToString(interval)}\n        </DropdownItem>\n      ),\n    )}\n  </>\n);\n","import { useState } from 'react';\nimport { DropdownItem } from 'reactstrap';\nimport { DropdownBtn } from '../DropdownBtn';\nimport {\n  DateInterval,\n  DateRange,\n  rangeOrIntervalToString,\n  intervalToDateRange,\n  rangeIsInterval,\n  dateRangeIsEmpty,\n} from './types';\nimport DateRangeRow from './DateRangeRow';\nimport { DateIntervalDropdownItems } from './DateIntervalDropdownItems';\n\nexport interface DateRangeSelectorProps {\n  initialDateRange?: DateInterval | DateRange;\n  disabled?: boolean;\n  onDatesChange: (dateRange: DateRange) => void;\n  defaultText: string;\n}\n\nexport const DateRangeSelector = (\n  { onDatesChange, initialDateRange, defaultText, disabled }: DateRangeSelectorProps,\n) => {\n  const [ activeInterval, setActiveInterval ] = useState(\n    rangeIsInterval(initialDateRange) ? initialDateRange : undefined,\n  );\n  const [ activeDateRange, setActiveDateRange ] = useState(\n    !rangeIsInterval(initialDateRange) ? initialDateRange : undefined,\n  );\n  const updateDateRange = (dateRange: DateRange) => {\n    setActiveInterval(dateRangeIsEmpty(dateRange) ? 'all' : undefined);\n    setActiveDateRange(dateRange);\n    onDatesChange(dateRange);\n  };\n  const updateInterval = (dateInterval: DateInterval) => () => {\n    setActiveInterval(dateInterval);\n    setActiveDateRange(undefined);\n    onDatesChange(intervalToDateRange(dateInterval));\n  };\n\n  return (\n    <DropdownBtn disabled={disabled} text={rangeOrIntervalToString(activeInterval ?? activeDateRange) ?? defaultText}>\n      <DateIntervalDropdownItems\n        allText={defaultText}\n        active={activeInterval}\n        onChange={(interval) => updateInterval(interval)()}\n      />\n      <DropdownItem divider />\n      <DropdownItem header>Custom:</DropdownItem>\n      <DropdownItem text>\n        <DateRangeRow\n          {...activeDateRange}\n          onStartDateChange={(startDate) => updateDateRange({ ...activeDateRange, startDate })}\n          onEndDateChange={(endDate) => updateDateRange({ ...activeDateRange, endDate })}\n        />\n      </DropdownItem>\n    </DropdownBtn>\n  );\n};\n","import { faTags as tagsIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { isEmpty, pipe } from 'ramda';\nimport { parseISO } from 'date-fns';\nimport SearchField from '../utils/SearchField';\nimport Tag from '../tags/helpers/Tag';\nimport { DateRangeSelector } from '../utils/dates/DateRangeSelector';\nimport { formatIsoDate } from '../utils/helpers/date';\nimport ColorGenerator from '../utils/services/ColorGenerator';\nimport { DateRange } from '../utils/dates/types';\nimport { ShortUrlsListParams } from './reducers/shortUrlsListParams';\nimport './SearchBar.scss';\n\ninterface SearchBarProps {\n  listShortUrls: (params: ShortUrlsListParams) => void;\n  shortUrlsListParams: ShortUrlsListParams;\n}\n\nconst dateOrNull = (date?: string) => date ? parseISO(date) : null;\n\nconst SearchBar = (colorGenerator: ColorGenerator) => ({ listShortUrls, shortUrlsListParams }: SearchBarProps) => {\n  const selectedTags = shortUrlsListParams.tags ?? [];\n  const setDates = pipe(\n    ({ startDate, endDate }: DateRange) => ({\n      startDate: formatIsoDate(startDate) ?? undefined,\n      endDate: formatIsoDate(endDate) ?? undefined,\n    }),\n    (dates) => listShortUrls({ ...shortUrlsListParams, ...dates }),\n  );\n\n  return (\n    <div className=\"search-bar-container\">\n      <SearchField onChange={(searchTerm) => listShortUrls({ ...shortUrlsListParams, searchTerm })} />\n\n      <div className=\"mt-3\">\n        <div className=\"row\">\n          <div className=\"col-lg-8 offset-lg-4 col-xl-6 offset-xl-6\">\n            <DateRangeSelector\n              defaultText=\"All short URLs\"\n              initialDateRange={{\n                startDate: dateOrNull(shortUrlsListParams.startDate),\n                endDate: dateOrNull(shortUrlsListParams.endDate),\n              }}\n              onDatesChange={setDates}\n            />\n          </div>\n        </div>\n      </div>\n\n      {!isEmpty(selectedTags) && (\n        <h4 className=\"search-bar__selected-tag mt-3\">\n          <FontAwesomeIcon icon={tagsIcon} className=\"search-bar__tags-icon\" />\n          &nbsp;\n          {selectedTags.map((tag) => (\n            <Tag\n              colorGenerator={colorGenerator}\n              key={tag}\n              text={tag}\n              clearable\n              onClose={() => listShortUrls(\n                {\n                  ...shortUrlsListParams,\n                  tags: selectedTags.filter((selectedTag) => selectedTag !== tag),\n                },\n              )}\n            />\n          ))}\n        </h4>\n      )}\n    </div>\n  );\n};\n\nexport default SearchBar;\n","import { UncontrolledDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { toPairs } from 'ramda';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSortAmountUp as sortAscIcon, faSortAmountDown as sortDescIcon } from '@fortawesome/free-solid-svg-icons';\nimport classNames from 'classnames';\nimport { determineOrderDir, OrderDir } from './utils';\nimport './SortingDropdown.scss';\n\nexport interface SortingDropdownProps<T extends string = string> {\n  items: Record<T, string>;\n  orderField?: T;\n  orderDir?: OrderDir;\n  onChange: (orderField?: T, orderDir?: OrderDir) => void;\n  isButton?: boolean;\n  right?: boolean;\n}\n\nexport default function SortingDropdown<T extends string = string>(\n  { items, orderField, orderDir, onChange, isButton = true, right = false }: SortingDropdownProps<T>,\n) {\n  const handleItemClick = (fieldKey: T) => () => {\n    const newOrderDir = determineOrderDir(fieldKey, orderField, orderDir);\n\n    onChange(newOrderDir ? fieldKey : undefined, newOrderDir);\n  };\n\n  return (\n    <UncontrolledDropdown>\n      <DropdownToggle\n        caret\n        color={isButton ? 'primary' : 'link'}\n        className={classNames({ 'dropdown-btn__toggle btn-block': isButton, 'btn-sm p-0': !isButton })}\n      >\n        {!isButton && <>Order by</>}\n        {isButton && !orderField && <>Order by...</>}\n        {isButton && orderField && `Order by: \"${items[orderField]}\" - \"${orderDir ?? 'DESC'}\"`}\n      </DropdownToggle>\n      <DropdownMenu\n        right={right}\n        className={classNames('w-100', { 'sorting-dropdown__menu--link': !isButton })}\n      >\n        {toPairs(items).map(([ fieldKey, fieldValue ]) => (\n          <DropdownItem key={fieldKey} active={orderField === fieldKey} onClick={handleItemClick(fieldKey as T)}>\n            {fieldValue}\n            {orderField === fieldKey && (\n              <FontAwesomeIcon\n                icon={orderDir === 'ASC' ? sortAscIcon : sortDescIcon}\n                className=\"sorting-dropdown__sort-icon\"\n              />\n            )}\n          </DropdownItem>\n        ))}\n        <DropdownItem divider />\n        <DropdownItem disabled={!orderField} onClick={() => onChange()}>\n          <i>Clear selection</i>\n        </DropdownItem>\n      </DropdownMenu>\n    </UncontrolledDropdown>\n  );\n}\n","import { FC, useEffect } from 'react';\nimport { pipe } from 'ramda';\nimport { CreateVisit } from '../../visits/types';\nimport { MercureInfo } from '../reducers/mercureInfo';\nimport { bindToMercureTopic } from './index';\n\nexport interface MercureBoundProps {\n  createNewVisits: (createdVisits: CreateVisit[]) => void;\n  loadMercureInfo: () => void;\n  mercureInfo: MercureInfo;\n}\n\nexport function boundToMercureHub<T = {}>(\n  WrappedComponent: FC<MercureBoundProps & T>,\n  getTopicsForProps: (props: T) => string[],\n) {\n  const pendingUpdates = new Set<CreateVisit>();\n\n  return (props: MercureBoundProps & T) => {\n    const { createNewVisits, loadMercureInfo, mercureInfo } = props;\n    const { interval } = mercureInfo;\n\n    useEffect(() => {\n      const onMessage = (visit: CreateVisit) => interval ? pendingUpdates.add(visit) : createNewVisits([ visit ]);\n      const closeEventSource = bindToMercureTopic(mercureInfo, getTopicsForProps(props), onMessage, loadMercureInfo);\n\n      if (!interval) {\n        return closeEventSource;\n      }\n\n      const timer = setInterval(() => {\n        createNewVisits([ ...pendingUpdates ]);\n        pendingUpdates.clear();\n      }, interval * 1000 * 60);\n\n      return pipe(() => clearInterval(timer), () => closeEventSource?.());\n    }, [ mercureInfo ]);\n\n    return <WrappedComponent {...props} />;\n  };\n}\n","import { EventSourcePolyfill as EventSource } from 'event-source-polyfill';\nimport { MercureInfo } from '../reducers/mercureInfo';\n\nexport const bindToMercureTopic = <T>(mercureInfo: MercureInfo, topics: string[], onMessage: (message: T) => void, onTokenExpired: () => void) => { // eslint-disable-line max-len\n  const { mercureHubUrl, token, loading, error } = mercureInfo;\n\n  if (loading || error || !mercureHubUrl) {\n    return undefined;\n  }\n\n  const onEventSourceMessage = ({ data }: { data: string }) => onMessage(JSON.parse(data) as T);\n  const onEventSourceError = ({ status }: { status: number }) => status === 401 && onTokenExpired();\n\n  const subscriptions = topics.map((topic) => {\n    const hubUrl = new URL(mercureHubUrl);\n\n    hubUrl.searchParams.append('topic', topic);\n    const es = new EventSource(hubUrl, {\n      headers: {\n        Authorization: `Bearer ${token}`,\n      },\n    });\n\n    es.onmessage = onEventSourceMessage;\n    es.onerror = onEventSourceError;\n\n    return es;\n  });\n\n  return () => subscriptions.forEach((es) => es.close());\n};\n","export class Topics {\n  public static readonly visits = 'https://shlink.io/new-visit';\n\n  public static readonly orphanVisits = 'https://shlink.io/new-orphan-visit';\n\n  public static readonly shortUrlVisits = (shortCode: string) => `https://shlink.io/new-visit/${shortCode}`;\n}\n","import { Action } from 'redux';\n\ntype ActionHandler<State, AT> = (currentState: State, action: AT) => State;\ntype ActionHandlerMap<State, AT> = Record<string, ActionHandler<State, AT>>;\n\nexport const buildReducer = <State, AT extends Action>(map: ActionHandlerMap<State, AT>, initialState: State) => (\n  state: State | undefined,\n  action: AT,\n): State => {\n  const { type } = action;\n  const actionHandler = map[type];\n  const currentState = state ?? initialState;\n\n  return actionHandler ? actionHandler(currentState, action) : currentState;\n};\n\nexport const buildActionCreator = <T extends string>(type: T) => (): Action<T> => ({ type });\n","import { isEmpty, propEq, values } from 'ramda';\nimport { useState, useEffect, useMemo, FC } from 'react';\nimport { Button, Card, Nav, NavLink, Progress, Row } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCalendarAlt, faMapMarkedAlt, faList, faChartPie, faFileDownload } from '@fortawesome/free-solid-svg-icons';\nimport { IconDefinition } from '@fortawesome/fontawesome-common-types';\nimport { Route, Switch, NavLink as RouterNavLink, Redirect } from 'react-router-dom';\nimport { Location } from 'history';\nimport classNames from 'classnames';\nimport { DateRangeSelector } from '../utils/dates/DateRangeSelector';\nimport Message from '../utils/Message';\nimport { DateInterval, DateRange, intervalToDateRange } from '../utils/dates/types';\nimport { Result } from '../utils/Result';\nimport { ShlinkApiError } from '../api/ShlinkApiError';\nimport { Settings } from '../settings/reducers/settings';\nimport { SelectedServer } from '../servers/data';\nimport { supportsBotVisits } from '../utils/helpers/features';\nimport LineChartCard from './charts/LineChartCard';\nimport VisitsTable from './VisitsTable';\nimport { NormalizedOrphanVisit, NormalizedVisit, VisitsFilter, VisitsInfo, VisitsParams } from './types';\nimport OpenMapModalBtn from './helpers/OpenMapModalBtn';\nimport { normalizeVisits, processStatsFromVisits } from './services/VisitsParser';\nimport { VisitsFilterDropdown } from './helpers/VisitsFilterDropdown';\nimport { HighlightableProps, highlightedVisitsToStats } from './types/helpers';\nimport { DoughnutChartCard } from './charts/DoughnutChartCard';\nimport { SortableBarChartCard } from './charts/SortableBarChartCard';\nimport './VisitsStats.scss';\n\nexport interface VisitsStatsProps {\n  getVisits: (params: VisitsParams) => void;\n  visitsInfo: VisitsInfo;\n  settings: Settings;\n  selectedServer: SelectedServer;\n  cancelGetVisits: () => void;\n  baseUrl: string;\n  domain?: string;\n  exportCsv: (visits: NormalizedVisit[]) => void;\n  isOrphanVisits?: boolean;\n}\n\ninterface VisitsNavLinkProps {\n  title: string;\n  subPath: string;\n  icon: IconDefinition;\n}\n\ntype Section = 'byTime' | 'byContext' | 'byLocation' | 'list';\n\nconst sections: Record<Section, VisitsNavLinkProps> = {\n  byTime: { title: 'By time', subPath: '', icon: faCalendarAlt },\n  byContext: { title: 'By context', subPath: '/by-context', icon: faChartPie },\n  byLocation: { title: 'By location', subPath: '/by-location', icon: faMapMarkedAlt },\n  list: { title: 'List', subPath: '/list', icon: faList },\n};\n\nlet selectedBar: string | undefined;\n\nconst VisitsNavLink: FC<VisitsNavLinkProps & { to: string }> = ({ subPath, title, icon, to }) => (\n  <NavLink\n    tag={RouterNavLink}\n    className=\"visits-stats__nav-link\"\n    to={to}\n    isActive={(_: null, { pathname }: Location) => pathname.endsWith(`visits${subPath}`)}\n    replace\n  >\n    <FontAwesomeIcon icon={icon} />\n    <span className=\"ml-2 d-none d-sm-inline\">{title}</span>\n  </NavLink>\n);\n\nconst VisitsStats: FC<VisitsStatsProps> = ({\n  children,\n  visitsInfo,\n  getVisits,\n  cancelGetVisits,\n  baseUrl,\n  domain,\n  settings,\n  exportCsv,\n  selectedServer,\n  isOrphanVisits = false,\n}) => {\n  const initialInterval: DateInterval = settings.visits?.defaultInterval ?? 'last30Days';\n  const [ dateRange, setDateRange ] = useState<DateRange>(intervalToDateRange(initialInterval));\n  const [ highlightedVisits, setHighlightedVisits ] = useState<NormalizedVisit[]>([]);\n  const [ highlightedLabel, setHighlightedLabel ] = useState<string | undefined>();\n  const [ visitsFilter, setVisitsFilter ] = useState<VisitsFilter>({});\n  const botsSupported = supportsBotVisits(selectedServer);\n\n  const buildSectionUrl = (subPath?: string) => {\n    const query = domain ? `?domain=${domain}` : '';\n\n    return !subPath ? `${baseUrl}${query}` : `${baseUrl}${subPath}${query}`;\n  };\n  const { visits, loading, loadingLarge, error, errorData, progress } = visitsInfo;\n  const normalizedVisits = useMemo(() => normalizeVisits(visits), [ visits ]);\n  const { os, browsers, referrers, countries, cities, citiesForMap, visitedUrls } = useMemo(\n    () => processStatsFromVisits(normalizedVisits),\n    [ normalizedVisits ],\n  );\n  const mapLocations = values(citiesForMap);\n\n  const setSelectedVisits = (selectedVisits: NormalizedVisit[]) => {\n    selectedBar = undefined;\n    setHighlightedVisits(selectedVisits);\n  };\n  const highlightVisitsForProp = (prop: HighlightableProps<NormalizedOrphanVisit>) => (value: string) => {\n    const newSelectedBar = `${prop}_${value}`;\n\n    if (selectedBar === newSelectedBar) {\n      setHighlightedVisits([]);\n      setHighlightedLabel(undefined);\n      selectedBar = undefined;\n    } else {\n      setHighlightedVisits((normalizedVisits as NormalizedOrphanVisit[]).filter(propEq(prop, value)));\n      setHighlightedLabel(value);\n      selectedBar = newSelectedBar;\n    }\n  };\n\n  useEffect(() => cancelGetVisits, []);\n  useEffect(() => {\n    getVisits({ dateRange, filter: visitsFilter });\n  }, [ dateRange, visitsFilter ]);\n\n  const renderVisitsContent = () => {\n    if (loadingLarge) {\n      return (\n        <Message loading>\n          This is going to take a while... :S\n          <Progress value={progress} striped={progress === 100} className=\"mt-3\" />\n        </Message>\n      );\n    }\n\n    if (loading) {\n      return <Message loading />;\n    }\n\n    if (error) {\n      return (\n        <Result type=\"error\">\n          <ShlinkApiError errorData={errorData} fallbackMessage=\"An error occurred while loading visits :(\" />\n        </Result>\n      );\n    }\n\n    if (isEmpty(visits)) {\n      return <Message>There are no visits matching current filter  :(</Message>;\n    }\n\n    return (\n      <>\n        <Card className=\"visits-stats__nav p-0 overflow-hidden\" body>\n          <Nav pills fill>\n            {Object.entries(sections).map(([ section, props ]) =>\n              <VisitsNavLink key={section} {...props} to={buildSectionUrl(props.subPath)} />)}\n          </Nav>\n        </Card>\n        <Row>\n          <Switch>\n            <Route exact path={baseUrl}>\n              <div className=\"col-12 mt-3\">\n                <LineChartCard\n                  title=\"Visits during time\"\n                  visits={normalizedVisits}\n                  highlightedVisits={highlightedVisits}\n                  highlightedLabel={highlightedLabel}\n                  setSelectedVisits={setSelectedVisits}\n                />\n              </div>\n            </Route>\n\n            <Route exact path={`${baseUrl}${sections.byContext.subPath}`}>\n              <div className={classNames('mt-3 col-lg-6', { 'col-xl-4': !isOrphanVisits })}>\n                <DoughnutChartCard title=\"Operating systems\" stats={os} />\n              </div>\n              <div className={classNames('mt-3 col-lg-6', { 'col-xl-4': !isOrphanVisits })}>\n                <DoughnutChartCard title=\"Browsers\" stats={browsers} />\n              </div>\n              <div className={classNames('mt-3', { 'col-xl-4': !isOrphanVisits, 'col-lg-6': isOrphanVisits })}>\n                <SortableBarChartCard\n                  title=\"Referrers\"\n                  stats={referrers}\n                  withPagination={false}\n                  highlightedStats={highlightedVisitsToStats(highlightedVisits, 'referer')}\n                  highlightedLabel={highlightedLabel}\n                  sortingItems={{\n                    name: 'Referrer name',\n                    amount: 'Visits amount',\n                  }}\n                  onClick={highlightVisitsForProp('referer')}\n                />\n              </div>\n              {isOrphanVisits && (\n                <div className=\"mt-3 col-lg-6\">\n                  <SortableBarChartCard\n                    title=\"Visited URLs\"\n                    stats={visitedUrls}\n                    highlightedLabel={highlightedLabel}\n                    highlightedStats={highlightedVisitsToStats(highlightedVisits, 'visitedUrl')}\n                    sortingItems={{\n                      visitedUrl: 'Visited URL',\n                      amount: 'Visits amount',\n                    }}\n                    onClick={highlightVisitsForProp('visitedUrl')}\n                  />\n                </div>\n              )}\n            </Route>\n\n            <Route exact path={`${baseUrl}${sections.byLocation.subPath}`}>\n              <div className=\"col-lg-6 mt-3\">\n                <SortableBarChartCard\n                  title=\"Countries\"\n                  stats={countries}\n                  highlightedStats={highlightedVisitsToStats(highlightedVisits, 'country')}\n                  highlightedLabel={highlightedLabel}\n                  sortingItems={{\n                    name: 'Country name',\n                    amount: 'Visits amount',\n                  }}\n                  onClick={highlightVisitsForProp('country')}\n                />\n              </div>\n              <div className=\"col-lg-6 mt-3\">\n                <SortableBarChartCard\n                  title=\"Cities\"\n                  stats={cities}\n                  highlightedStats={highlightedVisitsToStats(highlightedVisits, 'city')}\n                  highlightedLabel={highlightedLabel}\n                  extraHeaderContent={(activeCities: string[]) =>\n                    mapLocations.length > 0 &&\n                    <OpenMapModalBtn modalTitle=\"Cities\" locations={mapLocations} activeCities={activeCities} />\n                  }\n                  sortingItems={{\n                    name: 'City name',\n                    amount: 'Visits amount',\n                  }}\n                  onClick={highlightVisitsForProp('city')}\n                />\n              </div>\n            </Route>\n\n            <Route exact path={`${baseUrl}${sections.list.subPath}`}>\n              <div className=\"col-12\">\n                <VisitsTable\n                  visits={normalizedVisits}\n                  selectedVisits={highlightedVisits}\n                  setSelectedVisits={setSelectedVisits}\n                  isOrphanVisits={isOrphanVisits}\n                  selectedServer={selectedServer}\n                />\n              </div>\n            </Route>\n\n            <Redirect to={baseUrl} />\n          </Switch>\n        </Row>\n      </>\n    );\n  };\n\n  return (\n    <>\n      {children}\n\n      <section className=\"mt-3\">\n        <div className=\"row flex-md-row-reverse\">\n          <div className=\"col-lg-7 col-xl-6\">\n            <div className=\"d-md-flex\">\n              <div className=\"flex-fill\">\n                <DateRangeSelector\n                  disabled={loading}\n                  initialDateRange={initialInterval}\n                  defaultText=\"All visits\"\n                  onDatesChange={setDateRange}\n                />\n              </div>\n              <VisitsFilterDropdown\n                className=\"ml-0 ml-md-2 mt-3 mt-md-0\"\n                isOrphanVisits={isOrphanVisits}\n                botsSupported={botsSupported}\n                selected={visitsFilter}\n                onChange={setVisitsFilter}\n              />\n            </div>\n          </div>\n          {visits.length > 0 && (\n            <div className=\"col-lg-5 col-xl-6 mt-3 mt-lg-0\">\n              <div className=\"d-flex\">\n                <Button\n                  outline\n                  disabled={highlightedVisits.length === 0}\n                  className=\"btn-md-block mr-2\"\n                  onClick={() => setSelectedVisits([])}\n                >\n                  Clear selection {highlightedVisits.length > 0 && <>({highlightedVisits.length})</>}\n                </Button>\n                <Button\n                  outline\n                  color=\"primary\"\n                  className=\"btn-md-block\"\n                  onClick={() => exportCsv(normalizedVisits)}\n                >\n                  <FontAwesomeIcon icon={faFileDownload} /> Export ({normalizedVisits.length})\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </section>\n\n      <section className=\"mt-3\">\n        {renderVisitsContent()}\n      </section>\n    </>\n  );\n};\n\nexport default VisitsStats;\n","import { isNil } from 'ramda';\nimport { ShortUrl } from '../data';\nimport { OptionalString } from '../../utils/utils';\n\nexport const shortUrlMatches = (shortUrl: ShortUrl, shortCode: string, domain: OptionalString): boolean => {\n  if (isNil(domain)) {\n    return shortUrl.shortCode === shortCode && !shortUrl.domain;\n  }\n\n  return shortUrl.shortCode === shortCode && shortUrl.domain === domain;\n};\n","import { Action } from 'redux';\nimport { CreateVisit } from '../types';\n\nexport const CREATE_VISITS = 'shlink/visitCreation/CREATE_VISITS';\n\nexport interface CreateVisitsAction extends Action<typeof CREATE_VISITS> {\n  createdVisits: CreateVisit[];\n}\n\nexport const createNewVisits = (createdVisits: CreateVisit[]): CreateVisitsAction => ({\n  type: CREATE_VISITS,\n  createdVisits,\n});\n","import { AxiosError } from 'axios';\nimport { InvalidArgumentError, InvalidShortUrlDeletion, ProblemDetailsError } from '../types';\n\nexport const parseApiError = (e: AxiosError<ProblemDetailsError>) => e.response?.data;\n\nexport const isInvalidArgumentError = (error?: ProblemDetailsError): error is InvalidArgumentError =>\n  error?.type === 'INVALID_ARGUMENT';\n\nexport const isInvalidDeletionError = (error?: ProblemDetailsError): error is InvalidShortUrlDeletion =>\n  error?.type === 'INVALID_SHORTCODE_DELETION';\n","import { Action, Dispatch } from 'redux';\nimport { buildActionCreator, buildReducer } from '../../utils/helpers/redux';\nimport { ProblemDetailsError } from '../../api/types';\nimport { GetState } from '../../container/types';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { parseApiError } from '../../api/utils';\nimport { ApiErrorAction } from '../../api/types/actions';\n\n/* eslint-disable padding-line-between-statements */\nexport const DELETE_SHORT_URL_START = 'shlink/deleteShortUrl/DELETE_SHORT_URL_START';\nexport const DELETE_SHORT_URL_ERROR = 'shlink/deleteShortUrl/DELETE_SHORT_URL_ERROR';\nexport const SHORT_URL_DELETED = 'shlink/deleteShortUrl/SHORT_URL_DELETED';\nexport const RESET_DELETE_SHORT_URL = 'shlink/deleteShortUrl/RESET_DELETE_SHORT_URL';\n/* eslint-enable padding-line-between-statements */\n\nexport interface ShortUrlDeletion {\n  shortCode: string;\n  loading: boolean;\n  error: boolean;\n  errorData?: ProblemDetailsError;\n}\n\nexport interface DeleteShortUrlAction extends Action<string> {\n  shortCode: string;\n  domain?: string | null;\n}\n\nconst initialState: ShortUrlDeletion = {\n  shortCode: '',\n  loading: false,\n  error: false,\n};\n\nexport default buildReducer<ShortUrlDeletion, DeleteShortUrlAction & ApiErrorAction>({\n  [DELETE_SHORT_URL_START]: (state) => ({ ...state, loading: true, error: false }),\n  [DELETE_SHORT_URL_ERROR]: (state, { errorData }) => ({ ...state, errorData, loading: false, error: true }),\n  [SHORT_URL_DELETED]: (state, { shortCode }) => ({ ...state, shortCode, loading: false, error: false }),\n  [RESET_DELETE_SHORT_URL]: () => initialState,\n}, initialState);\n\nexport const deleteShortUrl = (buildShlinkApiClient: ShlinkApiClientBuilder) => (\n  shortCode: string,\n  domain?: string | null,\n) => async (dispatch: Dispatch, getState: GetState) => {\n  dispatch({ type: DELETE_SHORT_URL_START });\n  const { deleteShortUrl } = buildShlinkApiClient(getState);\n\n  try {\n    await deleteShortUrl(shortCode, domain);\n    dispatch<DeleteShortUrlAction>({ type: SHORT_URL_DELETED, shortCode, domain });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: DELETE_SHORT_URL_ERROR, errorData: parseApiError(e) });\n\n    throw e;\n  }\n};\n\nexport const resetDeleteShortUrl = buildActionCreator(RESET_DELETE_SHORT_URL);\n","import { Action, Dispatch } from 'redux';\nimport { GetState } from '../../container/types';\nimport { ShortUrl, ShortUrlData } from '../data';\nimport { buildReducer, buildActionCreator } from '../../utils/helpers/redux';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { ProblemDetailsError } from '../../api/types';\nimport { parseApiError } from '../../api/utils';\nimport { ApiErrorAction } from '../../api/types/actions';\n\n/* eslint-disable padding-line-between-statements */\nexport const CREATE_SHORT_URL_START = 'shlink/createShortUrl/CREATE_SHORT_URL_START';\nexport const CREATE_SHORT_URL_ERROR = 'shlink/createShortUrl/CREATE_SHORT_URL_ERROR';\nexport const CREATE_SHORT_URL = 'shlink/createShortUrl/CREATE_SHORT_URL';\nexport const RESET_CREATE_SHORT_URL = 'shlink/createShortUrl/RESET_CREATE_SHORT_URL';\n/* eslint-enable padding-line-between-statements */\n\nexport interface ShortUrlCreation {\n  result: ShortUrl | null;\n  saving: boolean;\n  error: boolean;\n  errorData?: ProblemDetailsError;\n}\n\nexport interface CreateShortUrlAction extends Action<string> {\n  result: ShortUrl;\n}\n\nconst initialState: ShortUrlCreation = {\n  result: null,\n  saving: false,\n  error: false,\n};\n\nexport default buildReducer<ShortUrlCreation, CreateShortUrlAction & ApiErrorAction>({\n  [CREATE_SHORT_URL_START]: (state) => ({ ...state, saving: true, error: false }),\n  [CREATE_SHORT_URL_ERROR]: (state, { errorData }) => ({ ...state, saving: false, error: true, errorData }),\n  [CREATE_SHORT_URL]: (_, { result }) => ({ result, saving: false, error: false }),\n  [RESET_CREATE_SHORT_URL]: () => initialState,\n}, initialState);\n\nexport const createShortUrl = (buildShlinkApiClient: ShlinkApiClientBuilder) => (data: ShortUrlData) => async (\n  dispatch: Dispatch,\n  getState: GetState,\n) => {\n  dispatch({ type: CREATE_SHORT_URL_START });\n  const { createShortUrl } = buildShlinkApiClient(getState);\n\n  try {\n    const result = await createShortUrl(data);\n\n    dispatch<CreateShortUrlAction>({ type: CREATE_SHORT_URL, result });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: CREATE_SHORT_URL_ERROR, errorData: parseApiError(e) });\n\n    throw e;\n  }\n};\n\nexport const resetCreateShortUrl = buildActionCreator(RESET_CREATE_SHORT_URL);\n","import { Action, Dispatch } from 'redux';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { GetState } from '../../container/types';\nimport { OptionalString } from '../../utils/utils';\nimport { EditShortUrlData, ShortUrl } from '../data';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { ProblemDetailsError } from '../../api/types';\nimport { parseApiError } from '../../api/utils';\nimport { supportsTagsInPatch } from '../../utils/helpers/features';\nimport { ApiErrorAction } from '../../api/types/actions';\n\n/* eslint-disable padding-line-between-statements */\nexport const EDIT_SHORT_URL_START = 'shlink/shortUrlEdition/EDIT_SHORT_URL_START';\nexport const EDIT_SHORT_URL_ERROR = 'shlink/shortUrlEdition/EDIT_SHORT_URL_ERROR';\nexport const SHORT_URL_EDITED = 'shlink/shortUrlEdition/SHORT_URL_EDITED';\n/* eslint-enable padding-line-between-statements */\n\nexport interface ShortUrlEdition {\n  shortUrl?: ShortUrl;\n  saving: boolean;\n  error: boolean;\n  errorData?: ProblemDetailsError;\n}\n\nexport interface ShortUrlEditedAction extends Action<string> {\n  shortUrl: ShortUrl;\n}\n\nconst initialState: ShortUrlEdition = {\n  saving: false,\n  error: false,\n};\n\nexport default buildReducer<ShortUrlEdition, ShortUrlEditedAction & ApiErrorAction>({\n  [EDIT_SHORT_URL_START]: (state) => ({ ...state, saving: true, error: false }),\n  [EDIT_SHORT_URL_ERROR]: (state, { errorData }) => ({ ...state, saving: false, error: true, errorData }),\n  [SHORT_URL_EDITED]: (_, { shortUrl }) => ({ shortUrl, saving: false, error: false }),\n}, initialState);\n\nexport const editShortUrl = (buildShlinkApiClient: ShlinkApiClientBuilder) => (\n  shortCode: string,\n  domain: OptionalString,\n  data: EditShortUrlData,\n) => async (dispatch: Dispatch, getState: GetState) => {\n  dispatch({ type: EDIT_SHORT_URL_START });\n\n  const { selectedServer } = getState();\n  const sendTagsSeparately = !supportsTagsInPatch(selectedServer);\n  const { updateShortUrl, updateShortUrlTags } = buildShlinkApiClient(getState);\n\n  try {\n    const [ shortUrl ] = await Promise.all([\n      updateShortUrl(shortCode, domain, data as any), // FIXME Parse dates\n      sendTagsSeparately && data.tags ? updateShortUrlTags(shortCode, domain, data.tags) : undefined,\n    ]);\n\n    dispatch<ShortUrlEditedAction>({ shortUrl, type: SHORT_URL_EDITED });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: EDIT_SHORT_URL_ERROR, errorData: parseApiError(e) });\n\n    throw e;\n  }\n};\n","import { assoc, assocPath, init, last, pipe, reject } from 'ramda';\nimport { Action, Dispatch } from 'redux';\nimport { shortUrlMatches } from '../helpers';\nimport { CREATE_VISITS, CreateVisitsAction } from '../../visits/reducers/visitCreation';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { GetState } from '../../container/types';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { ShlinkShortUrlsResponse } from '../../api/types';\nimport { DeleteShortUrlAction, SHORT_URL_DELETED } from './shortUrlDeletion';\nimport { ShortUrlsListParams } from './shortUrlsListParams';\nimport { CREATE_SHORT_URL, CreateShortUrlAction } from './shortUrlCreation';\nimport { SHORT_URL_EDITED, ShortUrlEditedAction } from './shortUrlEdition';\n\n/* eslint-disable padding-line-between-statements */\nexport const LIST_SHORT_URLS_START = 'shlink/shortUrlsList/LIST_SHORT_URLS_START';\nexport const LIST_SHORT_URLS_ERROR = 'shlink/shortUrlsList/LIST_SHORT_URLS_ERROR';\nexport const LIST_SHORT_URLS = 'shlink/shortUrlsList/LIST_SHORT_URLS';\n/* eslint-enable padding-line-between-statements */\n\nexport interface ShortUrlsList {\n  shortUrls?: ShlinkShortUrlsResponse;\n  loading: boolean;\n  error: boolean;\n}\n\nexport interface ListShortUrlsAction extends Action<string> {\n  shortUrls: ShlinkShortUrlsResponse;\n  params: ShortUrlsListParams;\n}\n\nexport type ListShortUrlsCombinedAction = (\n  ListShortUrlsAction\n  & CreateVisitsAction\n  & CreateShortUrlAction\n  & DeleteShortUrlAction\n  & ShortUrlEditedAction\n);\n\nconst initialState: ShortUrlsList = {\n  loading: true,\n  error: false,\n};\n\nexport default buildReducer<ShortUrlsList, ListShortUrlsCombinedAction>({\n  [LIST_SHORT_URLS_START]: (state) => ({ ...state, loading: true, error: false }),\n  [LIST_SHORT_URLS_ERROR]: () => ({ loading: false, error: true }),\n  [LIST_SHORT_URLS]: (_, { shortUrls }) => ({ loading: false, error: false, shortUrls }),\n  [SHORT_URL_DELETED]: pipe(\n    (state: ShortUrlsList, { shortCode, domain }: DeleteShortUrlAction) => !state.shortUrls ? state : assocPath(\n      [ 'shortUrls', 'data' ],\n      reject((shortUrl) => shortUrlMatches(shortUrl, shortCode, domain), state.shortUrls.data),\n      state,\n    ),\n    (state) => !state.shortUrls ? state : assocPath(\n      [ 'shortUrls', 'pagination', 'totalItems' ],\n      state.shortUrls.pagination.totalItems - 1,\n      state,\n    ),\n  ),\n  [CREATE_VISITS]: (state, { createdVisits }) => assocPath(\n    [ 'shortUrls', 'data' ],\n    state.shortUrls?.data?.map(\n      (currentShortUrl) => {\n        // Find the last of the new visit for this short URL, and pick the amount of visits from it\n        const lastVisit = last(\n          createdVisits.filter(\n            ({ shortUrl }) => shortUrl && shortUrlMatches(currentShortUrl, shortUrl.shortCode, shortUrl.domain),\n          ),\n        );\n\n        return lastVisit?.shortUrl\n          ? assoc('visitsCount', lastVisit.shortUrl.visitsCount, currentShortUrl)\n          : currentShortUrl;\n      },\n    ),\n    state,\n  ),\n  [CREATE_SHORT_URL]: pipe(\n    // The only place where the list and the creation form coexist is the overview page.\n    // There we can assume we are displaying page 1, and therefore, we can safely prepend the new short URL and remove the last one.\n    (state: ShortUrlsList, { result }: CreateShortUrlAction) => !state.shortUrls ? state : assocPath(\n      [ 'shortUrls', 'data' ],\n      [ result, ...init(state.shortUrls.data) ],\n      state,\n    ),\n    (state: ShortUrlsList) => !state.shortUrls ? state : assocPath(\n      [ 'shortUrls', 'pagination', 'totalItems' ],\n      state.shortUrls.pagination.totalItems + 1,\n      state,\n    ),\n  ),\n  [SHORT_URL_EDITED]: (state, { shortUrl: editedShortUrl }) => !state.shortUrls ? state : assocPath(\n    [ 'shortUrls', 'data' ],\n    state.shortUrls.data.map((shortUrl) => {\n      const { shortCode, domain } = editedShortUrl;\n\n      return shortUrlMatches(shortUrl, shortCode, domain) ? editedShortUrl : shortUrl;\n    }),\n    state,\n  ),\n}, initialState);\n\nexport const listShortUrls = (buildShlinkApiClient: ShlinkApiClientBuilder) => (\n  params: ShortUrlsListParams = {},\n) => async (dispatch: Dispatch, getState: GetState) => {\n  dispatch({ type: LIST_SHORT_URLS_START });\n  const { listShortUrls } = buildShlinkApiClient(getState);\n\n  try {\n    const shortUrls = await listShortUrls(params);\n\n    dispatch<ListShortUrlsAction>({ type: LIST_SHORT_URLS, shortUrls, params });\n  } catch (e) {\n    dispatch({ type: LIST_SHORT_URLS_ERROR, params });\n  }\n};\n","import { buildActionCreator, buildReducer } from '../../utils/helpers/redux';\nimport { OrderDir } from '../../utils/utils';\nimport { LIST_SHORT_URLS, ListShortUrlsAction } from './shortUrlsList';\n\nexport const RESET_SHORT_URL_PARAMS = 'shlink/shortUrlsListParams/RESET_SHORT_URL_PARAMS';\n\nexport const SORTABLE_FIELDS = {\n  dateCreated: 'Created at',\n  shortCode: 'Short URL',\n  longUrl: 'Long URL',\n  title: 'Title',\n  visits: 'Visits',\n};\n\nexport type OrderableFields = keyof typeof SORTABLE_FIELDS;\n\nexport type OrderBy = Partial<Record<OrderableFields, OrderDir>>;\n\nexport interface ShortUrlsListParams {\n  page?: string;\n  itemsPerPage?: number;\n  tags?: string[];\n  searchTerm?: string;\n  startDate?: string;\n  endDate?: string;\n  orderBy?: OrderBy;\n}\n\nconst initialState: ShortUrlsListParams = {\n  page: '1',\n  orderBy: { dateCreated: 'DESC' },\n};\n\nexport default buildReducer<ShortUrlsListParams, ListShortUrlsAction>({\n  [LIST_SHORT_URLS]: (state, { params }) => ({ ...state, ...params }),\n  [RESET_SHORT_URL_PARAMS]: () => initialState,\n}, initialState);\n\nexport const resetShortUrlParams = buildActionCreator(RESET_SHORT_URL_PARAMS);\n","const TEN_ROUNDING_NUMBER = 10;\nconst { ceil } = Math;\nconst formatter = new Intl.NumberFormat('en-US');\n\nexport const prettify = (number: number | string) => formatter.format(Number(number));\n\nexport const roundTen = (number: number) => ceil(number / TEN_ROUNDING_NUMBER) * TEN_ROUNDING_NUMBER;\n","import { max, min, range } from 'ramda';\nimport { prettify } from './numbers';\n\nconst DELTA = 2;\n\nexport const ELLIPSIS = '...';\n\ntype Ellipsis = typeof ELLIPSIS;\n\nexport type NumberOrEllipsis = number | Ellipsis;\n\nexport const progressivePagination = (currentPage: number, pageCount: number): NumberOrEllipsis[] => {\n  const pages: NumberOrEllipsis[] = range(\n    max(DELTA, currentPage - DELTA),\n    min(pageCount - 1, currentPage + DELTA) + 1,\n  );\n\n  if (currentPage - DELTA > DELTA) {\n    pages.unshift(ELLIPSIS);\n  }\n  if (currentPage + DELTA < pageCount - 1) {\n    pages.push(ELLIPSIS);\n  }\n\n  pages.unshift(1);\n  pages.push(pageCount);\n\n  return pages;\n};\n\nexport const pageIsEllipsis = (pageNumber: NumberOrEllipsis): pageNumber is Ellipsis => pageNumber === ELLIPSIS;\n\nexport const prettifyPageNumber = (pageNumber: NumberOrEllipsis): string =>\n  pageIsEllipsis(pageNumber) ? pageNumber : prettify(pageNumber);\n\nexport const keyForPage = (pageNumber: NumberOrEllipsis, index: number) => !pageIsEllipsis(pageNumber) ? `${pageNumber}` : `${pageNumber}_${index}`;\n","import { Link } from 'react-router-dom';\nimport { Pagination, PaginationItem, PaginationLink } from 'reactstrap';\nimport { pageIsEllipsis, keyForPage, progressivePagination, prettifyPageNumber } from '../utils/helpers/pagination';\nimport { ShlinkPaginator } from '../api/types';\n\ninterface PaginatorProps {\n  paginator?: ShlinkPaginator;\n  serverId: string;\n}\n\nconst Paginator = ({ paginator, serverId }: PaginatorProps) => {\n  const { currentPage = 0, pagesCount = 0 } = paginator ?? {};\n\n  if (pagesCount <= 1) {\n    return null;\n  }\n\n  const renderPages = () =>\n    progressivePagination(currentPage, pagesCount).map((pageNumber, index) => (\n      <PaginationItem\n        key={keyForPage(pageNumber, index)}\n        disabled={pageIsEllipsis(pageNumber)}\n        active={currentPage === pageNumber}\n      >\n        <PaginationLink\n          tag={Link}\n          to={`/server/${serverId}/list-short-urls/${pageNumber}`}\n        >\n          {prettifyPageNumber(pageNumber)}\n        </PaginationLink>\n      </PaginationItem>\n    ));\n\n  return (\n    <Pagination className=\"sticky-card-paginator\" listClassName=\"flex-wrap justify-content-center mb-0\">\n      <PaginationItem disabled={currentPage === 1}>\n        <PaginationLink\n          previous\n          tag={Link}\n          to={`/server/${serverId}/list-short-urls/${currentPage - 1}`}\n        />\n      </PaginationItem>\n      {renderPages()}\n      <PaginationItem disabled={currentPage >= pagesCount}>\n        <PaginationLink\n          next\n          tag={Link}\n          to={`/server/${serverId}/list-short-urls/${currentPage + 1}`}\n        />\n      </PaginationItem>\n    </Pagination>\n  );\n};\n\nexport default Paginator;\n","import { faCaretDown as caretDownIcon, faCaretUp as caretUpIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { head, keys, values } from 'ramda';\nimport { FC, useEffect, useState } from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { Card } from 'reactstrap';\nimport SortingDropdown from '../utils/SortingDropdown';\nimport { determineOrderDir, OrderDir } from '../utils/utils';\nimport { getServerId, SelectedServer } from '../servers/data';\nimport { boundToMercureHub } from '../mercure/helpers/boundToMercureHub';\nimport { parseQuery } from '../utils/helpers/query';\nimport { Topics } from '../mercure/helpers/Topics';\nimport { ShortUrlsList as ShortUrlsListState } from './reducers/shortUrlsList';\nimport { OrderableFields, ShortUrlsListParams, SORTABLE_FIELDS } from './reducers/shortUrlsListParams';\nimport { ShortUrlsTableProps } from './ShortUrlsTable';\nimport Paginator from './Paginator';\nimport './ShortUrlsList.scss';\n\ninterface RouteParams {\n  page: string;\n  serverId: string;\n}\n\nexport interface ShortUrlsListProps extends RouteComponentProps<RouteParams> {\n  selectedServer: SelectedServer;\n  shortUrlsList: ShortUrlsListState;\n  listShortUrls: (params: ShortUrlsListParams) => void;\n  shortUrlsListParams: ShortUrlsListParams;\n  resetShortUrlParams: () => void;\n}\n\nconst ShortUrlsList = (ShortUrlsTable: FC<ShortUrlsTableProps>) => boundToMercureHub(({\n  listShortUrls,\n  resetShortUrlParams,\n  shortUrlsListParams,\n  match,\n  location,\n  shortUrlsList,\n  selectedServer,\n}: ShortUrlsListProps) => {\n  const { orderBy } = shortUrlsListParams;\n  const [ order, setOrder ] = useState<{ orderField?: OrderableFields; orderDir?: OrderDir }>({\n    orderField: orderBy && (head(keys(orderBy)) as OrderableFields),\n    orderDir: orderBy && head(values(orderBy)),\n  });\n  const { pagination } = shortUrlsList?.shortUrls ?? {};\n  const refreshList = (extraParams: ShortUrlsListParams) => listShortUrls({ ...shortUrlsListParams, ...extraParams });\n  const handleOrderBy = (orderField?: OrderableFields, orderDir?: OrderDir) => {\n    setOrder({ orderField, orderDir });\n    refreshList({ orderBy: orderField ? { [orderField]: orderDir } : undefined });\n  };\n  const orderByColumn = (field: OrderableFields) => () =>\n    handleOrderBy(field, determineOrderDir(field, order.orderField, order.orderDir));\n  const renderOrderIcon = (field: OrderableFields) => {\n    if (order.orderField !== field) {\n      return null;\n    }\n\n    if (!order.orderDir) {\n      return null;\n    }\n\n    return (\n      <FontAwesomeIcon\n        icon={order.orderDir === 'ASC' ? caretUpIcon : caretDownIcon}\n        className=\"short-urls-list__header-icon\"\n      />\n    );\n  };\n\n  useEffect(() => {\n    const { tag } = parseQuery<{ tag?: string }>(location.search);\n    const tags = tag ? [ decodeURIComponent(tag) ] : shortUrlsListParams.tags;\n\n    refreshList({ page: match.params.page, tags, itemsPerPage: undefined });\n\n    return resetShortUrlParams;\n  }, []);\n\n  return (\n    <>\n      <div className=\"d-block d-lg-none mb-3\">\n        <SortingDropdown\n          items={SORTABLE_FIELDS}\n          orderField={order.orderField}\n          orderDir={order.orderDir}\n          onChange={handleOrderBy}\n        />\n      </div>\n      <Card body className=\"pb-1\">\n        <ShortUrlsTable\n          orderByColumn={orderByColumn}\n          renderOrderIcon={renderOrderIcon}\n          selectedServer={selectedServer}\n          shortUrlsList={shortUrlsList}\n          onTagClick={(tag) => refreshList({ tags: [ ...shortUrlsListParams.tags ?? [], tag ] })}\n        />\n        <Paginator paginator={pagination} serverId={getServerId(selectedServer)} />\n      </Card>\n    </>\n  );\n}, () => [ Topics.visits ]);\n\nexport default ShortUrlsList;\n","import { FC } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCopy as copyIcon } from '@fortawesome/free-regular-svg-icons';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport './CopyToClipboardIcon.scss';\n\ninterface CopyToClipboardIconProps {\n  text: string;\n  onCopy?: (text: string, result: boolean) => void;\n}\n\nexport const CopyToClipboardIcon: FC<CopyToClipboardIconProps> = ({ text, onCopy }) => (\n  <CopyToClipboard text={text} onCopy={onCopy}>\n    <FontAwesomeIcon icon={copyIcon} className=\"ml-2 copy-to-clipboard-icon\" />\n  </CopyToClipboard>\n);\n","import { parseISO, format as formatDate, getUnixTime, formatDistance } from 'date-fns';\nimport { isDateObject } from './helpers/date';\n\nexport interface DateProps {\n  date: Date | string;\n  format?: string;\n  relative?: boolean;\n}\n\nexport const Time = ({ date, format = 'yyyy-MM-dd HH:mm', relative = false }: DateProps) => {\n  const dateObject = isDateObject(date) ? date : parseISO(date);\n\n  return (\n    <time dateTime={`${getUnixTime(dateObject)}000`}>\n      {relative ? `${formatDistance(new Date(), dateObject)} ago` : formatDate(dateObject, format)}\n    </time>\n  );\n};\n","import { FC } from 'react';\nimport { Link } from 'react-router-dom';\nimport { isServerWithId, SelectedServer, ServerWithId } from '../../servers/data';\nimport { ShortUrl } from '../data';\n\nexport type LinkSuffix = 'visits' | 'edit';\n\nexport interface ShortUrlDetailLinkProps {\n  shortUrl?: ShortUrl | null;\n  selectedServer?: SelectedServer;\n  suffix: LinkSuffix;\n}\n\nconst buildUrl = ({ id }: ServerWithId, { shortCode, domain }: ShortUrl, suffix: LinkSuffix) => {\n  const query = domain ? `?domain=${domain}` : '';\n\n  return `/server/${id}/short-code/${shortCode}/${suffix}${query}`;\n};\n\nconst ShortUrlDetailLink: FC<ShortUrlDetailLinkProps & Record<string | number, any>> = (\n  { selectedServer, shortUrl, suffix, children, ...rest },\n) => {\n  if (!selectedServer || !isServerWithId(selectedServer) || !shortUrl) {\n    return <span {...rest}>{children}</span>;\n  }\n\n  return <Link to={buildUrl(selectedServer, shortUrl, suffix)} {...rest}>{children}</Link>;\n};\n\nexport default ShortUrlDetailLink;\n","import { useRef } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faInfoCircle as infoIcon } from '@fortawesome/free-solid-svg-icons';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport classNames from 'classnames';\nimport { prettify } from '../../utils/helpers/numbers';\nimport { ShortUrl } from '../data';\nimport { SelectedServer } from '../../servers/data';\nimport ShortUrlDetailLink from './ShortUrlDetailLink';\nimport './ShortUrlVisitsCount.scss';\n\ninterface ShortUrlVisitsCountProps {\n  shortUrl?: ShortUrl | null;\n  selectedServer?: SelectedServer;\n  visitsCount: number;\n  active?: boolean;\n}\n\nconst ShortUrlVisitsCount = ({ visitsCount, shortUrl, selectedServer, active = false }: ShortUrlVisitsCountProps) => {\n  const maxVisits = shortUrl?.meta?.maxVisits;\n  const visitsLink = (\n    <ShortUrlDetailLink selectedServer={selectedServer} shortUrl={shortUrl} suffix=\"visits\">\n      <strong\n        className={classNames('short-url-visits-count__amount', { 'short-url-visits-count__amount--big': active })}\n      >\n        {prettify(visitsCount)}\n      </strong>\n    </ShortUrlDetailLink>\n  );\n\n  if (!maxVisits) {\n    return visitsLink;\n  }\n\n  const prettifiedMaxVisits = prettify(maxVisits);\n  const tooltipRef = useRef<HTMLElement | null>();\n\n  return (\n    <>\n      <span className=\"indivisible\">\n        {visitsLink}\n        <small\n          className=\"short-urls-visits-count__max-visits-control\"\n          ref={(el) => {\n            tooltipRef.current = el;\n          }}\n        >\n          {' '}/ {prettifiedMaxVisits}{' '}\n          <sup>\n            <FontAwesomeIcon icon={infoIcon} />\n          </sup>\n        </small>\n      </span>\n      <UncontrolledTooltip target={(() => tooltipRef.current) as any} placement=\"bottom\">\n        This short URL will not accept more than <b>{prettifiedMaxVisits}</b> visits.\n      </UncontrolledTooltip>\n    </>\n  );\n};\n\nexport default ShortUrlVisitsCount;\n","import { FC, useEffect, useRef } from 'react';\nimport { isEmpty } from 'ramda';\nimport { ExternalLink } from 'react-external-link';\nimport ColorGenerator from '../../utils/services/ColorGenerator';\nimport { StateFlagTimeout } from '../../utils/helpers/hooks';\nimport Tag from '../../tags/helpers/Tag';\nimport { SelectedServer } from '../../servers/data';\nimport { CopyToClipboardIcon } from '../../utils/CopyToClipboardIcon';\nimport { ShortUrl } from '../data';\nimport { Time } from '../../utils/Time';\nimport ShortUrlVisitsCount from './ShortUrlVisitsCount';\nimport { ShortUrlsRowMenuProps } from './ShortUrlsRowMenu';\nimport './ShortUrlsRow.scss';\n\nexport interface ShortUrlsRowProps {\n  onTagClick?: (tag: string) => void;\n  selectedServer: SelectedServer;\n  shortUrl: ShortUrl;\n}\n\nconst ShortUrlsRow = (\n  ShortUrlsRowMenu: FC<ShortUrlsRowMenuProps>,\n  colorGenerator: ColorGenerator,\n  useStateFlagTimeout: StateFlagTimeout,\n) => ({ shortUrl, selectedServer, onTagClick }: ShortUrlsRowProps) => {\n  const [ copiedToClipboard, setCopiedToClipboard ] = useStateFlagTimeout();\n  const [ active, setActive ] = useStateFlagTimeout(false, 500);\n  const isFirstRun = useRef(true);\n\n  const renderTags = (tags: string[]) => {\n    if (isEmpty(tags)) {\n      return <i className=\"indivisible\"><small>No tags</small></i>;\n    }\n\n    return tags.map((tag) => (\n      <Tag\n        colorGenerator={colorGenerator}\n        key={tag}\n        text={tag}\n        onClick={() => onTagClick?.(tag)}\n      />\n    ));\n  };\n\n  useEffect(() => {\n    if (isFirstRun.current) {\n      isFirstRun.current = false;\n    } else {\n      setActive();\n    }\n  }, [ shortUrl.visitsCount ]);\n\n  return (\n    <tr className=\"responsive-table__row\">\n      <td className=\"indivisible short-urls-row__cell responsive-table__cell\" data-th=\"Created at\">\n        <Time date={shortUrl.dateCreated} />\n      </td>\n      <td className=\"responsive-table__cell short-urls-row__cell\" data-th=\"Short URL\">\n        <span className=\"indivisible short-urls-row__cell--relative\">\n          <ExternalLink href={shortUrl.shortUrl} />\n          <CopyToClipboardIcon text={shortUrl.shortUrl} onCopy={setCopiedToClipboard} />\n          <span className=\"badge badge-warning short-urls-row__copy-hint\" hidden={!copiedToClipboard}>\n            Copied short URL!\n          </span>\n        </span>\n      </td>\n      <td className=\"responsive-table__cell short-urls-row__cell short-urls-row__cell--break\" data-th={`${shortUrl.title ? 'Title' : 'Long URL'}`}>\n        <ExternalLink href={shortUrl.longUrl}>{shortUrl.title ?? shortUrl.longUrl}</ExternalLink>\n      </td>\n      {shortUrl.title && (\n        <td className=\"short-urls-row__cell responsive-table__cell short-urls-row__cell--break d-lg-none\" data-th=\"Long URL\">\n          <ExternalLink href={shortUrl.longUrl} />\n        </td>\n      )}\n      <td className=\"responsive-table__cell short-urls-row__cell\" data-th=\"Tags\">{renderTags(shortUrl.tags)}</td>\n      <td className=\"responsive-table__cell short-urls-row__cell text-lg-right\" data-th=\"Visits\">\n        <ShortUrlVisitsCount\n          visitsCount={shortUrl.visitsCount}\n          shortUrl={shortUrl}\n          selectedServer={selectedServer}\n          active={active}\n        />\n      </td>\n      <td className=\"responsive-table__cell short-urls-row__cell\">\n        <ShortUrlsRowMenu selectedServer={selectedServer} shortUrl={shortUrl} />\n      </td>\n    </tr>\n  );\n};\n\nexport default ShortUrlsRow;\n","import { FC } from 'react';\nimport { ButtonDropdown, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faEllipsisV as menuIcon } from '@fortawesome/free-solid-svg-icons';\nimport './DropdownBtnMenu.scss';\n\nexport interface DropdownBtnMenuProps {\n  isOpen: boolean;\n  toggle: () => void;\n  right?: boolean;\n}\n\nexport const DropdownBtnMenu: FC<DropdownBtnMenuProps> = ({ isOpen, toggle, children, right = true }) => (\n  <ButtonDropdown toggle={toggle} isOpen={isOpen}>\n    <DropdownToggle size=\"sm\" caret outline className=\"dropdown-btn-menu__dropdown-toggle\">\n      &nbsp;<FontAwesomeIcon icon={menuIcon} />&nbsp;\n    </DropdownToggle>\n    <DropdownMenu right={right}>{children}</DropdownMenu>\n  </ButtonDropdown>\n);\n","import {\n  faChartPie as pieChartIcon,\n  faQrcode as qrIcon,\n  faMinusCircle as deleteIcon,\n  faEdit as editIcon,\n} from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { FC } from 'react';\nimport { DropdownItem } from 'reactstrap';\nimport { useToggle } from '../../utils/helpers/hooks';\nimport { ShortUrl, ShortUrlModalProps } from '../data';\nimport { SelectedServer } from '../../servers/data';\nimport { DropdownBtnMenu } from '../../utils/DropdownBtnMenu';\nimport ShortUrlDetailLink from './ShortUrlDetailLink';\n\nexport interface ShortUrlsRowMenuProps {\n  selectedServer: SelectedServer;\n  shortUrl: ShortUrl;\n}\ntype ShortUrlModal = FC<ShortUrlModalProps>;\n\nconst ShortUrlsRowMenu = (\n  DeleteShortUrlModal: ShortUrlModal,\n  QrCodeModal: ShortUrlModal,\n) => ({ shortUrl, selectedServer }: ShortUrlsRowMenuProps) => {\n  const [ isOpen, toggle ] = useToggle();\n  const [ isQrModalOpen, toggleQrCode ] = useToggle();\n  const [ isDeleteModalOpen, toggleDelete ] = useToggle();\n\n  return (\n    <DropdownBtnMenu toggle={toggle} isOpen={isOpen}>\n      <DropdownItem tag={ShortUrlDetailLink} selectedServer={selectedServer} shortUrl={shortUrl} suffix=\"visits\">\n        <FontAwesomeIcon icon={pieChartIcon} fixedWidth /> Visit stats\n      </DropdownItem>\n\n      <DropdownItem tag={ShortUrlDetailLink} selectedServer={selectedServer} shortUrl={shortUrl} suffix=\"edit\">\n        <FontAwesomeIcon icon={editIcon} fixedWidth /> Edit short URL\n      </DropdownItem>\n\n      <DropdownItem onClick={toggleQrCode}>\n        <FontAwesomeIcon icon={qrIcon} fixedWidth /> QR code\n      </DropdownItem>\n      <QrCodeModal shortUrl={shortUrl} isOpen={isQrModalOpen} toggle={toggleQrCode} />\n\n      <DropdownItem divider />\n\n      <DropdownItem className=\"dropdown-item--danger\" onClick={toggleDelete}>\n        <FontAwesomeIcon icon={deleteIcon} fixedWidth /> Delete short URL\n      </DropdownItem>\n      <DeleteShortUrlModal shortUrl={shortUrl} isOpen={isDeleteModalOpen} toggle={toggleDelete} />\n    </DropdownBtnMenu>\n  );\n};\n\nexport default ShortUrlsRowMenu;\n","import { FC, useMemo } from 'react';\nimport { SelectedServer } from '../servers/data';\nimport { Settings, ShortUrlCreationSettings } from '../settings/reducers/settings';\nimport { ShortUrlData } from './data';\nimport { ShortUrlCreation } from './reducers/shortUrlCreation';\nimport { CreateShortUrlResultProps } from './helpers/CreateShortUrlResult';\nimport { ShortUrlFormProps } from './ShortUrlForm';\n\nexport interface CreateShortUrlProps {\n  basicMode?: boolean;\n}\n\ninterface CreateShortUrlConnectProps extends CreateShortUrlProps {\n  settings: Settings;\n  shortUrlCreationResult: ShortUrlCreation;\n  selectedServer: SelectedServer;\n  createShortUrl: (data: ShortUrlData) => Promise<void>;\n  resetCreateShortUrl: () => void;\n}\n\nconst getInitialState = (settings?: ShortUrlCreationSettings): ShortUrlData => ({\n  longUrl: '',\n  tags: [],\n  customSlug: '',\n  title: undefined,\n  shortCodeLength: undefined,\n  domain: '',\n  validSince: undefined,\n  validUntil: undefined,\n  maxVisits: undefined,\n  findIfExists: false,\n  validateUrl: settings?.validateUrls ?? false,\n  forwardQuery: settings?.forwardQuery ?? true,\n});\n\nconst CreateShortUrl = (ShortUrlForm: FC<ShortUrlFormProps>, CreateShortUrlResult: FC<CreateShortUrlResultProps>) => ({\n  createShortUrl,\n  shortUrlCreationResult,\n  resetCreateShortUrl,\n  selectedServer,\n  basicMode = false,\n  settings: { shortUrlCreation: shortUrlCreationSettings },\n}: CreateShortUrlConnectProps) => {\n  const initialState = useMemo(() => getInitialState(shortUrlCreationSettings), [ shortUrlCreationSettings ]);\n\n  return (\n    <>\n      <ShortUrlForm\n        initialState={initialState}\n        saving={shortUrlCreationResult.saving}\n        selectedServer={selectedServer}\n        mode={basicMode ? 'create-basic' : 'create'}\n        onSave={async (data: ShortUrlData) => {\n          resetCreateShortUrl();\n\n          return createShortUrl(data);\n        }}\n      />\n      <CreateShortUrlResult\n        {...shortUrlCreationResult}\n        resetCreateShortUrl={resetCreateShortUrl}\n        canBeClosed={basicMode}\n      />\n    </>\n  );\n};\n\nexport default CreateShortUrl;\n","import { FC } from 'react';\nimport { Row } from 'reactstrap';\nimport classNames from 'classnames';\nimport { SimpleCard } from './SimpleCard';\n\nexport type ResultType = 'success' | 'error' | 'warning';\n\nexport interface ResultProps {\n  type: ResultType;\n  className?: string;\n  small?: boolean;\n}\n\nexport const Result: FC<ResultProps> = ({ children, type, className, small = false }) => (\n  <Row className={className}>\n    <div className={classNames({ 'col-md-10 offset-md-1': !small, 'col-12': small })}>\n      <SimpleCard\n        className={classNames('text-center', {\n          'bg-main': type === 'success',\n          'bg-danger': type === 'error',\n          'bg-warning': type === 'warning',\n          'text-white': type !== 'warning',\n        })}\n        bodyClassName={classNames({ 'p-2': small })}\n      >\n        {children}\n      </SimpleCard>\n    </div>\n  </Row>\n);\n","import { ProblemDetailsError } from './types';\nimport { isInvalidArgumentError } from './utils';\n\nexport interface ShlinkApiErrorProps {\n  errorData?: ProblemDetailsError;\n  fallbackMessage?: string;\n}\n\nexport const ShlinkApiError = ({ errorData, fallbackMessage }: ShlinkApiErrorProps) => (\n  <>\n    {errorData?.detail ?? fallbackMessage}\n    {isInvalidArgumentError(errorData) &&\n      <p className=\"mb-0\">Invalid elements: [{errorData.invalidElements.join(', ')}]</p>\n    }\n  </>\n);\n","import { useEffect, useState } from 'react';\nimport { Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\nimport { identity, pipe } from 'ramda';\nimport { ShortUrlDeletion } from '../reducers/shortUrlDeletion';\nimport { ShortUrlModalProps } from '../data';\nimport { handleEventPreventingDefault, OptionalString } from '../../utils/utils';\nimport { Result } from '../../utils/Result';\nimport { isInvalidDeletionError } from '../../api/utils';\nimport { ShlinkApiError } from '../../api/ShlinkApiError';\n\ninterface DeleteShortUrlModalConnectProps extends ShortUrlModalProps {\n  shortUrlDeletion: ShortUrlDeletion;\n  deleteShortUrl: (shortCode: string, domain: OptionalString) => Promise<void>;\n  resetDeleteShortUrl: () => void;\n}\n\nconst DeleteShortUrlModal = (\n  { shortUrl, toggle, isOpen, shortUrlDeletion, resetDeleteShortUrl, deleteShortUrl }: DeleteShortUrlModalConnectProps,\n) => {\n  const [ inputValue, setInputValue ] = useState('');\n\n  useEffect(() => resetDeleteShortUrl, []);\n\n  const { error, errorData } = shortUrlDeletion;\n  const close = pipe(resetDeleteShortUrl, toggle);\n  const handleDeleteUrl = handleEventPreventingDefault(() => {\n    const { shortCode, domain } = shortUrl;\n\n    deleteShortUrl(shortCode, domain)\n      .then(toggle)\n      .catch(identity);\n  });\n\n  return (\n    <Modal isOpen={isOpen} toggle={close} centered>\n      <form onSubmit={handleDeleteUrl}>\n        <ModalHeader toggle={close}>\n          <span className=\"text-danger\">Delete short URL</span>\n        </ModalHeader>\n        <ModalBody>\n          <p><b className=\"text-danger\">Caution!</b> You are about to delete a short URL.</p>\n          <p>This action cannot be undone. Once you have deleted it, all the visits stats will be lost.</p>\n          <p>Write <b>{shortUrl.shortCode}</b> to confirm deletion.</p>\n\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            placeholder={`Insert the short code (${shortUrl.shortCode})`}\n            value={inputValue}\n            onChange={(e) => setInputValue(e.target.value)}\n          />\n\n          {error && (\n            <Result type={isInvalidDeletionError(errorData) ? 'warning' : 'error'} small className=\"mt-2\">\n              <ShlinkApiError errorData={errorData} fallbackMessage=\"Something went wrong while deleting the URL :(\" />\n            </Result>\n          )}\n        </ModalBody>\n        <ModalFooter>\n          <button type=\"button\" className=\"btn btn-link\" onClick={close}>Cancel</button>\n          <button\n            type=\"submit\"\n            className=\"btn btn-danger\"\n            disabled={inputValue !== shortUrl.shortCode || shortUrlDeletion.loading}\n          >\n            {shortUrlDeletion.loading ? 'Deleting...' : 'Delete'}\n          </button>\n        </ModalFooter>\n      </form>\n    </Modal>\n  );\n};\n\nexport default DeleteShortUrlModal;\n","import { faCopy as copyIcon } from '@fortawesome/free-regular-svg-icons';\nimport { faTimes as closeIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { isNil } from 'ramda';\nimport { useEffect } from 'react';\nimport CopyToClipboard from 'react-copy-to-clipboard';\nimport { Tooltip } from 'reactstrap';\nimport { ShortUrlCreation } from '../reducers/shortUrlCreation';\nimport { StateFlagTimeout } from '../../utils/helpers/hooks';\nimport { Result } from '../../utils/Result';\nimport './CreateShortUrlResult.scss';\nimport { ShlinkApiError } from '../../api/ShlinkApiError';\n\nexport interface CreateShortUrlResultProps extends ShortUrlCreation {\n  resetCreateShortUrl: () => void;\n  canBeClosed?: boolean;\n}\n\nconst CreateShortUrlResult = (useStateFlagTimeout: StateFlagTimeout) => (\n  { error, errorData, result, resetCreateShortUrl, canBeClosed = false }: CreateShortUrlResultProps,\n) => {\n  const [ showCopyTooltip, setShowCopyTooltip ] = useStateFlagTimeout();\n\n  useEffect(() => {\n    resetCreateShortUrl();\n  }, []);\n\n  if (error) {\n    return (\n      <Result type=\"error\" className=\"mt-3\">\n        {canBeClosed && <FontAwesomeIcon icon={closeIcon} className=\"float-right pointer\" onClick={resetCreateShortUrl} />}\n        <ShlinkApiError errorData={errorData} fallbackMessage=\"An error occurred while creating the URL :(\" />\n      </Result>\n    );\n  }\n\n  if (isNil(result)) {\n    return null;\n  }\n\n  const { shortUrl } = result;\n\n  return (\n    <Result type=\"success\" className=\"mt-3\">\n      {canBeClosed && <FontAwesomeIcon icon={closeIcon} className=\"float-right pointer\" onClick={resetCreateShortUrl} />}\n      <b>Great!</b> The short URL is <b>{shortUrl}</b>\n\n      <CopyToClipboard text={shortUrl} onCopy={setShowCopyTooltip}>\n        <button\n          className=\"btn btn-light btn-sm create-short-url-result__copy-btn\"\n          id=\"copyBtn\"\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={copyIcon} /> Copy\n        </button>\n      </CopyToClipboard>\n\n      <Tooltip placement=\"left\" isOpen={showCopyTooltip} target=\"copyBtn\">\n        Copied!\n      </Tooltip>\n    </Result>\n  );\n};\n\nexport default CreateShortUrlResult;\n","import { FC, ReactNode } from 'react';\nimport { isEmpty } from 'ramda';\nimport classNames from 'classnames';\nimport { SelectedServer } from '../servers/data';\nimport { supportsShortUrlTitle } from '../utils/helpers/features';\nimport { ShortUrlsList as ShortUrlsListState } from './reducers/shortUrlsList';\nimport { ShortUrlsRowProps } from './helpers/ShortUrlsRow';\nimport { OrderableFields } from './reducers/shortUrlsListParams';\nimport './ShortUrlsTable.scss';\n\nexport interface ShortUrlsTableProps {\n  orderByColumn?: (column: OrderableFields) => () => void;\n  renderOrderIcon?: (column: OrderableFields) => ReactNode;\n  shortUrlsList: ShortUrlsListState;\n  selectedServer: SelectedServer;\n  onTagClick?: (tag: string) => void;\n  className?: string;\n}\n\nexport const ShortUrlsTable = (ShortUrlsRow: FC<ShortUrlsRowProps>) => ({\n  orderByColumn,\n  renderOrderIcon,\n  shortUrlsList,\n  onTagClick,\n  selectedServer,\n  className,\n}: ShortUrlsTableProps) => {\n  const { error, loading, shortUrls } = shortUrlsList;\n  const actionableFieldClasses = classNames({ 'short-urls-table__header-cell--with-action': !!orderByColumn });\n  const orderableColumnsClasses = classNames('short-urls-table__header-cell', actionableFieldClasses);\n  const tableClasses = classNames('table table-hover', className);\n  const supportsTitle = supportsShortUrlTitle(selectedServer);\n\n  const renderShortUrls = () => {\n    if (error) {\n      return (\n        <tr>\n          <td colSpan={6} className=\"text-center table-danger\">Something went wrong while loading short URLs :(</td>\n        </tr>\n      );\n    }\n\n    if (loading) {\n      return <tr><td colSpan={6} className=\"text-center\">Loading...</td></tr>;\n    }\n\n    if (!loading && isEmpty(shortUrls?.data)) {\n      return <tr><td colSpan={6} className=\"text-center\">No results found</td></tr>;\n    }\n\n    return shortUrls?.data.map((shortUrl) => (\n      <ShortUrlsRow\n        key={shortUrl.shortUrl}\n        shortUrl={shortUrl}\n        selectedServer={selectedServer}\n        onTagClick={onTagClick}\n      />\n    ));\n  };\n\n  return (\n    <table className={tableClasses}>\n      <thead className=\"responsive-table__header short-urls-table__header\">\n        <tr>\n          <th className={orderableColumnsClasses} onClick={orderByColumn?.('dateCreated')}>\n            Created at\n            {renderOrderIcon?.('dateCreated')}\n          </th>\n          <th className={orderableColumnsClasses} onClick={orderByColumn?.('shortCode')}>\n            Short URL\n            {renderOrderIcon?.('shortCode')}\n          </th>\n          {!supportsTitle && (\n            <th className={orderableColumnsClasses} onClick={orderByColumn?.('longUrl')}>\n              Long URL\n              {renderOrderIcon?.('longUrl')}\n            </th>\n          ) || (\n            <th className=\"short-urls-table__header-cell\">\n              <span className={actionableFieldClasses} onClick={orderByColumn?.('title')}>\n                Title\n                {renderOrderIcon?.('title')}\n              </span>\n              &nbsp;&nbsp;/&nbsp;&nbsp;\n              <span className={actionableFieldClasses} onClick={orderByColumn?.('longUrl')}>\n                <span className=\"indivisible\">Long URL</span>\n                {renderOrderIcon?.('longUrl')}\n              </span>\n            </th>\n          )}\n          <th className=\"short-urls-table__header-cell\">Tags</th>\n          <th className={orderableColumnsClasses} onClick={orderByColumn?.('visits')}>\n            <span className=\"indivisible\">Visits{renderOrderIcon?.('visits')}</span>\n          </th>\n          <th className=\"short-urls-table__header-cell\">&nbsp;</th>\n        </tr>\n      </thead>\n      <tbody>\n        {renderShortUrls()}\n      </tbody>\n    </table>\n  );\n};\n","import { FC } from 'react';\nimport { DropdownItem } from 'reactstrap';\nimport { DropdownBtn } from '../../../utils/DropdownBtn';\nimport { QrCodeFormat } from '../../../utils/helpers/qrCodes';\n\ninterface QrFormatDropdownProps {\n  format: QrCodeFormat;\n  setFormat: (format: QrCodeFormat) => void;\n}\n\nexport const QrFormatDropdown: FC<QrFormatDropdownProps> = ({ format, setFormat }) => (\n  <DropdownBtn text={`Format (${format})`}>\n    <DropdownItem active={format === 'png'} onClick={() => setFormat('png')}>PNG</DropdownItem>\n    <DropdownItem active={format === 'svg'} onClick={() => setFormat('svg')}>SVG</DropdownItem>\n  </DropdownBtn>\n);\n","import { FC } from 'react';\nimport { DropdownItem } from 'reactstrap';\nimport { DropdownBtn } from '../../../utils/DropdownBtn';\nimport { QrErrorCorrection } from '../../../utils/helpers/qrCodes';\n\ninterface QrErrorCorrectionDropdownProps {\n  errorCorrection: QrErrorCorrection;\n  setErrorCorrection: (errorCorrection: QrErrorCorrection) => void;\n}\n\nexport const QrErrorCorrectionDropdown: FC<QrErrorCorrectionDropdownProps> = (\n  { errorCorrection, setErrorCorrection },\n) => (\n  <DropdownBtn text={`Error correction (${errorCorrection})`}>\n    <DropdownItem active={errorCorrection === 'L'} onClick={() => setErrorCorrection('L')}>\n      <b>L</b>ow\n    </DropdownItem>\n    <DropdownItem active={errorCorrection === 'M'} onClick={() => setErrorCorrection('M')}>\n      <b>M</b>edium\n    </DropdownItem>\n    <DropdownItem active={errorCorrection === 'Q'} onClick={() => setErrorCorrection('Q')}>\n      <b>Q</b>uartile\n    </DropdownItem>\n    <DropdownItem active={errorCorrection === 'H'} onClick={() => setErrorCorrection('H')}>\n      <b>H</b>igh\n    </DropdownItem>\n  </DropdownBtn>\n);\n","import { FC, useMemo, useState } from 'react';\nimport { Modal, FormGroup, ModalBody, ModalHeader, Row, Button } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faFileDownload as downloadIcon } from '@fortawesome/free-solid-svg-icons';\nimport { ExternalLink } from 'react-external-link';\nimport classNames from 'classnames';\nimport { ShortUrlModalProps } from '../data';\nimport { SelectedServer } from '../../servers/data';\nimport { CopyToClipboardIcon } from '../../utils/CopyToClipboardIcon';\nimport { buildQrCodeUrl, QrCodeCapabilities, QrCodeFormat, QrErrorCorrection } from '../../utils/helpers/qrCodes';\nimport {\n  supportsQrCodeSizeInQuery,\n  supportsQrCodeMargin,\n  supportsQrErrorCorrection,\n} from '../../utils/helpers/features';\nimport { ImageDownloader } from '../../common/services/ImageDownloader';\nimport { Versions } from '../../utils/helpers/version';\nimport { QrFormatDropdown } from './qr-codes/QrFormatDropdown';\nimport './QrCodeModal.scss';\nimport { QrErrorCorrectionDropdown } from './qr-codes/QrErrorCorrectionDropdown';\n\ninterface QrCodeModalConnectProps extends ShortUrlModalProps {\n  selectedServer: SelectedServer;\n}\n\nconst QrCodeModal = (imageDownloader: ImageDownloader, ForServerVersion: FC<Versions>) => ( // eslint-disable-line\n  { shortUrl: { shortUrl, shortCode }, toggle, isOpen, selectedServer }: QrCodeModalConnectProps,\n) => {\n  const [ size, setSize ] = useState(300);\n  const [ margin, setMargin ] = useState(0);\n  const [ format, setFormat ] = useState<QrCodeFormat>('png');\n  const [ errorCorrection, setErrorCorrection ] = useState<QrErrorCorrection>('L');\n  const capabilities: QrCodeCapabilities = useMemo(() => ({\n    useSizeInPath: !supportsQrCodeSizeInQuery(selectedServer),\n    marginIsSupported: supportsQrCodeMargin(selectedServer),\n    errorCorrectionIsSupported: supportsQrErrorCorrection(selectedServer),\n  }), [ selectedServer ]);\n  const willRenderThreeControls = capabilities.marginIsSupported !== capabilities.errorCorrectionIsSupported;\n  const qrCodeUrl = useMemo(\n    () => buildQrCodeUrl(shortUrl, { size, format, margin, errorCorrection }, capabilities),\n    [ shortUrl, size, format, margin, errorCorrection, capabilities ],\n  );\n  const totalSize = useMemo(() => size + margin, [ size, margin ]);\n  const modalSize = useMemo(() => {\n    if (totalSize < 500) {\n      return undefined;\n    }\n\n    return totalSize < 800 ? 'lg' : 'xl';\n  }, [ totalSize ]);\n\n  return (\n    <Modal isOpen={isOpen} toggle={toggle} centered size={modalSize}>\n      <ModalHeader toggle={toggle}>\n        QR code for <ExternalLink href={shortUrl}>{shortUrl}</ExternalLink>\n      </ModalHeader>\n      <ModalBody>\n        <Row>\n          <FormGroup\n            className={classNames({ 'col-md-4': willRenderThreeControls, 'col-md-6': !willRenderThreeControls })}\n          >\n            <label className=\"mb-0\">Size: {size}px</label>\n            <input\n              type=\"range\"\n              className=\"form-control-range\"\n              value={size}\n              step={10}\n              min={50}\n              max={1000}\n              onChange={(e) => setSize(Number(e.target.value))}\n            />\n          </FormGroup>\n          {capabilities.marginIsSupported && (\n            <FormGroup className={willRenderThreeControls ? 'col-md-4' : 'col-md-6'}>\n              <label className=\"mb-0\">Margin: {margin}px</label>\n              <input\n                type=\"range\"\n                className=\"form-control-range\"\n                value={margin}\n                step={1}\n                min={0}\n                max={100}\n                onChange={(e) => setMargin(Number(e.target.value))}\n              />\n            </FormGroup>\n          )}\n          <FormGroup className={willRenderThreeControls ? 'col-md-4' : 'col-md-6'}>\n            <QrFormatDropdown format={format} setFormat={setFormat} />\n          </FormGroup>\n          {capabilities.errorCorrectionIsSupported && (\n            <FormGroup className=\"col-md-6\">\n              <QrErrorCorrectionDropdown errorCorrection={errorCorrection} setErrorCorrection={setErrorCorrection} />\n            </FormGroup>\n          )}\n        </Row>\n        <div className=\"text-center\">\n          <div className=\"mb-3\">\n            <ExternalLink href={qrCodeUrl} />\n            <CopyToClipboardIcon text={qrCodeUrl} />\n          </div>\n          <img src={qrCodeUrl} className=\"qr-code-modal__img\" alt=\"QR code\" />\n          <ForServerVersion minVersion=\"2.9.0\">\n            <div className=\"mt-3\">\n              <Button\n                block\n                color=\"primary\"\n                onClick={async () => imageDownloader.saveImage(qrCodeUrl, `${shortCode}-qr-code.${format}`)}\n              >\n                Download <FontAwesomeIcon icon={downloadIcon} className=\"ml-1\" />\n              </Button>\n            </div>\n          </ForServerVersion>\n        </div>\n      </ModalBody>\n    </Modal>\n  );\n};\n\nexport default QrCodeModal;\n","import { isEmpty } from 'ramda';\nimport { stringifyQuery } from './query';\n\nexport interface QrCodeCapabilities {\n  useSizeInPath: boolean;\n  marginIsSupported: boolean;\n  errorCorrectionIsSupported: boolean;\n}\n\nexport type QrCodeFormat = 'svg' | 'png';\n\nexport type QrErrorCorrection = 'L' | 'M' | 'Q' | 'H';\n\nexport interface QrCodeOptions {\n  size: number;\n  format: QrCodeFormat;\n  margin: number;\n  errorCorrection: QrErrorCorrection;\n}\n\nexport const buildQrCodeUrl = (\n  shortUrl: string,\n  { size, format, margin, errorCorrection }: QrCodeOptions,\n  { useSizeInPath, marginIsSupported, errorCorrectionIsSupported }: QrCodeCapabilities,\n): string => {\n  const baseUrl = `${shortUrl}/qr-code${useSizeInPath ? `/${size}` : ''}`;\n  const query = stringifyQuery({\n    size: useSizeInPath ? undefined : size,\n    format,\n    margin: marginIsSupported && margin > 0 ? margin : undefined,\n    errorCorrection: errorCorrectionIsSupported ? errorCorrection : undefined,\n  });\n\n  return `${baseUrl}${isEmpty(query) ? '' : `?${query}`}`;\n};\n","import { ChangeEvent, FC, useRef } from 'react';\nimport classNames from 'classnames';\nimport { v4 as uuid } from 'uuid';\nimport { identity } from 'ramda';\n\nexport interface BooleanControlProps {\n  checked?: boolean;\n  onChange?: (checked: boolean, e: ChangeEvent<HTMLInputElement>) => void;\n  className?: string;\n  inline?: boolean;\n}\n\ninterface BooleanControlWithTypeProps extends BooleanControlProps {\n  type: 'switch' | 'checkbox';\n}\n\nconst BooleanControl: FC<BooleanControlWithTypeProps> = (\n  { checked = false, onChange = identity, className, children, type, inline = false },\n) => {\n  const { current: id } = useRef(uuid());\n  const onChecked = (e: ChangeEvent<HTMLInputElement>) => onChange(e.target.checked, e);\n  const typeClasses = {\n    'custom-switch': type === 'switch',\n    'custom-checkbox': type === 'checkbox',\n  };\n  const style = inline ? { display: 'inline-block' } : {};\n\n  return (\n    <span className={classNames('custom-control', typeClasses, className)} style={style}>\n      <input type=\"checkbox\" className=\"custom-control-input\" id={id} checked={checked} onChange={onChecked} />\n      <label className=\"custom-control-label\" htmlFor={id}>{children}</label>\n    </span>\n  );\n};\n\nexport default BooleanControl;\n","import { FC } from 'react';\nimport BooleanControl, { BooleanControlProps } from './BooleanControl';\n\nconst Checkbox: FC<BooleanControlProps> = (props) => <BooleanControl type=\"checkbox\" {...props} />;\n\nexport default Checkbox;\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faInfoCircle as infoIcon } from '@fortawesome/free-solid-svg-icons';\nimport { Modal, ModalBody, ModalHeader } from 'reactstrap';\nimport { useToggle } from '../utils/helpers/hooks';\nimport './UseExistingIfFoundInfoIcon.scss';\n\nconst InfoModal = ({ isOpen, toggle }: { isOpen: boolean; toggle: () => void }) => (\n  <Modal isOpen={isOpen} toggle={toggle} centered size=\"lg\">\n    <ModalHeader toggle={toggle}>Info</ModalHeader>\n    <ModalBody>\n      <p>\n        When the&nbsp;\n        <b><i>&quot;Use existing URL if found&quot;</i></b>\n        &nbsp;checkbox is checked, the server will return an existing short URL if it matches provided params.\n      </p>\n      <p>\n        These are the checks performed by Shlink in order to determine if an existing short URL should be returned:\n      </p>\n      <ul>\n        <li>\n          When only the long URL is provided: The most recent match will be returned, or a new short URL will be created\n          if none is found.\n        </li>\n        <li>\n          When long URL and custom slug and/or domain are provided: Same as in previous case, but it will try to match\n          the short URL using both the long URL and the slug, the long URL and the domain, or the three of them.\n          <br />\n          If the slug is being used by another long URL, an error will be returned.\n        </li>\n        <li>\n          When other params are provided: Same as in previous cases, but it will try to match existing short URLs with\n          all provided data. If any of them does not match, a new short URL will be created\n        </li>\n      </ul>\n    </ModalBody>\n  </Modal>\n);\n\nconst UseExistingIfFoundInfoIcon = () => {\n  const [ isModalOpen, toggleModal ] = useToggle();\n\n  return (\n    <>\n      <span title=\"What does this mean?\">\n        <FontAwesomeIcon icon={infoIcon} style={{ cursor: 'pointer' }} onClick={toggleModal} />\n      </span>\n      <InfoModal isOpen={isModalOpen} toggle={toggleModal} />\n    </>\n  );\n};\n\nexport default UseExistingIfFoundInfoIcon;\n","import { FC, useRef } from 'react';\nimport * as Popper from 'popper.js';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faInfoCircle as infoIcon } from '@fortawesome/free-solid-svg-icons';\nimport { UncontrolledTooltip } from 'reactstrap';\n\ninterface InfoTooltipProps {\n  className?: string;\n  placement: Popper.Placement;\n}\n\nexport const InfoTooltip: FC<InfoTooltipProps> = ({ className = '', placement, children }) => {\n  const ref = useRef<HTMLSpanElement | null>();\n  const refCallback = (el: HTMLSpanElement) => {\n    ref.current = el;\n  };\n\n  return (\n    <>\n      <span className={className} ref={refCallback}>\n        <FontAwesomeIcon icon={infoIcon} />\n      </span>\n      <UncontrolledTooltip target={(() => ref.current) as any} placement={placement}>{children}</UncontrolledTooltip>\n    </>\n  );\n};\n","import { ChangeEvent, FC } from 'react';\nimport Checkbox from '../../utils/Checkbox';\nimport { InfoTooltip } from '../../utils/InfoTooltip';\n\ninterface ShortUrlFormCheckboxGroupProps {\n  checked?: boolean;\n  onChange?: (checked: boolean, e: ChangeEvent<HTMLInputElement>) => void;\n  infoTooltip?: string;\n}\n\nexport const ShortUrlFormCheckboxGroup: FC<ShortUrlFormCheckboxGroupProps> = (\n  { children, infoTooltip, checked, onChange },\n) => (\n  <p>\n    <Checkbox inline checked={checked} className={infoTooltip ? 'mr-2' : ''} onChange={onChange}>\n      {children}\n    </Checkbox>\n    {infoTooltip && <InfoTooltip placement=\"right\">{infoTooltip}</InfoTooltip>}\n  </p>\n);\n","import { FC, useEffect, useState } from 'react';\nimport { InputType } from 'reactstrap/lib/Input';\nimport { Button, FormGroup, Input, Row } from 'reactstrap';\nimport { cond, isEmpty, pipe, replace, trim, T } from 'ramda';\nimport classNames from 'classnames';\nimport { parseISO } from 'date-fns';\nimport DateInput, { DateInputProps } from '../utils/DateInput';\nimport { supportsCrawlableVisits, supportsForwardQuery, supportsShortUrlTitle } from '../utils/helpers/features';\nimport { SimpleCard } from '../utils/SimpleCard';\nimport { handleEventPreventingDefault, hasValue, OptionalString } from '../utils/utils';\nimport Checkbox from '../utils/Checkbox';\nimport { SelectedServer } from '../servers/data';\nimport { TagsSelectorProps } from '../tags/helpers/TagsSelector';\nimport { DomainSelectorProps } from '../domains/DomainSelector';\nimport { formatIsoDate } from '../utils/helpers/date';\nimport UseExistingIfFoundInfoIcon from './UseExistingIfFoundInfoIcon';\nimport { ShortUrlData } from './data';\nimport { ShortUrlFormCheckboxGroup } from './helpers/ShortUrlFormCheckboxGroup';\nimport './ShortUrlForm.scss';\n\nexport type Mode = 'create' | 'create-basic' | 'edit';\n\ntype DateFields = 'validSince' | 'validUntil';\ntype NonDateFields = 'longUrl' | 'customSlug' | 'shortCodeLength' | 'domain' | 'maxVisits' | 'title';\n\nexport interface ShortUrlFormProps {\n  mode: Mode;\n  saving: boolean;\n  initialState: ShortUrlData;\n  onSave: (shortUrlData: ShortUrlData) => Promise<unknown>;\n  selectedServer: SelectedServer;\n}\n\nconst normalizeTag = pipe(trim, replace(/ /g, '-'));\nconst toDate = (date?: string | Date): Date | undefined => typeof date === 'string' ? parseISO(date) : date;\nconst dynamicColClasses = (flag: boolean) => ({ 'col-sm-6': flag, 'col-sm-12': !flag });\n\nexport const ShortUrlForm = (\n  TagsSelector: FC<TagsSelectorProps>,\n  DomainSelector: FC<DomainSelectorProps>,\n): FC<ShortUrlFormProps> => ({ mode, saving, onSave, initialState, selectedServer }) => {\n  const [ shortUrlData, setShortUrlData ] = useState(initialState);\n  const isEdit = mode === 'edit';\n  const hadTitleOriginally = hasValue(initialState.title);\n  const changeTags = (tags: string[]) => setShortUrlData({ ...shortUrlData, tags: tags.map(normalizeTag) });\n  const reset = () => setShortUrlData(initialState);\n  const resolveNewTitle = (): OptionalString => {\n    const hasNewTitle = hasValue(shortUrlData.title);\n    const matcher = cond<never, OptionalString>([\n      [ () => !hasNewTitle && !hadTitleOriginally, () => undefined ],\n      [ () => !hasNewTitle && hadTitleOriginally, () => null ],\n      [ T, () => shortUrlData.title ],\n    ]);\n\n    return matcher();\n  };\n  const submit = handleEventPreventingDefault(async () => onSave({\n    ...shortUrlData,\n    validSince: formatIsoDate(shortUrlData.validSince) ?? null,\n    validUntil: formatIsoDate(shortUrlData.validUntil) ?? null,\n    maxVisits: !hasValue(shortUrlData.maxVisits) ? null : Number(shortUrlData.maxVisits),\n    title: resolveNewTitle(),\n  }).then(() => !isEdit && reset()).catch(() => {}));\n\n  useEffect(() => {\n    setShortUrlData(initialState);\n  }, [ initialState ]);\n\n  const renderOptionalInput = (id: NonDateFields, placeholder: string, type: InputType = 'text', props = {}) => (\n    <FormGroup>\n      <Input\n        id={id}\n        type={type}\n        placeholder={placeholder}\n        value={shortUrlData[id] ?? ''}\n        onChange={(e) => setShortUrlData({ ...shortUrlData, [id]: e.target.value })}\n        {...props}\n      />\n    </FormGroup>\n  );\n  const renderDateInput = (id: DateFields, placeholder: string, props: Partial<DateInputProps> = {}) => (\n    <div className=\"form-group\">\n      <DateInput\n        selected={shortUrlData[id] ? toDate(shortUrlData[id] as string | Date) : null}\n        placeholderText={placeholder}\n        isClearable\n        onChange={(date) => setShortUrlData({ ...shortUrlData, [id]: date })}\n        {...props}\n      />\n    </div>\n  );\n  const basicComponents = (\n    <>\n      <FormGroup>\n        <Input\n          bsSize=\"lg\"\n          type=\"url\"\n          placeholder=\"URL to be shortened\"\n          required\n          value={shortUrlData.longUrl}\n          onChange={(e) => setShortUrlData({ ...shortUrlData, longUrl: e.target.value })}\n        />\n      </FormGroup>\n\n      <FormGroup>\n        <TagsSelector selectedTags={shortUrlData.tags ?? []} onChange={changeTags} />\n      </FormGroup>\n    </>\n  );\n\n  const supportsTitle = supportsShortUrlTitle(selectedServer);\n  const showCustomizeCard = supportsTitle || !isEdit;\n  const limitAccessCardClasses = classNames('mb-3', dynamicColClasses(showCustomizeCard));\n  const showCrawlableControl = supportsCrawlableVisits(selectedServer);\n  const showForwardQueryControl = supportsForwardQuery(selectedServer);\n  const showBehaviorCard = showCrawlableControl || showForwardQueryControl;\n  const extraChecksCardClasses = classNames('mb-3', dynamicColClasses(showBehaviorCard));\n\n  return (\n    <form className=\"short-url-form\" onSubmit={submit}>\n      {mode === 'create-basic' && basicComponents}\n      {mode !== 'create-basic' && (\n        <>\n          <SimpleCard title=\"Basic options\" className=\"mb-3\">\n            {basicComponents}\n          </SimpleCard>\n\n          <Row>\n            {showCustomizeCard && (\n              <div className=\"col-sm-6 mb-3\">\n                <SimpleCard title=\"Customize the short URL\">\n                  {supportsTitle && renderOptionalInput('title', 'Title')}\n                  {!isEdit && (\n                    <>\n                      <Row>\n                        <div className=\"col-lg-6\">\n                          {renderOptionalInput('customSlug', 'Custom slug', 'text', {\n                            disabled: hasValue(shortUrlData.shortCodeLength),\n                          })}\n                        </div>\n                        <div className=\"col-lg-6\">\n                          {renderOptionalInput('shortCodeLength', 'Short code length', 'number', {\n                            min: 4,\n                            disabled: hasValue(shortUrlData.customSlug),\n                          })}\n                        </div>\n                      </Row>\n                      <FormGroup>\n                        <DomainSelector\n                          value={shortUrlData.domain}\n                          onChange={(domain?: string) => setShortUrlData({ ...shortUrlData, domain })}\n                        />\n                      </FormGroup>\n                    </>\n                  )}\n                </SimpleCard>\n              </div>\n            )}\n\n            <div className={limitAccessCardClasses}>\n              <SimpleCard title=\"Limit access to the short URL\">\n                {renderOptionalInput('maxVisits', 'Maximum number of visits allowed', 'number', { min: 1 })}\n                {renderDateInput('validSince', 'Enabled since...', { maxDate: shortUrlData.validUntil ? toDate(shortUrlData.validUntil) : undefined })}\n                {renderDateInput('validUntil', 'Enabled until...', { minDate: shortUrlData.validSince ? toDate(shortUrlData.validSince) : undefined })}\n              </SimpleCard>\n            </div>\n          </Row>\n\n          <Row>\n            <div className={extraChecksCardClasses}>\n              <SimpleCard title=\"Extra checks\">\n                <ShortUrlFormCheckboxGroup\n                  infoTooltip=\"If checked, Shlink will try to reach the long URL, failing in case it's not publicly accessible.\"\n                  checked={shortUrlData.validateUrl}\n                  onChange={(validateUrl) => setShortUrlData({ ...shortUrlData, validateUrl })}\n                >\n                  Validate URL\n                </ShortUrlFormCheckboxGroup>\n                {!isEdit && (\n                  <p>\n                    <Checkbox\n                      inline\n                      className=\"mr-2\"\n                      checked={shortUrlData.findIfExists}\n                      onChange={(findIfExists) => setShortUrlData({ ...shortUrlData, findIfExists })}\n                    >\n                      Use existing URL if found\n                    </Checkbox>\n                    <UseExistingIfFoundInfoIcon />\n                  </p>\n                )}\n              </SimpleCard>\n            </div>\n            {showBehaviorCard && (\n              <div className=\"col-sm-6 mb-3\">\n                <SimpleCard title=\"Configure behavior\">\n                  {showCrawlableControl && (\n                    <ShortUrlFormCheckboxGroup\n                      infoTooltip=\"This short URL will be included in the robots.txt for your Shlink instance, allowing web crawlers (like Google) to index it.\"\n                      checked={shortUrlData.crawlable}\n                      onChange={(crawlable) => setShortUrlData({ ...shortUrlData, crawlable })}\n                    >\n                      Make it crawlable\n                    </ShortUrlFormCheckboxGroup>\n                  )}\n                  {showForwardQueryControl && (\n                    <ShortUrlFormCheckboxGroup\n                      infoTooltip=\"When this short URL is visited, any query params appended to it will be forwarded to the long URL.\"\n                      checked={shortUrlData.forwardQuery}\n                      onChange={(forwardQuery) => setShortUrlData({ ...shortUrlData, forwardQuery })}\n                    >\n                      Forward query params on redirect\n                    </ShortUrlFormCheckboxGroup>\n                  )}\n                </SimpleCard>\n              </div>\n            )}\n          </Row>\n        </>\n      )}\n\n      <div className=\"text-center\">\n        <Button\n          outline\n          color=\"primary\"\n          disabled={saving || isEmpty(shortUrlData.longUrl)}\n          className=\"btn-xs-block\"\n        >\n          {saving ? 'Saving...' : 'Save'}\n        </Button>\n      </div>\n    </form>\n  );\n};\n","import { FC, useEffect, useMemo } from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { Button, Card } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nimport { ExternalLink } from 'react-external-link';\nimport { SelectedServer } from '../servers/data';\nimport { Settings, ShortUrlCreationSettings } from '../settings/reducers/settings';\nimport { OptionalString } from '../utils/utils';\nimport { parseQuery } from '../utils/helpers/query';\nimport Message from '../utils/Message';\nimport { Result } from '../utils/Result';\nimport { ShlinkApiError } from '../api/ShlinkApiError';\nimport { useToggle } from '../utils/helpers/hooks';\nimport { ShortUrlFormProps } from './ShortUrlForm';\nimport { ShortUrlDetail } from './reducers/shortUrlDetail';\nimport { EditShortUrlData, ShortUrl, ShortUrlData } from './data';\nimport { ShortUrlEdition } from './reducers/shortUrlEdition';\n\ninterface EditShortUrlConnectProps extends RouteComponentProps<{ shortCode: string }> {\n  settings: Settings;\n  selectedServer: SelectedServer;\n  shortUrlDetail: ShortUrlDetail;\n  shortUrlEdition: ShortUrlEdition;\n  getShortUrlDetail: (shortCode: string, domain: OptionalString) => void;\n  editShortUrl: (shortUrl: string, domain: OptionalString, data: EditShortUrlData) => Promise<void>;\n}\n\nconst getInitialState = (shortUrl?: ShortUrl, settings?: ShortUrlCreationSettings): ShortUrlData => {\n  const validateUrl = settings?.validateUrls ?? false;\n\n  if (!shortUrl) {\n    return { longUrl: '', validateUrl };\n  }\n\n  return {\n    longUrl: shortUrl.longUrl,\n    tags: shortUrl.tags,\n    title: shortUrl.title ?? undefined,\n    domain: shortUrl.domain ?? undefined,\n    validSince: shortUrl.meta.validSince ?? undefined,\n    validUntil: shortUrl.meta.validUntil ?? undefined,\n    maxVisits: shortUrl.meta.maxVisits ?? undefined,\n    crawlable: shortUrl.crawlable,\n    forwardQuery: shortUrl.forwardQuery,\n    validateUrl,\n  };\n};\n\nexport const EditShortUrl = (ShortUrlForm: FC<ShortUrlFormProps>) => ({\n  history: { goBack },\n  match: { params },\n  location: { search },\n  settings: { shortUrlCreation: shortUrlCreationSettings },\n  selectedServer,\n  shortUrlDetail,\n  getShortUrlDetail,\n  shortUrlEdition,\n  editShortUrl,\n}: EditShortUrlConnectProps) => {\n  const { loading, error, errorData, shortUrl } = shortUrlDetail;\n  const { saving, error: savingError, errorData: savingErrorData } = shortUrlEdition;\n  const { domain } = parseQuery<{ domain?: string }>(search);\n  const initialState = useMemo(\n    () => getInitialState(shortUrl, shortUrlCreationSettings),\n    [ shortUrl, shortUrlCreationSettings ],\n  );\n  const [ savingSucceeded,, isSuccessful, isNotSuccessful ] = useToggle();\n\n  useEffect(() => {\n    getShortUrlDetail(params.shortCode, domain);\n  }, []);\n\n  if (loading) {\n    return <Message loading />;\n  }\n\n  if (error) {\n    return (\n      <Result type=\"error\">\n        <ShlinkApiError errorData={errorData} fallbackMessage=\"An error occurred while loading short URL detail :(\" />\n      </Result>\n    );\n  }\n\n  return (\n    <>\n      <header className=\"mb-3\">\n        <Card body>\n          <h2 className=\"d-sm-flex justify-content-between align-items-center mb-0\">\n            <Button color=\"link\" size=\"lg\" className=\"p-0 mr-3\" onClick={goBack}>\n              <FontAwesomeIcon icon={faArrowLeft} />\n            </Button>\n            <span className=\"text-center\">\n              <small>Edit <ExternalLink href={shortUrl?.shortUrl ?? ''} /></small>\n            </span>\n            <span />\n          </h2>\n        </Card>\n      </header>\n      <ShortUrlForm\n        initialState={initialState}\n        saving={saving}\n        selectedServer={selectedServer}\n        mode=\"edit\"\n        onSave={async (shortUrlData) => {\n          if (!shortUrl) {\n            return;\n          }\n\n          isNotSuccessful();\n          editShortUrl(shortUrl.shortCode, shortUrl.domain, shortUrlData)\n            .then(isSuccessful)\n            .catch(isNotSuccessful);\n        }}\n      />\n      {savingError && (\n        <Result type=\"error\" className=\"mt-3\">\n          <ShlinkApiError errorData={savingErrorData} fallbackMessage=\"An error occurred while updating short URL :(\" />\n        </Result>\n      )}\n      {savingSucceeded && <Result type=\"success\" className=\"mt-3\">Short URL properly edited.</Result>}\n    </>\n  );\n};\n","import { Action, Dispatch } from 'redux';\nimport { ShortUrl } from '../data';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { OptionalString } from '../../utils/utils';\nimport { GetState } from '../../container/types';\nimport { shortUrlMatches } from '../helpers';\nimport { ProblemDetailsError } from '../../api/types';\nimport { parseApiError } from '../../api/utils';\nimport { ApiErrorAction } from '../../api/types/actions';\n\n/* eslint-disable padding-line-between-statements */\nexport const GET_SHORT_URL_DETAIL_START = 'shlink/shortUrlDetail/GET_SHORT_URL_DETAIL_START';\nexport const GET_SHORT_URL_DETAIL_ERROR = 'shlink/shortUrlDetail/GET_SHORT_URL_DETAIL_ERROR';\nexport const GET_SHORT_URL_DETAIL = 'shlink/shortUrlDetail/GET_SHORT_URL_DETAIL';\n/* eslint-enable padding-line-between-statements */\n\nexport interface ShortUrlDetail {\n  shortUrl?: ShortUrl;\n  loading: boolean;\n  error: boolean;\n  errorData?: ProblemDetailsError;\n}\n\nexport interface ShortUrlDetailAction extends Action<string> {\n  shortUrl: ShortUrl;\n}\n\nconst initialState: ShortUrlDetail = {\n  loading: false,\n  error: false,\n};\n\nexport default buildReducer<ShortUrlDetail, ShortUrlDetailAction & ApiErrorAction>({\n  [GET_SHORT_URL_DETAIL_START]: () => ({ loading: true, error: false }),\n  [GET_SHORT_URL_DETAIL_ERROR]: (_, { errorData }) => ({ loading: false, error: true, errorData }),\n  [GET_SHORT_URL_DETAIL]: (_, { shortUrl }) => ({ shortUrl, ...initialState }),\n}, initialState);\n\nexport const getShortUrlDetail = (buildShlinkApiClient: ShlinkApiClientBuilder) => (\n  shortCode: string,\n  domain: OptionalString,\n) => async (dispatch: Dispatch, getState: GetState) => {\n  dispatch({ type: GET_SHORT_URL_DETAIL_START });\n\n  try {\n    const { shortUrlsList } = getState();\n    const shortUrl = shortUrlsList?.shortUrls?.data.find(\n      (shortUrl) => shortUrlMatches(shortUrl, shortCode, domain),\n    ) ?? await buildShlinkApiClient(getState).getShortUrl(shortCode, domain);\n\n    dispatch<ShortUrlDetailAction>({ shortUrl, type: GET_SHORT_URL_DETAIL });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: GET_SHORT_URL_DETAIL_ERROR, errorData: parseApiError(e) });\n  }\n};\n","import Bottle from 'bottlejs';\nimport ShortUrls from '../ShortUrls';\nimport SearchBar from '../SearchBar';\nimport ShortUrlsList from '../ShortUrlsList';\nimport ShortUrlsRow from '../helpers/ShortUrlsRow';\nimport ShortUrlsRowMenu from '../helpers/ShortUrlsRowMenu';\nimport CreateShortUrl from '../CreateShortUrl';\nimport DeleteShortUrlModal from '../helpers/DeleteShortUrlModal';\nimport CreateShortUrlResult from '../helpers/CreateShortUrlResult';\nimport { listShortUrls } from '../reducers/shortUrlsList';\nimport { createShortUrl, resetCreateShortUrl } from '../reducers/shortUrlCreation';\nimport { deleteShortUrl, resetDeleteShortUrl } from '../reducers/shortUrlDeletion';\nimport { resetShortUrlParams } from '../reducers/shortUrlsListParams';\nimport { editShortUrl } from '../reducers/shortUrlEdition';\nimport { ConnectDecorator } from '../../container/types';\nimport { ShortUrlsTable } from '../ShortUrlsTable';\nimport QrCodeModal from '../helpers/QrCodeModal';\nimport { ShortUrlForm } from '../ShortUrlForm';\nimport { EditShortUrl } from '../EditShortUrl';\nimport { getShortUrlDetail } from '../reducers/shortUrlDetail';\n\nconst provideServices = (bottle: Bottle, connect: ConnectDecorator) => {\n  // Components\n  bottle.serviceFactory('ShortUrls', ShortUrls, 'SearchBar', 'ShortUrlsList');\n  bottle.decorator('ShortUrls', connect([ 'shortUrlsList' ]));\n\n  bottle.serviceFactory('ShortUrlsList', ShortUrlsList, 'ShortUrlsTable');\n  bottle.decorator('ShortUrlsList', connect(\n    [ 'selectedServer', 'shortUrlsListParams', 'mercureInfo' ],\n    [ 'listShortUrls', 'resetShortUrlParams', 'createNewVisits', 'loadMercureInfo' ],\n  ));\n\n  bottle.serviceFactory('ShortUrlsTable', ShortUrlsTable, 'ShortUrlsRow');\n  bottle.serviceFactory('ShortUrlsRow', ShortUrlsRow, 'ShortUrlsRowMenu', 'ColorGenerator', 'useStateFlagTimeout');\n  bottle.serviceFactory('ShortUrlsRowMenu', ShortUrlsRowMenu, 'DeleteShortUrlModal', 'QrCodeModal');\n  bottle.serviceFactory('CreateShortUrlResult', CreateShortUrlResult, 'useStateFlagTimeout');\n  bottle.serviceFactory('ShortUrlForm', ShortUrlForm, 'TagsSelector', 'DomainSelector');\n\n  bottle.serviceFactory('CreateShortUrl', CreateShortUrl, 'ShortUrlForm', 'CreateShortUrlResult');\n  bottle.decorator(\n    'CreateShortUrl',\n    connect([ 'shortUrlCreationResult', 'selectedServer', 'settings' ], [ 'createShortUrl', 'resetCreateShortUrl' ]),\n  );\n\n  bottle.serviceFactory('EditShortUrl', EditShortUrl, 'ShortUrlForm');\n  bottle.decorator('EditShortUrl', connect(\n    [ 'shortUrlDetail', 'shortUrlEdition', 'selectedServer', 'settings' ],\n    [ 'getShortUrlDetail', 'editShortUrl' ],\n  ));\n\n  bottle.serviceFactory('DeleteShortUrlModal', () => DeleteShortUrlModal);\n  bottle.decorator('DeleteShortUrlModal', connect([ 'shortUrlDeletion' ], [ 'deleteShortUrl', 'resetDeleteShortUrl' ]));\n\n  bottle.serviceFactory('QrCodeModal', QrCodeModal, 'ImageDownloader', 'ForServerVersion');\n  bottle.decorator('QrCodeModal', connect([ 'selectedServer' ]));\n\n  // Services\n  bottle.serviceFactory('SearchBar', SearchBar, 'ColorGenerator');\n  bottle.decorator('SearchBar', connect([ 'shortUrlsListParams' ], [ 'listShortUrls' ]));\n\n  // Actions\n  bottle.serviceFactory('listShortUrls', listShortUrls, 'buildShlinkApiClient');\n  bottle.serviceFactory('resetShortUrlParams', () => resetShortUrlParams);\n\n  bottle.serviceFactory('createShortUrl', createShortUrl, 'buildShlinkApiClient');\n  bottle.serviceFactory('resetCreateShortUrl', () => resetCreateShortUrl);\n\n  bottle.serviceFactory('deleteShortUrl', deleteShortUrl, 'buildShlinkApiClient');\n  bottle.serviceFactory('resetDeleteShortUrl', () => resetDeleteShortUrl);\n\n  bottle.serviceFactory('getShortUrlDetail', getShortUrlDetail, 'buildShlinkApiClient');\n\n  bottle.serviceFactory('editShortUrl', editShortUrl, 'buildShlinkApiClient');\n};\n\nexport default provideServices;\n","import { FC, useRef } from 'react';\nimport { v4 as uuid } from 'uuid';\nimport { InputType } from 'reactstrap/lib/Input';\nimport { FormGroup } from 'reactstrap';\n\nexport interface FormGroupContainerProps {\n  value: string;\n  onChange: (newValue: string) => void;\n  id?: string;\n  type?: InputType;\n  required?: boolean;\n  placeholder?: string;\n  className?: string;\n  labelClassName?: string;\n}\n\nexport const FormGroupContainer: FC<FormGroupContainerProps> = (\n  { children, value, onChange, id, type, required, placeholder, className, labelClassName },\n) => {\n  const forId = useRef<string>(id ?? uuid());\n\n  return (\n    <FormGroup className={className ?? ''}>\n      <label htmlFor={forId.current} className={labelClassName ?? ''}>\n        {children}:\n      </label>\n      <input\n        className=\"form-control\"\n        type={type ?? 'text'}\n        id={forId.current}\n        value={value}\n        required={required ?? true}\n        placeholder={placeholder}\n        onChange={(e) => onChange(e.target.value)}\n      />\n    </FormGroup>\n  );\n};\n","import { FC, ReactNode, useEffect, useState } from 'react';\nimport { FormGroupContainer, FormGroupContainerProps } from '../../utils/FormGroupContainer';\nimport { handleEventPreventingDefault } from '../../utils/utils';\nimport { ServerData } from '../data';\nimport { SimpleCard } from '../../utils/SimpleCard';\nimport './ServerForm.scss';\n\ninterface ServerFormProps {\n  onSubmit: (server: ServerData) => void;\n  initialValues?: ServerData;\n  title?: ReactNode;\n}\n\nconst FormGroup: FC<FormGroupContainerProps> = (props) =>\n  <FormGroupContainer {...props} labelClassName=\"create-server__label\" />;\n\nexport const ServerForm: FC<ServerFormProps> = ({ onSubmit, initialValues, children, title }) => {\n  const [ name, setName ] = useState('');\n  const [ url, setUrl ] = useState('');\n  const [ apiKey, setApiKey ] = useState('');\n  const handleSubmit = handleEventPreventingDefault(() => onSubmit({ name, url, apiKey }));\n\n  useEffect(() => {\n    initialValues && setName(initialValues.name);\n    initialValues && setUrl(initialValues.url);\n    initialValues && setApiKey(initialValues.apiKey);\n  }, [ initialValues ]);\n\n  return (\n    <form className=\"server-form\" onSubmit={handleSubmit}>\n      <SimpleCard className=\"mb-3\" title={title}>\n        <FormGroup value={name} onChange={setName}>Name</FormGroup>\n        <FormGroup type=\"url\" value={url} onChange={setUrl}>URL</FormGroup>\n        <FormGroup value={apiKey} onChange={setApiKey}>API key</FormGroup>\n      </SimpleCard>\n\n      <div className=\"text-right\">{children}</div>\n    </form>\n  );\n};\n","import { FC } from 'react';\nimport { v4 as uuid } from 'uuid';\nimport { RouterProps } from 'react-router';\nimport { Button } from 'reactstrap';\nimport { Result } from '../utils/Result';\nimport NoMenuLayout from '../common/NoMenuLayout';\nimport { StateFlagTimeout } from '../utils/helpers/hooks';\nimport { ServerForm } from './helpers/ServerForm';\nimport { ImportServersBtnProps } from './helpers/ImportServersBtn';\nimport { ServerData, ServersMap, ServerWithId } from './data';\nimport './CreateServer.scss';\n\nconst SHOW_IMPORT_MSG_TIME = 4000;\n\ninterface CreateServerProps extends RouterProps {\n  createServer: (server: ServerWithId) => void;\n  servers: ServersMap;\n}\n\nconst ImportResult = ({ type }: { type: 'error' | 'success' }) => (\n  <div className=\"mt-3\">\n    <Result type={type}>\n      {type === 'success' && 'Servers properly imported. You can now select one from the list :)'}\n      {type === 'error' && 'The servers could not be imported. Make sure the format is correct.'}\n    </Result>\n  </div>\n);\n\nconst CreateServer = (ImportServersBtn: FC<ImportServersBtnProps>, useStateFlagTimeout: StateFlagTimeout) => (\n  { servers, createServer, history: { push, goBack } }: CreateServerProps,\n) => {\n  const hasServers = !!Object.keys(servers).length;\n  const [ serversImported, setServersImported ] = useStateFlagTimeout(false, SHOW_IMPORT_MSG_TIME);\n  const [ errorImporting, setErrorImporting ] = useStateFlagTimeout(false, SHOW_IMPORT_MSG_TIME);\n  const handleSubmit = (serverData: ServerData) => {\n    const id = uuid();\n\n    createServer({ ...serverData, id });\n    push(`/server/${id}`);\n  };\n\n  return (\n    <NoMenuLayout>\n      <ServerForm title={<h5 className=\"mb-0\">Add new server</h5>} onSubmit={handleSubmit}>\n        {!hasServers &&\n          <ImportServersBtn tooltipPlacement=\"top\" onImport={setServersImported} onImportError={setErrorImporting} />}\n        {hasServers && <Button outline onClick={goBack}>Cancel</Button>}\n        <Button outline color=\"primary\" className=\"ml-2\">Create server</Button>\n      </ServerForm>\n\n      {serversImported && <ImportResult type=\"success\" />}\n      {errorImporting && <ImportResult type=\"error\" />}\n    </NoMenuLayout>\n  );\n};\n\nexport default CreateServer;\n","import { isEmpty, values } from 'ramda';\nimport { DropdownItem, DropdownMenu, DropdownToggle, UncontrolledDropdown } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport { faPlus as plusIcon, faServer as serverIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { getServerId, SelectedServer, ServersMap } from './data';\n\nexport interface ServersDropdownProps {\n  servers: ServersMap;\n  selectedServer: SelectedServer;\n}\n\nconst ServersDropdown = ({ servers, selectedServer }: ServersDropdownProps) => {\n  const serversList = values(servers);\n\n  const renderServers = () => {\n    if (isEmpty(serversList)) {\n      return (\n        <DropdownItem tag={Link} to=\"/server/create\">\n          <FontAwesomeIcon icon={plusIcon} /> <span className=\"ml-1\">Add a server</span>\n        </DropdownItem>\n      );\n    }\n\n    return (\n      <>\n        {serversList.map(({ name, id }) => (\n          <DropdownItem key={id} tag={Link} to={`/server/${id}`} active={getServerId(selectedServer) === id}>\n            {name}\n          </DropdownItem>\n        ))}\n        <DropdownItem divider />\n        <DropdownItem tag={Link} to=\"/manage-servers\">\n          <FontAwesomeIcon icon={serverIcon} /> <span className=\"ml-1\">Manage servers</span>\n        </DropdownItem>\n      </>\n    );\n  };\n\n  return (\n    <UncontrolledDropdown nav inNavbar>\n      <DropdownToggle nav caret>\n        <FontAwesomeIcon icon={serverIcon} /> <span className=\"ml-1\">Servers</span>\n      </DropdownToggle>\n      <DropdownMenu right>{renderServers()}</DropdownMenu>\n    </UncontrolledDropdown>\n  );\n};\n\nexport default ServersDropdown;\n","import { FC } from 'react';\nimport { Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\nimport { RouterProps } from 'react-router';\nimport { ServerWithId } from './data';\n\nexport interface DeleteServerModalProps {\n  server: ServerWithId;\n  toggle: () => void;\n  isOpen: boolean;\n  redirectHome?: boolean;\n}\n\ninterface DeleteServerModalConnectProps extends DeleteServerModalProps, RouterProps {\n  deleteServer: (server: ServerWithId) => void;\n}\n\nconst DeleteServerModal: FC<DeleteServerModalConnectProps> = (\n  { server, toggle, isOpen, deleteServer, history, redirectHome = true },\n) => {\n  const closeModal = () => {\n    deleteServer(server);\n    toggle();\n    redirectHome && history.push('/');\n  };\n\n  return (\n    <Modal isOpen={isOpen} toggle={toggle} centered>\n      <ModalHeader toggle={toggle}><span className=\"text-danger\">Remove server</span></ModalHeader>\n      <ModalBody>\n        <p>Are you sure you want to remove <b>{server ? server.name : ''}</b>?</p>\n        <p>\n          <i>\n            No data will be deleted, only the access to this server will be removed from this device.\n            You can create it again at any moment.\n          </i>\n        </p>\n      </ModalBody>\n      <ModalFooter>\n        <button className=\"btn btn-link\" onClick={toggle}>Cancel</button>\n        <button className=\"btn btn-danger\" onClick={() => closeModal()}>Delete</button>\n      </ModalFooter>\n    </Modal>\n  );\n};\n\nexport default DeleteServerModal;\n","import { FC } from 'react';\nimport { faMinusCircle as deleteIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useToggle } from '../utils/helpers/hooks';\nimport { DeleteServerModalProps } from './DeleteServerModal';\nimport { ServerWithId } from './data';\n\nexport interface DeleteServerButtonProps {\n  server: ServerWithId;\n  className?: string;\n  textClassName?: string;\n}\n\nconst DeleteServerButton = (DeleteServerModal: FC<DeleteServerModalProps>): FC<DeleteServerButtonProps> => (\n  { server, className, children, textClassName },\n) => {\n  const [ isModalOpen, , showModal, hideModal ] = useToggle();\n\n  return (\n    <>\n      <span className={className} onClick={showModal}>\n        {!children && <FontAwesomeIcon fixedWidth icon={deleteIcon} />}\n        <span className={textClassName}>{children ?? 'Remove this server'}</span>\n      </span>\n\n      <DeleteServerModal server={server} isOpen={isModalOpen} toggle={hideModal} />\n    </>\n  );\n};\n\nexport default DeleteServerButton;\n","import { FC } from 'react';\nimport { Button } from 'reactstrap';\nimport NoMenuLayout from '../common/NoMenuLayout';\nimport { ServerForm } from './helpers/ServerForm';\nimport { withSelectedServer } from './helpers/withSelectedServer';\nimport { isServerWithId, ServerData } from './data';\n\ninterface EditServerProps {\n  editServer: (serverId: string, serverData: ServerData) => void;\n}\n\nexport const EditServer = (ServerError: FC) => withSelectedServer<EditServerProps>((\n  { editServer, selectedServer, history: { goBack } },\n) => {\n  if (!isServerWithId(selectedServer)) {\n    return null;\n  }\n\n  const handleSubmit = (serverData: ServerData) => {\n    editServer(selectedServer.id, serverData);\n    goBack();\n  };\n\n  return (\n    <NoMenuLayout>\n      <ServerForm\n        title={<h5 className=\"mb-0\">Edit &quot;{selectedServer.name}&quot;</h5>}\n        initialValues={selectedServer}\n        onSubmit={handleSubmit}\n      >\n        <Button outline className=\"mr-2\" onClick={goBack}>Cancel</Button>\n        <Button outline color=\"primary\">Save</Button>\n      </ServerForm>\n    </NoMenuLayout>\n  );\n}, ServerError);\n","import { useRef, RefObject, ChangeEvent, MutableRefObject, FC } from 'react';\nimport { Button, UncontrolledTooltip } from 'reactstrap';\nimport { faFileUpload as importIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport ServersImporter from '../services/ServersImporter';\nimport { ServerData } from '../data';\nimport './ImportServersBtn.scss';\n\ntype Ref<T> = RefObject<T> | MutableRefObject<T>;\n\nexport interface ImportServersBtnProps {\n  onImport?: () => void;\n  onImportError?: (error: Error) => void;\n  tooltipPlacement?: 'top' | 'bottom';\n  className?: string;\n}\n\ninterface ImportServersBtnConnectProps extends ImportServersBtnProps {\n  createServers: (servers: ServerData[]) => void;\n  fileRef: Ref<HTMLInputElement>;\n}\n\nconst ImportServersBtn = ({ importServersFromFile }: ServersImporter): FC<ImportServersBtnConnectProps> => ({\n  createServers,\n  fileRef,\n  children,\n  onImport = () => {},\n  onImportError = () => {},\n  tooltipPlacement = 'bottom',\n  className = '',\n}) => {\n  const ref = fileRef ?? useRef<HTMLInputElement>();\n  const onChange = async ({ target }: ChangeEvent<HTMLInputElement>) =>\n    importServersFromFile(target.files?.[0])\n      .then(createServers)\n      .then(onImport)\n      .then(() => {\n        // Reset input after processing file\n        (target as { value: string | null }).value = null;\n      })\n      .catch(onImportError);\n\n  return (\n    <>\n      <Button outline id=\"importBtn\" className={className} onClick={() => ref.current?.click()}>\n        <FontAwesomeIcon icon={importIcon} fixedWidth /> {children ?? 'Import from file'}\n      </Button>\n      <UncontrolledTooltip placement={tooltipPlacement} target=\"importBtn\">\n        You can create servers by importing a CSV file with columns <b>name</b>, <b>apiKey</b> and <b>url</b>.\n      </UncontrolledTooltip>\n\n      <input type=\"file\" accept=\"text/csv\" className=\"import-servers-btn__csv-select\" ref={ref} onChange={onChange} />\n    </>\n  );\n};\n\nexport default ImportServersBtn;\n","import { identity, memoizeWith, pipe } from 'ramda';\nimport { Action, Dispatch } from 'redux';\nimport { resetShortUrlParams } from '../../short-urls/reducers/shortUrlsListParams';\nimport { versionToPrintable, versionToSemVer as toSemVer } from '../../utils/helpers/version';\nimport { SelectedServer } from '../data';\nimport { GetState } from '../../container/types';\nimport { ShlinkHealth } from '../../api/types';\nimport { buildActionCreator, buildReducer } from '../../utils/helpers/redux';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\n\n/* eslint-disable padding-line-between-statements */\nexport const SELECT_SERVER = 'shlink/selectedServer/SELECT_SERVER';\nexport const RESET_SELECTED_SERVER = 'shlink/selectedServer/RESET_SELECTED_SERVER';\n\nexport const MIN_FALLBACK_VERSION = '1.0.0';\nexport const MAX_FALLBACK_VERSION = '999.999.999';\nexport const LATEST_VERSION_CONSTRAINT = 'latest';\n/* eslint-enable padding-line-between-statements */\n\nexport interface SelectServerAction extends Action<string> {\n  selectedServer: SelectedServer;\n}\n\nconst versionToSemVer = pipe(\n  (version: string) => version === LATEST_VERSION_CONSTRAINT ? MAX_FALLBACK_VERSION : version,\n  toSemVer(MIN_FALLBACK_VERSION),\n);\n\nconst getServerVersion = memoizeWith(\n  identity,\n  async (_serverId: string, health: () => Promise<ShlinkHealth>) => health().then(({ version }) => ({\n    version: versionToSemVer(version),\n    printableVersion: versionToPrintable(version),\n  })),\n);\n\nconst initialState: SelectedServer = null;\n\nexport default buildReducer<SelectedServer, SelectServerAction>({\n  [RESET_SELECTED_SERVER]: () => initialState,\n  [SELECT_SERVER]: (_, { selectedServer }) => selectedServer,\n}, initialState);\n\nexport const resetSelectedServer = buildActionCreator(RESET_SELECTED_SERVER);\n\nexport const selectServer = (\n  buildShlinkApiClient: ShlinkApiClientBuilder,\n  loadMercureInfo: () => Action,\n) => (\n  serverId: string,\n) => async (\n  dispatch: Dispatch,\n  getState: GetState,\n) => {\n  dispatch(resetSelectedServer());\n  dispatch(resetShortUrlParams());\n\n  const { servers } = getState();\n  const selectedServer = servers[serverId];\n\n  if (!selectedServer) {\n    dispatch<SelectServerAction>({\n      type: SELECT_SERVER,\n      selectedServer: { serverNotFound: true },\n    });\n\n    return;\n  }\n\n  try {\n    const { health } = buildShlinkApiClient(selectedServer);\n    const { version, printableVersion } = await getServerVersion(serverId, health);\n\n    dispatch<SelectServerAction>({\n      type: SELECT_SERVER,\n      selectedServer: {\n        ...selectedServer,\n        version,\n        printableVersion,\n      },\n    });\n    dispatch(loadMercureInfo());\n  } catch (e) {\n    dispatch<SelectServerAction>({\n      type: SELECT_SERVER,\n      selectedServer: { ...selectedServer, serverNotReachable: true },\n    });\n  }\n};\n","import { assoc, dissoc, fromPairs, map, pipe, reduce, toPairs } from 'ramda';\nimport { v4 as uuid } from 'uuid';\nimport { Action } from 'redux';\nimport { ServerData, ServersMap, ServerWithId } from '../data';\nimport { buildReducer } from '../../utils/helpers/redux';\n\n/* eslint-disable padding-line-between-statements */\nexport const EDIT_SERVER = 'shlink/servers/EDIT_SERVER';\nexport const DELETE_SERVER = 'shlink/servers/DELETE_SERVER';\nexport const CREATE_SERVERS = 'shlink/servers/CREATE_SERVERS';\nexport const SET_AUTO_CONNECT = 'shlink/servers/SET_AUTO_CONNECT';\n/* eslint-enable padding-line-between-statements */\n\nexport interface CreateServersAction extends Action<string> {\n  newServers: ServersMap;\n}\n\ninterface DeleteServerAction extends Action<string> {\n  serverId: string;\n}\n\ninterface SetAutoConnectAction extends Action<string> {\n  serverId: string;\n  autoConnect: boolean;\n}\n\nconst initialState: ServersMap = {};\n\nconst serverWithId = (server: ServerWithId | ServerData): ServerWithId => {\n  if ((server as ServerWithId).id) {\n    return server as ServerWithId;\n  }\n\n  return assoc('id', uuid(), server);\n};\n\nexport default buildReducer<ServersMap, CreateServersAction & DeleteServerAction & SetAutoConnectAction>({\n  [CREATE_SERVERS]: (state, { newServers }) => ({ ...state, ...newServers }),\n  [DELETE_SERVER]: (state, { serverId }) => dissoc(serverId, state),\n  [EDIT_SERVER]: (state, { serverId, serverData }: any) => !state[serverId]\n    ? state\n    : assoc(serverId, { ...state[serverId], ...serverData }, state),\n  [SET_AUTO_CONNECT]: (state, { serverId, autoConnect }) => {\n    if (!state[serverId]) {\n      return state;\n    }\n\n    if (!autoConnect) {\n      return assoc(serverId, { ...state[serverId], autoConnect }, state);\n    }\n\n    return fromPairs(\n      toPairs(state).map(([ evaluatedServerId, server ]) => [\n        evaluatedServerId,\n        { ...server, autoConnect: evaluatedServerId === serverId },\n      ]),\n    );\n  },\n}, initialState);\n\nconst serversListToMap = reduce<ServerWithId, ServersMap>((acc, server) => assoc(server.id, server, acc), {});\n\nexport const createServers = pipe(\n  map(serverWithId),\n  serversListToMap,\n  (newServers: ServersMap) => ({ type: CREATE_SERVERS, newServers }),\n);\n\nexport const createServer = (server: ServerWithId) => createServers([ server ]);\n\nexport const editServer = (serverId: string, serverData: Partial<ServerData>) => ({\n  type: EDIT_SERVER,\n  serverId,\n  serverData,\n});\n\nexport const deleteServer = ({ id }: ServerWithId): DeleteServerAction => ({ type: DELETE_SERVER, serverId: id });\n\nexport const setAutoConnect = ({ id }: ServerWithId, autoConnect: boolean): SetAutoConnectAction => ({\n  type: SET_AUTO_CONNECT,\n  serverId: id,\n  autoConnect,\n});\n","import { pipe, prop } from 'ramda';\nimport { AxiosInstance } from 'axios';\nimport { Dispatch } from 'redux';\nimport { homepage } from '../../../package.json';\nimport { ServerData } from '../data';\nimport { createServers } from './servers';\n\nconst responseToServersList = pipe(\n  prop<any, any>('data'),\n  (data: any): ServerData[] => {\n    if (!Array.isArray(data)) {\n      throw new Error('Value is not an array');\n    }\n\n    return data as ServerData[];\n  },\n);\n\nexport const fetchServers = ({ get }: AxiosInstance) => () => async (dispatch: Dispatch) => {\n  const remoteList = await get(`${homepage}/servers.json`)\n    .then(responseToServersList)\n    .catch(() => []);\n\n  dispatch(createServers(remoteList));\n};\n","import { FC } from 'react';\nimport { versionMatch, Versions } from '../../utils/helpers/version';\nimport { isReachableServer, SelectedServer } from '../data';\n\ninterface ForServerVersionProps extends Versions {\n  selectedServer: SelectedServer;\n}\n\nconst ForServerVersion: FC<ForServerVersionProps> = ({ minVersion, maxVersion, selectedServer, children }) => {\n  if (!isReachableServer(selectedServer)) {\n    return null;\n  }\n\n  const { version } = selectedServer;\n  const matchesVersion = versionMatch(version, { maxVersion, minVersion });\n\n  if (!matchesVersion) {\n    return null;\n  }\n\n  return <>{children}</>;\n};\n\nexport default ForServerVersion;\n","import { FC } from 'react';\nimport { Link } from 'react-router-dom';\nimport Message from '../../utils/Message';\nimport ServersListGroup from '../ServersListGroup';\nimport { DeleteServerButtonProps } from '../DeleteServerButton';\nimport { isServerWithId, SelectedServer, ServersMap } from '../data';\nimport NoMenuLayout from '../../common/NoMenuLayout';\nimport './ServerError.scss';\n\ninterface ServerErrorProps {\n  servers: ServersMap;\n  selectedServer: SelectedServer;\n}\n\nexport const ServerError = (DeleteServerButton: FC<DeleteServerButtonProps>): FC<ServerErrorProps> => (\n  { servers, selectedServer },\n) => (\n  <NoMenuLayout>\n    <div className=\"server-error__container flex-column\">\n      <Message className=\"w-100 mb-3 mb-md-5\" type=\"error\" fullWidth>\n        {!isServerWithId(selectedServer) && 'Could not find this Shlink server.'}\n        {isServerWithId(selectedServer) && (\n          <>\n            <p>Oops! Could not connect to this Shlink server.</p>\n            Make sure you have internet connection, and the server is properly configured and on-line.\n          </>\n        )}\n      </Message>\n\n      <ServersListGroup servers={Object.values(servers)}>\n        These are the Shlink servers currently configured. Choose one of\n        them or <Link to=\"/server/create\">add a new one</Link>.\n      </ServersListGroup>\n\n      {isServerWithId(selectedServer) && (\n        <div className=\"container mt-3 mt-md-5\">\n          <h5>\n            Alternatively, if you think you may have miss-configured this server, you\n            can <DeleteServerButton server={selectedServer} className=\"server-error__delete-btn\">remove it</DeleteServerButton> or&nbsp;\n            <Link to={`/server/${selectedServer.id}/edit`}>edit it</Link>.\n          </h5>\n        </div>\n      )}\n    </div>\n  </NoMenuLayout>\n);\n","import { FC, useEffect } from 'react';\nimport { Card, CardBody, CardHeader, CardText, CardTitle, Row } from 'reactstrap';\nimport { Link, useHistory } from 'react-router-dom';\nimport { ShortUrlsListParams } from '../short-urls/reducers/shortUrlsListParams';\nimport { ShortUrlsList as ShortUrlsListState } from '../short-urls/reducers/shortUrlsList';\nimport { prettify } from '../utils/helpers/numbers';\nimport { TagsList } from '../tags/reducers/tagsList';\nimport { ShortUrlsTableProps } from '../short-urls/ShortUrlsTable';\nimport { boundToMercureHub } from '../mercure/helpers/boundToMercureHub';\nimport { CreateShortUrlProps } from '../short-urls/CreateShortUrl';\nimport { VisitsOverview } from '../visits/reducers/visitsOverview';\nimport { Versions } from '../utils/helpers/version';\nimport { Topics } from '../mercure/helpers/Topics';\nimport { isServerWithId, SelectedServer } from './data';\nimport './Overview.scss';\n\ninterface OverviewConnectProps {\n  shortUrlsList: ShortUrlsListState;\n  listShortUrls: (params: ShortUrlsListParams) => void;\n  listTags: Function;\n  tagsList: TagsList;\n  selectedServer: SelectedServer;\n  visitsOverview: VisitsOverview;\n  loadVisitsOverview: Function;\n}\n\nexport const Overview = (\n  ShortUrlsTable: FC<ShortUrlsTableProps>,\n  CreateShortUrl: FC<CreateShortUrlProps>,\n  ForServerVersion: FC<Versions>,\n) => boundToMercureHub(({\n  shortUrlsList,\n  listShortUrls,\n  listTags,\n  tagsList,\n  selectedServer,\n  loadVisitsOverview,\n  visitsOverview,\n}: OverviewConnectProps) => {\n  const { loading, shortUrls } = shortUrlsList;\n  const { loading: loadingTags } = tagsList;\n  const { loading: loadingVisits, visitsCount, orphanVisitsCount } = visitsOverview;\n  const serverId = isServerWithId(selectedServer) ? selectedServer.id : '';\n  const history = useHistory();\n\n  useEffect(() => {\n    listShortUrls({ itemsPerPage: 5, orderBy: { dateCreated: 'DESC' } });\n    listTags();\n    loadVisitsOverview();\n  }, []);\n\n  return (\n    <>\n      <Row>\n        <div className=\"col-md-6 col-xl-3\">\n          <Card className=\"overview__card mb-3\" body>\n            <CardTitle tag=\"h5\" className=\"overview__card-title\">Visits</CardTitle>\n            <CardText tag=\"h2\">{loadingVisits ? 'Loading...' : prettify(visitsCount)}</CardText>\n          </Card>\n        </div>\n        <div className=\"col-md-6 col-xl-3\">\n          <Card className=\"overview__card mb-3\" body tag={Link} to={`/server/${serverId}/orphan-visits`}>\n            <CardTitle tag=\"h5\" className=\"overview__card-title\">Orphan visits</CardTitle>\n            <CardText tag=\"h2\">\n              <ForServerVersion minVersion=\"2.6.0\">\n                {loadingVisits ? 'Loading...' : prettify(orphanVisitsCount ?? 0)}\n              </ForServerVersion>\n              <ForServerVersion maxVersion=\"2.5.*\">\n                <small className=\"text-muted\"><i>Shlink 2.6 is needed</i></small>\n              </ForServerVersion>\n            </CardText>\n          </Card>\n        </div>\n        <div className=\"col-md-6 col-xl-3\">\n          <Card className=\"overview__card mb-3\" body tag={Link} to={`/server/${serverId}/list-short-urls/1`}>\n            <CardTitle tag=\"h5\" className=\"overview__card-title\">Short URLs</CardTitle>\n            <CardText tag=\"h2\">\n              {loading ? 'Loading...' : prettify(shortUrls?.pagination.totalItems ?? 0)}\n            </CardText>\n          </Card>\n        </div>\n        <div className=\"col-md-6 col-xl-3\">\n          <Card className=\"overview__card mb-3\" body tag={Link} to={`/server/${serverId}/manage-tags`}>\n            <CardTitle tag=\"h5\" className=\"overview__card-title\">Tags</CardTitle>\n            <CardText tag=\"h2\">{loadingTags ? 'Loading...' : prettify(tagsList.tags.length)}</CardText>\n          </Card>\n        </div>\n      </Row>\n      <Card className=\"mb-3\">\n        <CardHeader>\n          <span className=\"d-sm-none\">Create a short URL</span>\n          <h5 className=\"d-none d-sm-inline\">Create a short URL</h5>\n          <Link className=\"float-right\" to={`/server/${serverId}/create-short-url`}>Advanced options &raquo;</Link>\n        </CardHeader>\n        <CardBody>\n          <CreateShortUrl basicMode />\n        </CardBody>\n      </Card>\n      <Card>\n        <CardHeader>\n          <span className=\"d-sm-none\">Recently created URLs</span>\n          <h5 className=\"d-none d-sm-inline\">Recently created URLs</h5>\n          <Link className=\"float-right\" to={`/server/${serverId}/list-short-urls/1`}>See all &raquo;</Link>\n        </CardHeader>\n        <CardBody>\n          <ShortUrlsTable\n            shortUrlsList={shortUrlsList}\n            selectedServer={selectedServer}\n            className=\"mb-0\"\n            onTagClick={(tag) => history.push(`/server/${serverId}/list-short-urls/1?tag=${tag}`)}\n          />\n        </CardBody>\n      </Card>\n    </>\n  );\n}, () => [ Topics.visits, Topics.orphanVisits ]);\n","import { FC, useEffect, useState } from 'react';\nimport { Button, Row } from 'reactstrap';\nimport { faFileDownload as exportIcon, faPlus as plusIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Link } from 'react-router-dom';\nimport NoMenuLayout from '../common/NoMenuLayout';\nimport { SimpleCard } from '../utils/SimpleCard';\nimport SearchField from '../utils/SearchField';\nimport { Result } from '../utils/Result';\nimport { StateFlagTimeout } from '../utils/helpers/hooks';\nimport { ImportServersBtnProps } from './helpers/ImportServersBtn';\nimport { ServersMap } from './data';\nimport { ManageServersRowProps } from './ManageServersRow';\nimport ServersExporter from './services/ServersExporter';\n\ninterface ManageServersProps {\n  servers: ServersMap;\n}\n\nconst SHOW_IMPORT_MSG_TIME = 4000;\n\nexport const ManageServers = (\n  serversExporter: ServersExporter,\n  ImportServersBtn: FC<ImportServersBtnProps>,\n  useStateFlagTimeout: StateFlagTimeout,\n  ManageServersRow: FC<ManageServersRowProps>,\n): FC<ManageServersProps> => ({ servers }) => {\n  const allServers = Object.values(servers);\n  const [ serversList, setServersList ] = useState(allServers);\n  const filterServers = (searchTerm: string) => setServersList(\n    allServers.filter(({ name, url }) => `${name} ${url}`.match(searchTerm)),\n  );\n  const hasAutoConnect = serversList.some(({ autoConnect }) => !!autoConnect);\n  const [ errorImporting, setErrorImporting ] = useStateFlagTimeout(false, SHOW_IMPORT_MSG_TIME);\n\n  useEffect(() => {\n    setServersList(Object.values(servers));\n  }, [ servers ]);\n\n  return (\n    <NoMenuLayout>\n      <SearchField className=\"mb-3\" onChange={filterServers} />\n\n      <Row className=\"mb-3\">\n        <div className=\"col-md-6 d-flex d-md-block mb-2 mb-md-0\">\n          <ImportServersBtn className=\"flex-fill\" onImportError={setErrorImporting}>Import servers</ImportServersBtn>\n          {allServers.length > 0 && (\n            <Button outline className=\"ml-2 flex-fill\" onClick={async () => serversExporter.exportServers()}>\n              <FontAwesomeIcon icon={exportIcon} fixedWidth /> Export servers\n            </Button>\n          )}\n        </div>\n        <div className=\"col-md-6 text-md-right d-flex d-md-block\">\n          <Button outline color=\"primary\" className=\"flex-fill\" tag={Link} to=\"/server/create\">\n            <FontAwesomeIcon icon={plusIcon} fixedWidth /> Add a server\n          </Button>\n        </div>\n      </Row>\n\n      <SimpleCard>\n        <table className=\"table table-hover mb-0\">\n          <thead className=\"responsive-table__header\">\n            <tr>\n              {hasAutoConnect && <th style={{ width: '50px' }} />}\n              <th>Name</th>\n              <th>Base URL</th>\n              <th />\n            </tr>\n          </thead>\n          <tbody>\n            {!serversList.length && <tr className=\"text-center\"><td colSpan={4}>No servers found.</td></tr>}\n            {serversList.map((server) =>\n              <ManageServersRow key={server.id} server={server} hasAutoConnect={hasAutoConnect} />)\n            }\n          </tbody>\n        </table>\n      </SimpleCard>\n\n      {errorImporting && (\n        <div className=\"mt-3\">\n          <Result type=\"error\">The servers could not be imported. Make sure the format is correct.</Result>\n        </div>\n      )}\n    </NoMenuLayout>\n  );\n};\n","import { FC } from 'react';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCheck as checkIcon } from '@fortawesome/free-solid-svg-icons';\nimport { ServerWithId } from './data';\nimport { ManageServersRowDropdownProps } from './ManageServersRowDropdown';\n\nexport interface ManageServersRowProps {\n  server: ServerWithId;\n  hasAutoConnect: boolean;\n}\n\nexport const ManageServersRow = (\n  ManageServersRowDropdown: FC<ManageServersRowDropdownProps>,\n): FC<ManageServersRowProps> => ({ server, hasAutoConnect }) => (\n  <tr className=\"responsive-table__row\">\n    {hasAutoConnect && (\n      <td className=\"responsive-table__cell\" data-th=\"Auto-connect\">\n        {server.autoConnect && (\n          <>\n            <FontAwesomeIcon icon={checkIcon} className=\"text-primary\" id=\"autoConnectIcon\" />\n            <UncontrolledTooltip target=\"autoConnectIcon\" placement=\"right\">\n              Auto-connect to this server\n            </UncontrolledTooltip>\n          </>\n        )}\n      </td>\n    )}\n    <th className=\"responsive-table__cell\" data-th=\"Name\">\n      <Link to={`/server/${server.id}`}>{server.name}</Link>\n    </th>\n    <td className=\"responsive-table__cell\" data-th=\"Base URL\">{server.url}</td>\n    <td className=\"responsive-table__cell text-right\">\n      <ManageServersRowDropdown server={server} />\n    </td>\n  </tr>\n);\n","import { FC } from 'react';\nimport { DropdownItem } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faBan as toggleOffIcon,\n  faEdit as editIcon,\n  faMinusCircle as deleteIcon,\n  faPlug as connectIcon,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faCircle as toggleOnIcon } from '@fortawesome/free-regular-svg-icons';\nimport { DropdownBtnMenu } from '../utils/DropdownBtnMenu';\nimport { useToggle } from '../utils/helpers/hooks';\nimport { DeleteServerModalProps } from './DeleteServerModal';\nimport { ServerWithId } from './data';\n\nexport interface ManageServersRowDropdownProps {\n  server: ServerWithId;\n}\n\ninterface ManageServersRowDropdownConnectProps extends ManageServersRowDropdownProps {\n  setAutoConnect: (server: ServerWithId, autoConnect: boolean) => void;\n}\n\nexport const ManageServersRowDropdown = (\n  DeleteServerModal: FC<DeleteServerModalProps>,\n): FC<ManageServersRowDropdownConnectProps> => ({ server, setAutoConnect }) => {\n  const [ isMenuOpen, toggleMenu ] = useToggle();\n  const [ isModalOpen,, showModal, hideModal ] = useToggle();\n  const serverUrl = `/server/${server.id}`;\n  const { autoConnect: isAutoConnect } = server;\n  const autoConnectIcon = isAutoConnect ? toggleOffIcon : toggleOnIcon;\n\n  return (\n    <DropdownBtnMenu isOpen={isMenuOpen} toggle={toggleMenu}>\n      <DropdownItem tag={Link} to={serverUrl}>\n        <FontAwesomeIcon icon={connectIcon} fixedWidth /> Connect\n      </DropdownItem>\n      <DropdownItem tag={Link} to={`${serverUrl}/edit`}>\n        <FontAwesomeIcon icon={editIcon} fixedWidth /> Edit server\n      </DropdownItem>\n      <DropdownItem onClick={() => setAutoConnect(server, !server.autoConnect)}>\n        <FontAwesomeIcon icon={autoConnectIcon} fixedWidth /> {isAutoConnect ? 'Do not a' : 'A'}uto-connect\n      </DropdownItem>\n      <DropdownItem divider />\n      <DropdownItem className=\"dropdown-item--danger\" onClick={showModal}>\n        <FontAwesomeIcon icon={deleteIcon} fixedWidth /> Remove server\n      </DropdownItem>\n\n      <DeleteServerModal redirectHome={false} server={server} isOpen={isModalOpen} toggle={hideModal} />\n    </DropdownBtnMenu>\n  );\n};\n","import { CsvJson } from 'csvjson';\nimport { ServerData } from '../data';\n\nconst validateServer = (server: any): server is ServerData =>\n  typeof server.url === 'string' && typeof server.apiKey === 'string' && typeof server.name === 'string';\n\nconst validateServers = (servers: any): servers is ServerData[] =>\n  Array.isArray(servers) && servers.every(validateServer);\n\nexport default class ServersImporter {\n  public constructor(private readonly csvJson: CsvJson, private readonly fileReaderFactory: () => FileReader) {}\n\n  public readonly importServersFromFile = async (file?: File | null): Promise<ServerData[]> => {\n    if (!file) {\n      throw new Error('No file provided');\n    }\n\n    const reader = this.fileReaderFactory();\n\n    return new Promise((resolve, reject) => {\n      reader.addEventListener('loadend', (e: ProgressEvent<FileReader>) => {\n        try {\n          // TODO Read as stream, otherwise, if the file is too big, this will block the browser tab\n          const content = e.target?.result?.toString() ?? '';\n          const servers = this.csvJson.toObject(content);\n\n          if (!validateServers(servers)) {\n            throw new Error('Provided file does not have the right format.');\n          }\n\n          resolve(servers);\n        } catch (e) {\n          reject(e);\n        }\n      });\n      reader.readAsText(file);\n    });\n  };\n}\n","import { dissoc, values } from 'ramda';\nimport { CsvJson } from 'csvjson';\nimport LocalStorage from '../../utils/services/LocalStorage';\nimport { ServersMap } from '../data';\nimport { saveCsv } from '../../utils/helpers/files';\n\nconst SERVERS_FILENAME = 'shlink-servers.csv';\n\nexport default class ServersExporter {\n  public constructor(\n    private readonly storage: LocalStorage,\n    private readonly window: Window,\n    private readonly csvjson: CsvJson,\n  ) {}\n\n  public readonly exportServers = async () => {\n    const servers = values(this.storage.get<ServersMap>('servers') ?? {}).map(dissoc('id'));\n\n    try {\n      const csv = this.csvjson.toCSV(servers, { headers: 'key' });\n\n      saveCsv(this.window, csv, SERVERS_FILENAME);\n    } catch (e) {\n      // FIXME Handle error\n      console.error(e); // eslint-disable-line no-console\n    }\n  };\n}\n","import csvjson from 'csvjson';\nimport Bottle, { Decorator } from 'bottlejs';\nimport CreateServer from '../CreateServer';\nimport ServersDropdown from '../ServersDropdown';\nimport DeleteServerModal from '../DeleteServerModal';\nimport DeleteServerButton from '../DeleteServerButton';\nimport { EditServer } from '../EditServer';\nimport ImportServersBtn from '../helpers/ImportServersBtn';\nimport { resetSelectedServer, selectServer } from '../reducers/selectedServer';\nimport { createServer, createServers, deleteServer, editServer, setAutoConnect } from '../reducers/servers';\nimport { fetchServers } from '../reducers/remoteServers';\nimport ForServerVersion from '../helpers/ForServerVersion';\nimport { ServerError } from '../helpers/ServerError';\nimport { ConnectDecorator } from '../../container/types';\nimport { withoutSelectedServer } from '../helpers/withoutSelectedServer';\nimport { Overview } from '../Overview';\nimport { ManageServers } from '../ManageServers';\nimport { ManageServersRow } from '../ManageServersRow';\nimport { ManageServersRowDropdown } from '../ManageServersRowDropdown';\nimport ServersImporter from './ServersImporter';\nimport ServersExporter from './ServersExporter';\n\nconst provideServices = (bottle: Bottle, connect: ConnectDecorator, withRouter: Decorator) => {\n  // Components\n  bottle.serviceFactory(\n    'ManageServers',\n    ManageServers,\n    'ServersExporter',\n    'ImportServersBtn',\n    'useStateFlagTimeout',\n    'ManageServersRow',\n  );\n  bottle.decorator('ManageServers', connect([ 'servers' ]));\n\n  bottle.serviceFactory('ManageServersRow', ManageServersRow, 'ManageServersRowDropdown');\n\n  bottle.serviceFactory('ManageServersRowDropdown', ManageServersRowDropdown, 'DeleteServerModal');\n  bottle.decorator('ManageServersRowDropdown', connect(null, [ 'setAutoConnect' ]));\n\n  bottle.serviceFactory('CreateServer', CreateServer, 'ImportServersBtn', 'useStateFlagTimeout');\n  bottle.decorator('CreateServer', withoutSelectedServer);\n  bottle.decorator('CreateServer', connect([ 'selectedServer', 'servers' ], [ 'createServer', 'resetSelectedServer' ]));\n\n  bottle.serviceFactory('EditServer', EditServer, 'ServerError');\n  bottle.decorator('EditServer', connect([ 'selectedServer' ], [ 'editServer', 'selectServer' ]));\n\n  bottle.serviceFactory('ServersDropdown', () => ServersDropdown);\n  bottle.decorator('ServersDropdown', connect([ 'servers', 'selectedServer' ]));\n\n  bottle.serviceFactory('DeleteServerModal', () => DeleteServerModal);\n  bottle.decorator('DeleteServerModal', withRouter);\n  bottle.decorator('DeleteServerModal', connect(null, [ 'deleteServer' ]));\n\n  bottle.serviceFactory('DeleteServerButton', DeleteServerButton, 'DeleteServerModal');\n\n  bottle.serviceFactory('ImportServersBtn', ImportServersBtn, 'ServersImporter');\n  bottle.decorator('ImportServersBtn', connect(null, [ 'createServers' ]));\n\n  bottle.serviceFactory('ForServerVersion', () => ForServerVersion);\n  bottle.decorator('ForServerVersion', connect([ 'selectedServer' ]));\n\n  bottle.serviceFactory('ServerError', ServerError, 'DeleteServerButton');\n  bottle.decorator('ServerError', connect([ 'servers', 'selectedServer' ]));\n\n  bottle.serviceFactory('Overview', Overview, 'ShortUrlsTable', 'CreateShortUrl', 'ForServerVersion');\n  bottle.decorator('Overview', connect(\n    [ 'shortUrlsList', 'tagsList', 'selectedServer', 'mercureInfo', 'visitsOverview' ],\n    [ 'listShortUrls', 'listTags', 'createNewVisits', 'loadMercureInfo', 'loadVisitsOverview' ],\n  ));\n\n  // Services\n  bottle.constant('csvjson', csvjson);\n  bottle.constant('fileReaderFactory', () => new FileReader());\n  bottle.service('ServersImporter', ServersImporter, 'csvjson', 'fileReaderFactory');\n  bottle.service('ServersExporter', ServersExporter, 'Storage', 'window', 'csvjson');\n\n  // Actions\n  bottle.serviceFactory('selectServer', selectServer, 'buildShlinkApiClient', 'loadMercureInfo');\n  bottle.serviceFactory('createServer', () => createServer);\n  bottle.serviceFactory('createServers', () => createServers);\n  bottle.serviceFactory('deleteServer', () => deleteServer);\n  bottle.serviceFactory('editServer', () => editServer);\n  bottle.serviceFactory('setAutoConnect', () => setAutoConnect);\n  bottle.serviceFactory('fetchServers', fetchServers, 'axios');\n\n  bottle.serviceFactory('resetSelectedServer', () => resetSelectedServer);\n};\n\nexport default provideServices;\n","import { Button, Card } from 'reactstrap';\nimport { FC, ReactNode } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faArrowLeft } from '@fortawesome/free-solid-svg-icons';\nimport ShortUrlVisitsCount from '../short-urls/helpers/ShortUrlVisitsCount';\nimport { ShortUrl } from '../short-urls/data';\nimport { Visit } from './types';\n\ninterface VisitsHeaderProps {\n  visits: Visit[];\n  goBack: () => void;\n  title: ReactNode;\n  shortUrl?: ShortUrl;\n}\n\nconst VisitsHeader: FC<VisitsHeaderProps> = ({ visits, goBack, shortUrl, children, title }) => (\n  <header>\n    <Card body>\n      <h2 className=\"d-flex justify-content-between align-items-center mb-0\">\n        <Button color=\"link\" size=\"lg\" className=\"p-0 mr-3\" onClick={goBack}>\n          <FontAwesomeIcon icon={faArrowLeft} />\n        </Button>\n        <span className=\"text-center d-none d-sm-block\">\n          <small>{title}</small>\n        </span>\n        <span className=\"badge badge-main ml-3\">\n          Visits:{' '}\n          <ShortUrlVisitsCount visitsCount={visits.length} shortUrl={shortUrl} />\n        </span>\n      </h2>\n      <h3 className=\"text-center d-block d-sm-none mb-0 mt-3\">\n        <small>{title}</small>\n      </h3>\n\n      {children && <div className=\"mt-md-2\">{children}</div>}\n    </Card>\n  </header>\n);\n\nexport default VisitsHeader;\n","import { UncontrolledTooltip } from 'reactstrap';\nimport { ExternalLink } from 'react-external-link';\nimport { ShortUrlDetail } from '../short-urls/reducers/shortUrlDetail';\nimport { Time } from '../utils/Time';\nimport { ShortUrlVisits } from './reducers/shortUrlVisits';\nimport VisitsHeader from './VisitsHeader';\nimport './ShortUrlVisitsHeader.scss';\n\ninterface ShortUrlVisitsHeaderProps {\n  shortUrlDetail: ShortUrlDetail;\n  shortUrlVisits: ShortUrlVisits;\n  goBack: () => void;\n}\n\nconst ShortUrlVisitsHeader = ({ shortUrlDetail, shortUrlVisits, goBack }: ShortUrlVisitsHeaderProps) => {\n  const { shortUrl, loading } = shortUrlDetail;\n  const { visits } = shortUrlVisits;\n  const shortLink = shortUrl?.shortUrl ?? '';\n  const longLink = shortUrl?.longUrl ?? '';\n  const title = shortUrl?.title;\n\n  const renderDate = () => !shortUrl ? <small>Loading...</small> : (\n    <span>\n      <b id=\"created\" className=\"short-url-visits-header__created-at\">\n        <Time date={shortUrl.dateCreated} relative />\n      </b>\n      <UncontrolledTooltip placement=\"bottom\" target=\"created\">\n        <Time date={shortUrl.dateCreated} />\n      </UncontrolledTooltip>\n    </span>\n  );\n  const visitsStatsTitle = <>Visits for <ExternalLink href={shortLink} /></>;\n\n  return (\n    <VisitsHeader title={visitsStatsTitle} goBack={goBack} visits={visits} shortUrl={shortUrl}>\n      <hr />\n      <div>Created: {renderDate()}</div>\n      <div>\n        {`${title ? 'Title' : 'Long URL'}: `}\n        {loading && <small>Loading...</small>}\n        {!loading && <ExternalLink href={longLink}>{title ?? longLink}</ExternalLink>}\n      </div>\n    </VisitsHeader>\n  );\n};\n\nexport default ShortUrlVisitsHeader;\n","import bowser from 'bowser';\nimport { zipObj } from 'ramda';\nimport { Empty, hasValue } from '../utils';\nimport { Stats, UserAgent } from '../../visits/types';\n\nconst DEFAULT = 'Others';\nconst BROWSERS_WHITELIST = [\n  'Android Browser',\n  'Chrome',\n  'Chromium',\n  'Firefox',\n  'Internet Explorer',\n  'Microsoft Edge',\n  'Opera',\n  'Safari',\n  'Samsung Internet for Android',\n  'Vivaldi',\n  'WeChat',\n];\n\nexport const parseUserAgent = (userAgent: string | Empty): UserAgent => {\n  if (!hasValue(userAgent)) {\n    return { browser: DEFAULT, os: DEFAULT };\n  }\n\n  const { browser: { name: browser }, os: { name: os } } = bowser.parse(userAgent);\n\n  return { os: os ?? DEFAULT, browser: browser && BROWSERS_WHITELIST.includes(browser) ? browser : DEFAULT };\n};\n\nexport const extractDomain = (url: string | Empty): string => {\n  if (!hasValue(url)) {\n    return 'Direct';\n  }\n\n  return url.split('/')[url.includes('://') ? 2 : 0]?.split(':')[0] ?? '';\n};\n\nexport const fillTheGaps = (stats: Stats, labels: string[]): number[] =>\n  Object.values({ ...zipObj(labels, labels.map(() => 0)), ...stats });\n","import { FC } from 'react';\nimport BooleanControl, { BooleanControlProps } from './BooleanControl';\n\nconst ToggleSwitch: FC<BooleanControlProps> = (props) => <BooleanControl type=\"switch\" {...props} />;\n\nexport default ToggleSwitch;\n","import { ActiveElement, ChartEvent, ChartType, TooltipItem } from 'chart.js';\nimport { prettify } from './numbers';\n\nexport const pointerOnHover = ({ native }: ChartEvent, [ firstElement ]: ActiveElement[]) => {\n  if (!native?.target) {\n    return;\n  }\n\n  const canvas = native.target as HTMLCanvasElement;\n\n  canvas.style.cursor = firstElement ? 'pointer' : 'default';\n};\n\nexport const renderChartLabel = ({ dataset, formattedValue }: TooltipItem<ChartType>) =>\n  `${dataset.label}: ${prettify(formattedValue)}`;\n\nexport const renderPieChartLabel = ({ label, formattedValue }: TooltipItem<ChartType>) =>\n  `${label}: ${prettify(formattedValue)}`;\n","import { useState, useMemo } from 'react';\nimport {\n  Card,\n  CardHeader,\n  CardBody,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from 'reactstrap';\nimport { Line } from 'react-chartjs-2';\nimport { always, cond, countBy, reverse } from 'ramda';\nimport {\n  add,\n  differenceInDays,\n  differenceInHours,\n  differenceInMonths,\n  differenceInWeeks,\n  parseISO,\n  format,\n  startOfISOWeek,\n  endOfISOWeek,\n} from 'date-fns';\nimport { ChartData, ChartDataset, ChartOptions } from 'chart.js';\nimport { NormalizedVisit, Stats } from '../types';\nimport { fillTheGaps } from '../../utils/helpers/visits';\nimport { useToggle } from '../../utils/helpers/hooks';\nimport { rangeOf } from '../../utils/utils';\nimport ToggleSwitch from '../../utils/ToggleSwitch';\nimport { prettify } from '../../utils/helpers/numbers';\nimport { pointerOnHover, renderChartLabel } from '../../utils/helpers/charts';\nimport { HIGHLIGHTED_COLOR, MAIN_COLOR } from '../../utils/theme';\nimport './LineChartCard.scss';\n\ninterface LineChartCardProps {\n  title: string;\n  highlightedLabel?: string;\n  visits: NormalizedVisit[];\n  highlightedVisits: NormalizedVisit[];\n  setSelectedVisits?: (visits: NormalizedVisit[]) => void;\n}\n\ntype Step = 'monthly' | 'weekly' | 'daily' | 'hourly';\n\nconst STEPS_MAP: Record<Step, string> = {\n  monthly: 'Month',\n  weekly: 'Week',\n  daily: 'Day',\n  hourly: 'Hour',\n};\n\nconst STEP_TO_DURATION_MAP: Record<Step, (amount: number) => Duration> = {\n  hourly: (hours: number) => ({ hours }),\n  daily: (days: number) => ({ days }),\n  weekly: (weeks: number) => ({ weeks }),\n  monthly: (months: number) => ({ months }),\n};\n\nconst STEP_TO_DIFF_FUNC_MAP: Record<Step, (dateLeft: Date, dateRight: Date) => number> = {\n  hourly: differenceInHours,\n  daily: differenceInDays,\n  weekly: differenceInWeeks,\n  monthly: differenceInMonths,\n};\n\nconst STEP_TO_DATE_FORMAT: Record<Step, (date: Date) => string> = {\n  hourly: (date) => format(date, 'yyyy-MM-dd HH:00'),\n  daily: (date) => format(date, 'yyyy-MM-dd'),\n  weekly(date) {\n    const firstWeekDay = format(startOfISOWeek(date), 'yyyy-MM-dd');\n    const lastWeekDay = format(endOfISOWeek(date), 'yyyy-MM-dd');\n\n    return `${firstWeekDay} - ${lastWeekDay}`;\n  },\n  monthly: (date) => format(date, 'yyyy-MM'),\n};\n\nconst determineInitialStep = (oldestVisitDate: string): Step => {\n  const now = new Date();\n  const oldestDate = parseISO(oldestVisitDate);\n  const matcher = cond<never, Step | undefined>([\n    [ () => differenceInDays(now, oldestDate) <= 2, always<Step>('hourly') ], // Less than 2 days\n    [ () => differenceInMonths(now, oldestDate) <= 1, always<Step>('daily') ], // Between 2 days and 1 month\n    [ () => differenceInMonths(now, oldestDate) <= 6, always<Step>('weekly') ], // Between 1 and 6 months\n  ]);\n\n  return matcher() ?? 'monthly';\n};\n\nconst groupVisitsByStep = (step: Step, visits: NormalizedVisit[]): Stats => countBy(\n  (visit) => STEP_TO_DATE_FORMAT[step](parseISO(visit.date)),\n  visits,\n);\n\nconst visitsToDatasetGroups = (step: Step, visits: NormalizedVisit[]) =>\n  visits.reduce<Record<string, NormalizedVisit[]>>(\n    (acc, visit) => {\n      const key = STEP_TO_DATE_FORMAT[step](parseISO(visit.date));\n\n      acc[key] = acc[key] ?? [];\n      acc[key].push(visit);\n\n      return acc;\n    },\n    {},\n  );\n\nconst generateLabels = (step: Step, visits: NormalizedVisit[]): string[] => {\n  const diffFunc = STEP_TO_DIFF_FUNC_MAP[step];\n  const formatter = STEP_TO_DATE_FORMAT[step];\n  const newerDate = parseISO(visits[0].date);\n  const oldestDate = parseISO(visits[visits.length - 1].date);\n  const size = diffFunc(newerDate, oldestDate);\n  const duration = STEP_TO_DURATION_MAP[step];\n\n  return [\n    formatter(oldestDate),\n    ...rangeOf(size, (num) => formatter(add(oldestDate, duration(num)))),\n  ];\n};\n\nconst generateLabelsAndGroupedVisits = (\n  visits: NormalizedVisit[],\n  groupedVisitsWithGaps: Stats,\n  step: Step,\n  skipNoElements: boolean,\n): [string[], number[]] => {\n  if (skipNoElements) {\n    return [ Object.keys(groupedVisitsWithGaps), Object.values(groupedVisitsWithGaps) ];\n  }\n\n  const labels = generateLabels(step, visits);\n\n  return [ labels, fillTheGaps(groupedVisitsWithGaps, labels) ];\n};\n\nconst generateDataset = (data: number[], label: string, color: string): ChartDataset => ({\n  label,\n  data,\n  fill: false,\n  tension: 0.2,\n  borderColor: color,\n  backgroundColor: color,\n});\n\nlet selectedLabel: string | null = null;\n\nconst chartElementAtEvent = (\n  labels: string[],\n  datasetsByPoint: Record<string, NormalizedVisit[]>,\n  setSelectedVisits?: (visits: NormalizedVisit[]) => void,\n) => ([ chart ]: [{ index: number }]) => {\n  if (!setSelectedVisits || !chart) {\n    return;\n  }\n\n  const { index } = chart;\n\n  if (selectedLabel === labels[index]) {\n    setSelectedVisits([]);\n    selectedLabel = null;\n  } else {\n    setSelectedVisits(labels[index] && datasetsByPoint[labels[index]] || []);\n    selectedLabel = labels[index] ?? null;\n  }\n};\n\nconst LineChartCard = (\n  { title, visits, highlightedVisits, highlightedLabel = 'Selected', setSelectedVisits }: LineChartCardProps,\n) => {\n  const [ step, setStep ] = useState<Step>(\n    visits.length > 0 ? determineInitialStep(visits[visits.length - 1].date) : 'monthly',\n  );\n  const [ skipNoVisits, toggleSkipNoVisits ] = useToggle(true);\n\n  const datasetsByPoint = useMemo(() => visitsToDatasetGroups(step, visits), [ step, visits ]);\n  const groupedVisitsWithGaps = useMemo(() => groupVisitsByStep(step, reverse(visits)), [ step, visits ]);\n  const [ labels, groupedVisits ] = useMemo(\n    () => generateLabelsAndGroupedVisits(visits, groupedVisitsWithGaps, step, skipNoVisits),\n    [ visits, step, skipNoVisits ],\n  );\n  const groupedHighlighted = useMemo(\n    () => fillTheGaps(groupVisitsByStep(step, reverse(highlightedVisits)), labels),\n    [ highlightedVisits, step, labels ],\n  );\n  const generateChartDatasets = (): ChartDataset[] => {\n    const mainDataset = generateDataset(groupedVisits, 'Visits', MAIN_COLOR);\n\n    if (highlightedVisits.length === 0) {\n      return [ mainDataset ];\n    }\n\n    const highlightedDataset = generateDataset(groupedHighlighted, highlightedLabel, HIGHLIGHTED_COLOR);\n\n    return [ mainDataset, highlightedDataset ];\n  };\n  const generateChartData = (): ChartData => ({ labels, datasets: generateChartDatasets() });\n\n  const options: ChartOptions = {\n    maintainAspectRatio: false,\n    plugins: {\n      legend: { display: false },\n      tooltip: {\n        intersect: false,\n        axis: 'x',\n        callbacks: { label: renderChartLabel },\n      },\n    },\n    scales: {\n      y: {\n        beginAtZero: true,\n        ticks: {\n          precision: 0,\n          callback: prettify,\n        },\n      },\n      x: {\n        title: { display: true, text: STEPS_MAP[step] },\n      },\n    },\n    onHover: pointerOnHover,\n  };\n  const renderLineChart = () => (\n    <Line\n      data={generateChartData()}\n      options={options}\n      getElementAtEvent={chartElementAtEvent(labels, datasetsByPoint, setSelectedVisits) as any}\n    />\n  );\n\n  return (\n    <Card>\n      <CardHeader>\n        {title}\n        <div className=\"float-right\">\n          <UncontrolledDropdown>\n            <DropdownToggle caret color=\"link\" className=\"btn-sm p-0\">\n              Group by\n            </DropdownToggle>\n            <DropdownMenu right>\n              {Object.entries(STEPS_MAP).map(([ value, menuText ]) => (\n                <DropdownItem key={value} active={step === value} onClick={() => setStep(value as Step)}>\n                  {menuText}\n                </DropdownItem>\n              ))}\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        </div>\n        <div className=\"float-right mr-2\">\n          <ToggleSwitch checked={skipNoVisits} onChange={toggleSkipNoVisits}>\n            <small>Skip dates with no visits</small>\n          </ToggleSwitch>\n        </div>\n      </CardHeader>\n      <CardBody className=\"line-chart-card__body\">\n        {/* It's VERY IMPORTANT to render two different components here, as one has 1 dataset and the other has 2 */}\n        {/* Using the same component causes a crash when switching from 1 to 2 datasets, and then back to 1 dataset */}\n        {highlightedVisits.length > 0 && renderLineChart()}\n        {highlightedVisits.length === 0 && renderLineChart()}\n      </CardBody>\n    </Card>\n  );\n};\n\nexport default LineChartCard;\n","import { FC } from 'react';\nimport classNames from 'classnames';\nimport { Pagination, PaginationItem, PaginationLink } from 'reactstrap';\nimport {\n  pageIsEllipsis,\n  keyForPage,\n  NumberOrEllipsis,\n  progressivePagination,\n  prettifyPageNumber,\n} from '../utils/helpers/pagination';\nimport './SimplePaginator.scss';\n\ninterface SimplePaginatorProps {\n  pagesCount: number;\n  currentPage: number;\n  setCurrentPage: (currentPage: number) => void;\n  centered?: boolean;\n}\n\nconst SimplePaginator: FC<SimplePaginatorProps> = ({ pagesCount, currentPage, setCurrentPage, centered = true }) => {\n  if (pagesCount < 2) {\n    return null;\n  }\n\n  const onClick = (page: NumberOrEllipsis) => () => !pageIsEllipsis(page) && setCurrentPage(page);\n\n  return (\n    <Pagination listClassName={classNames('flex-wrap mb-0 simple-paginator', { 'justify-content-center': centered })}>\n      <PaginationItem disabled={currentPage <= 1}>\n        <PaginationLink previous tag=\"span\" onClick={onClick(currentPage - 1)} />\n      </PaginationItem>\n      {progressivePagination(currentPage, pagesCount).map((pageNumber, index) => (\n        <PaginationItem\n          key={keyForPage(pageNumber, index)}\n          disabled={pageIsEllipsis(pageNumber)}\n          active={currentPage === pageNumber}\n        >\n          <PaginationLink tag=\"span\" onClick={onClick(pageNumber)}>{prettifyPageNumber(pageNumber)}</PaginationLink>\n        </PaginationItem>\n      ))}\n      <PaginationItem disabled={currentPage >= pagesCount}>\n        <PaginationLink next tag=\"span\" onClick={onClick(currentPage + 1)} />\n      </PaginationItem>\n    </Pagination>\n  );\n};\n\nexport default SimplePaginator;\n","import { useEffect, useMemo, useState, useRef } from 'react';\nimport classNames from 'classnames';\nimport { min, splitEvery } from 'ramda';\nimport {\n  faCaretDown as caretDownIcon,\n  faCaretUp as caretUpIcon,\n  faCheck as checkIcon,\n  faRobot as botIcon,\n} from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { UncontrolledTooltip } from 'reactstrap';\nimport SimplePaginator from '../common/SimplePaginator';\nimport SearchField from '../utils/SearchField';\nimport { determineOrderDir, OrderDir } from '../utils/utils';\nimport { prettify } from '../utils/helpers/numbers';\nimport { supportsBotVisits } from '../utils/helpers/features';\nimport { SelectedServer } from '../servers/data';\nimport { Time } from '../utils/Time';\nimport { NormalizedOrphanVisit, NormalizedVisit } from './types';\nimport './VisitsTable.scss';\n\nexport interface VisitsTableProps {\n  visits: NormalizedVisit[];\n  selectedVisits?: NormalizedVisit[];\n  setSelectedVisits: (visits: NormalizedVisit[]) => void;\n  matchMedia?: (query: string) => MediaQueryList;\n  isOrphanVisits?: boolean;\n  selectedServer: SelectedServer;\n}\n\ntype OrderableFields = 'date' | 'country' | 'city' | 'browser' | 'os' | 'referer' | 'visitedUrl' | 'potentialBot';\n\ninterface Order {\n  field?: OrderableFields;\n  dir?: OrderDir;\n}\n\nconst PAGE_SIZE = 20;\nconst visitMatchesSearch = ({ browser, os, referer, country, city, ...rest }: NormalizedVisit, searchTerm: string) =>\n  `${browser} ${os} ${referer} ${country} ${city} ${(rest as NormalizedOrphanVisit).visitedUrl}`.toLowerCase().includes(\n    searchTerm.toLowerCase(),\n  );\nconst searchVisits = (searchTerm: string, visits: NormalizedVisit[]) =>\n  visits.filter((visit) => visitMatchesSearch(visit, searchTerm));\nconst sortVisits = ({ field, dir }: Order, visits: NormalizedVisit[]) => !field || !dir ? visits : visits.sort(\n  (a, b) => {\n    const greaterThan = dir === 'ASC' ? 1 : -1;\n    const smallerThan = dir === 'ASC' ? -1 : 1;\n\n    return (a as NormalizedOrphanVisit)[field] > (b as NormalizedOrphanVisit)[field] ? greaterThan : smallerThan;\n  },\n);\nconst calculateVisits = (allVisits: NormalizedVisit[], searchTerm: string | undefined, order: Order) => {\n  const filteredVisits = searchTerm ? searchVisits(searchTerm, allVisits) : [ ...allVisits ];\n  const sortedVisits = sortVisits(order, filteredVisits);\n  const total = sortedVisits.length;\n  const visitsGroups = splitEvery(PAGE_SIZE, sortedVisits);\n\n  return { visitsGroups, total };\n};\n\nconst VisitsTable = ({\n  visits,\n  selectedVisits = [],\n  setSelectedVisits,\n  selectedServer,\n  matchMedia = window.matchMedia,\n  isOrphanVisits = false,\n}: VisitsTableProps) => {\n  const headerCellsClass = 'visits-table__header-cell visits-table__sticky';\n  const matchMobile = () => matchMedia('(max-width: 767px)').matches;\n\n  const [ isMobileDevice, setIsMobileDevice ] = useState(matchMobile());\n  const [ searchTerm, setSearchTerm ] = useState<string | undefined>(undefined);\n  const [ order, setOrder ] = useState<Order>({ field: undefined, dir: undefined });\n  const resultSet = useMemo(() => calculateVisits(visits, searchTerm, order), [ searchTerm, order ]);\n  const isFirstLoad = useRef(true);\n  const [ page, setPage ] = useState(1);\n  const end = page * PAGE_SIZE;\n  const start = end - PAGE_SIZE;\n  const supportsBots = supportsBotVisits(selectedServer);\n  const fullSizeColSpan = 7 + Number(supportsBots) + Number(isOrphanVisits);\n\n  const orderByColumn = (field: OrderableFields) =>\n    () => setOrder({ field, dir: determineOrderDir(field, order.field, order.dir) });\n  const renderOrderIcon = (field: OrderableFields) => order.dir && order.field === field && (\n    <FontAwesomeIcon\n      icon={order.dir === 'ASC' ? caretUpIcon : caretDownIcon}\n      className=\"visits-table__header-icon\"\n    />\n  );\n\n  useEffect(() => {\n    const listener = () => setIsMobileDevice(matchMobile());\n\n    window.addEventListener('resize', listener);\n\n    return () => window.removeEventListener('resize', listener);\n  }, []);\n  useEffect(() => {\n    setPage(1);\n\n    !isFirstLoad.current && setSelectedVisits([]);\n    isFirstLoad.current = false;\n  }, [ searchTerm ]);\n\n  return (\n    <table className=\"table table-bordered table-hover table-sm table-responsive-sm visits-table\">\n      <thead className=\"visits-table__header\">\n        <tr>\n          <th\n            className={`${headerCellsClass} text-center`}\n            onClick={() => setSelectedVisits(\n              selectedVisits.length < resultSet.total ? resultSet.visitsGroups.flat() : [],\n            )}\n          >\n            <FontAwesomeIcon icon={checkIcon} className={classNames({ 'text-primary': selectedVisits.length > 0 })} />\n          </th>\n          {supportsBots && (\n            <th className={`${headerCellsClass} text-center`} onClick={orderByColumn('potentialBot')}>\n              <FontAwesomeIcon icon={botIcon} />\n              {renderOrderIcon('potentialBot')}\n            </th>\n          )}\n          <th className={headerCellsClass} onClick={orderByColumn('date')}>\n            Date\n            {renderOrderIcon('date')}\n          </th>\n          <th className={headerCellsClass} onClick={orderByColumn('country')}>\n            Country\n            {renderOrderIcon('country')}\n          </th>\n          <th className={headerCellsClass} onClick={orderByColumn('city')}>\n            City\n            {renderOrderIcon('city')}\n          </th>\n          <th className={headerCellsClass} onClick={orderByColumn('browser')}>\n            Browser\n            {renderOrderIcon('browser')}\n          </th>\n          <th className={headerCellsClass} onClick={orderByColumn('os')}>\n            OS\n            {renderOrderIcon('os')}\n          </th>\n          <th className={headerCellsClass} onClick={orderByColumn('referer')}>\n            Referrer\n            {renderOrderIcon('referer')}\n          </th>\n          {isOrphanVisits && (\n            <th className={headerCellsClass} onClick={orderByColumn('visitedUrl')}>\n              Visited URL\n              {renderOrderIcon('visitedUrl')}\n            </th>\n          )}\n        </tr>\n        <tr>\n          <td colSpan={fullSizeColSpan} className=\"p-0\">\n            <SearchField noBorder large={false} onChange={setSearchTerm} />\n          </td>\n        </tr>\n      </thead>\n      <tbody>\n        {!resultSet.visitsGroups[page - 1]?.length && (\n          <tr>\n            <td colSpan={fullSizeColSpan} className=\"text-center\">\n              No visits found with current filtering\n            </td>\n          </tr>\n        )}\n        {resultSet.visitsGroups[page - 1]?.map((visit, index) => {\n          const isSelected = selectedVisits.includes(visit);\n\n          return (\n            <tr\n              key={index}\n              style={{ cursor: 'pointer' }}\n              className={classNames({ 'table-active': isSelected })}\n              onClick={() => setSelectedVisits(\n                isSelected ? selectedVisits.filter((v) => v !== visit) : [ ...selectedVisits, visit ],\n              )}\n            >\n              <td className=\"text-center\">\n                {isSelected && <FontAwesomeIcon icon={checkIcon} className=\"text-primary\" />}\n              </td>\n              {supportsBots && (\n                <td className=\"text-center\">\n                  {visit.potentialBot && (\n                    <>\n                      <FontAwesomeIcon icon={botIcon} id={`botIcon${index}`} />\n                      <UncontrolledTooltip placement=\"right\" target={`botIcon${index}`}>\n                        Potentially a visit from a bot or crawler\n                      </UncontrolledTooltip>\n                    </>\n                  )}\n                </td>\n              )}\n              <td><Time date={visit.date} /></td>\n              <td>{visit.country}</td>\n              <td>{visit.city}</td>\n              <td>{visit.browser}</td>\n              <td>{visit.os}</td>\n              <td>{visit.referer}</td>\n              {isOrphanVisits && <td>{(visit as NormalizedOrphanVisit).visitedUrl}</td>}\n            </tr>\n          );\n        })}\n      </tbody>\n      {resultSet.total > PAGE_SIZE && (\n        <tfoot>\n          <tr>\n            <td colSpan={fullSizeColSpan} className=\"visits-table__footer-cell visits-table__sticky\">\n              <div className=\"row\">\n                <div className=\"col-md-6\">\n                  <SimplePaginator\n                    pagesCount={Math.ceil(resultSet.total / PAGE_SIZE)}\n                    currentPage={page}\n                    setCurrentPage={setPage}\n                    centered={isMobileDevice}\n                  />\n                </div>\n                <div\n                  className={classNames('col-md-6', {\n                    'd-flex align-items-center flex-row-reverse': !isMobileDevice,\n                    'text-center mt-3': isMobileDevice,\n                  })}\n                >\n                  <div>\n                    Visits <b>{prettify(start + 1)}</b> to{' '}\n                    <b>{prettify(min(end, resultSet.total))}</b> of{' '}\n                    <b>{prettify(resultSet.total)}</b>\n                  </div>\n                </div>\n              </div>\n            </td>\n          </tr>\n        </tfoot>\n      )}\n    </table>\n  );\n};\n\nexport default VisitsTable;\n","import { FC } from 'react';\nimport { Modal, ModalBody } from 'reactstrap';\nimport { MapContainer, TileLayer, Marker, Popup, MapContainerProps } from 'react-leaflet';\nimport { prop } from 'ramda';\nimport { CityStats } from '../types';\nimport './MapModal.scss';\n\ninterface MapModalProps {\n  toggle: () => void;\n  isOpen: boolean;\n  title: string;\n  locations?: CityStats[];\n}\n\nconst OpenStreetMapTile: FC = () => (\n  <TileLayer\n    attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n  />\n);\n\nconst calculateMapProps = (locations: CityStats[]): MapContainerProps => {\n  if (locations.length === 0) {\n    return {};\n  }\n\n  if (locations.length > 1) {\n    return { bounds: locations.map(prop('latLong')) };\n  }\n\n  // When there's only one location, an error is thrown if trying to calculate the bounds.\n  // When that happens, we use zoom and center as a workaround\n  const [{ latLong: center }] = locations;\n\n  return { zoom: 10, center };\n};\n\nconst MapModal = ({ toggle, isOpen, title, locations = [] }: MapModalProps) => (\n  <Modal toggle={toggle} isOpen={isOpen} className=\"map-modal__modal\" contentClassName=\"map-modal__modal-content\">\n    <ModalBody className=\"map-modal__modal-body\">\n      <h3 className=\"map-modal__modal-title\">\n        {title}\n        <button type=\"button\" className=\"close\" onClick={toggle}>&times;</button>\n      </h3>\n      <MapContainer {...calculateMapProps(locations)}>\n        <OpenStreetMapTile />\n        {locations.map(({ cityName, latLong, count }, index) => (\n          <Marker key={index} position={latLong}>\n            <Popup><b>{count}</b> visit{count > 1 ? 's' : ''} from <b>{cityName}</b></Popup>\n          </Marker>\n        ))}\n      </MapContainer>\n    </ModalBody>\n  </Modal>\n);\n\nexport default MapModal;\n","import { useRef, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faMapMarkedAlt as mapIcon } from '@fortawesome/free-solid-svg-icons';\nimport { Dropdown, DropdownItem, DropdownMenu, UncontrolledTooltip } from 'reactstrap';\nimport { useToggle } from '../../utils/helpers/hooks';\nimport { CityStats } from '../types';\nimport MapModal from './MapModal';\nimport './OpenMapModalBtn.scss';\n\ninterface OpenMapModalBtnProps {\n  modalTitle: string;\n  activeCities: string[];\n  locations?: CityStats[];\n}\n\nconst OpenMapModalBtn = ({ modalTitle, activeCities, locations = [] }: OpenMapModalBtnProps) => {\n  const [ mapIsOpened, , openMap, closeMap ] = useToggle();\n  const [ dropdownIsOpened, toggleDropdown, openDropdown ] = useToggle();\n  const [ locationsToShow, setLocationsToShow ] = useState<CityStats[]>([]);\n  const buttonRef = useRef<HTMLElement>();\n\n  const filterLocations = (cities: CityStats[]) => cities.filter(({ cityName }) => activeCities.includes(cityName));\n  const onClick = () => {\n    if (!activeCities) {\n      setLocationsToShow(locations);\n      openMap();\n\n      return;\n    }\n\n    openDropdown();\n  };\n  const openMapWithLocations = (filtered: boolean) => () => {\n    setLocationsToShow(filtered ? filterLocations(locations) : locations);\n    openMap();\n  };\n\n  return (\n    <>\n      <button className=\"btn btn-link open-map-modal-btn__btn\" ref={buttonRef as any} onClick={onClick}>\n        <FontAwesomeIcon icon={mapIcon} />\n      </button>\n      <UncontrolledTooltip placement=\"left\" target={(() => buttonRef.current) as any}>Show in map</UncontrolledTooltip>\n      <Dropdown isOpen={dropdownIsOpened} toggle={toggleDropdown} inNavbar>\n        <DropdownMenu right>\n          <DropdownItem onClick={openMapWithLocations(false)}>Show all locations</DropdownItem>\n          <DropdownItem onClick={openMapWithLocations(true)}>Show locations in current page</DropdownItem>\n        </DropdownMenu>\n      </Dropdown>\n      <MapModal toggle={closeMap} isOpen={mapIsOpened} title={modalTitle} locations={locationsToShow} />\n    </>\n  );\n};\n\nexport default OpenMapModalBtn;\n","import { countBy, groupBy, pipe, prop } from 'ramda';\nimport { formatIsoDate } from '../../utils/helpers/date';\nimport { ShlinkVisitsParams } from '../../api/types';\nimport { CreateVisit, NormalizedOrphanVisit, NormalizedVisit, OrphanVisit, Stats, Visit, VisitsParams } from './index';\n\nexport const isOrphanVisit = (visit: Visit): visit is OrphanVisit => visit.hasOwnProperty('visitedUrl');\n\nexport const isNormalizedOrphanVisit = (visit: NormalizedVisit): visit is NormalizedOrphanVisit =>\n  visit.hasOwnProperty('visitedUrl');\n\nexport interface GroupedNewVisits {\n  orphanVisits: CreateVisit[];\n  regularVisits: CreateVisit[];\n}\n\nexport const groupNewVisitsByType = pipe(\n  groupBy((newVisit: CreateVisit) => isOrphanVisit(newVisit.visit) ? 'orphanVisits' : 'regularVisits'),\n  // @ts-expect-error Type declaration on groupBy is not correct. It can return undefined props\n  (result): GroupedNewVisits => ({ orphanVisits: [], regularVisits: [], ...result }),\n);\n\nexport type HighlightableProps<T extends NormalizedVisit> = T extends NormalizedOrphanVisit\n  ? ('referer' | 'country' | 'city' | 'visitedUrl')\n  : ('referer' | 'country' | 'city');\n\nexport const highlightedVisitsToStats = <T extends NormalizedVisit>(\n  highlightedVisits: T[],\n  property: HighlightableProps<T>,\n): Stats => countBy(prop(property) as any, highlightedVisits);\n\nexport const toApiParams = ({ page, itemsPerPage, filter, dateRange }: VisitsParams): ShlinkVisitsParams => {\n  const startDate = (dateRange?.startDate && formatIsoDate(dateRange?.startDate)) ?? undefined;\n  const endDate = (dateRange?.endDate && formatIsoDate(dateRange?.endDate)) ?? undefined;\n  const excludeBots = filter?.excludeBots || undefined; // eslint-disable-line @typescript-eslint/prefer-nullish-coalescing\n\n  return { page, itemsPerPage, startDate, endDate, excludeBots };\n};\n","import { isNil, map } from 'ramda';\nimport { extractDomain, parseUserAgent } from '../../utils/helpers/visits';\nimport { hasValue } from '../../utils/utils';\nimport { CityStats, NormalizedVisit, Stats, Visit, VisitsStats } from '../types';\nimport { isNormalizedOrphanVisit, isOrphanVisit } from '../types/helpers';\n\nconst visitHasProperty = (visit: NormalizedVisit, propertyName: keyof NormalizedVisit) =>\n  !isNil(visit) && hasValue(visit[propertyName]);\n\nconst optionalNumericToNumber = (numeric: string | number | null | undefined): number => {\n  if (typeof numeric === 'number') {\n    return numeric;\n  }\n\n  return numeric ? parseFloat(numeric) : 0;\n};\n\nconst updateOsStatsForVisit = (osStats: Stats, { os }: NormalizedVisit) => {\n  osStats[os] = (osStats[os] || 0) + 1;\n};\n\nconst updateBrowsersStatsForVisit = (browsersStats: Stats, { browser }: NormalizedVisit) => {\n  browsersStats[browser] = (browsersStats[browser] || 0) + 1;\n};\n\nconst updateReferrersStatsForVisit = (referrersStats: Stats, { referer: domain }: NormalizedVisit) => {\n  referrersStats[domain] = (referrersStats[domain] || 0) + 1;\n};\n\nconst updateLocationsStatsForVisit = (propertyName: 'country' | 'city') => (stats: Stats, visit: NormalizedVisit) => {\n  const hasLocationProperty = visitHasProperty(visit, propertyName);\n  const value = hasLocationProperty ? visit[propertyName] : 'Unknown';\n\n  stats[value] = (stats[value] || 0) + 1;\n};\n\nconst updateCountriesStatsForVisit = updateLocationsStatsForVisit('country');\nconst updateCitiesStatsForVisit = updateLocationsStatsForVisit('city');\n\nconst updateCitiesForMapForVisit = (citiesForMapStats: Record<string, CityStats>, visit: NormalizedVisit) => {\n  if (!visitHasProperty(visit, 'city') || visit.city === 'Unknown') {\n    return;\n  }\n\n  const { city, latitude, longitude } = visit;\n  const currentCity = citiesForMapStats[city] || {\n    cityName: city,\n    count: 0,\n    latLong: [ optionalNumericToNumber(latitude), optionalNumericToNumber(longitude) ],\n  };\n\n  currentCity.count++;\n\n  citiesForMapStats[city] = currentCity;\n};\n\nconst updateVisitedUrlsForVisit = (visitedUrlsStats: Stats, visit: NormalizedVisit) => {\n  if (!isNormalizedOrphanVisit(visit)) {\n    return;\n  }\n\n  const { visitedUrl } = visit;\n\n  visitedUrlsStats[visitedUrl] = (visitedUrlsStats[visitedUrl] || 0) + 1;\n};\n\nexport const processStatsFromVisits = (visits: NormalizedVisit[]) => visits.reduce(\n  (stats: VisitsStats, visit: NormalizedVisit) => {\n    // We mutate the original object because it has a big performance impact when large data sets are processed\n    updateOsStatsForVisit(stats.os, visit);\n    updateBrowsersStatsForVisit(stats.browsers, visit);\n    updateReferrersStatsForVisit(stats.referrers, visit);\n    updateCountriesStatsForVisit(stats.countries, visit);\n    updateCitiesStatsForVisit(stats.cities, visit);\n    updateCitiesForMapForVisit(stats.citiesForMap, visit);\n    updateVisitedUrlsForVisit(stats.visitedUrls, visit);\n\n    return stats;\n  },\n  { os: {}, browsers: {}, referrers: {}, countries: {}, cities: {}, citiesForMap: {}, visitedUrls: {} },\n);\n\nexport const normalizeVisits = map((visit: Visit): NormalizedVisit => {\n  const { userAgent, date, referer, visitLocation, potentialBot = false } = visit;\n  const common = {\n    date,\n    potentialBot,\n    ...parseUserAgent(userAgent),\n    referer: extractDomain(referer),\n    country: visitLocation?.countryName || 'Unknown', // eslint-disable-line @typescript-eslint/prefer-nullish-coalescing\n    city: visitLocation?.cityName || 'Unknown', // eslint-disable-line @typescript-eslint/prefer-nullish-coalescing\n    latitude: visitLocation?.latitude,\n    longitude: visitLocation?.longitude,\n  };\n\n  if (!isOrphanVisit(visit)) {\n    return common;\n  }\n\n  return { ...common, type: visit.type, visitedUrl: visit.visitedUrl };\n});\n\nexport interface VisitsParser {\n  processStatsFromVisits: (normalizedVisits: NormalizedVisit[]) => VisitsStats;\n  normalizeVisits: (visits: Visit[]) => NormalizedVisit[];\n}\n","import { DropdownItem, DropdownItemProps } from 'reactstrap'; // eslint-disable-line import/named\nimport { OrphanVisitType, VisitsFilter } from '../types';\nimport { DropdownBtn } from '../../utils/DropdownBtn';\nimport { hasValue } from '../../utils/utils';\n\ninterface VisitsFilterDropdownProps {\n  onChange: (filters: VisitsFilter) => void;\n  selected?: VisitsFilter;\n  className?: string;\n  isOrphanVisits: boolean;\n  botsSupported: boolean;\n}\n\nexport const VisitsFilterDropdown = (\n  { onChange, selected = {}, className, isOrphanVisits, botsSupported }: VisitsFilterDropdownProps,\n) => {\n  if (!botsSupported && !isOrphanVisits) {\n    return null;\n  }\n\n  const { orphanVisitsType, excludeBots = false } = selected;\n  const propsForOrphanVisitsTypeItem = (type: OrphanVisitType): DropdownItemProps => ({\n    active: orphanVisitsType === type,\n    onClick: () => onChange({ ...selected, orphanVisitsType: type === selected?.orphanVisitsType ? undefined : type }),\n  });\n  const onBotsClick = () => onChange({ ...selected, excludeBots: !selected?.excludeBots });\n\n  return (\n    <DropdownBtn text=\"Filters\" dropdownClassName={className} className=\"mr-3\" right minWidth={250}>\n      {botsSupported && (\n        <>\n          <DropdownItem header>Bots:</DropdownItem>\n          <DropdownItem active={excludeBots} onClick={onBotsClick}>Exclude potential bots</DropdownItem>\n        </>\n      )}\n\n      {botsSupported && isOrphanVisits && <DropdownItem divider />}\n\n      {isOrphanVisits && (\n        <>\n          <DropdownItem header>Orphan visits type:</DropdownItem>\n          <DropdownItem {...propsForOrphanVisitsTypeItem('base_url')}>Base URL</DropdownItem>\n          <DropdownItem {...propsForOrphanVisitsTypeItem('invalid_short_url')}>Invalid short URL</DropdownItem>\n          <DropdownItem {...propsForOrphanVisitsTypeItem('regular_404')}>Regular 404</DropdownItem>\n        </>\n      )}\n\n      <DropdownItem divider />\n      <DropdownItem disabled={!hasValue(selected)} onClick={() => onChange({})}><i>Clear filters</i></DropdownItem>\n    </DropdownBtn>\n  );\n};\n","import { FC } from 'react';\nimport { Chart } from 'chart.js';\nimport './DoughnutChartLegend.scss';\n\ninterface DoughnutChartLegendProps {\n  chart: Chart;\n}\n\nexport const DoughnutChartLegend: FC<DoughnutChartLegendProps> = ({ chart }) => {\n  const { config } = chart;\n  const { labels = [], datasets = [] } = config.data ?? {};\n  const [{ backgroundColor: colors }] = datasets;\n  const { defaultColor } = config.options ?? {} as any;\n\n  return (\n    <ul className=\"doughnut-chart-legend\">\n      {(labels as string[]).map((label, index) => (\n        <li key={label} className=\"doughnut-chart-legend__item d-flex\">\n          <div\n            className=\"doughnut-chart-legend__item-color\"\n            style={{ backgroundColor: (colors as string[])[index] ?? defaultColor }}\n          />\n          <small className=\"doughnut-chart-legend__item-text flex-fill\">{label}</small>\n        </li>\n      ))}\n    </ul>\n  );\n};\n","import { FC, useState, memo } from 'react';\nimport { Chart, ChartData, ChartDataset, ChartOptions } from 'chart.js';\nimport { keys, values } from 'ramda';\nimport { Doughnut } from 'react-chartjs-2';\nimport { renderPieChartLabel } from '../../utils/helpers/charts';\nimport { isDarkThemeEnabled, PRIMARY_DARK_COLOR, PRIMARY_LIGHT_COLOR } from '../../utils/theme';\nimport { Stats } from '../types';\nimport { DoughnutChartLegend } from './DoughnutChartLegend';\n\ninterface DoughnutChartProps {\n  stats: Stats;\n}\n\nconst generateChartDatasets = (data: number[]): ChartDataset[] => [\n  {\n    data,\n    backgroundColor: [\n      '#97BBCD',\n      '#F7464A',\n      '#46BFBD',\n      '#FDB45C',\n      '#949FB1',\n      '#57A773',\n      '#414066',\n      '#08B2E3',\n      '#B6C454',\n      '#DCDCDC',\n      '#463730',\n    ],\n    borderColor: isDarkThemeEnabled() ? PRIMARY_DARK_COLOR : PRIMARY_LIGHT_COLOR,\n    borderWidth: 2,\n  },\n];\nconst generateChartData = (labels: string[], data: number[]): ChartData => ({\n  labels,\n  datasets: generateChartDatasets(data),\n});\n\nexport const DoughnutChart: FC<DoughnutChartProps> = memo(({ stats }) => {\n  const [ chartRef, setChartRef ] = useState<Chart | undefined>(); // Cannot use useRef here\n  const labels = keys(stats);\n  const data = values(stats);\n\n  const options: ChartOptions = {\n    plugins: {\n      legend: { display: false },\n      tooltip: {\n        intersect: true,\n        callbacks: { label: renderPieChartLabel },\n      },\n    },\n  };\n  const chartData = generateChartData(labels, data);\n\n  return (\n    <div className=\"row\">\n      <div className=\"col-sm-12 col-md-7\">\n        <Doughnut\n          height={300}\n          data={chartData}\n          options={options}\n          ref={(element) => {\n            setChartRef(element ?? undefined);\n          }}\n        />\n      </div>\n      <div className=\"col-sm-12 col-md-5\">\n        {chartRef && <DoughnutChartLegend chart={chartRef} />}\n      </div>\n    </div>\n  );\n});\n","import { Card, CardHeader, CardBody, CardFooter } from 'reactstrap';\nimport { FC, ReactNode } from 'react';\nimport './ChartCard.scss';\n\ninterface ChartCardProps {\n  title: Function | string;\n  footer?: ReactNode;\n}\n\nexport const ChartCard: FC<ChartCardProps> = ({ title, footer, children }) => (\n  <Card>\n    <CardHeader className=\"chart-card__header\">{typeof title === 'function' ? title() : title}</CardHeader>\n    <CardBody>{children}</CardBody>\n    {footer && <CardFooter className=\"chart-card__footer--sticky\">{footer}</CardFooter>}\n  </Card>\n);\n","import { FC } from 'react';\nimport { Stats } from '../types';\nimport { DoughnutChart } from './DoughnutChart';\nimport { ChartCard } from './ChartCard';\n\ninterface DoughnutChartCardProps {\n  title: string;\n  stats: Stats;\n}\n\nexport const DoughnutChartCard: FC<DoughnutChartCardProps> = ({ title, stats }) => (\n  <ChartCard title={title}>\n    <DoughnutChart stats={stats} />\n  </ChartCard>\n);\n","import { DropdownItem, DropdownMenu, DropdownToggle, UncontrolledDropdown } from 'reactstrap';\n\ninterface PaginationDropdownProps {\n  ranges: number[];\n  value: number;\n  setValue: (newValue: number) => void;\n  toggleClassName?: string;\n}\n\nconst PaginationDropdown = ({ toggleClassName, ranges, value, setValue }: PaginationDropdownProps) => (\n  <UncontrolledDropdown>\n    <DropdownToggle caret color=\"link\" className={toggleClassName}>\n      Paginate\n    </DropdownToggle>\n    <DropdownMenu right>\n      {ranges.map((itemsPerPage) => (\n        <DropdownItem key={itemsPerPage} active={itemsPerPage === value} onClick={() => setValue(itemsPerPage)}>\n          <b>{itemsPerPage}</b> items per page\n        </DropdownItem>\n      ))}\n      <DropdownItem divider />\n      <DropdownItem disabled={value === Infinity} onClick={() => setValue(Infinity)}>\n        <i>Clear pagination</i>\n      </DropdownItem>\n    </DropdownMenu>\n  </UncontrolledDropdown>\n);\n\nexport default PaginationDropdown;\n","import { FC } from 'react';\nimport { ChartData, ChartDataset, ChartOptions } from 'chart.js';\nimport { keys, values } from 'ramda';\nimport { Bar } from 'react-chartjs-2';\nimport { fillTheGaps } from '../../utils/helpers/visits';\nimport { pointerOnHover, renderChartLabel } from '../../utils/helpers/charts';\nimport { prettify } from '../../utils/helpers/numbers';\nimport { Stats } from '../types';\nimport { HIGHLIGHTED_COLOR, HIGHLIGHTED_COLOR_ALPHA, MAIN_COLOR, MAIN_COLOR_ALPHA } from '../../utils/theme';\n\nexport interface HorizontalBarChartProps {\n  stats: Stats;\n  max?: number;\n  highlightedStats?: Stats;\n  highlightedLabel?: string;\n  onClick?: (label: string) => void;\n}\n\nconst dropLabelIfHidden = (label: string) => label.startsWith('hidden') ? '' : label;\nconst statsAreDefined = (stats: Stats | undefined): stats is Stats => !!stats && Object.keys(stats).length > 0;\nconst determineHeight = (labels: string[]): number | undefined => labels.length > 20 ? labels.length * 10 : undefined;\n\nconst generateChartDatasets = (\n  data: number[],\n  highlightedData: number[],\n  highlightedLabel?: string,\n): ChartDataset[] => {\n  const mainDataset: ChartDataset = {\n    data,\n    label: highlightedLabel ? 'Non-selected' : 'Visits',\n    backgroundColor: MAIN_COLOR_ALPHA,\n    borderColor: MAIN_COLOR,\n    borderWidth: 2,\n  };\n\n  if (highlightedData.every((value) => value === 0)) {\n    return [ mainDataset ];\n  }\n\n  const highlightedDataset: ChartDataset = {\n    label: highlightedLabel ?? 'Selected',\n    data: highlightedData,\n    backgroundColor: HIGHLIGHTED_COLOR_ALPHA,\n    borderColor: HIGHLIGHTED_COLOR,\n    borderWidth: 2,\n  };\n\n  return [ mainDataset, highlightedDataset ];\n};\nconst generateChartData = (\n  labels: string[],\n  data: number[],\n  highlightedData: number[],\n  highlightedLabel?: string,\n): ChartData => ({\n  labels,\n  datasets: generateChartDatasets(data, highlightedData, highlightedLabel),\n});\n\ntype ClickedCharts = [{ index: number }] | [];\nconst chartElementAtEvent = (labels: string[], onClick?: (label: string) => void) => ([ chart ]: ClickedCharts) => {\n  if (!onClick || !chart) {\n    return;\n  }\n\n  onClick(labels[chart.index]);\n};\n\nexport const HorizontalBarChart: FC<HorizontalBarChartProps> = (\n  { stats, highlightedStats, highlightedLabel, onClick, max },\n) => {\n  const labels = keys(stats).map(dropLabelIfHidden);\n  const data = values(\n    !statsAreDefined(highlightedStats) ? stats : keys(highlightedStats).reduce((acc, highlightedKey) => {\n      if (acc[highlightedKey]) {\n        acc[highlightedKey] -= highlightedStats[highlightedKey];\n      }\n\n      return acc;\n    }, { ...stats }),\n  );\n  const highlightedData = fillTheGaps(highlightedStats ?? {}, labels);\n\n  const options: ChartOptions = {\n    plugins: {\n      legend: { display: false },\n      tooltip: {\n        mode: 'y',\n        // Do not show tooltip on items with empty label when in a bar chart\n        filter: ({ label }) => label !== '',\n        callbacks: { label: renderChartLabel },\n      },\n    },\n    scales: {\n      x: {\n        beginAtZero: true,\n        stacked: true,\n        max,\n        ticks: {\n          precision: 0,\n          callback: prettify,\n        },\n      },\n      y: { stacked: true },\n    },\n    onHover: pointerOnHover,\n    indexAxis: 'y',\n  };\n  const chartData = generateChartData(labels, data, highlightedData, highlightedLabel);\n  const height = determineHeight(labels);\n\n  // Provide a key based on the height, to force re-render every time the dataset changes (example, due to pagination)\n  const renderChartComponent = (customKey: string) => (\n    <Bar\n      key={`${height}_${customKey}`}\n      data={chartData}\n      options={options}\n      height={height}\n      getElementAtEvent={chartElementAtEvent(labels, onClick) as any}\n    />\n  );\n\n  return (\n    <>\n      {/* It's VERY IMPORTANT to render two different components here, as one has 1 dataset and the other has 2 */}\n      {/* Using the same component causes a crash when switching from 1 to 2 datasets, and then back to 1 dataset */}\n      {highlightedStats !== undefined && renderChartComponent('with_stats')}\n      {highlightedStats === undefined && renderChartComponent('without_stats')}\n    </>\n  );\n};\n","import { FC, useState } from 'react';\nimport { fromPairs, pipe, reverse, sortBy, splitEvery, toLower, toPairs, type, zipObj } from 'ramda';\nimport { OrderDir, rangeOf } from '../../utils/utils';\nimport SimplePaginator from '../../common/SimplePaginator';\nimport { roundTen } from '../../utils/helpers/numbers';\nimport SortingDropdown from '../../utils/SortingDropdown';\nimport PaginationDropdown from '../../utils/PaginationDropdown';\nimport { Stats, StatsRow } from '../types';\nimport { HorizontalBarChart, HorizontalBarChartProps } from './HorizontalBarChart';\nimport { ChartCard } from './ChartCard';\n\ninterface SortableBarChartCardProps extends Omit<HorizontalBarChartProps, 'max'> {\n  title: Function | string;\n  sortingItems: Record<string, string>;\n  withPagination?: boolean;\n  extraHeaderContent?: Function;\n}\n\nconst toLowerIfString = (value: any) => type(value) === 'String' ? toLower(value) : value; // eslint-disable-line @typescript-eslint/no-unsafe-return\nconst pickKeyFromPair = ([ key ]: StatsRow) => key;\nconst pickValueFromPair = ([ , value ]: StatsRow) => value;\n\nexport const SortableBarChartCard: FC<SortableBarChartCardProps> = ({\n  stats,\n  highlightedStats,\n  title,\n  sortingItems,\n  extraHeaderContent,\n  withPagination = true,\n  ...rest\n}) => {\n  const [ order, setOrder ] = useState<{ orderField?: string; orderDir?: OrderDir }>({\n    orderField: undefined,\n    orderDir: undefined,\n  });\n  const [ currentPage, setCurrentPage ] = useState(1);\n  const [ itemsPerPage, setItemsPerPage ] = useState(50);\n\n  const getSortedPairsForStats = (stats: Stats, sortingItems: Record<string, string>) => {\n    const pairs = toPairs(stats);\n    const sortedPairs = !order.orderField ? pairs : sortBy(\n      pipe<StatsRow, string | number, string | number>(\n        order.orderField === Object.keys(sortingItems)[0] ? pickKeyFromPair : pickValueFromPair,\n        toLowerIfString,\n      ),\n      pairs,\n    );\n\n    return !order.orderDir || order.orderDir === 'ASC' ? sortedPairs : reverse(sortedPairs);\n  };\n  const determineCurrentPagePairs = (pages: StatsRow[][]): StatsRow[] => {\n    const page = pages[currentPage - 1];\n\n    if (currentPage < pages.length) {\n      return page;\n    }\n\n    const firstPageLength = pages[0].length;\n\n    // Using the \"hidden\" key, the chart will just replace the label by an empty string\n    return [ ...page, ...rangeOf(firstPageLength - page.length, (i): StatsRow => [ `hidden_${i}`, 0 ]) ];\n  };\n  const renderPagination = (pagesCount: number) =>\n    <SimplePaginator currentPage={currentPage} pagesCount={pagesCount} setCurrentPage={setCurrentPage} />;\n  const determineStats = (stats: Stats, highlightedStats: Stats | undefined, sortingItems: Record<string, string>) => {\n    const sortedPairs = getSortedPairsForStats(stats, sortingItems);\n    const sortedKeys = sortedPairs.map(pickKeyFromPair);\n    // The highlighted stats have to be ordered based on the regular stats, not on its own values\n    const sortedHighlightedPairs = highlightedStats && toPairs(\n      { ...zipObj(sortedKeys, sortedKeys.map(() => 0)), ...highlightedStats },\n    );\n\n    if (sortedPairs.length <= itemsPerPage) {\n      return {\n        currentPageStats: fromPairs(sortedPairs),\n        currentPageHighlightedStats: sortedHighlightedPairs && fromPairs(sortedHighlightedPairs),\n      };\n    }\n\n    const pages = splitEvery(itemsPerPage, sortedPairs);\n    const highlightedPages = sortedHighlightedPairs && splitEvery(itemsPerPage, sortedHighlightedPairs);\n\n    return {\n      currentPageStats: fromPairs(determineCurrentPagePairs(pages)),\n      currentPageHighlightedStats: highlightedPages && fromPairs(determineCurrentPagePairs(highlightedPages)),\n      pagination: renderPagination(pages.length),\n      max: roundTen(Math.max(...sortedPairs.map(pickValueFromPair))),\n    };\n  };\n\n  const { currentPageStats, currentPageHighlightedStats, pagination, max } = determineStats(\n    stats,\n    highlightedStats && Object.keys(highlightedStats).length > 0 ? highlightedStats : undefined,\n    sortingItems,\n  );\n  const activeCities = Object.keys(currentPageStats);\n  const computeTitle = () => (\n    <>\n      {title}\n      <div className=\"float-right\">\n        <SortingDropdown\n          isButton={false}\n          right\n          items={sortingItems}\n          orderField={order.orderField}\n          orderDir={order.orderDir}\n          onChange={(orderField, orderDir) => {\n            setOrder({ orderField, orderDir });\n            setCurrentPage(1);\n          }}\n        />\n      </div>\n      {withPagination && Object.keys(stats).length > 50 && (\n        <div className=\"float-right\">\n          <PaginationDropdown\n            toggleClassName=\"btn-sm p-0 mr-3\"\n            ranges={[ 50, 100, 200, 500 ]}\n            value={itemsPerPage}\n            setValue={(itemsPerPage) => {\n              setItemsPerPage(itemsPerPage);\n              setCurrentPage(1);\n            }}\n          />\n        </div>\n      )}\n      {extraHeaderContent && (\n        <div className=\"float-right\">\n          {extraHeaderContent(pagination ? activeCities : undefined)}\n        </div>\n      )}\n    </>\n  );\n\n  return (\n    <ChartCard\n      title={computeTitle}\n      footer={pagination}\n    >\n      <HorizontalBarChart stats={currentPageStats} highlightedStats={currentPageHighlightedStats} max={max} {...rest} />\n    </ChartCard>\n  );\n};\n","import { useEffect } from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { boundToMercureHub } from '../mercure/helpers/boundToMercureHub';\nimport { ShlinkVisitsParams } from '../api/types';\nimport { parseQuery } from '../utils/helpers/query';\nimport { Topics } from '../mercure/helpers/Topics';\nimport { ShortUrlDetail } from '../short-urls/reducers/shortUrlDetail';\nimport { ShortUrlVisits as ShortUrlVisitsState } from './reducers/shortUrlVisits';\nimport ShortUrlVisitsHeader from './ShortUrlVisitsHeader';\nimport VisitsStats from './VisitsStats';\nimport { VisitsExporter } from './services/VisitsExporter';\nimport { NormalizedVisit, VisitsParams } from './types';\nimport { CommonVisitsProps } from './types/CommonVisitsProps';\nimport { toApiParams } from './types/helpers';\n\nexport interface ShortUrlVisitsProps extends CommonVisitsProps, RouteComponentProps<{ shortCode: string }> {\n  getShortUrlVisits: (shortCode: string, query?: ShlinkVisitsParams) => void;\n  shortUrlVisits: ShortUrlVisitsState;\n  getShortUrlDetail: Function;\n  shortUrlDetail: ShortUrlDetail;\n  cancelGetShortUrlVisits: () => void;\n}\n\nconst ShortUrlVisits = ({ exportVisits }: VisitsExporter) => boundToMercureHub(({\n  history: { goBack },\n  match: { params, url },\n  location: { search },\n  shortUrlVisits,\n  shortUrlDetail,\n  getShortUrlVisits,\n  getShortUrlDetail,\n  cancelGetShortUrlVisits,\n  settings,\n  selectedServer,\n}: ShortUrlVisitsProps) => {\n  const { shortCode } = params;\n  const { domain } = parseQuery<{ domain?: string }>(search);\n  const loadVisits = (params: VisitsParams) => getShortUrlVisits(shortCode, { ...toApiParams(params), domain });\n  const exportCsv = (visits: NormalizedVisit[]) => exportVisits(\n    `short-url_${shortUrlDetail.shortUrl?.shortUrl.replace(/https?:\\/\\//g, '')}_visits.csv`,\n    visits,\n  );\n\n  useEffect(() => {\n    getShortUrlDetail(shortCode, domain);\n  }, []);\n\n  return (\n    <VisitsStats\n      getVisits={loadVisits}\n      cancelGetVisits={cancelGetShortUrlVisits}\n      visitsInfo={shortUrlVisits}\n      baseUrl={url}\n      domain={domain}\n      settings={settings}\n      exportCsv={exportCsv}\n      selectedServer={selectedServer}\n    >\n      <ShortUrlVisitsHeader shortUrlDetail={shortUrlDetail} shortUrlVisits={shortUrlVisits} goBack={goBack} />\n    </VisitsStats>\n  );\n}, ({ match }) => [ Topics.shortUrlVisits(match.params.shortCode) ]);\n\nexport default ShortUrlVisits;\n","import { flatten, prop, range, splitEvery } from 'ramda';\nimport { Action, Dispatch } from 'redux';\nimport { ShlinkPaginator, ShlinkVisits } from '../../api/types';\nimport { Visit } from '../types';\nimport { parseApiError } from '../../api/utils';\nimport { ApiErrorAction } from '../../api/types/actions';\n\nconst ITEMS_PER_PAGE = 5000;\nconst PARALLEL_REQUESTS_COUNT = 4;\nconst PARALLEL_STARTING_PAGE = 2;\n\nconst isLastPage = ({ currentPage, pagesCount }: ShlinkPaginator): boolean => currentPage >= pagesCount;\nconst calcProgress = (total: number, current: number): number => current * 100 / total;\n\ntype VisitsLoader = (page: number, itemsPerPage: number) => Promise<ShlinkVisits>;\ninterface ActionMap {\n  start: string;\n  large: string;\n  finish: string;\n  error: string;\n  progress: string;\n}\n\nexport const getVisitsWithLoader = async <T extends Action<string> & { visits: Visit[] }>(\n  visitsLoader: VisitsLoader,\n  extraFinishActionData: Partial<T>,\n  actionMap: ActionMap,\n  dispatch: Dispatch,\n  shouldCancel: () => boolean,\n) => {\n  dispatch({ type: actionMap.start });\n\n  const loadVisitsInParallel = async (pages: number[]): Promise<Visit[]> =>\n    Promise.all(pages.map(async (page) => visitsLoader(page, ITEMS_PER_PAGE).then(prop('data')))).then(flatten);\n\n  const loadPagesBlocks = async (pagesBlocks: number[][], index = 0): Promise<Visit[]> => {\n    if (shouldCancel()) {\n      return [];\n    }\n\n    const data = await loadVisitsInParallel(pagesBlocks[index]);\n\n    dispatch({ type: actionMap.progress, progress: calcProgress(pagesBlocks.length, index + PARALLEL_STARTING_PAGE) });\n\n    if (index < pagesBlocks.length - 1) {\n      return data.concat(await loadPagesBlocks(pagesBlocks, index + 1));\n    }\n\n    return data;\n  };\n\n  const loadVisits = async (page = 1) => {\n    const { pagination, data } = await visitsLoader(page, ITEMS_PER_PAGE);\n\n    // If pagination was not returned, then this is an old shlink version. Just return data\n    if (!pagination || isLastPage(pagination)) {\n      return data;\n    }\n\n    // If there are more pages, make requests in blocks of 4\n    const pagesRange = range(PARALLEL_STARTING_PAGE, pagination.pagesCount + 1);\n    const pagesBlocks = splitEvery(PARALLEL_REQUESTS_COUNT, pagesRange);\n\n    if (pagination.pagesCount - 1 > PARALLEL_REQUESTS_COUNT) {\n      dispatch({ type: actionMap.large });\n    }\n\n    return data.concat(await loadPagesBlocks(pagesBlocks));\n  };\n\n  try {\n    const visits = await loadVisits();\n\n    dispatch({ ...extraFinishActionData, visits, type: actionMap.finish });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: actionMap.error, errorData: parseApiError(e) });\n  }\n};\n","import { Action, Dispatch } from 'redux';\nimport { shortUrlMatches } from '../../short-urls/helpers';\nimport { Visit, VisitsInfo, VisitsLoadProgressChangedAction } from '../types';\nimport { ShortUrlIdentifier } from '../../short-urls/data';\nimport { buildActionCreator, buildReducer } from '../../utils/helpers/redux';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { GetState } from '../../container/types';\nimport { ShlinkVisitsParams } from '../../api/types';\nimport { ApiErrorAction } from '../../api/types/actions';\nimport { getVisitsWithLoader } from './common';\nimport { CREATE_VISITS, CreateVisitsAction } from './visitCreation';\n\n/* eslint-disable padding-line-between-statements */\nexport const GET_SHORT_URL_VISITS_START = 'shlink/shortUrlVisits/GET_SHORT_URL_VISITS_START';\nexport const GET_SHORT_URL_VISITS_ERROR = 'shlink/shortUrlVisits/GET_SHORT_URL_VISITS_ERROR';\nexport const GET_SHORT_URL_VISITS = 'shlink/shortUrlVisits/GET_SHORT_URL_VISITS';\nexport const GET_SHORT_URL_VISITS_LARGE = 'shlink/shortUrlVisits/GET_SHORT_URL_VISITS_LARGE';\nexport const GET_SHORT_URL_VISITS_CANCEL = 'shlink/shortUrlVisits/GET_SHORT_URL_VISITS_CANCEL';\nexport const GET_SHORT_URL_VISITS_PROGRESS_CHANGED = 'shlink/shortUrlVisits/GET_SHORT_URL_VISITS_PROGRESS_CHANGED';\n/* eslint-enable padding-line-between-statements */\n\nexport interface ShortUrlVisits extends VisitsInfo, ShortUrlIdentifier {}\n\ninterface ShortUrlVisitsAction extends Action<string>, ShortUrlIdentifier {\n  visits: Visit[];\n}\n\ntype ShortUrlVisitsCombinedAction = ShortUrlVisitsAction\n& VisitsLoadProgressChangedAction\n& CreateVisitsAction\n& ApiErrorAction;\n\nconst initialState: ShortUrlVisits = {\n  visits: [],\n  shortCode: '',\n  domain: undefined,\n  loading: false,\n  loadingLarge: false,\n  error: false,\n  cancelLoad: false,\n  progress: 0,\n};\n\nexport default buildReducer<ShortUrlVisits, ShortUrlVisitsCombinedAction>({\n  [GET_SHORT_URL_VISITS_START]: () => ({ ...initialState, loading: true }),\n  [GET_SHORT_URL_VISITS_ERROR]: (_, { errorData }) => ({ ...initialState, error: true, errorData }),\n  [GET_SHORT_URL_VISITS]: (_, { visits, shortCode, domain }) => ({\n    ...initialState,\n    visits,\n    shortCode,\n    domain,\n  }),\n  [GET_SHORT_URL_VISITS_LARGE]: (state) => ({ ...state, loadingLarge: true }),\n  [GET_SHORT_URL_VISITS_CANCEL]: (state) => ({ ...state, cancelLoad: true }),\n  [GET_SHORT_URL_VISITS_PROGRESS_CHANGED]: (state, { progress }) => ({ ...state, progress }),\n  [CREATE_VISITS]: (state, { createdVisits }) => {\n    const { shortCode, domain, visits } = state;\n    const newVisits = createdVisits\n      .filter(({ shortUrl }) => shortUrl && shortUrlMatches(shortUrl, shortCode, domain))\n      .map(({ visit }) => visit);\n\n    return { ...state, visits: [ ...newVisits, ...visits ] };\n  },\n}, initialState);\n\nexport const getShortUrlVisits = (buildShlinkApiClient: ShlinkApiClientBuilder) => (\n  shortCode: string,\n  query: ShlinkVisitsParams = {},\n) => async (dispatch: Dispatch, getState: GetState) => {\n  const { getShortUrlVisits } = buildShlinkApiClient(getState);\n  const visitsLoader = async (page: number, itemsPerPage: number) => getShortUrlVisits(\n    shortCode,\n    { ...query, page, itemsPerPage },\n  );\n  const shouldCancel = () => getState().shortUrlVisits.cancelLoad;\n  const extraFinishActionData: Partial<ShortUrlVisitsAction> = { shortCode, domain: query.domain };\n  const actionMap = {\n    start: GET_SHORT_URL_VISITS_START,\n    large: GET_SHORT_URL_VISITS_LARGE,\n    finish: GET_SHORT_URL_VISITS,\n    error: GET_SHORT_URL_VISITS_ERROR,\n    progress: GET_SHORT_URL_VISITS_PROGRESS_CHANGED,\n  };\n\n  return getVisitsWithLoader(visitsLoader, extraFinishActionData, actionMap, dispatch, shouldCancel);\n};\n\nexport const cancelGetShortUrlVisits = buildActionCreator(GET_SHORT_URL_VISITS_CANCEL);\n","import Tag from '../tags/helpers/Tag';\nimport ColorGenerator from '../utils/services/ColorGenerator';\nimport VisitsHeader from './VisitsHeader';\nimport { TagVisits } from './reducers/tagVisits';\nimport './ShortUrlVisitsHeader.scss';\n\ninterface TagVisitsHeaderProps {\n  tagVisits: TagVisits;\n  goBack: () => void;\n  colorGenerator: ColorGenerator;\n}\n\nconst TagVisitsHeader = ({ tagVisits, goBack, colorGenerator }: TagVisitsHeaderProps) => {\n  const { visits, tag } = tagVisits;\n\n  const visitsStatsTitle = (\n    <span className=\"d-flex align-items-center justify-content-center\">\n      <span className=\"mr-2\">Visits for</span>\n      <Tag text={tag} colorGenerator={colorGenerator} />\n    </span>\n  );\n\n  return <VisitsHeader title={visitsStatsTitle} goBack={goBack} visits={visits} />;\n};\n\nexport default TagVisitsHeader;\n","import { RouteComponentProps } from 'react-router';\nimport { boundToMercureHub } from '../mercure/helpers/boundToMercureHub';\nimport ColorGenerator from '../utils/services/ColorGenerator';\nimport { ShlinkVisitsParams } from '../api/types';\nimport { Topics } from '../mercure/helpers/Topics';\nimport { TagVisits as TagVisitsState } from './reducers/tagVisits';\nimport TagVisitsHeader from './TagVisitsHeader';\nimport VisitsStats from './VisitsStats';\nimport { VisitsExporter } from './services/VisitsExporter';\nimport { NormalizedVisit } from './types';\nimport { CommonVisitsProps } from './types/CommonVisitsProps';\nimport { toApiParams } from './types/helpers';\n\nexport interface TagVisitsProps extends CommonVisitsProps, RouteComponentProps<{ tag: string }> {\n  getTagVisits: (tag: string, query?: ShlinkVisitsParams) => void;\n  tagVisits: TagVisitsState;\n  cancelGetTagVisits: () => void;\n}\n\nconst TagVisits = (colorGenerator: ColorGenerator, { exportVisits }: VisitsExporter) => boundToMercureHub(({\n  history: { goBack },\n  match: { params, url },\n  getTagVisits,\n  tagVisits,\n  cancelGetTagVisits,\n  settings,\n  selectedServer,\n}: TagVisitsProps) => {\n  const { tag } = params;\n  const loadVisits = (params: ShlinkVisitsParams) => getTagVisits(tag, toApiParams(params));\n  const exportCsv = (visits: NormalizedVisit[]) => exportVisits(`tag_${tag}_visits.csv`, visits);\n\n  return (\n    <VisitsStats\n      getVisits={loadVisits}\n      cancelGetVisits={cancelGetTagVisits}\n      visitsInfo={tagVisits}\n      baseUrl={url}\n      settings={settings}\n      exportCsv={exportCsv}\n      selectedServer={selectedServer}\n    >\n      <TagVisitsHeader tagVisits={tagVisits} goBack={goBack} colorGenerator={colorGenerator} />\n    </VisitsStats>\n  );\n}, () => [ Topics.visits ]);\n\nexport default TagVisits;\n","import { Action, Dispatch } from 'redux';\nimport { Visit, VisitsInfo, VisitsLoadProgressChangedAction } from '../types';\nimport { buildActionCreator, buildReducer } from '../../utils/helpers/redux';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { GetState } from '../../container/types';\nimport { ShlinkVisitsParams } from '../../api/types';\nimport { ApiErrorAction } from '../../api/types/actions';\nimport { getVisitsWithLoader } from './common';\nimport { CREATE_VISITS, CreateVisitsAction } from './visitCreation';\n\n/* eslint-disable padding-line-between-statements */\nexport const GET_TAG_VISITS_START = 'shlink/tagVisits/GET_TAG_VISITS_START';\nexport const GET_TAG_VISITS_ERROR = 'shlink/tagVisits/GET_TAG_VISITS_ERROR';\nexport const GET_TAG_VISITS = 'shlink/tagVisits/GET_TAG_VISITS';\nexport const GET_TAG_VISITS_LARGE = 'shlink/tagVisits/GET_TAG_VISITS_LARGE';\nexport const GET_TAG_VISITS_CANCEL = 'shlink/tagVisits/GET_TAG_VISITS_CANCEL';\nexport const GET_TAG_VISITS_PROGRESS_CHANGED = 'shlink/tagVisits/GET_TAG_VISITS_PROGRESS_CHANGED';\n/* eslint-enable padding-line-between-statements */\n\nexport interface TagVisits extends VisitsInfo {\n  tag: string;\n}\n\nexport interface TagVisitsAction extends Action<string> {\n  visits: Visit[];\n  tag: string;\n}\n\ntype TagsVisitsCombinedAction = TagVisitsAction\n& VisitsLoadProgressChangedAction\n& CreateVisitsAction\n& ApiErrorAction;\n\nconst initialState: TagVisits = {\n  visits: [],\n  tag: '',\n  loading: false,\n  loadingLarge: false,\n  error: false,\n  cancelLoad: false,\n  progress: 0,\n};\n\nexport default buildReducer<TagVisits, TagsVisitsCombinedAction>({\n  [GET_TAG_VISITS_START]: () => ({ ...initialState, loading: true }),\n  [GET_TAG_VISITS_ERROR]: (_, { errorData }) => ({ ...initialState, error: true, errorData }),\n  [GET_TAG_VISITS]: (_, { visits, tag }) => ({ ...initialState, visits, tag }),\n  [GET_TAG_VISITS_LARGE]: (state) => ({ ...state, loadingLarge: true }),\n  [GET_TAG_VISITS_CANCEL]: (state) => ({ ...state, cancelLoad: true }),\n  [GET_TAG_VISITS_PROGRESS_CHANGED]: (state, { progress }) => ({ ...state, progress }),\n  [CREATE_VISITS]: (state, { createdVisits }) => {\n    const { tag, visits } = state;\n    const newVisits = createdVisits\n      .filter(({ shortUrl }) => shortUrl?.tags.includes(tag))\n      .map(({ visit }) => visit);\n\n    return { ...state, visits: [ ...newVisits, ...visits ] };\n  },\n}, initialState);\n\nexport const getTagVisits = (buildShlinkApiClient: ShlinkApiClientBuilder) => (\n  tag: string,\n  query: ShlinkVisitsParams = {},\n) => async (dispatch: Dispatch, getState: GetState) => {\n  const { getTagVisits } = buildShlinkApiClient(getState);\n  const visitsLoader = async (page: number, itemsPerPage: number) => getTagVisits(\n    tag,\n    { ...query, page, itemsPerPage },\n  );\n  const shouldCancel = () => getState().tagVisits.cancelLoad;\n  const extraFinishActionData: Partial<TagVisitsAction> = { tag };\n  const actionMap = {\n    start: GET_TAG_VISITS_START,\n    large: GET_TAG_VISITS_LARGE,\n    finish: GET_TAG_VISITS,\n    error: GET_TAG_VISITS_ERROR,\n    progress: GET_TAG_VISITS_PROGRESS_CHANGED,\n  };\n\n  return getVisitsWithLoader(visitsLoader, extraFinishActionData, actionMap, dispatch, shouldCancel);\n};\n\nexport const cancelGetTagVisits = buildActionCreator(GET_TAG_VISITS_CANCEL);\n","import VisitsHeader from './VisitsHeader';\nimport { VisitsInfo } from './types';\nimport './ShortUrlVisitsHeader.scss';\n\ninterface OrphanVisitsHeaderProps {\n  orphanVisits: VisitsInfo;\n  goBack: () => void;\n}\n\nexport const OrphanVisitsHeader = ({ orphanVisits, goBack }: OrphanVisitsHeaderProps) => {\n  const { visits } = orphanVisits;\n\n  return <VisitsHeader title=\"Orphan visits\" goBack={goBack} visits={visits} />;\n};\n","import { RouteComponentProps } from 'react-router';\nimport { boundToMercureHub } from '../mercure/helpers/boundToMercureHub';\nimport { ShlinkVisitsParams } from '../api/types';\nimport { Topics } from '../mercure/helpers/Topics';\nimport VisitsStats from './VisitsStats';\nimport { OrphanVisitsHeader } from './OrphanVisitsHeader';\nimport { NormalizedVisit, OrphanVisitType, VisitsInfo, VisitsParams } from './types';\nimport { VisitsExporter } from './services/VisitsExporter';\nimport { CommonVisitsProps } from './types/CommonVisitsProps';\nimport { toApiParams } from './types/helpers';\n\nexport interface OrphanVisitsProps extends CommonVisitsProps, RouteComponentProps {\n  getOrphanVisits: (params?: ShlinkVisitsParams, orphanVisitsType?: OrphanVisitType) => void;\n  orphanVisits: VisitsInfo;\n  cancelGetOrphanVisits: () => void;\n}\n\nexport const OrphanVisits = ({ exportVisits }: VisitsExporter) => boundToMercureHub(({\n  history: { goBack },\n  match: { url },\n  getOrphanVisits,\n  orphanVisits,\n  cancelGetOrphanVisits,\n  settings,\n  selectedServer,\n}: OrphanVisitsProps) => {\n  const exportCsv = (visits: NormalizedVisit[]) => exportVisits('orphan_visits.csv', visits);\n  const loadVisits = (params: VisitsParams) => getOrphanVisits(toApiParams(params), params.filter?.orphanVisitsType);\n\n  return (\n    <VisitsStats\n      getVisits={loadVisits}\n      cancelGetVisits={cancelGetOrphanVisits}\n      visitsInfo={orphanVisits}\n      baseUrl={url}\n      settings={settings}\n      exportCsv={exportCsv}\n      selectedServer={selectedServer}\n      isOrphanVisits\n    >\n      <OrphanVisitsHeader orphanVisits={orphanVisits} goBack={goBack} />\n    </VisitsStats>\n  );\n}, () => [ Topics.orphanVisits ]);\n","import { Action, Dispatch } from 'redux';\nimport { OrphanVisit, OrphanVisitType, Visit, VisitsInfo, VisitsLoadProgressChangedAction } from '../types';\nimport { buildActionCreator, buildReducer } from '../../utils/helpers/redux';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { GetState } from '../../container/types';\nimport { ShlinkVisitsParams } from '../../api/types';\nimport { isOrphanVisit } from '../types/helpers';\nimport { ApiErrorAction } from '../../api/types/actions';\nimport { getVisitsWithLoader } from './common';\nimport { CREATE_VISITS, CreateVisitsAction } from './visitCreation';\n\n/* eslint-disable padding-line-between-statements */\nexport const GET_ORPHAN_VISITS_START = 'shlink/orphanVisits/GET_ORPHAN_VISITS_START';\nexport const GET_ORPHAN_VISITS_ERROR = 'shlink/orphanVisits/GET_ORPHAN_VISITS_ERROR';\nexport const GET_ORPHAN_VISITS = 'shlink/orphanVisits/GET_ORPHAN_VISITS';\nexport const GET_ORPHAN_VISITS_LARGE = 'shlink/orphanVisits/GET_ORPHAN_VISITS_LARGE';\nexport const GET_ORPHAN_VISITS_CANCEL = 'shlink/orphanVisits/GET_ORPHAN_VISITS_CANCEL';\nexport const GET_ORPHAN_VISITS_PROGRESS_CHANGED = 'shlink/orphanVisits/GET_ORPHAN_VISITS_PROGRESS_CHANGED';\n/* eslint-enable padding-line-between-statements */\n\nexport interface OrphanVisitsAction extends Action<string> {\n  visits: Visit[];\n}\n\ntype OrphanVisitsCombinedAction = OrphanVisitsAction\n& VisitsLoadProgressChangedAction\n& CreateVisitsAction\n& ApiErrorAction;\n\nconst initialState: VisitsInfo = {\n  visits: [],\n  loading: false,\n  loadingLarge: false,\n  error: false,\n  cancelLoad: false,\n  progress: 0,\n};\n\nexport default buildReducer<VisitsInfo, OrphanVisitsCombinedAction>({\n  [GET_ORPHAN_VISITS_START]: () => ({ ...initialState, loading: true }),\n  [GET_ORPHAN_VISITS_ERROR]: (_, { errorData }) => ({ ...initialState, error: true, errorData }),\n  [GET_ORPHAN_VISITS]: (_, { visits }) => ({ ...initialState, visits }),\n  [GET_ORPHAN_VISITS_LARGE]: (state) => ({ ...state, loadingLarge: true }),\n  [GET_ORPHAN_VISITS_CANCEL]: (state) => ({ ...state, cancelLoad: true }),\n  [GET_ORPHAN_VISITS_PROGRESS_CHANGED]: (state, { progress }) => ({ ...state, progress }),\n  [CREATE_VISITS]: (state, { createdVisits }) => {\n    const { visits } = state;\n    const newVisits = createdVisits.map(({ visit }) => visit);\n\n    return { ...state, visits: [ ...newVisits, ...visits ] };\n  },\n}, initialState);\n\nconst matchesType = (visit: OrphanVisit, orphanVisitsType?: OrphanVisitType) =>\n  !orphanVisitsType || orphanVisitsType === visit.type;\n\nexport const getOrphanVisits = (buildShlinkApiClient: ShlinkApiClientBuilder) => (\n  query: ShlinkVisitsParams = {},\n  orphanVisitsType?: OrphanVisitType,\n) => async (dispatch: Dispatch, getState: GetState) => {\n  const { getOrphanVisits } = buildShlinkApiClient(getState);\n  const visitsLoader = async (page: number, itemsPerPage: number) => getOrphanVisits({ ...query, page, itemsPerPage })\n    .then((result) => {\n      const visits = result.data.filter((visit) => isOrphanVisit(visit) && matchesType(visit, orphanVisitsType));\n\n      return { ...result, data: visits };\n    });\n  const shouldCancel = () => getState().orphanVisits.cancelLoad;\n  const actionMap = {\n    start: GET_ORPHAN_VISITS_START,\n    large: GET_ORPHAN_VISITS_LARGE,\n    finish: GET_ORPHAN_VISITS,\n    error: GET_ORPHAN_VISITS_ERROR,\n    progress: GET_ORPHAN_VISITS_PROGRESS_CHANGED,\n  };\n\n  return getVisitsWithLoader(visitsLoader, {}, actionMap, dispatch, shouldCancel);\n};\n\nexport const cancelGetOrphanVisits = buildActionCreator(GET_ORPHAN_VISITS_CANCEL);\n","import { Action, Dispatch } from 'redux';\nimport { ShlinkVisitsOverview } from '../../api/types';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { GetState } from '../../container/types';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { groupNewVisitsByType } from '../types/helpers';\nimport { CREATE_VISITS, CreateVisitsAction } from './visitCreation';\n\n/* eslint-disable padding-line-between-statements */\nexport const GET_OVERVIEW_START = 'shlink/visitsOverview/GET_OVERVIEW_START';\nexport const GET_OVERVIEW_ERROR = 'shlink/visitsOverview/GET_OVERVIEW_ERROR';\nexport const GET_OVERVIEW = 'shlink/visitsOverview/GET_OVERVIEW';\n/* eslint-enable padding-line-between-statements */\n\nexport interface VisitsOverview {\n  visitsCount: number;\n  orphanVisitsCount?: number;\n  loading: boolean;\n  error: boolean;\n}\n\nexport type GetVisitsOverviewAction = ShlinkVisitsOverview & Action<string>;\n\nconst initialState: VisitsOverview = {\n  visitsCount: 0,\n  orphanVisitsCount: 0,\n  loading: false,\n  error: false,\n};\n\nexport default buildReducer<VisitsOverview, GetVisitsOverviewAction & CreateVisitsAction>({\n  [GET_OVERVIEW_START]: () => ({ ...initialState, loading: true }),\n  [GET_OVERVIEW_ERROR]: () => ({ ...initialState, error: true }),\n  [GET_OVERVIEW]: (_, { visitsCount, orphanVisitsCount }) => ({ ...initialState, visitsCount, orphanVisitsCount }),\n  [CREATE_VISITS]: ({ visitsCount, orphanVisitsCount = 0, ...rest }, { createdVisits }) => {\n    const { regularVisits, orphanVisits } = groupNewVisitsByType(createdVisits);\n\n    return {\n      ...rest,\n      visitsCount: visitsCount + regularVisits.length,\n      orphanVisitsCount: orphanVisitsCount + orphanVisits.length,\n    };\n  },\n}, initialState);\n\nexport const loadVisitsOverview = (buildShlinkApiClient: ShlinkApiClientBuilder) => () => async (\n  dispatch: Dispatch,\n  getState: GetState,\n) => {\n  dispatch({ type: GET_OVERVIEW_START });\n\n  try {\n    const { getVisitsOverview } = buildShlinkApiClient(getState);\n    const result = await getVisitsOverview();\n\n    dispatch({ type: GET_OVERVIEW, ...result });\n  } catch (e) {\n    dispatch({ type: GET_OVERVIEW_ERROR });\n  }\n};\n","import { CsvJson } from 'csvjson';\nimport { NormalizedVisit } from '../types';\nimport { saveCsv } from '../../utils/helpers/files';\n\nexport class VisitsExporter {\n  public constructor(\n    private readonly window: Window,\n    private readonly csvjson: CsvJson,\n  ) {}\n\n  public readonly exportVisits = (filename: string, visits: NormalizedVisit[]) => {\n    if (!visits.length) {\n      return;\n    }\n\n    const csv = this.csvjson.toCSV(visits, { headers: 'key' });\n\n    saveCsv(this.window, csv, filename);\n  };\n}\n","import Bottle from 'bottlejs';\nimport ShortUrlVisits from '../ShortUrlVisits';\nimport { cancelGetShortUrlVisits, getShortUrlVisits } from '../reducers/shortUrlVisits';\nimport MapModal from '../helpers/MapModal';\nimport { createNewVisits } from '../reducers/visitCreation';\nimport TagVisits from '../TagVisits';\nimport { cancelGetTagVisits, getTagVisits } from '../reducers/tagVisits';\nimport { OrphanVisits } from '../OrphanVisits';\nimport { cancelGetOrphanVisits, getOrphanVisits } from '../reducers/orphanVisits';\nimport { ConnectDecorator } from '../../container/types';\nimport { loadVisitsOverview } from '../reducers/visitsOverview';\nimport * as visitsParser from './VisitsParser';\nimport { VisitsExporter } from './VisitsExporter';\n\nconst provideServices = (bottle: Bottle, connect: ConnectDecorator) => {\n  // Components\n  bottle.serviceFactory('MapModal', () => MapModal);\n\n  bottle.serviceFactory('ShortUrlVisits', ShortUrlVisits, 'VisitsExporter');\n  bottle.decorator('ShortUrlVisits', connect(\n    [ 'shortUrlVisits', 'shortUrlDetail', 'mercureInfo', 'settings', 'selectedServer' ],\n    [ 'getShortUrlVisits', 'getShortUrlDetail', 'cancelGetShortUrlVisits', 'createNewVisits', 'loadMercureInfo' ],\n  ));\n\n  bottle.serviceFactory('TagVisits', TagVisits, 'ColorGenerator', 'VisitsExporter');\n  bottle.decorator('TagVisits', connect(\n    [ 'tagVisits', 'mercureInfo', 'settings', 'selectedServer' ],\n    [ 'getTagVisits', 'cancelGetTagVisits', 'createNewVisits', 'loadMercureInfo' ],\n  ));\n\n  bottle.serviceFactory('OrphanVisits', OrphanVisits, 'VisitsExporter');\n  bottle.decorator('OrphanVisits', connect(\n    [ 'orphanVisits', 'mercureInfo', 'settings', 'selectedServer' ],\n    [ 'getOrphanVisits', 'cancelGetOrphanVisits', 'createNewVisits', 'loadMercureInfo' ],\n  ));\n\n  // Services\n  bottle.serviceFactory('VisitsParser', () => visitsParser);\n  bottle.service('VisitsExporter', VisitsExporter, 'window', 'csvjson');\n\n  // Actions\n  bottle.serviceFactory('getShortUrlVisits', getShortUrlVisits, 'buildShlinkApiClient');\n  bottle.serviceFactory('cancelGetShortUrlVisits', () => cancelGetShortUrlVisits);\n\n  bottle.serviceFactory('getTagVisits', getTagVisits, 'buildShlinkApiClient');\n  bottle.serviceFactory('cancelGetTagVisits', () => cancelGetTagVisits);\n\n  bottle.serviceFactory('getOrphanVisits', getOrphanVisits, 'buildShlinkApiClient');\n  bottle.serviceFactory('cancelGetOrphanVisits', () => cancelGetOrphanVisits);\n\n  bottle.serviceFactory('createNewVisits', () => createNewVisits);\n  bottle.serviceFactory('loadVisitsOverview', loadVisitsOverview, 'buildShlinkApiClient');\n};\n\nexport default provideServices;\n","import ColorGenerator from '../../utils/services/ColorGenerator';\nimport './TagBullet.scss';\n\ninterface TagBulletProps {\n  tag: string;\n  colorGenerator: ColorGenerator;\n}\n\nconst TagBullet = ({ tag, colorGenerator }: TagBulletProps) => (\n  <div\n    style={{ backgroundColor: colorGenerator.getColorForKey(tag) }}\n    className=\"tag-bullet\"\n  />\n);\n\nexport default TagBullet;\n","import { useEffect } from 'react';\nimport ReactTags, { SuggestionComponentProps, TagComponentProps } from 'react-tag-autocomplete';\nimport ColorGenerator from '../../utils/services/ColorGenerator';\nimport { Settings } from '../../settings/reducers/settings';\nimport { TagsList } from '../reducers/tagsList';\nimport TagBullet from './TagBullet';\nimport Tag from './Tag';\n\nexport interface TagsSelectorProps {\n  selectedTags: string[];\n  onChange: (tags: string[]) => void;\n  placeholder?: string;\n}\n\ninterface TagsSelectorConnectProps extends TagsSelectorProps {\n  listTags: Function;\n  tagsList: TagsList;\n  settings: Settings;\n}\n\nconst toComponentTag = (tag: string) => ({ id: tag, name: tag });\n\nconst TagsSelector = (colorGenerator: ColorGenerator) => (\n  { selectedTags, onChange, placeholder, listTags, tagsList, settings }: TagsSelectorConnectProps,\n) => {\n  useEffect(() => {\n    listTags();\n  }, []);\n\n  const searchMode = settings.shortUrlCreation?.tagFilteringMode ?? 'startsWith';\n  const ReactTagsTag = ({ tag, onDelete }: TagComponentProps) =>\n    <Tag colorGenerator={colorGenerator} text={tag.name} clearable className=\"react-tags__tag\" onClose={onDelete} />;\n  const ReactTagsSuggestion = ({ item }: SuggestionComponentProps) => (\n    <>\n      <TagBullet tag={`${item.name}`} colorGenerator={colorGenerator} />\n      {item.name}\n    </>\n  );\n\n  return (\n    <ReactTags\n      tags={selectedTags.map(toComponentTag)}\n      tagComponent={ReactTagsTag}\n      suggestions={tagsList.tags.filter((tag) => !selectedTags.includes(tag)).map(toComponentTag)}\n      suggestionComponent={ReactTagsSuggestion}\n      allowNew\n      addOnBlur\n      placeholderText={placeholder ?? 'Add tags to the URL'}\n      minQueryLength={1}\n      delimiters={[ 'Enter', 'Tab', ',' ]}\n      suggestionsTransform={\n        searchMode === 'includes'\n          ? (query, suggestions) => suggestions.filter(({ name }) => name.includes(query))\n          : undefined\n      }\n      onDelete={(removedTagIndex) => {\n        const tagsCopy = [ ...selectedTags ];\n\n        tagsCopy.splice(removedTagIndex, 1);\n        onChange(tagsCopy);\n      }}\n      onAddition={({ name: newTag }) => onChange(\n        // * Avoid duplicated tags (thanks to the Set),\n        // * Split any of the new tags by comma, allowing to paste multiple comma-separated tags at once.\n        [ ...new Set([ ...selectedTags, ...newTag.toLowerCase().split(',') ]) ],\n      )}\n    />\n  );\n};\n\nexport default TagsSelector;\n","import { Card, CardHeader, CardBody, Button, Collapse } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash as deleteIcon, faPencilAlt as editIcon, faLink, faEye } from '@fortawesome/free-solid-svg-icons';\nimport { FC, useEffect, useRef } from 'react';\nimport { Link } from 'react-router-dom';\nimport { prettify } from '../utils/helpers/numbers';\nimport { useToggle } from '../utils/helpers/hooks';\nimport ColorGenerator from '../utils/services/ColorGenerator';\nimport { isServerWithId, SelectedServer } from '../servers/data';\nimport TagBullet from './helpers/TagBullet';\nimport { TagModalProps, TagStats } from './data';\nimport './TagCard.scss';\n\nexport interface TagCardProps {\n  tag: string;\n  tagStats?: TagStats;\n  selectedServer: SelectedServer;\n  displayed: boolean;\n  toggle: () => void;\n}\n\nconst isTruncated = (el: HTMLElement | undefined): boolean => !!el && el.scrollWidth > el.clientWidth;\n\nconst TagCard = (\n  DeleteTagConfirmModal: FC<TagModalProps>,\n  EditTagModal: FC<TagModalProps>,\n  colorGenerator: ColorGenerator,\n) => ({ tag, tagStats, selectedServer, displayed, toggle }: TagCardProps) => {\n  const [ isDeleteModalOpen, toggleDelete ] = useToggle();\n  const [ isEditModalOpen, toggleEdit ] = useToggle();\n  const [ hasTitle,, displayTitle ] = useToggle();\n  const titleRef = useRef<HTMLElement>();\n  const serverId = isServerWithId(selectedServer) ? selectedServer.id : '';\n\n  useEffect(() => {\n    if (isTruncated(titleRef.current)) {\n      displayTitle();\n    }\n  }, [ titleRef.current ]);\n\n  return (\n    <Card className=\"tag-card\">\n      <CardHeader className=\"tag-card__header\">\n        <Button color=\"link\" size=\"sm\" className=\"tag-card__btn tag-card__btn--last\" onClick={toggleDelete}>\n          <FontAwesomeIcon icon={deleteIcon} />\n        </Button>\n        <Button color=\"link\" size=\"sm\" className=\"tag-card__btn\" onClick={toggleEdit}>\n          <FontAwesomeIcon icon={editIcon} />\n        </Button>\n        <h5\n          className=\"tag-card__tag-title text-ellipsis\"\n          title={hasTitle ? tag : undefined}\n          ref={(el) => {\n            titleRef.current = el ?? undefined;\n          }}\n        >\n          <TagBullet tag={tag} colorGenerator={colorGenerator} />\n          <span className=\"tag-card__tag-name\" onClick={toggle}>{tag}</span>\n        </h5>\n      </CardHeader>\n\n      {tagStats && (\n        <Collapse isOpen={displayed}>\n          <CardBody className=\"tag-card__body\">\n            <Link\n              to={`/server/${serverId}/list-short-urls/1?tag=${encodeURIComponent(tag)}`}\n              className=\"btn btn-outline-secondary btn-block d-flex justify-content-between align-items-center mb-1\"\n            >\n              <span className=\"text-ellipsis\"><FontAwesomeIcon icon={faLink} className=\"mr-2\" />Short URLs</span>\n              <b>{prettify(tagStats.shortUrlsCount)}</b>\n            </Link>\n            <Link\n              to={`/server/${serverId}/tag/${tag}/visits`}\n              className=\"btn btn-outline-secondary btn-block d-flex justify-content-between align-items-center\"\n            >\n              <span className=\"text-ellipsis\"><FontAwesomeIcon icon={faEye} className=\"mr-2\" />Visits</span>\n              <b>{prettify(tagStats.visitsCount)}</b>\n            </Link>\n          </CardBody>\n        </Collapse>\n      )}\n\n      <DeleteTagConfirmModal tag={tag} toggle={toggleDelete} isOpen={isDeleteModalOpen} />\n      <EditTagModal tag={tag} toggle={toggleEdit} isOpen={isEditModalOpen} />\n    </Card>\n  );\n};\n\nexport default TagCard;\n","import { Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\nimport { TagDeletion } from '../reducers/tagDelete';\nimport { TagModalProps } from '../data';\nimport { Result } from '../../utils/Result';\nimport { ShlinkApiError } from '../../api/ShlinkApiError';\n\ninterface DeleteTagConfirmModalProps extends TagModalProps {\n  deleteTag: (tag: string) => Promise<void>;\n  tagDeleted: (tag: string) => void;\n  tagDelete: TagDeletion;\n}\n\nconst DeleteTagConfirmModal = (\n  { tag, toggle, isOpen, deleteTag, tagDelete, tagDeleted }: DeleteTagConfirmModalProps,\n) => {\n  const { deleting, error, errorData } = tagDelete;\n  const doDelete = async () => {\n    await deleteTag(tag);\n    tagDeleted(tag);\n    toggle();\n  };\n\n  return (\n    <Modal toggle={toggle} isOpen={isOpen} centered>\n      <ModalHeader toggle={toggle}>\n        <span className=\"text-danger\">Delete tag</span>\n      </ModalHeader>\n      <ModalBody>\n        Are you sure you want to delete tag <b>{tag}</b>?\n        {error && (\n          <Result type=\"error\" small className=\"mt-2\">\n            <ShlinkApiError errorData={errorData} fallbackMessage=\"Something went wrong while deleting the tag :(\" />\n          </Result>\n        )}\n      </ModalBody>\n      <ModalFooter>\n        <button className=\"btn btn-link\" onClick={toggle}>Cancel</button>\n        <button className=\"btn btn-danger\" disabled={deleting} onClick={doDelete}>\n          {deleting ? 'Deleting tag...' : 'Delete tag'}\n        </button>\n      </ModalFooter>\n    </Modal>\n  );\n};\n\nexport default DeleteTagConfirmModal;\n","import { useState } from 'react';\nimport { Button, Input, Modal, ModalBody, ModalFooter, ModalHeader, Popover } from 'reactstrap';\nimport { ChromePicker } from 'react-color';\nimport { faPalette as colorIcon } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { useToggle } from '../../utils/helpers/hooks';\nimport { handleEventPreventingDefault } from '../../utils/utils';\nimport ColorGenerator from '../../utils/services/ColorGenerator';\nimport { TagModalProps } from '../data';\nimport { TagEdition } from '../reducers/tagEdit';\nimport { Result } from '../../utils/Result';\nimport { ShlinkApiError } from '../../api/ShlinkApiError';\nimport './EditTagModal.scss';\n\ninterface EditTagModalProps extends TagModalProps {\n  tagEdit: TagEdition;\n  editTag: (oldName: string, newName: string, color: string) => Promise<void>;\n  tagEdited: (oldName: string, newName: string, color: string) => void;\n}\n\nconst EditTagModal = ({ getColorForKey }: ColorGenerator) => (\n  { tag, editTag, toggle, tagEdited, isOpen, tagEdit }: EditTagModalProps,\n) => {\n  const [ newTagName, setNewTagName ] = useState(tag);\n  const [ color, setColor ] = useState(getColorForKey(tag));\n  const [ showColorPicker, toggleColorPicker, , hideColorPicker ] = useToggle();\n  const { editing, error, errorData } = tagEdit;\n  const saveTag = handleEventPreventingDefault(\n    async () => editTag(tag, newTagName, color)\n      .then(() => tagEdited(tag, newTagName, color))\n      .then(toggle)\n      .catch(() => {}),\n  );\n\n  return (\n    <Modal isOpen={isOpen} toggle={toggle} centered onClosed={hideColorPicker}>\n      <form onSubmit={saveTag}>\n        <ModalHeader toggle={toggle}>Edit tag</ModalHeader>\n        <ModalBody>\n          <div className=\"input-group\">\n            <div className=\"input-group-prepend\" id=\"colorPickerBtn\" onClick={toggleColorPicker}>\n              <div\n                className=\"input-group-text edit-tag-modal__color-picker-toggle\"\n                style={{ backgroundColor: color, borderColor: color }}\n              >\n                <FontAwesomeIcon icon={colorIcon} className=\"edit-tag-modal__color-icon\" />\n              </div>\n            </div>\n            <Popover isOpen={showColorPicker} toggle={toggleColorPicker} target=\"colorPickerBtn\" placement=\"right\">\n              <ChromePicker color={color} disableAlpha onChange={({ hex }) => setColor(hex)} />\n            </Popover>\n            <Input\n              value={newTagName}\n              placeholder=\"Tag\"\n              required\n              onChange={({ target }) => setNewTagName(target.value)}\n            />\n          </div>\n\n          {error && (\n            <Result type=\"error\" small className=\"mt-2\">\n              <ShlinkApiError errorData={errorData} fallbackMessage=\"Something went wrong while editing the tag :(\" />\n            </Result>\n          )}\n        </ModalBody>\n        <ModalFooter>\n          <Button type=\"button\" color=\"link\" onClick={toggle}>Cancel</Button>\n          <Button color=\"primary\" disabled={editing}>{editing ? 'Saving...' : 'Save'}</Button>\n        </ModalFooter>\n      </form>\n    </Modal>\n  );\n};\n\nexport default EditTagModal;\n","import { FC } from 'react';\nimport { DropdownItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faBars as listIcon, faThLarge as cardsIcon } from '@fortawesome/free-solid-svg-icons';\nimport { DropdownBtn } from '../utils/DropdownBtn';\nimport { TagsMode } from '../settings/reducers/settings';\n\ninterface TagsModeDropdownProps {\n  mode: TagsMode;\n  onChange: (newMode: TagsMode) => void;\n  renderTitle?: (mode: TagsMode) => string;\n}\n\nexport const TagsModeDropdown: FC<TagsModeDropdownProps> = ({ mode, onChange, renderTitle }) => (\n  <DropdownBtn text={renderTitle?.(mode) ?? `Display mode: ${mode}`}>\n    <DropdownItem active={mode === 'cards'} onClick={() => onChange('cards')}>\n      <FontAwesomeIcon icon={cardsIcon} fixedWidth className=\"mr-1\" /> Cards\n    </DropdownItem>\n    <DropdownItem active={mode === 'list'} onClick={() => onChange('list')}>\n      <FontAwesomeIcon icon={listIcon} fixedWidth className=\"mr-1\" /> List\n    </DropdownItem>\n  </DropdownBtn>\n);\n","import { FC, useEffect, useState } from 'react';\nimport { Row } from 'reactstrap';\nimport Message from '../utils/Message';\nimport SearchField from '../utils/SearchField';\nimport { SelectedServer } from '../servers/data';\nimport { boundToMercureHub } from '../mercure/helpers/boundToMercureHub';\nimport { Result } from '../utils/Result';\nimport { ShlinkApiError } from '../api/ShlinkApiError';\nimport { Topics } from '../mercure/helpers/Topics';\nimport { Settings, TagsMode } from '../settings/reducers/settings';\nimport { TagsList as TagsListState } from './reducers/tagsList';\nimport { TagsListChildrenProps } from './data/TagsListChildrenProps';\nimport { TagsModeDropdown } from './TagsModeDropdown';\n\nexport interface TagsListProps {\n  filterTags: (searchTerm: string) => void;\n  forceListTags: Function;\n  tagsList: TagsListState;\n  selectedServer: SelectedServer;\n  settings: Settings;\n}\n\nconst TagsList = (TagsCards: FC<TagsListChildrenProps>, TagsTable: FC<TagsListChildrenProps>) => boundToMercureHub((\n  { filterTags, forceListTags, tagsList, selectedServer, settings }: TagsListProps,\n) => {\n  const [ mode, setMode ] = useState<TagsMode>(settings.ui?.tagsMode ?? 'cards');\n\n  useEffect(() => {\n    forceListTags();\n  }, []);\n\n  if (tagsList.loading) {\n    return <Message loading />;\n  }\n\n  const renderContent = () => {\n    if (tagsList.error) {\n      return (\n        <Result type=\"error\">\n          <ShlinkApiError errorData={tagsList.errorData} fallbackMessage=\"Error loading tags :(\" />\n        </Result>\n      );\n    }\n\n    if (tagsList.filteredTags.length < 1) {\n      return <Message>No tags found</Message>;\n    }\n\n    return mode === 'cards'\n      ? <TagsCards tagsList={tagsList} selectedServer={selectedServer} />\n      : <TagsTable tagsList={tagsList} selectedServer={selectedServer} />;\n  };\n\n  return (\n    <>\n      <SearchField className=\"mb-3\" onChange={filterTags} />\n      <Row className=\"mb-3\">\n        <div className=\"col-lg-6 offset-lg-6\">\n          <TagsModeDropdown mode={mode} onChange={setMode} />\n        </div>\n      </Row>\n      {renderContent()}\n    </>\n  );\n}, () => [ Topics.visits ]);\n\nexport default TagsList;\n","import { Action, Dispatch } from 'redux';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { GetState } from '../../container/types';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { ProblemDetailsError } from '../../api/types';\nimport { parseApiError } from '../../api/utils';\nimport { ApiErrorAction } from '../../api/types/actions';\n\n/* eslint-disable padding-line-between-statements */\nexport const DELETE_TAG_START = 'shlink/deleteTag/DELETE_TAG_START';\nexport const DELETE_TAG_ERROR = 'shlink/deleteTag/DELETE_TAG_ERROR';\nexport const DELETE_TAG = 'shlink/deleteTag/DELETE_TAG';\nexport const TAG_DELETED = 'shlink/deleteTag/TAG_DELETED';\n/* eslint-enable padding-line-between-statements */\n\nexport interface TagDeletion {\n  deleting: boolean;\n  error: boolean;\n  errorData?: ProblemDetailsError;\n}\n\nexport interface DeleteTagAction extends Action<string> {\n  tag: string;\n}\n\nconst initialState: TagDeletion = {\n  deleting: false,\n  error: false,\n};\n\nexport default buildReducer<TagDeletion, ApiErrorAction>({\n  [DELETE_TAG_START]: () => ({ deleting: true, error: false }),\n  [DELETE_TAG_ERROR]: (_, { errorData }) => ({ deleting: false, error: true, errorData }),\n  [DELETE_TAG]: () => ({ deleting: false, error: false }),\n}, initialState);\n\nexport const deleteTag = (buildShlinkApiClient: ShlinkApiClientBuilder) => (tag: string) => async (\n  dispatch: Dispatch,\n  getState: GetState,\n) => {\n  dispatch({ type: DELETE_TAG_START });\n  const { deleteTags } = buildShlinkApiClient(getState);\n\n  try {\n    await deleteTags([ tag ]);\n    dispatch({ type: DELETE_TAG });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: DELETE_TAG_ERROR, errorData: parseApiError(e) });\n\n    throw e;\n  }\n};\n\nexport const tagDeleted = (tag: string): DeleteTagAction => ({ type: TAG_DELETED, tag });\n","import { pick } from 'ramda';\nimport { Action, Dispatch } from 'redux';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { GetState } from '../../container/types';\nimport ColorGenerator from '../../utils/services/ColorGenerator';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { ProblemDetailsError } from '../../api/types';\nimport { parseApiError } from '../../api/utils';\nimport { ApiErrorAction } from '../../api/types/actions';\n\n/* eslint-disable padding-line-between-statements */\nexport const EDIT_TAG_START = 'shlink/editTag/EDIT_TAG_START';\nexport const EDIT_TAG_ERROR = 'shlink/editTag/EDIT_TAG_ERROR';\nexport const EDIT_TAG = 'shlink/editTag/EDIT_TAG';\n/* eslint-enable padding-line-between-statements */\n\nexport const TAG_EDITED = 'shlink/editTag/TAG_EDITED';\n\nexport interface TagEdition {\n  oldName: string;\n  newName: string;\n  editing: boolean;\n  error: boolean;\n  errorData?: ProblemDetailsError;\n}\n\nexport interface EditTagAction extends Action<string> {\n  oldName: string;\n  newName: string;\n  color: string;\n}\n\nconst initialState: TagEdition = {\n  oldName: '',\n  newName: '',\n  editing: false,\n  error: false,\n};\n\nexport default buildReducer<TagEdition, EditTagAction & ApiErrorAction>({\n  [EDIT_TAG_START]: (state) => ({ ...state, editing: true, error: false }),\n  [EDIT_TAG_ERROR]: (state, { errorData }) => ({ ...state, editing: false, error: true, errorData }),\n  [EDIT_TAG]: (_, action) => ({\n    ...pick([ 'oldName', 'newName' ], action),\n    editing: false,\n    error: false,\n  }),\n}, initialState);\n\nexport const editTag = (buildShlinkApiClient: ShlinkApiClientBuilder, colorGenerator: ColorGenerator) => (\n  oldName: string,\n  newName: string,\n  color: string,\n) => async (dispatch: Dispatch, getState: GetState) => {\n  dispatch({ type: EDIT_TAG_START });\n  const { editTag } = buildShlinkApiClient(getState);\n\n  try {\n    await editTag(oldName, newName);\n    colorGenerator.setColorForKey(newName, color);\n    dispatch({ type: EDIT_TAG, oldName, newName });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: EDIT_TAG_ERROR, errorData: parseApiError(e) });\n\n    throw e;\n  }\n};\n\nexport const tagEdited = (oldName: string, newName: string, color: string): EditTagAction => ({\n  type: TAG_EDITED,\n  oldName,\n  newName,\n  color,\n});\n","import { isEmpty, reject } from 'ramda';\nimport { Action, Dispatch } from 'redux';\nimport { CREATE_VISITS, CreateVisitsAction } from '../../visits/reducers/visitCreation';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { ProblemDetailsError, ShlinkTags } from '../../api/types';\nimport { GetState } from '../../container/types';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { CreateVisit, Stats } from '../../visits/types';\nimport { parseApiError } from '../../api/utils';\nimport { TagStats } from '../data';\nimport { ApiErrorAction } from '../../api/types/actions';\nimport { DeleteTagAction, TAG_DELETED } from './tagDelete';\nimport { EditTagAction, TAG_EDITED } from './tagEdit';\n\n/* eslint-disable padding-line-between-statements */\nexport const LIST_TAGS_START = 'shlink/tagsList/LIST_TAGS_START';\nexport const LIST_TAGS_ERROR = 'shlink/tagsList/LIST_TAGS_ERROR';\nexport const LIST_TAGS = 'shlink/tagsList/LIST_TAGS';\nexport const FILTER_TAGS = 'shlink/tagsList/FILTER_TAGS';\n/* eslint-enable padding-line-between-statements */\n\ntype TagsStatsMap = Record<string, TagStats>;\n\nexport interface TagsList {\n  tags: string[];\n  filteredTags: string[];\n  stats: TagsStatsMap;\n  loading: boolean;\n  error: boolean;\n  errorData?: ProblemDetailsError;\n}\n\ninterface ListTagsAction extends Action<string> {\n  tags: string[];\n  stats: TagsStatsMap;\n}\n\ninterface FilterTagsAction extends Action<string> {\n  searchTerm: string;\n}\n\ntype TagsCombinedAction = ListTagsAction\n& DeleteTagAction\n& CreateVisitsAction\n& EditTagAction\n& FilterTagsAction\n& ApiErrorAction;\n\nconst initialState = {\n  tags: [],\n  filteredTags: [],\n  stats: {},\n  loading: false,\n  error: false,\n};\n\ntype TagIncrease = [string, number];\n\nconst renameTag = (oldName: string, newName: string) => (tag: string) => tag === oldName ? newName : tag;\nconst rejectTag = (tags: string[], tagToReject: string) => reject((tag) => tag === tagToReject, tags);\nconst increaseVisitsForTags = (tags: TagIncrease[], stats: TagsStatsMap) => tags.reduce((stats, [ tag, increase ]) => {\n  if (!stats[tag]) {\n    return stats;\n  }\n\n  const tagStats = stats[tag];\n\n  tagStats.visitsCount = tagStats.visitsCount + increase;\n  stats[tag] = tagStats;\n\n  return stats;\n}, { ...stats });\nconst calculateVisitsPerTag = (createdVisits: CreateVisit[]): TagIncrease[] => Object.entries(\n  createdVisits.reduce<Stats>((acc, { shortUrl }) => {\n    shortUrl?.tags.forEach((tag) => {\n      acc[tag] = (acc[tag] || 0) + 1;\n    });\n\n    return acc;\n  }, {}),\n);\n\nexport default buildReducer<TagsList, TagsCombinedAction>({\n  [LIST_TAGS_START]: () => ({ ...initialState, loading: true }),\n  [LIST_TAGS_ERROR]: (_, { errorData }) => ({ ...initialState, error: true, errorData }),\n  [LIST_TAGS]: (_, { tags, stats }) => ({ ...initialState, stats, tags, filteredTags: tags }),\n  [TAG_DELETED]: (state, { tag }) => ({\n    ...state,\n    tags: rejectTag(state.tags, tag),\n    filteredTags: rejectTag(state.filteredTags, tag),\n  }),\n  [TAG_EDITED]: (state, { oldName, newName }) => ({\n    ...state,\n    tags: state.tags.map(renameTag(oldName, newName)).sort(),\n    filteredTags: state.filteredTags.map(renameTag(oldName, newName)).sort(),\n  }),\n  [FILTER_TAGS]: (state, { searchTerm }) => ({\n    ...state,\n    filteredTags: state.tags.filter((tag) => tag.toLowerCase().match(searchTerm)),\n  }),\n  [CREATE_VISITS]: (state, { createdVisits }) => ({\n    ...state,\n    stats: increaseVisitsForTags(calculateVisitsPerTag(createdVisits), state.stats),\n  }),\n}, initialState);\n\nexport const listTags = (buildShlinkApiClient: ShlinkApiClientBuilder, force = true) => () => async (\n  dispatch: Dispatch,\n  getState: GetState,\n) => {\n  const { tagsList } = getState();\n\n  if (!force && (tagsList.loading || !isEmpty(tagsList.tags))) {\n    return;\n  }\n\n  dispatch({ type: LIST_TAGS_START });\n\n  try {\n    const { listTags } = buildShlinkApiClient(getState);\n    const { tags, stats = [] }: ShlinkTags = await listTags();\n    const processedStats = stats.reduce<TagsStatsMap>((acc, { tag, shortUrlsCount, visitsCount }) => {\n      acc[tag] = { shortUrlsCount, visitsCount };\n\n      return acc;\n    }, {});\n\n    dispatch<ListTagsAction>({ tags, stats: processedStats, type: LIST_TAGS });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: LIST_TAGS_ERROR, errorData: parseApiError(e) });\n  }\n};\n\nexport const filterTags = (searchTerm: string): FilterTagsAction => ({ type: FILTER_TAGS, searchTerm });\n","import { FC, useState } from 'react';\nimport { splitEvery } from 'ramda';\nimport { Row } from 'reactstrap';\nimport { TagCardProps } from './TagCard';\nimport { TagsListChildrenProps } from './data/TagsListChildrenProps';\n\nconst { ceil } = Math;\nconst TAGS_GROUPS_AMOUNT = 4;\n\nexport const TagsCards = (TagCard: FC<TagCardProps>): FC<TagsListChildrenProps> => ({ tagsList, selectedServer }) => {\n  const [ displayedTag, setDisplayedTag ] = useState<string | undefined>();\n  const tagsCount = tagsList.filteredTags.length;\n  const tagsGroups = splitEvery(ceil(tagsCount / TAGS_GROUPS_AMOUNT), tagsList.filteredTags);\n\n  return (\n    <Row>\n      {tagsGroups.map((group, index) => (\n        <div key={index} className=\"col-md-6 col-xl-3\">\n          {group.map((tag) => (\n            <TagCard\n              key={tag}\n              tag={tag}\n              tagStats={tagsList.stats[tag]}\n              selectedServer={selectedServer}\n              displayed={displayedTag === tag}\n              toggle={() => setDisplayedTag(displayedTag !== tag ? tag : undefined)}\n            />\n          ))}\n        </div>\n      ))}\n    </Row>\n  );\n};\n","import { FC, useEffect, useRef } from 'react';\nimport { splitEvery } from 'ramda';\nimport { RouteChildrenProps } from 'react-router';\nimport { SimpleCard } from '../utils/SimpleCard';\nimport ColorGenerator from '../utils/services/ColorGenerator';\nimport SimplePaginator from '../common/SimplePaginator';\nimport { useQueryState } from '../utils/helpers/hooks';\nimport { parseQuery } from '../utils/helpers/query';\nimport { TagsListChildrenProps } from './data/TagsListChildrenProps';\nimport { TagsTableRowProps } from './TagsTableRow';\n\nconst TAGS_PER_PAGE = 20; // TODO Allow customizing this value in settings\n\nexport const TagsTable = (colorGenerator: ColorGenerator, TagsTableRow: FC<TagsTableRowProps>) => (\n  { tagsList, selectedServer, location }: TagsListChildrenProps & RouteChildrenProps,\n) => {\n  const isFirstLoad = useRef(true);\n  const { page: pageFromQuery = 1 } = parseQuery<{ page?: number | string }>(location.search);\n  const [ page, setPage ] = useQueryState<number>('page', Number(pageFromQuery));\n  const sortedTags = tagsList.filteredTags; // TODO Support sorting tags\n  const pages = splitEvery(TAGS_PER_PAGE, sortedTags);\n  const showPaginator = pages.length > 1;\n  const currentPage = pages[page - 1] ?? [];\n\n  useEffect(() => {\n    !isFirstLoad.current && setPage(1);\n    isFirstLoad.current = false;\n  }, [ tagsList.filteredTags ]);\n  useEffect(() => {\n    scrollTo(0, 0);\n  }, [ page ]);\n\n  return (\n    <SimpleCard key={page} bodyClassName={showPaginator ? 'pb-1' : ''}>\n      <table className=\"table table-hover mb-0\">\n        <thead className=\"responsive-table__header\">\n          <tr>\n            <th>Tag</th>\n            <th className=\"text-lg-right\">Short URLs</th>\n            <th className=\"text-lg-right\">Visits</th>\n            <th />\n          </tr>\n        </thead>\n        <tbody>\n          {currentPage.length === 0 && <tr><td colSpan={4} className=\"text-center\">No results found</td></tr>}\n          {currentPage.map((tag) => (\n            <TagsTableRow\n              key={tag}\n              tag={tag}\n              tagStats={tagsList.stats[tag]}\n              selectedServer={selectedServer}\n              colorGenerator={colorGenerator}\n            />\n          ))}\n        </tbody>\n      </table>\n\n      {showPaginator && (\n        <div className=\"sticky-card-paginator\">\n          <SimplePaginator pagesCount={pages.length} currentPage={page} setCurrentPage={setPage} />\n        </div>\n      )}\n    </SimpleCard>\n  );\n};\n","import { FC } from 'react';\nimport { Link } from 'react-router-dom';\nimport { DropdownItem } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash as deleteIcon, faPencilAlt as editIcon } from '@fortawesome/free-solid-svg-icons';\nimport { getServerId, SelectedServer } from '../servers/data';\nimport ColorGenerator from '../utils/services/ColorGenerator';\nimport { prettify } from '../utils/helpers/numbers';\nimport { useToggle } from '../utils/helpers/hooks';\nimport { DropdownBtnMenu } from '../utils/DropdownBtnMenu';\nimport TagBullet from './helpers/TagBullet';\nimport { TagModalProps, TagStats } from './data';\n\nexport interface TagsTableRowProps {\n  tag: string;\n  tagStats?: TagStats;\n  selectedServer: SelectedServer;\n  colorGenerator: ColorGenerator;\n}\n\nexport const TagsTableRow = (DeleteTagConfirmModal: FC<TagModalProps>, EditTagModal: FC<TagModalProps>) => (\n  { tag, tagStats, colorGenerator, selectedServer }: TagsTableRowProps,\n) => {\n  const [ isDeleteModalOpen, toggleDelete ] = useToggle();\n  const [ isEditModalOpen, toggleEdit ] = useToggle();\n  const [ isDropdownOpen, toggleDropdown ] = useToggle();\n  const serverId = getServerId(selectedServer);\n\n  return (\n    <tr className=\"responsive-table__row\">\n      <th className=\"responsive-table__cell\" data-th=\"Tag\">\n        <TagBullet tag={tag} colorGenerator={colorGenerator} /> {tag}\n      </th>\n      <td className=\"responsive-table__cell text-lg-right\" data-th=\"Short URLs\">\n        <Link to={`/server/${serverId}/list-short-urls/1?tag=${encodeURIComponent(tag)}`}>\n          {prettify(tagStats?.shortUrlsCount ?? 0)}\n        </Link>\n      </td>\n      <td className=\"responsive-table__cell text-lg-right\" data-th=\"Visits\">\n        <Link to={`/server/${serverId}/tag/${tag}/visits`}>\n          {prettify(tagStats?.visitsCount ?? 0)}\n        </Link>\n      </td>\n      <td className=\"responsive-table__cell text-lg-right\">\n        <DropdownBtnMenu toggle={toggleDropdown} isOpen={isDropdownOpen}>\n          <DropdownItem onClick={toggleEdit}>\n            <FontAwesomeIcon icon={editIcon} fixedWidth className=\"mr-1\" /> Edit\n          </DropdownItem>\n          <DropdownItem onClick={toggleDelete}>\n            <FontAwesomeIcon icon={deleteIcon} fixedWidth className=\"mr-1\" /> Delete\n          </DropdownItem>\n        </DropdownBtnMenu>\n      </td>\n\n      <EditTagModal tag={tag} toggle={toggleEdit} isOpen={isEditModalOpen} />\n      <DeleteTagConfirmModal tag={tag} toggle={toggleDelete} isOpen={isDeleteModalOpen} />\n    </tr>\n  );\n};\n","import Bottle, { IContainer } from 'bottlejs';\nimport { withRouter } from 'react-router-dom';\nimport TagsSelector from '../helpers/TagsSelector';\nimport TagCard from '../TagCard';\nimport DeleteTagConfirmModal from '../helpers/DeleteTagConfirmModal';\nimport EditTagModal from '../helpers/EditTagModal';\nimport TagsList from '../TagsList';\nimport { filterTags, listTags } from '../reducers/tagsList';\nimport { deleteTag, tagDeleted } from '../reducers/tagDelete';\nimport { editTag, tagEdited } from '../reducers/tagEdit';\nimport { ConnectDecorator } from '../../container/types';\nimport { TagsCards } from '../TagsCards';\nimport { TagsTable } from '../TagsTable';\nimport { TagsTableRow } from '../TagsTableRow';\n\nconst provideServices = (bottle: Bottle, connect: ConnectDecorator) => {\n  // Components\n  bottle.serviceFactory('TagsSelector', TagsSelector, 'ColorGenerator');\n  bottle.decorator('TagsSelector', connect([ 'tagsList', 'settings' ], [ 'listTags' ]));\n\n  bottle.serviceFactory('TagCard', TagCard, 'DeleteTagConfirmModal', 'EditTagModal', 'ColorGenerator');\n\n  bottle.serviceFactory('DeleteTagConfirmModal', () => DeleteTagConfirmModal);\n  bottle.decorator('DeleteTagConfirmModal', connect([ 'tagDelete' ], [ 'deleteTag', 'tagDeleted' ]));\n\n  bottle.serviceFactory('EditTagModal', EditTagModal, 'ColorGenerator');\n  bottle.decorator('EditTagModal', connect([ 'tagEdit' ], [ 'editTag', 'tagEdited' ]));\n\n  bottle.serviceFactory('TagsCards', TagsCards, 'TagCard');\n  bottle.serviceFactory('TagsTableRow', TagsTableRow, 'DeleteTagConfirmModal', 'EditTagModal');\n\n  bottle.serviceFactory('TagsTable', TagsTable, 'ColorGenerator', 'TagsTableRow');\n  bottle.decorator('TagsTable', withRouter);\n\n  bottle.serviceFactory('TagsList', TagsList, 'TagsCards', 'TagsTable');\n  bottle.decorator('TagsList', connect(\n    [ 'tagsList', 'selectedServer', 'mercureInfo', 'settings' ],\n    [ 'forceListTags', 'filterTags', 'createNewVisits', 'loadMercureInfo' ],\n  ));\n\n  // Actions\n  const listTagsActionFactory = (force: boolean) =>\n    ({ buildShlinkApiClient }: IContainer) => listTags(buildShlinkApiClient, force);\n\n  bottle.factory('listTags', listTagsActionFactory(false));\n  bottle.factory('forceListTags', listTagsActionFactory(true));\n  bottle.serviceFactory('filterTags', () => filterTags);\n  bottle.serviceFactory('tagDeleted', () => tagDeleted);\n  bottle.serviceFactory('tagEdited', () => tagEdited);\n\n  bottle.serviceFactory('deleteTag', deleteTag, 'buildShlinkApiClient');\n  bottle.serviceFactory('editTag', editTag, 'buildShlinkApiClient', 'ColorGenerator');\n};\n\nexport default provideServices;\n","import { Action, Dispatch } from 'redux';\nimport { ShlinkMercureInfo } from '../../api/types';\nimport { GetState } from '../../container/types';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\n\n/* eslint-disable padding-line-between-statements */\nexport const GET_MERCURE_INFO_START = 'shlink/mercure/GET_MERCURE_INFO_START';\nexport const GET_MERCURE_INFO_ERROR = 'shlink/mercure/GET_MERCURE_INFO_ERROR';\nexport const GET_MERCURE_INFO = 'shlink/mercure/GET_MERCURE_INFO';\n/* eslint-enable padding-line-between-statements */\n\nexport interface MercureInfo {\n  token?: string;\n  mercureHubUrl?: string;\n  interval?: number;\n  loading: boolean;\n  error: boolean;\n}\n\nexport type GetMercureInfoAction = Action<string> & ShlinkMercureInfo & { interval?: number };\n\nconst initialState: MercureInfo = {\n  loading: true,\n  error: false,\n};\n\nexport default buildReducer<MercureInfo, GetMercureInfoAction>({\n  [GET_MERCURE_INFO_START]: (state) => ({ ...state, loading: true, error: false }),\n  [GET_MERCURE_INFO_ERROR]: (state) => ({ ...state, loading: false, error: true }),\n  [GET_MERCURE_INFO]: (_, action) => ({ ...action, loading: false, error: false }),\n}, initialState);\n\nexport const loadMercureInfo = (buildShlinkApiClient: ShlinkApiClientBuilder) =>\n  () => async (dispatch: Dispatch, getState: GetState) => {\n    dispatch({ type: GET_MERCURE_INFO_START });\n\n    const { settings } = getState();\n    const { mercureInfo } = buildShlinkApiClient(getState);\n\n    if (!settings.realTimeUpdates.enabled) {\n      dispatch({ type: GET_MERCURE_INFO_ERROR });\n\n      return;\n    }\n\n    try {\n      const info = await mercureInfo();\n\n      dispatch<GetMercureInfoAction>({ type: GET_MERCURE_INFO, interval: settings.realTimeUpdates.interval, ...info });\n    } catch (e) {\n      dispatch({ type: GET_MERCURE_INFO_ERROR });\n    }\n  };\n","import Bottle from 'bottlejs';\nimport { loadMercureInfo } from '../reducers/mercureInfo';\n\nconst provideServices = (bottle: Bottle) => {\n  // Actions\n  bottle.serviceFactory('loadMercureInfo', loadMercureInfo, 'buildShlinkApiClient');\n};\n\nexport default provideServices;\n","import { FormGroup, Input } from 'reactstrap';\nimport classNames from 'classnames';\nimport ToggleSwitch from '../utils/ToggleSwitch';\nimport { SimpleCard } from '../utils/SimpleCard';\nimport { Settings } from './reducers/settings';\n\ninterface RealTimeUpdatesProps {\n  settings: Settings;\n  toggleRealTimeUpdates: (enabled: boolean) => void;\n  setRealTimeUpdatesInterval: (interval: number) => void;\n}\n\nconst intervalValue = (interval?: number) => !interval ? '' : `${interval}`;\n\nconst RealTimeUpdates = (\n  { settings: { realTimeUpdates }, toggleRealTimeUpdates, setRealTimeUpdatesInterval }: RealTimeUpdatesProps,\n) => (\n  <SimpleCard title=\"Real-time updates\" className=\"h-100\">\n    <FormGroup>\n      <ToggleSwitch checked={realTimeUpdates.enabled} onChange={toggleRealTimeUpdates}>\n        Enable or disable real-time updates, when using Shlink v2.2.0 or newer.\n        <small className=\"form-text text-muted\">\n          Real-time updates are currently being <b>{realTimeUpdates.enabled ? 'processed' : 'ignored'}</b>.\n        </small>\n      </ToggleSwitch>\n    </FormGroup>\n    <FormGroup className=\"mb-0\">\n      <label className={classNames({ 'text-muted': !realTimeUpdates.enabled })}>\n        Real-time updates frequency (in minutes):\n      </label>\n      <Input\n        type=\"number\"\n        min={0}\n        placeholder=\"Immediate\"\n        disabled={!realTimeUpdates.enabled}\n        value={intervalValue(realTimeUpdates.interval)}\n        onChange={({ target }) => setRealTimeUpdatesInterval(Number(target.value))}\n      />\n      {realTimeUpdates.enabled && (\n        <small className=\"form-text text-muted\">\n          {realTimeUpdates.interval !== undefined && realTimeUpdates.interval > 0 && (\n            <span>\n              Updates will be reflected in the UI every <b>{realTimeUpdates.interval}</b> minute{realTimeUpdates.interval > 1 && 's'}.\n            </span>\n          )}\n          {!realTimeUpdates.interval && 'Updates will be reflected in the UI as soon as they happen.'}\n        </small>\n      )}\n    </FormGroup>\n  </SimpleCard>\n);\n\nexport default RealTimeUpdates;\n","import { FC, ReactNode } from 'react';\nimport { Row } from 'reactstrap';\nimport NoMenuLayout from '../common/NoMenuLayout';\n\nconst SettingsSections: FC<{ items: ReactNode[][] }> = ({ items }) => (\n  <>\n    {items.map((child, index) => (\n      <Row key={index}>\n        {child.map((subChild, subIndex) => (\n          <div key={subIndex} className=\"col-lg-6 mb-3\">\n            {subChild}\n          </div>\n        ))}\n      </Row>\n    ))}\n  </>\n);\n\nconst Settings = (RealTimeUpdates: FC, ShortUrlCreation: FC, UserInterface: FC, Visits: FC) => () => (\n  <NoMenuLayout>\n    <SettingsSections\n      items={[\n        [ <UserInterface />, <Visits /> ], // eslint-disable-line react/jsx-key\n        [ <ShortUrlCreation />, <RealTimeUpdates /> ], // eslint-disable-line react/jsx-key\n      ]}\n    />\n  </NoMenuLayout>\n);\n\nexport default Settings;\n","import { Action } from 'redux';\nimport { dissoc, mergeDeepRight } from 'ramda';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { RecursivePartial } from '../../utils/utils';\nimport { Theme } from '../../utils/theme';\nimport { DateInterval } from '../../utils/dates/types';\n\nexport const SET_SETTINGS = 'shlink/realTimeUpdates/SET_SETTINGS';\n\n/**\n * Important! When adding new props in the main Settings interface or any of the nested props, they have to be set as\n * optional, as old instances of the app will load partial objects from local storage until it is saved again.\n */\n\nexport interface RealTimeUpdatesSettings {\n  enabled: boolean;\n  interval?: number;\n}\n\nexport type TagFilteringMode = 'startsWith' | 'includes';\n\nexport interface ShortUrlCreationSettings {\n  validateUrls: boolean;\n  tagFilteringMode?: TagFilteringMode;\n  forwardQuery?: boolean;\n}\n\nexport type TagsMode = 'cards' | 'list';\n\nexport interface UiSettings {\n  theme: Theme;\n  tagsMode?: TagsMode;\n}\n\nexport interface VisitsSettings {\n  defaultInterval: DateInterval;\n}\n\nexport interface Settings {\n  realTimeUpdates: RealTimeUpdatesSettings;\n  shortUrlCreation?: ShortUrlCreationSettings;\n  ui?: UiSettings;\n  visits?: VisitsSettings;\n}\n\nconst initialState: Settings = {\n  realTimeUpdates: {\n    enabled: true,\n  },\n  shortUrlCreation: {\n    validateUrls: false,\n  },\n  ui: {\n    theme: 'light',\n  },\n  visits: {\n    defaultInterval: 'last30Days',\n  },\n};\n\ntype SettingsAction = Action & Settings;\n\ntype PartialSettingsAction = Action & RecursivePartial<Settings>;\n\nexport default buildReducer<Settings, SettingsAction>({\n  [SET_SETTINGS]: (state, action) => mergeDeepRight(state, dissoc('type', action)),\n}, initialState);\n\nexport const toggleRealTimeUpdates = (enabled: boolean): PartialSettingsAction => ({\n  type: SET_SETTINGS,\n  realTimeUpdates: { enabled },\n});\n\nexport const setRealTimeUpdatesInterval = (interval: number): PartialSettingsAction => ({\n  type: SET_SETTINGS,\n  realTimeUpdates: { interval },\n});\n\nexport const setShortUrlCreationSettings = (settings: ShortUrlCreationSettings): PartialSettingsAction => ({\n  type: SET_SETTINGS,\n  shortUrlCreation: settings,\n});\n\nexport const setUiSettings = (settings: UiSettings): PartialSettingsAction => ({\n  type: SET_SETTINGS,\n  ui: settings,\n});\n\nexport const setVisitsSettings = (settings: VisitsSettings): PartialSettingsAction => ({\n  type: SET_SETTINGS,\n  visits: settings,\n});\n","import { FC, ReactNode } from 'react';\nimport { DropdownItem, FormGroup } from 'reactstrap';\nimport { SimpleCard } from '../utils/SimpleCard';\nimport ToggleSwitch from '../utils/ToggleSwitch';\nimport { DropdownBtn } from '../utils/DropdownBtn';\nimport { Settings, ShortUrlCreationSettings, TagFilteringMode } from './reducers/settings';\n\ninterface ShortUrlCreationProps {\n  settings: Settings;\n  setShortUrlCreationSettings: (settings: ShortUrlCreationSettings) => void;\n}\n\nconst tagFilteringModeText = (tagFilteringMode: TagFilteringMode | undefined): string =>\n  tagFilteringMode === 'includes' ? 'Suggest tags including input' : 'Suggest tags starting with input';\nconst tagFilteringModeHint = (tagFilteringMode: TagFilteringMode | undefined): ReactNode =>\n  tagFilteringMode === 'includes'\n    ? <>The list of suggested tags will contain those <b>including</b> provided input.</>\n    : <>The list of suggested tags will contain those <b>starting with</b> provided input.</>;\n\nexport const ShortUrlCreation: FC<ShortUrlCreationProps> = ({ settings, setShortUrlCreationSettings }) => {\n  const shortUrlCreation: ShortUrlCreationSettings = settings.shortUrlCreation ?? { validateUrls: false };\n  const changeTagsFilteringMode = (tagFilteringMode: TagFilteringMode) => () => setShortUrlCreationSettings(\n    { ...shortUrlCreation ?? { validateUrls: false }, tagFilteringMode },\n  );\n\n  return (\n    <SimpleCard title=\"Short URLs form\" className=\"h-100\">\n      <FormGroup>\n        <ToggleSwitch\n          checked={shortUrlCreation.validateUrls ?? false}\n          onChange={(validateUrls) => setShortUrlCreationSettings({ ...shortUrlCreation, validateUrls })}\n        >\n          Request validation on long URLs when creating new short URLs.\n          <small className=\"form-text text-muted\">\n            The initial state of the <b>Validate URL</b> checkbox will\n            be <b>{shortUrlCreation.validateUrls ? 'checked' : 'unchecked'}</b>.\n          </small>\n        </ToggleSwitch>\n      </FormGroup>\n      <FormGroup>\n        <ToggleSwitch\n          checked={shortUrlCreation.forwardQuery ?? true}\n          onChange={(forwardQuery) => setShortUrlCreationSettings({ ...shortUrlCreation, forwardQuery })}\n        >\n          Make all new short URLs forward their query params to the long URL.\n          <small className=\"form-text text-muted\">\n            The initial state of the <b>Forward query params on redirect</b> checkbox will\n            be <b>{shortUrlCreation.forwardQuery ?? true ? 'checked' : 'unchecked'}</b>.\n          </small>\n        </ToggleSwitch>\n      </FormGroup>\n      <FormGroup className=\"mb-0\">\n        <label>Tag suggestions search mode:</label>\n        <DropdownBtn text={tagFilteringModeText(shortUrlCreation.tagFilteringMode)}>\n          <DropdownItem\n            active={!shortUrlCreation.tagFilteringMode || shortUrlCreation.tagFilteringMode === 'startsWith'}\n            onClick={changeTagsFilteringMode('startsWith')}\n          >\n            {tagFilteringModeText('startsWith')}\n          </DropdownItem>\n          <DropdownItem\n            active={shortUrlCreation.tagFilteringMode === 'includes'}\n            onClick={changeTagsFilteringMode('includes')}\n          >\n            {tagFilteringModeText('includes')}\n          </DropdownItem>\n        </DropdownBtn>\n        <small className=\"form-text text-muted\">\n          {tagFilteringModeHint(shortUrlCreation.tagFilteringMode)}\n        </small>\n      </FormGroup>\n    </SimpleCard>\n  );\n};\n","import { FC } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSun, faMoon } from '@fortawesome/free-solid-svg-icons';\nimport { FormGroup } from 'reactstrap';\nimport { SimpleCard } from '../utils/SimpleCard';\nimport ToggleSwitch from '../utils/ToggleSwitch';\nimport { changeThemeInMarkup, Theme } from '../utils/theme';\nimport { TagsModeDropdown } from '../tags/TagsModeDropdown';\nimport { capitalize } from '../utils/utils';\nimport { Settings, UiSettings } from './reducers/settings';\nimport './UserInterface.scss';\n\ninterface UserInterfaceProps {\n  settings: Settings;\n  setUiSettings: (settings: UiSettings) => void;\n}\n\nexport const UserInterface: FC<UserInterfaceProps> = ({ settings: { ui }, setUiSettings }) => (\n  <SimpleCard title=\"User interface\" className=\"h-100\">\n    <FormGroup>\n      <FontAwesomeIcon icon={ui?.theme === 'dark' ? faMoon : faSun} className=\"user-interface__theme-icon\" />\n      <ToggleSwitch\n        checked={ui?.theme === 'dark'}\n        onChange={(useDarkTheme) => {\n          const theme: Theme = useDarkTheme ? 'dark' : 'light';\n\n          setUiSettings({ ...ui, theme });\n          changeThemeInMarkup(theme);\n        }}\n      >\n        Use dark theme.\n      </ToggleSwitch>\n    </FormGroup>\n    <FormGroup className=\"mb-0\">\n      <label>Default display mode when managing tags:</label>\n      <TagsModeDropdown\n        mode={ui?.tagsMode ?? 'cards'}\n        renderTitle={(tagsMode) => capitalize(tagsMode)}\n        onChange={(tagsMode) => setUiSettings({ ...ui ?? { theme: 'light' }, tagsMode })}\n      />\n      <small className=\"form-text text-muted\">Tags will be displayed as <b>{ui?.tagsMode ?? 'cards'}</b>.</small>\n    </FormGroup>\n  </SimpleCard>\n);\n","import { FC } from 'react';\nimport { DropdownBtn } from '../DropdownBtn';\nimport { rangeOrIntervalToString } from './types';\nimport { DateIntervalDropdownItems, DateIntervalDropdownProps } from './DateIntervalDropdownItems';\n\nexport const DateIntervalSelector: FC<DateIntervalDropdownProps> = ({ onChange, active, allText }) => (\n  <DropdownBtn text={rangeOrIntervalToString(active) ?? allText}>\n    <DateIntervalDropdownItems allText={allText} active={active} onChange={onChange} />\n  </DropdownBtn>\n);\n","import { FormGroup } from 'reactstrap';\nimport { FC } from 'react';\nimport { SimpleCard } from '../utils/SimpleCard';\nimport { DateIntervalSelector } from '../utils/dates/DateIntervalSelector';\nimport { Settings, VisitsSettings } from './reducers/settings';\n\ninterface VisitsProps {\n  settings: Settings;\n  setVisitsSettings: (settings: VisitsSettings) => void;\n}\n\nexport const Visits: FC<VisitsProps> = ({ settings, setVisitsSettings }) => (\n  <SimpleCard title=\"Visits\" className=\"h-100\">\n    <FormGroup className=\"mb-0\">\n      <label>Default interval to load on visits sections:</label>\n      <DateIntervalSelector\n        allText=\"All visits\"\n        active={settings.visits?.defaultInterval ?? 'last30Days'}\n        onChange={(defaultInterval) => setVisitsSettings({ defaultInterval })}\n      />\n    </FormGroup>\n  </SimpleCard>\n);\n","import Bottle from 'bottlejs';\nimport RealTimeUpdates from '../RealTimeUpdates';\nimport Settings from '../Settings';\nimport {\n  setRealTimeUpdatesInterval,\n  setShortUrlCreationSettings,\n  setUiSettings,\n  setVisitsSettings,\n  toggleRealTimeUpdates,\n} from '../reducers/settings';\nimport { ConnectDecorator } from '../../container/types';\nimport { withoutSelectedServer } from '../../servers/helpers/withoutSelectedServer';\nimport { ShortUrlCreation } from '../ShortUrlCreation';\nimport { UserInterface } from '../UserInterface';\nimport { Visits } from '../Visits';\n\nconst provideServices = (bottle: Bottle, connect: ConnectDecorator) => {\n  // Components\n  bottle.serviceFactory('Settings', Settings, 'RealTimeUpdates', 'ShortUrlCreation', 'UserInterface', 'Visits');\n  bottle.decorator('Settings', withoutSelectedServer);\n  bottle.decorator('Settings', connect(null, [ 'resetSelectedServer' ]));\n\n  bottle.serviceFactory('RealTimeUpdates', () => RealTimeUpdates);\n  bottle.decorator(\n    'RealTimeUpdates',\n    connect([ 'settings' ], [ 'toggleRealTimeUpdates', 'setRealTimeUpdatesInterval' ]),\n  );\n\n  bottle.serviceFactory('ShortUrlCreation', () => ShortUrlCreation);\n  bottle.decorator('ShortUrlCreation', connect([ 'settings' ], [ 'setShortUrlCreationSettings' ]));\n\n  bottle.serviceFactory('UserInterface', () => UserInterface);\n  bottle.decorator('UserInterface', connect([ 'settings' ], [ 'setUiSettings' ]));\n\n  bottle.serviceFactory('Visits', () => Visits);\n  bottle.decorator('Visits', connect([ 'settings' ], [ 'setVisitsSettings' ]));\n\n  // Actions\n  bottle.serviceFactory('toggleRealTimeUpdates', () => toggleRealTimeUpdates);\n  bottle.serviceFactory('setRealTimeUpdatesInterval', () => setRealTimeUpdatesInterval);\n  bottle.serviceFactory('setShortUrlCreationSettings', () => setShortUrlCreationSettings);\n  bottle.serviceFactory('setUiSettings', () => setUiSettings);\n  bottle.serviceFactory('setVisitsSettings', () => setVisitsSettings);\n};\n\nexport default provideServices;\n","import { Action, Dispatch } from 'redux';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { ShlinkDomainRedirects } from '../../api/types';\nimport { GetState } from '../../container/types';\nimport { ApiErrorAction } from '../../api/types/actions';\nimport { parseApiError } from '../../api/utils';\n\n/* eslint-disable padding-line-between-statements */\nexport const EDIT_DOMAIN_REDIRECTS_START = 'shlink/domainRedirects/EDIT_DOMAIN_REDIRECTS_START';\nexport const EDIT_DOMAIN_REDIRECTS_ERROR = 'shlink/domainRedirects/EDIT_DOMAIN_REDIRECTS_ERROR';\nexport const EDIT_DOMAIN_REDIRECTS = 'shlink/domainRedirects/EDIT_DOMAIN_REDIRECTS';\n/* eslint-enable padding-line-between-statements */\n\nexport interface EditDomainRedirectsAction extends Action<string> {\n  domain: string;\n  redirects: ShlinkDomainRedirects;\n}\n\nexport const editDomainRedirects = (buildShlinkApiClient: ShlinkApiClientBuilder) => (\n  domain: string,\n  domainRedirects: Partial<ShlinkDomainRedirects>,\n) => async (dispatch: Dispatch, getState: GetState) => {\n  dispatch({ type: EDIT_DOMAIN_REDIRECTS_START });\n  const { editDomainRedirects } = buildShlinkApiClient(getState);\n\n  try {\n    const redirects = await editDomainRedirects({ domain, ...domainRedirects });\n\n    dispatch<EditDomainRedirectsAction>({ type: EDIT_DOMAIN_REDIRECTS, domain, redirects });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: EDIT_DOMAIN_REDIRECTS_ERROR, errorData: parseApiError(e) });\n  }\n};\n","import { Action, Dispatch } from 'redux';\nimport { ProblemDetailsError, ShlinkDomain, ShlinkDomainRedirects } from '../../api/types';\nimport { buildReducer } from '../../utils/helpers/redux';\nimport { ShlinkApiClientBuilder } from '../../api/services/ShlinkApiClientBuilder';\nimport { GetState } from '../../container/types';\nimport { parseApiError } from '../../api/utils';\nimport { ApiErrorAction } from '../../api/types/actions';\nimport { EDIT_DOMAIN_REDIRECTS, EditDomainRedirectsAction } from './domainRedirects';\n\n/* eslint-disable padding-line-between-statements */\nexport const LIST_DOMAINS_START = 'shlink/domainsList/LIST_DOMAINS_START';\nexport const LIST_DOMAINS_ERROR = 'shlink/domainsList/LIST_DOMAINS_ERROR';\nexport const LIST_DOMAINS = 'shlink/domainsList/LIST_DOMAINS';\nexport const FILTER_DOMAINS = 'shlink/domainsList/FILTER_DOMAINS';\n/* eslint-enable padding-line-between-statements */\n\nexport interface DomainsList {\n  domains: ShlinkDomain[];\n  filteredDomains: ShlinkDomain[];\n  loading: boolean;\n  error: boolean;\n  errorData?: ProblemDetailsError;\n}\n\nexport interface ListDomainsAction extends Action<string> {\n  domains: ShlinkDomain[];\n}\n\ninterface FilterDomainsAction extends Action<string> {\n  searchTerm: string;\n}\n\nconst initialState: DomainsList = {\n  domains: [],\n  filteredDomains: [],\n  loading: false,\n  error: false,\n};\n\nexport type DomainsCombinedAction = ListDomainsAction\n& ApiErrorAction\n& FilterDomainsAction\n& EditDomainRedirectsAction;\n\nexport const replaceRedirectsOnDomain = (domain: string, redirects: ShlinkDomainRedirects) =>\n  (d: ShlinkDomain): ShlinkDomain => d.domain !== domain ? d : { ...d, redirects };\n\nexport default buildReducer<DomainsList, DomainsCombinedAction>({\n  [LIST_DOMAINS_START]: () => ({ ...initialState, loading: true }),\n  [LIST_DOMAINS_ERROR]: ({ errorData }) => ({ ...initialState, error: true, errorData }),\n  [LIST_DOMAINS]: (_, { domains }) => ({ ...initialState, domains, filteredDomains: domains }),\n  [FILTER_DOMAINS]: (state, { searchTerm }) => ({\n    ...state,\n    filteredDomains: state.domains.filter(({ domain }) => domain.toLowerCase().match(searchTerm)),\n  }),\n  [EDIT_DOMAIN_REDIRECTS]: (state, { domain, redirects }) => ({\n    ...state,\n    domains: state.domains.map(replaceRedirectsOnDomain(domain, redirects)),\n    filteredDomains: state.filteredDomains.map(replaceRedirectsOnDomain(domain, redirects)),\n  }),\n}, initialState);\n\nexport const listDomains = (buildShlinkApiClient: ShlinkApiClientBuilder) => () => async (\n  dispatch: Dispatch,\n  getState: GetState,\n) => {\n  dispatch({ type: LIST_DOMAINS_START });\n  const { listDomains } = buildShlinkApiClient(getState);\n\n  try {\n    const domains = await listDomains();\n\n    dispatch<ListDomainsAction>({ type: LIST_DOMAINS, domains });\n  } catch (e) {\n    dispatch<ApiErrorAction>({ type: LIST_DOMAINS_ERROR, errorData: parseApiError(e) });\n  }\n};\n\nexport const filterDomains = (searchTerm: string): FilterDomainsAction => ({ type: FILTER_DOMAINS, searchTerm });\n","import { useEffect } from 'react';\nimport { Button, DropdownItem, Input, InputGroup, InputGroupAddon, UncontrolledTooltip } from 'reactstrap';\nimport { InputProps } from 'reactstrap/lib/Input';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faUndo } from '@fortawesome/free-solid-svg-icons';\nimport { isEmpty, pipe } from 'ramda';\nimport { DropdownBtn } from '../utils/DropdownBtn';\nimport { useToggle } from '../utils/helpers/hooks';\nimport { DomainsList } from './reducers/domainsList';\nimport './DomainSelector.scss';\n\nexport interface DomainSelectorProps extends Omit<InputProps, 'onChange'> {\n  value?: string;\n  onChange: (domain: string) => void;\n}\n\ninterface DomainSelectorConnectProps extends DomainSelectorProps {\n  listDomains: Function;\n  domainsList: DomainsList;\n}\n\nexport const DomainSelector = ({ listDomains, value, domainsList, onChange }: DomainSelectorConnectProps) => {\n  const [ inputDisplayed,, showInput, hideInput ] = useToggle();\n  const { domains } = domainsList;\n  const valueIsEmpty = isEmpty(value);\n  const unselectDomain = () => onChange('');\n\n  useEffect(() => {\n    listDomains();\n  }, []);\n\n  return inputDisplayed ? (\n    <InputGroup>\n      <Input\n        value={value}\n        placeholder=\"Domain\"\n        onChange={(e) => onChange(e.target.value)}\n      />\n      <InputGroupAddon addonType=\"append\">\n        <Button\n          id=\"backToDropdown\"\n          outline\n          type=\"button\"\n          className=\"domains-dropdown__back-btn\"\n          onClick={pipe(unselectDomain, hideInput)}\n        >\n          <FontAwesomeIcon icon={faUndo} />\n        </Button>\n        <UncontrolledTooltip target=\"backToDropdown\" placement=\"left\" trigger=\"hover\">\n          Existing domains\n        </UncontrolledTooltip>\n      </InputGroupAddon>\n    </InputGroup>\n  ) : (\n    <DropdownBtn\n      text={valueIsEmpty ? 'Domain' : `Domain: ${value}`}\n      className={!valueIsEmpty ? 'domains-dropdown__toggle-btn--active' : 'domains-dropdown__toggle-btn'}\n    >\n      {domains.map(({ domain, isDefault }) => (\n        <DropdownItem\n          key={domain}\n          active={value === domain || isDefault && valueIsEmpty}\n          onClick={() => onChange(domain)}\n        >\n          {domain}\n          {isDefault && <span className=\"float-right text-muted\">default</span>}\n        </DropdownItem>\n      ))}\n      <DropdownItem divider />\n      <DropdownItem onClick={pipe(unselectDomain, showInput)}>\n        <i>New domain</i>\n      </DropdownItem>\n    </DropdownBtn>\n  );\n};\n","import { FC, useState } from 'react';\nimport { Button, Modal, ModalBody, ModalFooter, ModalHeader } from 'reactstrap';\nimport { ShlinkDomain, ShlinkDomainRedirects } from '../../api/types';\nimport { FormGroupContainer, FormGroupContainerProps } from '../../utils/FormGroupContainer';\nimport { handleEventPreventingDefault, nonEmptyValueOrNull } from '../../utils/utils';\nimport { InfoTooltip } from '../../utils/InfoTooltip';\n\ninterface EditDomainRedirectsModalProps {\n  domain: ShlinkDomain;\n  isOpen: boolean;\n  toggle: () => void;\n  editDomainRedirects: (domain: string, redirects: Partial<ShlinkDomainRedirects>) => Promise<void>;\n}\n\nconst FormGroup: FC<FormGroupContainerProps & { isLast?: boolean }> = ({ isLast, ...rest }) => (\n  <FormGroupContainer\n    {...rest}\n    required={false}\n    type=\"url\"\n    placeholder=\"No redirect\"\n    className={isLast ? 'mb-0' : ''}\n  />\n);\n\nexport const EditDomainRedirectsModal: FC<EditDomainRedirectsModalProps> = (\n  { isOpen, toggle, domain, editDomainRedirects },\n) => {\n  const [ baseUrlRedirect, setBaseUrlRedirect ] = useState(domain.redirects?.baseUrlRedirect ?? '');\n  const [ regular404Redirect, setRegular404Redirect ] = useState(domain.redirects?.regular404Redirect ?? '');\n  const [ invalidShortUrlRedirect, setInvalidShortUrlRedirect ] = useState(\n    domain.redirects?.invalidShortUrlRedirect ?? '',\n  );\n  const handleSubmit = handleEventPreventingDefault(async () => editDomainRedirects(domain.domain, {\n    baseUrlRedirect: nonEmptyValueOrNull(baseUrlRedirect),\n    regular404Redirect: nonEmptyValueOrNull(regular404Redirect),\n    invalidShortUrlRedirect: nonEmptyValueOrNull(invalidShortUrlRedirect),\n  }).then(toggle));\n\n  return (\n    <Modal isOpen={isOpen} toggle={toggle} centered>\n      <form onSubmit={handleSubmit}>\n        <ModalHeader toggle={toggle}>Edit redirects for <b>{domain.domain}</b></ModalHeader>\n        <ModalBody>\n          <FormGroup value={baseUrlRedirect} onChange={setBaseUrlRedirect}>\n            <InfoTooltip className=\"mr-2\" placement=\"bottom\">\n              Visitors accessing the base url, as in <b>https://{domain.domain}/</b>, will be redirected to this URL.\n            </InfoTooltip>\n            Base URL\n          </FormGroup>\n          <FormGroup value={regular404Redirect} onChange={setRegular404Redirect}>\n            <InfoTooltip className=\"mr-2\" placement=\"bottom\">\n              Visitors accessing a url not matching a short URL pattern, as in <b>https://{domain.domain}/???/[...]</b>,\n              will be redirected to this URL.\n            </InfoTooltip>\n            Regular 404\n          </FormGroup>\n          <FormGroup value={invalidShortUrlRedirect} isLast onChange={setInvalidShortUrlRedirect}>\n            <InfoTooltip className=\"mr-2\" placement=\"bottom\">\n              Visitors accessing a url matching a short URL pattern, but not matching an existing short code, will be\n              redirected to this URL.\n            </InfoTooltip>\n            Invalid short URL\n          </FormGroup>\n        </ModalBody>\n        <ModalFooter>\n          <Button color=\"link\" type=\"button\" onClick={toggle}>Cancel</Button>\n          <Button color=\"primary\">Save</Button>\n        </ModalFooter>\n      </form>\n    </Modal>\n  );\n};\n","import { FC } from 'react';\nimport { Button, UncontrolledTooltip } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {\n  faBan as forbiddenIcon,\n  faCheck as defaultDomainIcon,\n  faEdit as editIcon,\n} from '@fortawesome/free-solid-svg-icons';\nimport { ShlinkDomain, ShlinkDomainRedirects } from '../api/types';\nimport { useToggle } from '../utils/helpers/hooks';\nimport { OptionalString } from '../utils/utils';\nimport { EditDomainRedirectsModal } from './helpers/EditDomainRedirectsModal';\n\ninterface DomainRowProps {\n  domain: ShlinkDomain;\n  defaultRedirects?: ShlinkDomainRedirects;\n  editDomainRedirects: (domain: string, redirects: Partial<ShlinkDomainRedirects>) => Promise<void>;\n}\n\nconst Nr: FC<{ fallback: OptionalString }> = ({ fallback }) => (\n  <span className=\"text-muted\">\n    {!fallback && <small>No redirect</small>}\n    {fallback && <>{fallback} <small>(as fallback)</small></>}\n  </span>\n);\nconst DefaultDomain: FC = () => (\n  <>\n    <FontAwesomeIcon icon={defaultDomainIcon} className=\"text-primary\" id=\"defaultDomainIcon\" />\n    <UncontrolledTooltip target=\"defaultDomainIcon\" placement=\"right\">Default domain</UncontrolledTooltip>\n  </>\n);\n\nexport const DomainRow: FC<DomainRowProps> = ({ domain, editDomainRedirects, defaultRedirects }) => {\n  const [ isOpen, toggle ] = useToggle();\n  const { domain: authority, isDefault, redirects } = domain;\n  const domainId = `domainEdit${authority.replace(/\\./g, '')}`;\n\n  return (\n    <tr className=\"responsive-table__row\">\n      <td className=\"responsive-table__cell\" data-th=\"Is default domain\">{isDefault ? <DefaultDomain /> : ''}</td>\n      <th className=\"responsive-table__cell\" data-th=\"Domain\">{authority}</th>\n      <td className=\"responsive-table__cell\" data-th=\"Base path redirect\">\n        {redirects?.baseUrlRedirect ?? <Nr fallback={defaultRedirects?.baseUrlRedirect} />}\n      </td>\n      <td className=\"responsive-table__cell\" data-th=\"Regular 404 redirect\">\n        {redirects?.regular404Redirect ?? <Nr fallback={defaultRedirects?.regular404Redirect} />}\n      </td>\n      <td className=\"responsive-table__cell\" data-th=\"Invalid short URL redirect\">\n        {redirects?.invalidShortUrlRedirect ?? <Nr fallback={defaultRedirects?.invalidShortUrlRedirect} />}\n      </td>\n      <td className=\"responsive-table__cell text-right\">\n        <span id={domainId}>\n          <Button outline size=\"sm\" disabled={isDefault} onClick={isDefault ? undefined : toggle}>\n            <FontAwesomeIcon icon={isDefault ? forbiddenIcon : editIcon} />\n          </Button>\n        </span>\n        {isDefault && (\n          <UncontrolledTooltip target={domainId} placement=\"left\">\n            Redirects for default domain cannot be edited here.\n            <br />\n            Use config options or env vars directly on the server.\n          </UncontrolledTooltip>\n        )}\n      </td>\n      <EditDomainRedirectsModal\n        domain={domain}\n        isOpen={isOpen}\n        toggle={toggle}\n        editDomainRedirects={editDomainRedirects}\n      />\n    </tr>\n  );\n};\n","import { FC, useEffect } from 'react';\nimport Message from '../utils/Message';\nimport { Result } from '../utils/Result';\nimport { ShlinkApiError } from '../api/ShlinkApiError';\nimport { SimpleCard } from '../utils/SimpleCard';\nimport SearchField from '../utils/SearchField';\nimport { ShlinkDomainRedirects } from '../api/types';\nimport { DomainsList } from './reducers/domainsList';\nimport { DomainRow } from './DomainRow';\n\ninterface ManageDomainsProps {\n  listDomains: Function;\n  filterDomains: (searchTerm: string) => void;\n  editDomainRedirects: (domain: string, redirects: Partial<ShlinkDomainRedirects>) => Promise<void>;\n  domainsList: DomainsList;\n}\n\nconst headers = [ '', 'Domain', 'Base path redirect', 'Regular 404 redirect', 'Invalid short URL redirect', '' ];\n\nexport const ManageDomains: FC<ManageDomainsProps> = (\n  { listDomains, domainsList, filterDomains, editDomainRedirects },\n) => {\n  const { filteredDomains: domains, loading, error, errorData } = domainsList;\n  const defaultRedirects = domains.find(({ isDefault }) => isDefault)?.redirects;\n\n  useEffect(() => {\n    listDomains();\n  }, []);\n\n  if (loading) {\n    return <Message loading />;\n  }\n\n  const renderContent = () => {\n    if (error) {\n      return (\n        <Result type=\"error\">\n          <ShlinkApiError errorData={errorData} fallbackMessage=\"Error loading domains :(\" />\n        </Result>\n      );\n    }\n\n    return (\n      <SimpleCard>\n        <table className=\"table table-hover mb-0\">\n          <thead className=\"responsive-table__header\">\n            <tr>{headers.map((column, index) => <th key={index}>{column}</th>)}</tr>\n          </thead>\n          <tbody>\n            {domains.length < 1 && <tr><td colSpan={headers.length} className=\"text-center\">No results found</td></tr>}\n            {domains.map((domain) => (\n              <DomainRow\n                key={domain.domain}\n                domain={domain}\n                editDomainRedirects={editDomainRedirects}\n                defaultRedirects={defaultRedirects}\n              />\n            ))}\n          </tbody>\n        </table>\n      </SimpleCard>\n    );\n  };\n\n  return (\n    <>\n      <SearchField className=\"mb-3\" onChange={filterDomains} />\n      {renderContent()}\n    </>\n  );\n};\n","import Bottle from 'bottlejs';\nimport { ConnectDecorator } from '../../container/types';\nimport { filterDomains, listDomains } from '../reducers/domainsList';\nimport { DomainSelector } from '../DomainSelector';\nimport { ManageDomains } from '../ManageDomains';\nimport { editDomainRedirects } from '../reducers/domainRedirects';\n\nconst provideServices = (bottle: Bottle, connect: ConnectDecorator) => {\n  // Components\n  bottle.serviceFactory('DomainSelector', () => DomainSelector);\n  bottle.decorator('DomainSelector', connect([ 'domainsList' ], [ 'listDomains' ]));\n\n  bottle.serviceFactory('ManageDomains', () => ManageDomains);\n  bottle.decorator('ManageDomains', connect(\n    [ 'domainsList' ],\n    [ 'listDomains', 'filterDomains', 'editDomainRedirects' ],\n  ));\n\n  // Actions\n  bottle.serviceFactory('listDomains', listDomains, 'buildShlinkApiClient');\n  bottle.serviceFactory('filterDomains', () => filterDomains);\n  bottle.serviceFactory('editDomainRedirects', editDomainRedirects, 'buildShlinkApiClient');\n};\n\nexport default provideServices;\n","import { Action } from 'redux';\nimport { buildActionCreator, buildReducer } from '../../utils/helpers/redux';\n\n/* eslint-disable padding-line-between-statements */\nexport const APP_UPDATE_AVAILABLE = 'shlink/appUpdates/APP_UPDATE_AVAILABLE';\nexport const RESET_APP_UPDATE = 'shlink/appUpdates/RESET_APP_UPDATE';\n/* eslint-enable padding-line-between-statements */\n\nconst initialState = false;\n\nexport default buildReducer<boolean, Action<string>>({\n  [APP_UPDATE_AVAILABLE]: () => true,\n  [RESET_APP_UPDATE]: () => false,\n}, initialState);\n\nexport const appUpdateAvailable = buildActionCreator(APP_UPDATE_AVAILABLE);\n\nexport const resetAppUpdate = buildActionCreator(RESET_APP_UPDATE);\n","import { FC, MouseEventHandler } from 'react';\nimport { Alert, Button } from 'reactstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSyncAlt as reloadIcon } from '@fortawesome/free-solid-svg-icons';\nimport { SimpleCard } from '../utils/SimpleCard';\nimport { useToggle } from '../utils/helpers/hooks';\nimport './AppUpdateBanner.scss';\n\ninterface AppUpdateBannerProps {\n  isOpen: boolean;\n  toggle: MouseEventHandler<any>;\n  forceUpdate: Function;\n}\n\nexport const AppUpdateBanner: FC<AppUpdateBannerProps> = ({ isOpen, toggle, forceUpdate }) => {\n  const [ isUpdating,, setUpdating ] = useToggle();\n  const update = () => {\n    setUpdating();\n    forceUpdate();\n  };\n\n  return (\n    <Alert className=\"app-update-banner\" isOpen={isOpen} toggle={toggle} tag={SimpleCard} color=\"secondary\">\n      <h4 className=\"mb-4\">This app has just been updated!</h4>\n      <p className=\"mb-0\">\n        Restart it to enjoy the new features.\n        <Button disabled={isUpdating} className=\"ml-2\" color=\"secondary\" size=\"sm\" onClick={update}>\n          {!isUpdating && <>Restart now <FontAwesomeIcon icon={reloadIcon} className=\"ml-1\" /></>}\n          {isUpdating && <>Restarting...</>}\n        </Button>\n      </p>\n    </Alert>\n  );\n};\n","export const forceUpdate = async () => {\n  const registrations = await navigator.serviceWorker?.getRegistrations() ?? [];\n\n  for (const registration of registrations) {\n    const { waiting } = registration;\n\n    waiting?.addEventListener('statechange', (event) => {\n      if ((event.target as any)?.state === 'activated') {\n        window.location.reload();\n      }\n    });\n\n    // The logic that makes skipWaiting to be called when this message is posted is in service-worker.ts\n    waiting?.postMessage({ type: 'SKIP_WAITING' });\n  }\n};\n","import { useEffect, FC } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport NotFound from '../common/NotFound';\nimport { ServersMap } from '../servers/data';\nimport { Settings } from '../settings/reducers/settings';\nimport { changeThemeInMarkup } from '../utils/theme';\nimport { AppUpdateBanner } from '../common/AppUpdateBanner';\nimport { forceUpdate } from '../utils/helpers/sw';\nimport './App.scss';\n\ninterface AppProps {\n  fetchServers: () => void;\n  servers: ServersMap;\n  settings: Settings;\n  resetAppUpdate: () => void;\n  appUpdated: boolean;\n}\n\nconst App = (\n  MainHeader: FC,\n  Home: FC,\n  MenuLayout: FC,\n  CreateServer: FC,\n  EditServer: FC,\n  Settings: FC,\n  ManageServers: FC,\n  ShlinkVersionsContainer: FC,\n) => ({ fetchServers, servers, settings, appUpdated, resetAppUpdate }: AppProps) => {\n  useEffect(() => {\n    // On first load, try to fetch the remote servers if the list is empty\n    if (Object.keys(servers).length === 0) {\n      fetchServers();\n    }\n\n    changeThemeInMarkup(settings.ui?.theme ?? 'light');\n  }, []);\n\n  return (\n    <div className=\"container-fluid app-container\">\n      <MainHeader />\n\n      <div className=\"app\">\n        <div className=\"shlink-wrapper\">\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route exact path=\"/settings\" component={Settings} />\n            <Route exact path=\"/manage-servers\" component={ManageServers} />\n            <Route exact path=\"/server/create\" component={CreateServer} />\n            <Route exact path=\"/server/:serverId/edit\" component={EditServer} />\n            <Route path=\"/server/:serverId\" component={MenuLayout} />\n            <Route component={NotFound} />\n          </Switch>\n        </div>\n\n        <div className=\"shlink-footer\">\n          <ShlinkVersionsContainer />\n        </div>\n      </div>\n\n      <AppUpdateBanner isOpen={appUpdated} toggle={resetAppUpdate} forceUpdate={forceUpdate} />\n    </div>\n  );\n};\n\nexport default App;\n","import Bottle from 'bottlejs';\nimport { appUpdateAvailable, resetAppUpdate } from '../reducers/appUpdates';\nimport App from '../App';\nimport { ConnectDecorator } from '../../container/types';\n\nconst provideServices = (bottle: Bottle, connect: ConnectDecorator) => {\n  // Components\n  bottle.serviceFactory(\n    'App',\n    App,\n    'MainHeader',\n    'Home',\n    'MenuLayout',\n    'CreateServer',\n    'EditServer',\n    'Settings',\n    'ManageServers',\n    'ShlinkVersionsContainer',\n  );\n  bottle.decorator('App', connect([ 'servers', 'settings', 'appUpdated' ], [ 'fetchServers', 'resetAppUpdate' ]));\n\n  // Actions\n  bottle.serviceFactory('appUpdateAvailable', () => appUpdateAvailable);\n  bottle.serviceFactory('resetAppUpdate', () => resetAppUpdate);\n};\n\nexport default provideServices;\n","import Bottle, { IContainer } from 'bottlejs';\nimport { withRouter } from 'react-router-dom';\nimport { connect as reduxConnect } from 'react-redux';\nimport { pick } from 'ramda';\nimport provideApiServices from '../api/services/provideServices';\nimport provideCommonServices from '../common/services/provideServices';\nimport provideShortUrlsServices from '../short-urls/services/provideServices';\nimport provideServersServices from '../servers/services/provideServices';\nimport provideVisitsServices from '../visits/services/provideServices';\nimport provideTagsServices from '../tags/services/provideServices';\nimport provideUtilsServices from '../utils/services/provideServices';\nimport provideMercureServices from '../mercure/services/provideServices';\nimport provideSettingsServices from '../settings/services/provideServices';\nimport provideDomainsServices from '../domains/services/provideServices';\nimport provideAppServices from '../app/services/provideServices';\nimport { ConnectDecorator } from './types';\n\ntype LazyActionMap = Record<string, Function>;\n\nconst bottle = new Bottle();\nconst { container } = bottle;\n\nconst lazyService = <T extends Function, K>(container: IContainer, serviceName: string) =>\n  (...args: any[]) => (container[serviceName] as T)(...args) as K;\nconst mapActionService = (map: LazyActionMap, actionName: string): LazyActionMap => ({\n  ...map,\n  // Wrap actual action service in a function so that it is lazily created the first time it is called\n  [actionName]: lazyService(container, actionName),\n});\nconst connect: ConnectDecorator = (propsFromState: string[] | null, actionServiceNames: string[] = []) =>\n  reduxConnect(\n    propsFromState ? pick(propsFromState) : null,\n    actionServiceNames.reduce(mapActionService, {}),\n  );\n\nprovideAppServices(bottle, connect);\nprovideCommonServices(bottle, connect, withRouter);\nprovideApiServices(bottle);\nprovideShortUrlsServices(bottle, connect);\nprovideServersServices(bottle, connect, withRouter);\nprovideTagsServices(bottle, connect);\nprovideVisitsServices(bottle, connect);\nprovideUtilsServices(bottle);\nprovideMercureServices(bottle);\nprovideSettingsServices(bottle, connect);\nprovideDomainsServices(bottle, connect);\n\nexport default container;\n","import { combineReducers } from 'redux';\nimport serversReducer from '../servers/reducers/servers';\nimport selectedServerReducer from '../servers/reducers/selectedServer';\nimport shortUrlsListReducer from '../short-urls/reducers/shortUrlsList';\nimport shortUrlsListParamsReducer from '../short-urls/reducers/shortUrlsListParams';\nimport shortUrlCreationReducer from '../short-urls/reducers/shortUrlCreation';\nimport shortUrlDeletionReducer from '../short-urls/reducers/shortUrlDeletion';\nimport shortUrlEditionReducer from '../short-urls/reducers/shortUrlEdition';\nimport shortUrlVisitsReducer from '../visits/reducers/shortUrlVisits';\nimport tagVisitsReducer from '../visits/reducers/tagVisits';\nimport orphanVisitsReducer from '../visits/reducers/orphanVisits';\nimport shortUrlDetailReducer from '../short-urls/reducers/shortUrlDetail';\nimport tagsListReducer from '../tags/reducers/tagsList';\nimport tagDeleteReducer from '../tags/reducers/tagDelete';\nimport tagEditReducer from '../tags/reducers/tagEdit';\nimport mercureInfoReducer from '../mercure/reducers/mercureInfo';\nimport settingsReducer from '../settings/reducers/settings';\nimport domainsListReducer from '../domains/reducers/domainsList';\nimport visitsOverviewReducer from '../visits/reducers/visitsOverview';\nimport appUpdatesReducer from '../app/reducers/appUpdates';\nimport { ShlinkState } from '../container/types';\n\nexport default combineReducers<ShlinkState>({\n  servers: serversReducer,\n  selectedServer: selectedServerReducer,\n  shortUrlsList: shortUrlsListReducer,\n  shortUrlsListParams: shortUrlsListParamsReducer,\n  shortUrlCreationResult: shortUrlCreationReducer,\n  shortUrlDeletion: shortUrlDeletionReducer,\n  shortUrlEdition: shortUrlEditionReducer,\n  shortUrlVisits: shortUrlVisitsReducer,\n  tagVisits: tagVisitsReducer,\n  orphanVisits: orphanVisitsReducer,\n  shortUrlDetail: shortUrlDetailReducer,\n  tagsList: tagsListReducer,\n  tagDelete: tagDeleteReducer,\n  tagEdit: tagEditReducer,\n  mercureInfo: mercureInfoReducer,\n  settings: settingsReducer,\n  domainsList: domainsListReducer,\n  visitsOverview: visitsOverviewReducer,\n  appUpdated: appUpdatesReducer,\n});\n","import ReduxThunk from 'redux-thunk';\nimport { applyMiddleware, compose, createStore } from 'redux';\nimport { save, load, RLSOptions } from 'redux-localstorage-simple';\nimport reducers from '../reducers';\n\nconst isProduction = process.env.NODE_ENV !== 'production';\nconst composeEnhancers: Function = !isProduction && (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst localStorageConfig: RLSOptions = {\n  states: [ 'settings', 'servers' ],\n  namespace: 'shlink',\n  namespaceSeparator: '.',\n  debounce: 300,\n};\n\nconst store = createStore(reducers, load(localStorageConfig), composeEnhancers(\n  applyMiddleware(save(localStorageConfig), ReduxThunk),\n));\n\nexport default store;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL ?? '', window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import L from 'leaflet';\nimport marker2x from 'leaflet/dist/images/marker-icon-2x.png';\nimport marker from 'leaflet/dist/images/marker-icon.png';\nimport markerShadow from 'leaflet/dist/images/marker-shadow.png';\n\nexport const fixLeafletIcons = () => {\n  delete (L.Icon.Default.prototype as any)._getIconUrl;\n\n  L.Icon.Default.mergeOptions({\n    iconRetinaUrl: marker2x,\n    iconUrl: marker,\n    shadowUrl: markerShadow,\n  });\n};\n","import { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport { homepage } from '../package.json';\nimport container from './container';\nimport store from './container/store';\nimport { fixLeafletIcons } from './utils/helpers/leaflet';\nimport { register as registerServiceWorker } from './serviceWorkerRegistration';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport 'leaflet/dist/leaflet.css';\nimport './index.scss';\n\n// This overwrites icons used for leaflet maps, fixing some issues caused by webpack while processing the CSS\nfixLeafletIcons();\n\nconst { App, ScrollToTop, ErrorHandler, appUpdateAvailable } = container;\n\nrender(\n  <Provider store={store}>\n    <BrowserRouter basename={homepage}>\n      <ErrorHandler>\n        <ScrollToTop>\n          <App />\n        </ScrollToTop>\n      </ErrorHandler>\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nregisterServiceWorker({\n  onUpdate() {\n    store.dispatch(appUpdateAvailable()); // eslint-disable-line @typescript-eslint/no-unsafe-call\n  },\n});\n","import { compare } from 'compare-versions';\nimport { identity, memoizeWith } from 'ramda';\nimport { Empty, hasValue } from '../utils';\n\ntype SemVerPatternFragment = `${bigint | '*'}`;\n\nexport type SemVerPattern = SemVerPatternFragment\n| `${SemVerPatternFragment}.${SemVerPatternFragment}`\n| `${SemVerPatternFragment}.${SemVerPatternFragment}.${SemVerPatternFragment}`;\n\nexport interface Versions {\n  maxVersion?: SemVerPattern;\n  minVersion?: SemVerPattern;\n}\n\nexport type SemVer = `${bigint}.${bigint}.${bigint}` | 'latest';\n\nexport const versionMatch = (versionToMatch: SemVer | Empty, { maxVersion, minVersion }: Versions): boolean => {\n  if (!hasValue(versionToMatch)) {\n    return false;\n  }\n\n  const matchesMinVersion = !minVersion || compare(versionToMatch, minVersion, '>=');\n  const matchesMaxVersion = !maxVersion || compare(versionToMatch, maxVersion, '<=');\n\n  return matchesMaxVersion && matchesMinVersion;\n};\n\nconst versionIsValidSemVer = memoizeWith(identity, (version: string): version is SemVer => {\n  try {\n    return compare(version, version, '=');\n  } catch (e) {\n    return false;\n  }\n});\n\nexport const versionToPrintable = (version: string) => !versionIsValidSemVer(version) ? version : `v${version}`;\n\nexport const versionToSemVer = (defaultValue: SemVer = 'latest') =>\n  (version: string): SemVer => versionIsValidSemVer(version) ? version : defaultValue;\n"],"sourceRoot":""}