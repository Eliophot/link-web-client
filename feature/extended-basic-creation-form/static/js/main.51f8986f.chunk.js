(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(3),c=r(0),a=r(1);function s(e){return function(t){return Object(a.useEffect)((function(){t.resetSelectedServer()}),[]),Object(c.jsx)(e,Object(n.a)({},t))}}},104:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return c}));var n=function(e,t,r){var n=e.document,c=n.createElement("a");c.setAttribute("href",t),c.setAttribute("download",r),c.style.visibility="hidden",n.body.appendChild(c),c.click(),n.body.removeChild(c)},c=function(e,t,r){var c=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(c);n(e,a,r)}},147:function(e){e.exports=JSON.parse('{"a":"/shlink-web-client/feature/extended-basic-creation-form"}')},150:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),c=r(46),a=function(e){var t=e.color,r=void 0===t?c.c:t,a=e.className;return Object(n.jsx)("svg",{className:a,viewBox:"0 0 512 512",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:Object(n.jsxs)("g",{fill:r,children:[Object(n.jsx)("path",{d:" M 23.71 85.08 C 17.22 49.81 49.44 14.86 85.08 18.12 C 118.83 19.21 145.72 53.33 139.45 86.37 C 155.64 102.30 171.32 118.83 187.87 134.36 C 198.32 111.73 208.84 89.12 219.57 66.62 C 226.05 53.84 243.47 48.74 255.73 56.27 C 263.76 62.10 270.34 69.69 277.25 76.75 C 286.28 86.61 285.72 102.89 276.31 112.31 C 223.38 165.37 170.38 218.37 117.35 271.34 C 107.72 280.99 91.01 281.25 81.11 271.86 C 74.39 264.94 66.82 258.69 61.24 250.77 C 53.72 238.52 58.85 221.07 71.64 214.62 C 94.11 203.87 116.72 193.38 139.33 182.91 C 123.81 166.36 107.30 150.68 91.37 134.49 C 60.20 140.28 27.37 116.78 23.71 85.08 Z"}),Object(n.jsx)("path",{d:" M 205.21 201.23 C 225.32 181.36 260.88 181.11 281.14 200.86 C 299.25 218.75 317.37 236.65 335.10 254.93 C 356.73 278.01 352.01 318.70 326.03 336.56 C 320.07 330.47 313.73 324.65 308.12 318.28 C 323.86 309.39 328.76 286.18 316.63 272.39 C 301.73 256.95 286.30 242.03 271.24 226.75 C 264.49 219.65 256.80 212.00 246.37 211.52 C 224.65 208.64 205.52 233.36 214.49 253.58 C 221.09 266.81 234.22 275.12 243.62 286.24 C 240.43 295.96 238.09 306.13 238.29 316.46 C 225.55 304.29 213.16 291.73 200.89 279.09 C 180.97 257.57 183.10 220.45 205.21 201.23 Z"}),Object(n.jsx)("path",{d:" M 273.90 352.07 C 252.28 328.99 256.98 288.31 282.96 270.46 C 288.93 276.54 295.26 282.36 300.88 288.72 C 285.14 297.62 280.23 320.82 292.38 334.61 C 307.27 350.05 322.70 364.96 337.75 380.25 C 344.51 387.35 352.20 395.00 362.64 395.48 C 384.35 398.37 403.49 373.64 394.51 353.42 C 387.92 340.18 374.78 331.88 365.38 320.76 C 368.56 311.04 370.91 300.86 370.71 290.54 C 383.45 302.70 395.84 315.27 408.11 327.91 C 428.03 349.43 425.90 386.55 403.78 405.77 C 383.68 425.64 348.13 425.89 327.86 406.14 C 309.75 388.25 291.60 370.37 273.90 352.07 Z"}),Object(n.jsx)("path",{d:" M 422.11 403.83 C 431.96 394.07 441.60 384.06 451.66 374.51 C 460.90 383.74 471.89 392.70 474.89 406.11 C 480.16 429.97 484.08 454.13 488.76 478.12 C 490.00 483.41 484.47 488.29 479.35 486.63 C 454.66 481.52 429.55 478.12 405.14 471.84 C 393.17 467.97 385.20 457.75 376.55 449.27 C 386.39 439.49 396.13 429.60 406.06 419.91 C 416.37 433.45 435.74 414.00 422.11 403.83 Z"})]})})}},151:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(3),c=r(0),a=r(1),s=r(54),i=r(30),o=r(60);function l(e,t){return function(r){var l=r.selectServer,u=r.selectedServer,d=r.match;return Object(a.useEffect)((function(){l(d.params.serverId)}),[d.params.serverId]),u?Object(i.c)(u)?Object(c.jsx)(t,{}):Object(c.jsx)(e,Object(n.a)({},r)):Object(c.jsx)(o.a,{children:Object(c.jsx)(s.a,{loading:!0})})}}},153:function(e,t,r){"use strict";var n=r(0),c=r(22),a=r(32);t.a=function(e){var t=e.to,r=void 0===t?"/":t,s=e.children,i=void 0===s?"Home":s;return Object(n.jsx)("div",{className:"home",children:Object(n.jsxs)(a.a,{className:"p-4",children:[Object(n.jsx)("h2",{children:"Oops! We could not find requested route."}),Object(n.jsx)("p",{children:"Use your browser's back button to navigate to the page you have previously come from, or just press this button."}),Object(n.jsx)("br",{}),Object(n.jsx)(c.b,{to:r,className:"btn btn-outline-primary btn-lg",children:i})]})})}},165:function(e,t,r){"use strict";var n=r(0),c=r(557),a=r(558),s=r(22),i=r(7),o=r.n(i),l=r(12),u=r(11),d=function(e){var t=e.id,r=e.name;return Object(n.jsxs)(c.a,{tag:s.b,to:"/server/".concat(t),className:"servers-list__server-item",children:[r,Object(n.jsx)(l.a,{icon:u.j,className:"servers-list__server-item-icon"})]})};t.a=function(e){var t=e.servers,r=e.children,c=e.embedded,s=void 0!==c&&c;return Object(n.jsxs)(n.Fragment,{children:[r&&Object(n.jsx)("h5",{className:"mb-md-3",children:r}),t.length>0&&Object(n.jsx)(a.a,{className:o()("servers-list__list-group",{"servers-list__list-group--embedded":s}),children:t.map((function(e){var t=e.id,r=e.name;return Object(n.jsx)(d,{id:t,name:r},t)}))})]})}},25:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"d",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return u}));var n=r(8),c=r(1),a=r(280),s=r(51),i=function(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,s=Object(c.useState)(r),i=Object(n.a)(s,2),o=i[0],l=i[1],u=Object(c.useRef)(void 0),d=function(){l(!r),u.current&&t(u.current),u.current=e((function(){return l(r)}),a)};return[o,d]}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(c.useState)(e),r=Object(n.a)(t,2),a=r[0],s=r[1];return[a,function(){return s(!a)},function(){return s(!0)},function(){return s(!1)}]},l=function(e,t){var r=function(e){return function(t){t.event.composedPath().some((function(e){var t=e.classList;return null===t||void 0===t?void 0:t.contains("visits-table")}))||document.querySelector(".modal")||e()}};return Object(a.useSwipeable)({delta:40,onSwipedLeft:r(t),onSwipedRight:r(e)})},u=function(e,t){var r=Object(c.useState)(t),a=Object(n.a)(r,2),i=a[0],o=a[1];return[i,function(t){var r=window,n=r.location,c=r.history,a=Object(s.a)(n.search);a[e]=t,c.pushState(null,"","".concat(n.pathname,"?").concat(Object(s.b)(a))),o(t)}]}},277:function(e,t,r){"use strict";(function(e){var n=r(278),c=r.n(n),a=r(279),s=r(310),i=r(311),o=r(312),l=r(313),u=r(281),d=r(308),j=r(103),b=r(283);t.a=function(t,r,n){t.constant("window",e.window),t.constant("console",e.console),t.constant("axios",c.a),t.service("ImageDownloader",b.a,"axios","window"),t.serviceFactory("ScrollToTop",a.a),t.decorator("ScrollToTop",n),t.serviceFactory("MainHeader",s.a,"ServersDropdown"),t.decorator("MainHeader",n),t.serviceFactory("Home",(function(){return i.a})),t.decorator("Home",j.a),t.decorator("Home",n),t.decorator("Home",r(["servers"],["resetSelectedServer"])),t.serviceFactory("MenuLayout",o.a,"TagsList","ShortUrlsList","AsideMenu","CreateShortUrl","ShortUrlVisits","TagVisits","OrphanVisits","ServerError","Overview","EditShortUrl","ManageDomains"),t.decorator("MenuLayout",r(["selectedServer"],["selectServer"])),t.decorator("MenuLayout",n),t.serviceFactory("AsideMenu",l.a,"DeleteServerButton"),t.serviceFactory("ShlinkVersionsContainer",(function(){return d.a})),t.decorator("ShlinkVersionsContainer",r(["selectedServer"])),t.serviceFactory("ErrorHandler",u.a,"window","console")}}).call(this,r(49))},279:function(e,t,r){"use strict";var n=r(0),c=r(1);t.a=function(){return function(e){var t=e.location,r=e.children;return Object(c.useEffect)((function(){scrollTo(0,0)}),[t]),Object(n.jsx)(n.Fragment,{children:r})}}},281:function(e,t,r){"use strict";var n=r(19),c=r(27),a=r(37),s=r(36),i=r(0),o=r(1),l=r(217),u=r(32);t.a=function(e,t){var r=e.location,d=t.error;return function(e){Object(a.a)(o,e);var t=Object(s.a)(o);function o(e){var r;return Object(n.a)(this,o),(r=t.call(this,e)).state={hasError:!1},r}return Object(c.a)(o,[{key:"componentDidCatch",value:function(e){d(e)}},{key:"render",value:function(){return this.state.hasError?Object(i.jsx)("div",{className:"home",children:Object(i.jsxs)(u.a,{className:"p-4",children:[Object(i.jsx)("h1",{children:"Oops! This is awkward :S"}),Object(i.jsx)("p",{children:"It seems that something went wrong. Try refreshing the page or just click this button."}),Object(i.jsx)("br",{}),Object(i.jsx)(l.a,{outline:!0,color:"primary",onClick:function(){return r.reload()},children:"Take me back"})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),o}(o.Component)}},283:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(6),c=r.n(n),a=r(15),s=r(19),i=r(27),o=r(104),l=function(){function e(t,r){Object(s.a)(this,e),this.axios=t,this.window=r}return Object(i.a)(e,[{key:"saveImage",value:function(){var e=Object(a.a)(c.a.mark((function e(t,r){var n,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.axios.get(t,{responseType:"blob"});case 2:n=e.sent,a=n.data,s=URL.createObjectURL(a),Object(o.b)(this.window,s,r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}()},299:function(e,t,r){"use strict";(function(e){var n=r(25),c=r(300),a=r(301);t.a=function(t){t.constant("localStorage",e.localStorage),t.service("Storage",c.a,"localStorage"),t.service("ColorGenerator",a.a,"Storage"),t.constant("setTimeout",e.setTimeout),t.constant("clearTimeout",e.clearTimeout),t.serviceFactory("useStateFlagTimeout",n.b,"setTimeout","clearTimeout")}}).call(this,r(49))},30:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return o})),r.d(t,"f",(function(){return l}));var n=r(540),c=function(e){return!(null===e||void 0===e||!e.url)&&!(null===e||void 0===e||!e.apiKey)},a=function(e){return!(null===e||void 0===e||!e.hasOwnProperty("id"))},s=function(e){return!(null===e||void 0===e||!e.hasOwnProperty("version"))},i=function(e){return!(null===e||void 0===e||!e.hasOwnProperty("serverNotFound"))},o=function(e){return a(e)?e.id:""},l=function(e){return Object(n.a)(["id","autoConnect"],e)}},300:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(19),c=function(e){return"".concat("shlink",".").concat(e)},a=function e(t){var r=this;Object(n.a)(this,e),this.localStorage=t,this.get=function(e){var t=r.localStorage.getItem(c(e));return t?JSON.parse(t):void 0},this.set=function(e,t){return r.localStorage.setItem(c(e),JSON.stringify(t))}}},301:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(19),c=r(31),a=Math.floor,s=Math.random,i="0123456789ABCDEF",o=function(e){return e.toLowerCase().trim()},l=function e(t){var r,l=this;Object(n.a)(this,e),this.storage=t,this.colors=void 0,this.getColorForKey=function(e){var t=o(e),r=l.colors[t];return r||l.setColorForKey(t,"#".concat(Object(c.e)(6,(function(){return i[a(s()*i.length)]})).join("")))},this.setColorForKey=function(e,t){var r=o(e);return l.colors[r]=t,l.storage.set("colors",l.colors),t},this.colors=null!==(r=this.storage.get("colors"))&&void 0!==r?r:{}}},308:function(e,t,r){"use strict";var n=r(0),c=r(7),a=r.n(c),s=r(30),i=r(545),o=r(52),l=r(70),u=Object(i.a)(Object(l.c)(),l.b),d=function(e){var t=e.project,r=e.version;return Object(n.jsx)(o.a,{href:"https://github.com/shlinkio/".concat(t,"/releases/").concat(r),className:"text-muted",children:Object(n.jsx)("b",{children:r})})},j=function(e){var t=e.selectedServer,r=e.clientVersion,c=u(void 0===r?"%_VERSION_%":r);return Object(n.jsxs)("small",{className:"text-muted",children:[Object(s.d)(t)&&Object(n.jsxs)(n.Fragment,{children:["Server: ",Object(n.jsx)(d,{project:"shlink",version:t.printableVersion})," - "]}),"Client: ",Object(n.jsx)(d,{project:"shlink-web-client",version:c})]})};t.a=function(e){var t=e.selectedServer,r=a()("text-center",{"shlink-versions-container--with-server":Object(s.d)(t)});return Object(n.jsx)("div",{className:r,children:Object(n.jsx)(j,{selectedServer:t})})}},31:function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"b",(function(){return l})),r.d(t,"d",(function(){return u})),r.d(t,"a",(function(){return d}));var n=r(546),c=r(213),a=r(318),s=r(545),i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(n.a)(r,e+1).map(t)},o=function(e){return!Object(c.a)(e)&&!Object(a.a)(e)},l=function(e){return Object(s.a)((function(e){return e.preventDefault()}),e)},u=function(e){return Object(a.a)(e)?null:e},d=function(e){return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}},310:function(e,t,r){"use strict";var n=r(8),c=r(0),a=r(11),s=r(12),i=r(1),o=r(22),l=r(550),u=r(551),d=r(552),j=r(553),b=r(554),h=r(555),O=r(556),v=r(7),f=r.n(v),m=r(25),x=r(150);t.a=function(e){return function(t){var r=t.location,v=Object(m.d)(),g=Object(n.a)(v,4),p=g[0],y=g[1],S=g[3],C=r.pathname;Object(i.useEffect)(S,[r]);var N="/settings",w=f()("main-header__toggle-icon",{"main-header__toggle-icon--opened":p});return Object(c.jsxs)(l.a,{color:"primary",dark:!0,fixed:"top",className:"main-header",expand:"md",children:[Object(c.jsxs)(u.a,{tag:o.b,to:"/",children:[Object(c.jsx)(x.a,{className:"main-header__brand-logo",color:"white"})," Shlink"]}),Object(c.jsx)(d.a,{onClick:y,children:Object(c.jsx)(s.a,{icon:a.i,className:w})}),Object(c.jsx)(j.a,{navbar:!0,isOpen:p,children:Object(c.jsxs)(b.a,{navbar:!0,className:"ml-auto",children:[Object(c.jsx)(h.a,{children:Object(c.jsxs)(O.a,{tag:o.b,to:N,active:C===N,children:[Object(c.jsx)(s.a,{icon:a.l}),"\xa0 Settings"]})}),Object(c.jsx)(e,{})]})})]})}}},311:function(e,t,r){"use strict";var n=r(0),c=r(1),a=r(559),s=r(318),i=r(22),o=r(316),l=r(541),u=r(52),d=r(12),j=r(11),b=r(165),h=r(150);t.a=function(e){var t=e.servers,r=e.history,O=Object(a.a)(t),v=!Object(s.a)(O);return Object(c.useEffect)((function(){var e=O.find((function(e){return e.autoConnect}));e&&r.push("/server/".concat(e.id))}),[]),Object(n.jsx)("div",{className:"home",children:Object(n.jsx)(o.a,{className:"home__main-card",children:Object(n.jsxs)(l.a,{noGutters:!0,children:[Object(n.jsx)("div",{className:"col-md-5 d-none d-md-block",children:Object(n.jsx)("div",{className:"p-4",children:Object(n.jsx)(h.a,{})})}),Object(n.jsxs)("div",{className:"col-md-7 home__servers-container",children:[Object(n.jsx)("div",{className:"p-4",children:Object(n.jsx)("h1",{className:"home__title",children:"Welcome!"})}),Object(n.jsx)(b.a,{embedded:!0,servers:O,children:!v&&Object(n.jsxs)("div",{className:"p-4 text-center",children:[Object(n.jsx)("p",{className:"mb-5",children:"This application will help you manage your Shlink servers."}),Object(n.jsx)("p",{children:Object(n.jsxs)(i.b,{to:"/server/create",className:"btn btn-outline-primary btn-lg mr-2",children:[Object(n.jsx)(d.a,{icon:j.E})," ",Object(n.jsx)("span",{className:"ml-1",children:"Add a server"})]})}),Object(n.jsx)("p",{className:"mb-0 mt-5",children:Object(n.jsx)(u.a,{href:"https://shlink.io/documentation",children:Object(n.jsxs)("small",{children:[Object(n.jsx)("span",{className:"mr-1",children:"Learn more about Shlink"})," ",Object(n.jsx)(d.a,{icon:j.o})]})})})]})})]})]})})})}},312:function(e,t,r){"use strict";var n=r(3),c=r(8),a=r(0),s=r(1),i=r(43),o=r(11),l=r(12),u=r(7),d=r.n(u),j=r(151),b=r(25),h=r(38),O=r(30),v=r(153);t.a=function(e,t,r,u,f,m,x,g,p,y,S){return Object(j.a)((function(j){var C=j.location,N=j.selectedServer,w=Object(b.d)(),k=Object(c.a)(w,4),_=k[0],U=k[1],T=k[2],R=k[3];if(Object(s.useEffect)((function(){return R()}),[C]),!Object(O.d)(N))return Object(a.jsx)(g,{});var E=Object(h.f)(N),D=Object(h.d)(N),L=d()("menu-layout__burger-icon",{"menu-layout__burger-icon--active":_}),V=Object(b.c)(T,R);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(l.a,{icon:o.c,className:L,onClick:U}),Object(a.jsx)("div",Object(n.a)(Object(n.a)({},V),{},{className:"menu-layout__swipeable",children:Object(a.jsxs)("div",{className:"menu-layout__swipeable-inner",children:[Object(a.jsx)(r,{selectedServer:N,showOnMobile:_}),Object(a.jsx)("div",{className:"menu-layout__container",onClick:function(){return R()},children:Object(a.jsx)("div",{className:"container-xl",children:Object(a.jsxs)(i.d,{children:[Object(a.jsx)(i.a,{exact:!0,from:"/server/:serverId",to:"/server/:serverId/overview"}),Object(a.jsx)(i.b,{exact:!0,path:"/server/:serverId/overview",component:p}),Object(a.jsx)(i.b,{exact:!0,path:"/server/:serverId/list-short-urls/:page",component:t}),Object(a.jsx)(i.b,{exact:!0,path:"/server/:serverId/create-short-url",component:u}),Object(a.jsx)(i.b,{path:"/server/:serverId/short-code/:shortCode/visits",component:f}),Object(a.jsx)(i.b,{path:"/server/:serverId/short-code/:shortCode/edit",component:y}),Object(a.jsx)(i.b,{path:"/server/:serverId/tag/:tag/visits",component:m}),E&&Object(a.jsx)(i.b,{path:"/server/:serverId/orphan-visits",component:x}),Object(a.jsx)(i.b,{exact:!0,path:"/server/:serverId/manage-tags",component:e}),D&&Object(a.jsx)(i.b,{exact:!0,path:"/server/:serverId/manage-domains",component:S}),Object(a.jsx)(i.b,{render:function(){return Object(a.jsx)(v.a,{to:"/server/".concat(N.id,"/list-short-urls/1"),children:"List short URLs"})}})]})})})]})}))]})}),g)}},313:function(e,t,r){"use strict";var n=r(3),c=r(40),a=r(0),s=r(11),i=r(12),o=r(22),l=r(7),u=r.n(l),d=r(30),j=r(38),b=function(e){var t=e.children,r=e.to,s=e.className,i=Object(c.a)(e,["children","to","className"]);return Object(a.jsx)(o.c,Object(n.a)(Object(n.a)({className:u()("aside-menu__item",s),activeClassName:"aside-menu__item--selected",to:r},i),{},{children:t}))};t.a=function(e){return function(t){var r=t.selectedServer,n=t.showOnMobile,c=void 0!==n&&n,o=Object(d.e)(r),l=o?r.id:"",h=Object(j.d)(r),O=u()("aside-menu",{"aside-menu--hidden":!c}),v=function(e){return"/server/".concat(l).concat(e)};return Object(a.jsx)("aside",{className:O,children:Object(a.jsxs)("nav",{className:"nav flex-column aside-menu__nav",children:[Object(a.jsxs)(b,{to:v("/overview"),children:[Object(a.jsx)(i.a,{fixedWidth:!0,icon:s.t}),Object(a.jsx)("span",{className:"aside-menu__item-text",children:"Overview"})]}),Object(a.jsxs)(b,{to:v("/list-short-urls/1"),isActive:function(e,t){return null!==t.pathname.match("/list-short-urls")},children:[Object(a.jsx)(i.a,{fixedWidth:!0,icon:s.w}),Object(a.jsx)("span",{className:"aside-menu__item-text",children:"List short URLs"})]}),Object(a.jsxs)(b,{to:v("/create-short-url"),children:[Object(a.jsx)(i.a,{fixedWidth:!0,icon:s.v,flip:"horizontal"}),Object(a.jsx)("span",{className:"aside-menu__item-text",children:"Create short URL"})]}),Object(a.jsxs)(b,{to:v("/manage-tags"),children:[Object(a.jsx)(i.a,{fixedWidth:!0,icon:s.N}),Object(a.jsx)("span",{className:"aside-menu__item-text",children:"Manage tags"})]}),h&&Object(a.jsxs)(b,{to:v("/manage-domains"),children:[Object(a.jsx)(i.a,{fixedWidth:!0,icon:s.s}),Object(a.jsx)("span",{className:"aside-menu__item-text",children:"Manage domains"})]}),Object(a.jsxs)(b,{to:v("/edit"),className:"aside-menu__item--push",children:[Object(a.jsx)(i.a,{fixedWidth:!0,icon:s.B}),Object(a.jsx)("span",{className:"aside-menu__item-text",children:"Edit this server"})]}),o&&Object(a.jsx)(e,{className:"aside-menu__item aside-menu__item--danger",textClassName:"aside-menu__item-text",server:r})]})})}}},319:function(e,t,r){e.exports=r(536)},32:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(3),c=r(40),a=r(0),s=r(316),i=r(543),o=r(544),l=function(e){var t=e.title,r=e.children,l=e.bodyClassName,u=Object(c.a)(e,["title","children","bodyClassName"]);return Object(a.jsxs)(s.a,Object(n.a)(Object(n.a)({},u),{},{children:[t&&Object(a.jsx)(i.a,{children:t}),Object(a.jsx)(o.a,{className:l,children:r})]}))}},38:function(e,t,r){"use strict";r.d(t,"h",(function(){return s})),r.d(t,"j",(function(){return i})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return l})),r.d(t,"k",(function(){return u})),r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return j})),r.d(t,"i",(function(){return b})),r.d(t,"d",(function(){return h})),r.d(t,"e",(function(){return O})),r.d(t,"c",(function(){return v}));var n=r(30),c=r(70),a=function(e){return function(t){return Object(n.d)(t)&&Object(c.a)(t.version,e)}},s=a({minVersion:"2.5.0"}),i=a({minVersion:"2.6.0"}),o=i,l=i,u=i,d=a({minVersion:"2.7.0"}),j=d,b=a({minVersion:"2.8.0"}),h=b,O=a({minVersion:"2.9.0"}),v=a({minVersion:"2.10.0"})},405:function(e,t){},407:function(e,t){},46:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s})),r.d(t,"f",(function(){return i})),r.d(t,"e",(function(){return o})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return u}));var n="#4696e5",c="rgba(70, 150, 229, 0.4)",a="#f77f28",s="rgba(247, 127, 40, 0.4)",i="white",o="#161b22",l=function(e){var t,r=document.getElementsByTagName("html");null===r||void 0===r||null===(t=r[0])||void 0===t||t.setAttribute("data-theme",e)},u=function(){var e,t=document.getElementsByTagName("html");return"dark"===(null===t||void 0===t||null===(e=t[0])||void 0===e?void 0:e.getAttribute("data-theme"))}},51:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return s}));var n=r(212),c=r.n(n),a=function(e){return c.a.parse(e,{ignoreQueryPrefix:!0})},s=function(e){return c.a.stringify(e,{arrayFormat:"brackets"})}},536:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"processStatsFromVisits",(function(){return Ea})),r.d(n,"normalizeVisits",(function(){return Da}));var c,a=r(0),s=r(48),i=r(163),o=r(22),l=r(147),u=r(10),d=r(3),j=r(276),b=r(43),h=r(608),O=r(613),v=r(30),f=r(6),m=r.n(f),x=r(15),g=r(19),p=r(8),y=r(40),S=r(309),C=r(213),N=r(318),w=r(51),k=function(e,t){return e?"".concat(e,"/rest/v").concat(t):""},_=Object(S.a)(C.a),U=function(e){var t=e.orderBy,r=void 0===t?{}:t,n=Object(y.a)(e,["orderBy"]),c=Object.keys(r),a=Object(p.a)(c,1)[0],s=Object.values(r),i=Object(p.a)(s,1)[0];return i?Object(d.a)(Object(d.a)({},n),{},{orderBy:"".concat(a,"-").concat(i)}):n},T=function e(t,r,n){var c=this;Object(g.a)(this,e),this.axios=t,this.baseUrl=r,this.apiKey=n,this.apiVersion=void 0,this.listShortUrls=Object(x.a)(m.a.mark((function e(){var t,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",c.performRequest("/short-urls","GET",U(t)).then((function(e){return e.data.shortUrls})));case 2:case"end":return e.stop()}}),e)}))),this.createShortUrl=function(){var e=Object(x.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(S.a)((function(e){return Object(N.a)(e)||Object(C.a)(e)}),t),e.abrupt("return",c.performRequest("/short-urls","POST",{},r).then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getShortUrlVisits=function(){var e=Object(x.a)(m.a.mark((function e(t,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/short-urls/".concat(t,"/visits"),"GET",r).then((function(e){return e.data.visits})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.getTagVisits=function(){var e=Object(x.a)(m.a.mark((function e(t,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/tags/".concat(t,"/visits"),"GET",r).then((function(e){return e.data.visits})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.getOrphanVisits=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/visits/orphan","GET",t).then((function(e){return e.data.visits})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getVisitsOverview=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/visits","GET").then((function(e){return e.data.visits})));case 1:case"end":return e.stop()}}),e)}))),this.getShortUrl=function(){var e=Object(x.a)(m.a.mark((function e(t,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/short-urls/".concat(t),"GET",{domain:r}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.deleteShortUrl=function(){var e=Object(x.a)(m.a.mark((function e(t,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/short-urls/".concat(t),"DELETE",{domain:r}).then((function(){})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.updateShortUrlTags=function(){var e=Object(x.a)(m.a.mark((function e(t,r,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/short-urls/".concat(t,"/tags"),"PUT",{domain:r},{tags:n}).then((function(e){return e.data.tags})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.updateShortUrl=function(){var e=Object(x.a)(m.a.mark((function e(t,r,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/short-urls/".concat(t),"PATCH",{domain:r},n).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.listTags=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/tags","GET",{withStats:"true"}).then((function(e){return e.data.tags})).then((function(e){return{tags:e.data,stats:e.stats}})));case 1:case"end":return e.stop()}}),e)}))),this.deleteTags=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/tags","DELETE",{tags:t}).then((function(){return{tags:t}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.editTag=function(){var e=Object(x.a)(m.a.mark((function e(t,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/tags","PUT",{},{oldName:t,newName:r}).then((function(){return{oldName:t,newName:r}})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.health=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/health","GET").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)}))),this.mercureInfo=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/mercure-info","GET").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)}))),this.listDomains=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/domains","GET").then((function(e){return e.data.domains})));case 1:case"end":return e.stop()}}),e)}))),this.editDomainRedirects=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.performRequest("/domains/redirects","PATCH",{},t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.performRequest=function(){var e=Object(x.a)(m.a.mark((function e(t){var r,n,a,s,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"GET",n=i.length>2&&void 0!==i[2]?i[2]:{},a=i.length>3&&void 0!==i[3]?i[3]:{},e.prev=3,e.next=6,c.axios({method:r,url:"".concat(k(c.baseUrl,c.apiVersion)).concat(t),headers:{"X-Api-Key":c.apiKey},params:_(n),data:a,paramsSerializer:w.b});case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),s=e.t0.response,!s&&2!==c.apiVersion){e.next=15;break}throw e.t0;case 15:return c.apiVersion=c.apiVersion-1,e.next=18,c.performRequest(t,r,n,a);case 18:return e.abrupt("return",e.sent);case 19:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),this.apiVersion=2},R={},E=function(e){return function(t){var r,n=function(e){return"function"===typeof e}(t)?(r=t,Object(O.a)("selectedServer",r())):t;if(!Object(v.b)(n))throw new Error("There's no selected server or it is not found");var c=n.url,a=n.apiKey,s="".concat(c,"_").concat(a);return R[s]||(R[s]=new T(e,c,a)),R[s]}},D=function(e){e.serviceFactory("buildShlinkApiClient",E,"axios")},L=r(277),V=r(11),I=r(12),F=r(545),A=r(361),M=r(1),G=r(7),P=r.n(G),B=function(e){var t=e.onChange,r=e.className,n=e.large,s=void 0===n||n,i=e.noBorder,o=void 0!==i&&i,l=e.initialValue,u=void 0===l?"":l,d=Object(M.useState)(u),j=Object(p.a)(d,2),b=j[0],h=j[1],O=function(){c&&clearTimeout(c),c=null},v=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;h(e),O(),c=setTimeout((function(){t(e),O()}),r)};return Object(a.jsxs)("div",{className:P()("search-field",r),children:[Object(a.jsx)("input",{type:"text",className:P()("form-control search-field__input",{"form-control-lg":s,"search-field__input--no-border":o}),placeholder:"Search...",value:b,onChange:function(e){return v(e.target.value)}}),Object(a.jsx)(I.a,{icon:V.H,className:"search-field__icon"}),Object(a.jsx)("div",{className:"close search-field__close",hidden:""===b,id:"search-field__close",onClick:function(){return v("",0)},children:"\xd7"})]})},H=function(e){var t=e.text,r=e.children,n=e.clearable,c=e.className,s=void 0===c?"":c,i=e.colorGenerator,o=e.onClick,l=e.onClose;return Object(a.jsxs)("span",{className:"badge tag ".concat(s),style:{backgroundColor:i.getColorForKey(t),cursor:n||!o?"auto":"pointer"},onClick:o,children:[null!==r&&void 0!==r?r:t,n&&Object(a.jsx)("span",{className:"close tag__close-selected-tag",onClick:l,children:"\xd7"})]})},W=r(563),q=r(130),z=r(560),Q=r(561),K=r(25),J=function(e){var t=e.text,r=e.disabled,n=void 0!==r&&r,c=e.className,s=void 0===c?"":c,i=e.children,o=e.dropdownClassName,l=e.right,u=void 0!==l&&l,d=e.minWidth,j=Object(K.d)(),b=Object(p.a)(j,2),h=b[0],O=b[1],v="dropdown-btn__toggle btn-block ".concat(s),f={minWidth:d&&"".concat(d,"px")};return Object(a.jsxs)(q.a,{isOpen:h,toggle:O,disabled:n,className:o,children:[Object(a.jsx)(z.a,{caret:!0,className:v,color:"primary",children:t}),Object(a.jsx)(Q.a,{className:"w-100",right:u,style:f,children:i})]})},Z=r(91),Y=r(365),X=r(200),$=r(307),ee=r(538),te=r(562),re=(r(537),r(362)),ne=r(363),ce=r(364),ae=function(e){return"string"!==typeof e},se=function(e,t){return e&&ae(e)?t?Object(ee.default)(e,t):Object(te.a)(e):e},ie=function(e){return se(e,void 0)},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"yyyy-MM-dd";return function(t){return se(t,e)}}(),le=function(e){return ae(e)?e:Object(A.default)(e)},ue=function(e,t,r){return!t&&r?Object(re.default)(le(e),le(r)):t&&!r?Object(ne.default)(le(e),le(t)):!t||!r||Object(ce.default)(le(e),{start:le(t),end:le(r)})},de=function(e){return void 0===e||Object(N.a)(Object($.a)(Boolean,e))},je=function(e){return"string"===typeof e},be={today:"Today",yesterday:"Yesterday",last7Days:"Last 7 days",last30Days:"Last 30 days",last90Days:"Last 90 days",last180days:"Last 180 days",last365Days:"Last 365 days",all:void 0},he=Object.keys(be).filter((function(e){return"all"!==e})),Oe=function(e){if(e&&"all"!==e)return je(e)?be[e]:function(e){if(e&&!de(e))return e.startDate&&!e.endDate?"Since ".concat(oe(e.startDate)):!e.startDate&&e.endDate?"Until ".concat(oe(e.endDate)):"".concat(oe(e.startDate)," - ").concat(oe(e.endDate))}(e)},ve=function(e){return Object(Z.default)(Object(Y.default)(new Date,e))},fe=function(e){return{startDate:e,endDate:Object(X.default)(new Date)}},me=function(e){if(!e||"all"===e)return{};switch(e){case"today":return fe(Object(Z.default)(new Date));case"yesterday":return{startDate:ve(1),endDate:Object(X.default)(Object(Y.default)(new Date,1))};case"last7Days":return fe(ve(7));case"last30Days":return fe(ve(30));case"last90Days":return fe(ve(90));case"last180days":return fe(ve(180));case"last365Days":return fe(ve(365))}return{}},xe=r(285),ge=r.n(xe),pe=r(78),ye=function(e){var t=e.className,r=e.isClearable,n=e.selected,c=!r||Object(C.a)(n),s=Object(M.useRef)();return Object(a.jsxs)("div",{className:"date-input-container",children:[Object(a.jsx)(ge.a,Object(d.a)(Object(d.a)({},e),{},{dateFormat:"yyyy-MM-dd",className:P()("date-input-container__input form-control",t),ref:s})),c&&Object(a.jsx)(I.a,{icon:pe.a,className:"date-input-container__icon",onClick:function(){var e;return null===(e=s.current)||void 0===e?void 0:e.input.focus()}})]})},Se=function(e){var t=e.startDate,r=void 0===t?null:t,n=e.endDate,c=void 0===n?null:n,s=e.disabled,i=void 0!==s&&s,o=e.onStartDateChange,l=e.onEndDateChange;return Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(ye,{selected:r,placeholderText:"Since...",isClearable:!0,maxDate:null!==c&&void 0!==c?c:void 0,disabled:i,onChange:o})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(ye,{className:"mt-2 mt-md-0",selected:c,placeholderText:"Until...",isClearable:!0,minDate:null!==r&&void 0!==r?r:void 0,disabled:i,onChange:l})})]})},Ce=function(e){var t=e.active,r=e.allText,n=e.onChange;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(W.a,{active:"all"===t,onClick:function(){return n("all")},children:r}),Object(a.jsx)(W.a,{divider:!0}),he.map((function(e){return Object(a.jsx)(W.a,{active:t===e,onClick:function(){return n(e)},children:Oe(e)},e)}))]})},Ne=function(e){var t,r=e.onDatesChange,n=e.initialDateRange,c=e.defaultText,s=e.disabled,i=je(n),o=Object(M.useState)(i?n:void 0),l=Object(p.a)(o,2),u=l[0],j=l[1],b=Object(M.useState)(i?void 0:n),h=Object(p.a)(b,2),O=h[0],v=h[1],f=function(e){j(de(e)?"all":void 0),v(e),r(e)};return Object(a.jsxs)(J,{disabled:s,text:null!==(t=Oe(null!==u&&void 0!==u?u:O))&&void 0!==t?t:c,children:[Object(a.jsx)(Ce,{allText:c,active:u,onChange:function(e){j(e),v(void 0),r(me(e))}}),Object(a.jsx)(W.a,{divider:!0}),Object(a.jsx)(W.a,{header:!0,children:"Custom:"}),Object(a.jsx)(W.a,{text:!0,children:Object(a.jsx)(Se,Object(d.a)(Object(d.a)({},O),{},{onStartDateChange:function(e){return f(Object(d.a)(Object(d.a)({},O),{},{startDate:e}))},onEndDateChange:function(e){return f(Object(d.a)(Object(d.a)({},O),{},{endDate:e}))}}))})]})},we=function(e){var t=e.history,r=e.location,n=e.match,c=Object(M.useMemo)((function(){return Object(w.a)(r.search)}),[r]);return[c,function(e){var r=Object(w.b)(Object(d.a)(Object(d.a)({},c),e)),a=Object(N.a)(r)?"":"?".concat(r);t.push("/server/".concat(null===n||void 0===n?void 0:n.params.serverId,"/list-short-urls/1").concat(a))}]},ke=function(e){return e?Object(A.default)(e):null},_e=function(e){return function(t){var r,n=we(t),c=Object(p.a)(n,2),s=c[0],i=s.search,o=s.tags,l=s.startDate,u=s.endDate,d=c[1],j=null!==(r=null===o||void 0===o?void 0:o.split(","))&&void 0!==r?r:[],b=Object(F.a)((function(e){var t,r,n=e.startDate,c=e.endDate;return{startDate:null!==(t=ie(n))&&void 0!==t?t:void 0,endDate:null!==(r=ie(c))&&void 0!==r?r:void 0}}),d),h=Object(F.a)((function(e){return Object(N.a)(e)?void 0:e}),(function(e){return d({search:e})})),O=Object(F.a)((function(e){return j.filter((function(t){return t!==e}))}),(function(e){return 0===e.length?void 0:e.join(",")}),(function(e){return d({tags:e})}));return Object(a.jsxs)("div",{className:"search-bar-container",children:[Object(a.jsx)(B,{initialValue:i,onChange:h}),Object(a.jsx)("div",{className:"mt-3",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-lg-8 offset-lg-4 col-xl-6 offset-xl-6",children:Object(a.jsx)(Ne,{defaultText:"All short URLs",initialDateRange:{startDate:ke(l),endDate:ke(u)},onDatesChange:b})})})}),j.length>0&&Object(a.jsxs)("h4",{className:"search-bar__selected-tag mt-3",children:[Object(a.jsx)(I.a,{icon:V.N,className:"search-bar__tags-icon"}),"\xa0",j.map((function(t){return Object(a.jsx)(H,{colorGenerator:e,text:t,clearable:!0,onClose:function(){return O(t)}},t)}))]})]})}},Ue=r(26),Te=r(573),Re=r(61),Ee=r(559),De=r(316),Le=r(564),Ve=r(565),Ie=function(e,t,r){return e!==t?"ASC":r?{ASC:"DESC",DESC:void 0}[r]:"ASC"},Fe=function(e,t){var r=t.field,n=t.dir;return r&&n?e.sort((function(e,t){var c="ASC"===n?1:-1,a="ASC"===n?-1:1;return e[r]>t[r]?c:a})):e};function Ae(e){var t,r=e.items,n=e.order,c=e.onChange,s=e.isButton,i=void 0===s||s,o=e.right,l=void 0!==o&&o,u=function(e){return function(){var t=Ie(e,n.field,n.dir);c(t?e:void 0,t)}};return Object(a.jsxs)(Le.a,{children:[Object(a.jsxs)(z.a,{caret:!0,color:i?"primary":"link",className:P()({"dropdown-btn__toggle btn-block":i,"btn-sm p-0":!i}),children:[!i&&Object(a.jsx)(a.Fragment,{children:"Order by"}),i&&!n.field&&Object(a.jsx)(a.Fragment,{children:"Order by..."}),i&&n.field&&'Order by: "'.concat(r[n.field],'" - "').concat(null!==(t=n.dir)&&void 0!==t?t:"DESC",'"')]}),Object(a.jsxs)(Q.a,{right:l,className:P()("w-100",{"sorting-dropdown__menu--link":!i}),children:[Object(Ve.a)(r).map((function(e){var t=Object(p.a)(e,2),r=t[0],c=t[1];return Object(a.jsxs)(W.a,{active:n.field===r,onClick:u(r),children:[c,n.field===r&&Object(a.jsx)(I.a,{icon:"ASC"===n.dir?V.K:V.J,className:"sorting-dropdown__sort-icon"})]},r)})),Object(a.jsx)(W.a,{divider:!0}),Object(a.jsx)(W.a,{disabled:!n.field,onClick:function(){return c()},children:Object(a.jsx)("i",{children:"Clear selection"})})]})]})}var Me=r(286);function Ge(e,t){var r=new Set;return function(n){var c=n.createNewVisits,s=n.loadMercureInfo,i=n.mercureInfo,o=i.interval;return Object(M.useEffect)((function(){var e=function(e,t,r,n){var c=e.mercureHubUrl,a=e.token,s=e.loading,i=e.error;if(!s&&!i&&c){var o=function(e){var t=e.data;return r(JSON.parse(t))},l=function(e){return 401===e.status&&n()},u=t.map((function(e){var t=new URL(c);t.searchParams.append("topic",e);var r=new Me.EventSourcePolyfill(t,{headers:{Authorization:"Bearer ".concat(a)}});return r.onmessage=o,r.onerror=l,r}));return function(){return u.forEach((function(e){return e.close()}))}}}(i,t(n),(function(e){return o?r.add(e):c([e])}),s);if(!o)return e;var a=setInterval((function(){c(Object(Ue.a)(r)),r.clear()}),1e3*o*60);return Object(F.a)((function(){return clearInterval(a)}),(function(){return null===e||void 0===e?void 0:e()}))}),[i]),Object(a.jsx)(e,Object(d.a)({},n))}}var Pe=function e(){Object(g.a)(this,e)};function Be(e){var t=e.currentOrder,r=e.field,n=e.className,c=void 0===n?"ml-1":n;return t.dir&&t.field===r?Object(a.jsx)(I.a,{icon:"ASC"===t.dir?V.f:V.e,className:c}):null}Pe.visits="https://shlink.io/new-visit",Pe.orphanVisits="https://shlink.io/new-orphan-visit",Pe.shortUrlVisits=function(e){return"https://shlink.io/new-visit/".concat(e)};var He,We,qe,ze,Qe,Ke,Je,Ze,Ye,Xe,$e,et,tt,rt,nt,ct,at,st,it,ot=function(e,t){return function(r,n){var c=n.type,a=e[c],s=null!==r&&void 0!==r?r:t;return a?a(s,n):s}},lt=function(e){return function(){return{type:e}}},ut=r(566),dt=r(567),jt=r(287),bt=r(568),ht=function(e,t,r){return Object(C.a)(r)?e.shortCode===t&&!e.domain:e.shortCode===t&&e.domain===r},Ot="shlink/visitCreation/CREATE_VISITS",vt=function(e){return{type:Ot,createdVisits:e}},ft=function(e){var t;return null===(t=e.response)||void 0===t?void 0:t.data},mt=function(e){return"INVALID_SHORTCODE_DELETION"===(null===e||void 0===e?void 0:e.type)},xt="shlink/deleteShortUrl/DELETE_SHORT_URL_START",gt="shlink/deleteShortUrl/DELETE_SHORT_URL_ERROR",pt="shlink/deleteShortUrl/SHORT_URL_DELETED",yt="shlink/deleteShortUrl/RESET_DELETE_SHORT_URL",St={shortCode:"",loading:!1,error:!1},Ct=ot((He={},Object(u.a)(He,xt,(function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!0,error:!1})})),Object(u.a)(He,gt,(function(e,t){var r=t.errorData;return Object(d.a)(Object(d.a)({},e),{},{errorData:r,loading:!1,error:!0})})),Object(u.a)(He,pt,(function(e,t){var r=t.shortCode;return Object(d.a)(Object(d.a)({},e),{},{shortCode:r,loading:!1,error:!1})})),Object(u.a)(He,yt,(function(){return St})),He),St),Nt=function(e){return function(t,r){return function(){var n=Object(x.a)(m.a.mark((function n(c,a){var s,i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c({type:xt}),s=e(a),i=s.deleteShortUrl,n.prev=2,n.next=5,i(t,r);case 5:c({type:pt,shortCode:t,domain:r}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(2),c({type:gt,errorData:ft(n.t0)}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e,t){return n.apply(this,arguments)}}()}},wt=lt(yt),kt="shlink/createShortUrl/CREATE_SHORT_URL_START",_t="shlink/createShortUrl/CREATE_SHORT_URL_ERROR",Ut="shlink/createShortUrl/CREATE_SHORT_URL",Tt="shlink/createShortUrl/RESET_CREATE_SHORT_URL",Rt={result:null,saving:!1,error:!1},Et=ot((We={},Object(u.a)(We,kt,(function(e){return Object(d.a)(Object(d.a)({},e),{},{saving:!0,error:!1})})),Object(u.a)(We,_t,(function(e,t){var r=t.errorData;return Object(d.a)(Object(d.a)({},e),{},{saving:!1,error:!0,errorData:r})})),Object(u.a)(We,Ut,(function(e,t){return{result:t.result,saving:!1,error:!1}})),Object(u.a)(We,Tt,(function(){return Rt})),We),Rt),Dt=function(e){return function(t){return function(){var r=Object(x.a)(m.a.mark((function r(n,c){var a,s,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:kt}),a=e(c),s=a.createShortUrl,r.prev=2,r.next=5,s(t);case 5:i=r.sent,n({type:Ut,result:i}),r.next=13;break;case 9:throw r.prev=9,r.t0=r.catch(2),n({type:_t,errorData:ft(r.t0)}),r.t0;case 13:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e,t){return r.apply(this,arguments)}}()}},Lt=lt(Tt),Vt=r(38),It="shlink/shortUrlEdition/EDIT_SHORT_URL_START",Ft="shlink/shortUrlEdition/EDIT_SHORT_URL_ERROR",At="shlink/shortUrlEdition/SHORT_URL_EDITED",Mt=ot((qe={},Object(u.a)(qe,It,(function(e){return Object(d.a)(Object(d.a)({},e),{},{saving:!0,error:!1})})),Object(u.a)(qe,Ft,(function(e,t){var r=t.errorData;return Object(d.a)(Object(d.a)({},e),{},{saving:!1,error:!0,errorData:r})})),Object(u.a)(qe,At,(function(e,t){return{shortUrl:t.shortUrl,saving:!1,error:!1}})),qe),{saving:!1,error:!1}),Gt=function(e){return function(t,r,n){return function(){var c=Object(x.a)(m.a.mark((function c(a,s){var i,o,l,u,d,j,b,h,O;return m.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return a({type:It}),i=s(),o=i.selectedServer,l=!Object(Vt.k)(o),u=e(s),d=u.updateShortUrl,j=u.updateShortUrlTags,c.prev=4,c.next=7,Promise.all([d(t,r,n),l&&n.tags?j(t,r,n.tags):void 0]);case 7:b=c.sent,h=Object(p.a)(b,1),O=h[0],a({shortUrl:O,type:At}),c.next=17;break;case 13:throw c.prev=13,c.t0=c.catch(4),a({type:Ft,errorData:ft(c.t0)}),c.t0;case 17:case"end":return c.stop()}}),c,null,[[4,13]])})));return function(e,t){return c.apply(this,arguments)}}()}},Pt="shlink/shortUrlsList/LIST_SHORT_URLS_START",Bt="shlink/shortUrlsList/LIST_SHORT_URLS_ERROR",Ht="shlink/shortUrlsList/LIST_SHORT_URLS",Wt=ot((ze={},Object(u.a)(ze,Pt,(function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!0,error:!1})})),Object(u.a)(ze,Bt,(function(){return{loading:!1,error:!0}})),Object(u.a)(ze,Ht,(function(e,t){return{loading:!1,error:!1,shortUrls:t.shortUrls}})),Object(u.a)(ze,pt,Object(F.a)((function(e,t){var r=t.shortCode,n=t.domain;return e.shortUrls?Object(ut.a)(["shortUrls","data"],Object(S.a)((function(e){return ht(e,r,n)}),e.shortUrls.data),e):e}),(function(e){return e.shortUrls?Object(ut.a)(["shortUrls","pagination","totalItems"],e.shortUrls.pagination.totalItems-1,e):e}))),Object(u.a)(ze,Ot,(function(e,t){var r,n,c=t.createdVisits;return Object(ut.a)(["shortUrls","data"],null===(r=e.shortUrls)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.map((function(e){var t=Object(dt.a)(c.filter((function(t){var r=t.shortUrl;return r&&ht(e,r.shortCode,r.domain)})));return null!==t&&void 0!==t&&t.shortUrl?Object(jt.a)("visitsCount",t.shortUrl.visitsCount,e):e})),e)})),Object(u.a)(ze,Ut,Object(F.a)((function(e,t){var r=t.result;return e.shortUrls?Object(ut.a)(["shortUrls","data"],[r].concat(Object(Ue.a)(Object(bt.a)(e.shortUrls.data))),e):e}),(function(e){return e.shortUrls?Object(ut.a)(["shortUrls","pagination","totalItems"],e.shortUrls.pagination.totalItems+1,e):e}))),Object(u.a)(ze,At,(function(e,t){var r=t.shortUrl;return e.shortUrls?Object(ut.a)(["shortUrls","data"],e.shortUrls.data.map((function(e){var t=r.shortCode,n=r.domain;return ht(e,t,n)?r:e})),e):e})),ze),{loading:!0,error:!1}),qt=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var r=Object(x.a)(m.a.mark((function r(n,c){var a,s,i;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:Pt}),a=e(c),s=a.listShortUrls,r.prev=2,r.next=5,s(t);case 5:i=r.sent,n({type:Ht,shortUrls:i,params:t}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(2),n({type:Bt,params:t});case 12:case"end":return r.stop()}}),r,null,[[2,9]])})));return function(e,t){return r.apply(this,arguments)}}()}},zt="shlink/shortUrlsListParams/RESET_SHORT_URL_PARAMS",Qt={dateCreated:"Created at",shortCode:"Short URL",longUrl:"Long URL",title:"Title",visits:"Visits"},Kt={page:"1",orderBy:{dateCreated:"DESC"}},Jt=ot((Qe={},Object(u.a)(Qe,Ht,(function(e,t){var r=t.params;return Object(d.a)(Object(d.a)({},e),r)})),Object(u.a)(Qe,zt,(function(){return Kt})),Qe),Kt),Zt=lt(zt),Yt=r(570),Xt=r(571),$t=r(572),er=r(546),tr=r(288),rr=r(569),nr=Math.ceil,cr=new Intl.NumberFormat("en-US"),ar=function(e){return cr.format(Number(e))},sr="...",ir=function(e,t){var r=Object(er.a)(Object(tr.a)(2,e-2),Object(rr.a)(t-1,e+2)+1);return e-2>2&&r.unshift(sr),e+2<t-1&&r.push(sr),r.unshift(1),r.push(t),r},or=function(e){return e===sr},lr=function(e){return or(e)?e:ar(e)},ur=function(e,t){return or(e)?"".concat(e,"_").concat(t):"".concat(e)},dr=function(e){var t=e.paginator,r=e.serverId,n=e.currentQueryString,c=void 0===n?"":n,s=null!==t&&void 0!==t?t:{},i=s.currentPage,l=void 0===i?0:i,u=s.pagesCount,d=void 0===u?0:u,j=function(e){return"/server/".concat(r,"/list-short-urls/").concat(e).concat(c)};if(d<=1)return null;return Object(a.jsxs)($t.a,{className:"sticky-card-paginator",listClassName:"flex-wrap justify-content-center mb-0",children:[Object(a.jsx)(Yt.a,{disabled:1===l,children:Object(a.jsx)(Xt.a,{previous:!0,tag:o.b,to:j(l-1)})}),ir(l,d).map((function(e,t){return Object(a.jsx)(Yt.a,{disabled:or(e),active:l===e,children:Object(a.jsx)(Xt.a,{tag:o.b,to:j(e),children:lr(e)})},ur(e,t))})),Object(a.jsx)(Yt.a,{disabled:l>=d,children:Object(a.jsx)(Xt.a,{next:!0,tag:o.b,to:j(l+1)})})]})},jr=function(e,t){return Ge((function(r){var n,c=r.listShortUrls,s=r.resetShortUrlParams,i=r.shortUrlsListParams,o=r.match,l=r.location,j=r.history,b=r.shortUrlsList,h=r.selectedServer,O=Object(v.a)(h),f=i.orderBy,m=Object(M.useState)({field:f&&Object(Te.a)(Object(Re.a)(f)),dir:f&&Object(Te.a)(Object(Ee.a)(f))}),x=Object(p.a)(m,2),g=x[0],y=x[1],S=we({history:j,match:o,location:l}),C=Object(p.a)(S,2),N=C[0],w=N.tags,k=N.search,_=N.startDate,U=N.endDate,T=C[1],R=Object(M.useMemo)((function(){var e;return null!==(e=null===w||void 0===w?void 0:w.split(","))&&void 0!==e?e:[]}),[w]),E=(null!==(n=null===b||void 0===b?void 0:b.shortUrls)&&void 0!==n?n:{}).pagination,D=function(e){return c(Object(d.a)(Object(d.a)({},i),e))},L=function(e,t){y({field:e,dir:t}),D({orderBy:e?Object(u.a)({},e,t):void 0})},V=Object(F.a)((function(e){return Object(Ue.a)(new Set([].concat(Object(Ue.a)(R),[e]))).join(",")}),(function(e){return T({tags:e})}));return Object(M.useEffect)((function(){return s}),[]),Object(M.useEffect)((function(){D({page:o.params.page,searchTerm:k,tags:R,itemsPerPage:void 0,startDate:_,endDate:U})}),[o.params.page,k,R,_,U]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)(t,{})}),Object(a.jsx)("div",{className:"d-block d-lg-none mb-3",children:Object(a.jsx)(Ae,{items:Qt,order:g,onChange:L})}),Object(a.jsxs)(De.a,{body:!0,className:"pb-1",children:[Object(a.jsx)(e,{selectedServer:h,shortUrlsList:b,orderByColumn:function(e){return function(){return L(e,Ie(e,g.field,g.dir))}},renderOrderIcon:function(e){return Object(a.jsx)(Be,{currentOrder:g,field:e})},onTagClick:V}),Object(a.jsx)(dr,{paginator:E,serverId:O,currentQueryString:l.search})]})]})}),(function(){return[Pe.visits]}))},br=r(52),hr=r(159),Or=r.n(hr),vr=function(e){var t=e.text,r=e.onCopy;return Object(a.jsx)(Or.a,{text:t,onCopy:r,children:Object(a.jsx)(I.a,{icon:pe.c,className:"ml-2 copy-to-clipboard-icon"})})},fr=r(574),mr=r(615),xr=function(e){var t=e.date,r=e.format,n=void 0===r?"yyyy-MM-dd HH:mm":r,c=e.relative,s=void 0!==c&&c,i=ae(t)?t:Object(A.default)(t);return Object(a.jsx)("time",{dateTime:"".concat(Object(fr.a)(i),"000"),children:s?"".concat(Object(mr.a)(new Date,i)," ago"):Object(ee.default)(i,n)})},gr=r(575),pr=function(e,t,r){var n=e.id,c=t.shortCode,a=t.domain,s=a?"?domain=".concat(a):"";return"/server/".concat(n,"/short-code/").concat(c,"/").concat(r).concat(s)},yr=function(e){var t=e.selectedServer,r=e.shortUrl,n=e.suffix,c=e.children,s=Object(y.a)(e,["selectedServer","shortUrl","suffix","children"]);return t&&Object(v.e)(t)&&r?Object(a.jsx)(o.b,Object(d.a)(Object(d.a)({to:pr(t,r,n)},s),{},{children:c})):Object(a.jsx)("span",Object(d.a)(Object(d.a)({},s),{},{children:c}))},Sr=function(e){var t,r=e.visitsCount,n=e.shortUrl,c=e.selectedServer,s=e.active,i=void 0!==s&&s,o=null===n||void 0===n||null===(t=n.meta)||void 0===t?void 0:t.maxVisits,l=Object(a.jsx)(yr,{selectedServer:c,shortUrl:n,suffix:"visits",children:Object(a.jsx)("strong",{className:P()("short-url-visits-count__amount",{"short-url-visits-count__amount--big":i}),children:ar(r)})});if(!o)return l;var u=ar(o),d=Object(M.useRef)();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{className:"indivisible",children:[l,Object(a.jsxs)("small",{className:"short-urls-visits-count__max-visits-control",ref:function(e){d.current=e},children:[" ","/ ",u," ",Object(a.jsx)("sup",{children:Object(a.jsx)(I.a,{icon:V.u})})]})]}),Object(a.jsxs)(gr.a,{target:function(){return d.current},placement:"bottom",children:["This short URL will not accept more than ",Object(a.jsx)("b",{children:u})," visits."]})]})},Cr=function(e,t,r){return function(n){var c,s,i=n.shortUrl,o=n.selectedServer,l=n.onTagClick,u=r(),d=Object(p.a)(u,2),j=d[0],b=d[1],h=r(!1,500),O=Object(p.a)(h,2),v=O[0],f=O[1],m=Object(M.useRef)(!0);return Object(M.useEffect)((function(){m.current?m.current=!1:f()}),[i.visitsCount]),Object(a.jsxs)("tr",{className:"responsive-table__row",children:[Object(a.jsx)("td",{className:"indivisible short-urls-row__cell responsive-table__cell","data-th":"Created at",children:Object(a.jsx)(xr,{date:i.dateCreated})}),Object(a.jsx)("td",{className:"responsive-table__cell short-urls-row__cell","data-th":"Short URL",children:Object(a.jsxs)("span",{className:"indivisible short-urls-row__cell--relative",children:[Object(a.jsx)(br.a,{href:i.shortUrl}),Object(a.jsx)(vr,{text:i.shortUrl,onCopy:b}),Object(a.jsx)("span",{className:"badge badge-warning short-urls-row__copy-hint",hidden:!j,children:"Copied short URL!"})]})}),Object(a.jsx)("td",{className:"responsive-table__cell short-urls-row__cell short-urls-row__cell--break","data-th":"".concat(i.title?"Title":"Long URL"),children:Object(a.jsx)(br.a,{href:i.longUrl,children:null!==(c=i.title)&&void 0!==c?c:i.longUrl})}),i.title&&Object(a.jsx)("td",{className:"short-urls-row__cell responsive-table__cell short-urls-row__cell--break d-lg-none","data-th":"Long URL",children:Object(a.jsx)(br.a,{href:i.longUrl})}),Object(a.jsx)("td",{className:"responsive-table__cell short-urls-row__cell","data-th":"Tags",children:(s=i.tags,Object(N.a)(s)?Object(a.jsx)("i",{className:"indivisible",children:Object(a.jsx)("small",{children:"No tags"})}):s.map((function(e){return Object(a.jsx)(H,{colorGenerator:t,text:e,onClick:function(){return null===l||void 0===l?void 0:l(e)}},e)})))}),Object(a.jsx)("td",{className:"responsive-table__cell short-urls-row__cell text-lg-right","data-th":"Visits",children:Object(a.jsx)(Sr,{visitsCount:i.visitsCount,shortUrl:i,selectedServer:o,active:v})}),Object(a.jsx)("td",{className:"responsive-table__cell short-urls-row__cell",children:Object(a.jsx)(e,{selectedServer:o,shortUrl:i})})]})}},Nr=r(576),wr=function(e){var t=e.isOpen,r=e.toggle,n=e.children,c=e.right,s=void 0===c||c;return Object(a.jsxs)(Nr.a,{toggle:r,isOpen:t,children:[Object(a.jsxs)(z.a,{size:"sm",caret:!0,outline:!0,className:"dropdown-btn-menu__dropdown-toggle",children:["\xa0",Object(a.jsx)(I.a,{icon:V.n}),"\xa0"]}),Object(a.jsx)(Q.a,{right:s,children:n})]})},kr=function(e,t){return function(r){var n=r.shortUrl,c=r.selectedServer,s=Object(K.d)(),i=Object(p.a)(s,2),o=i[0],l=i[1],u=Object(K.d)(),d=Object(p.a)(u,2),j=d[0],b=d[1],h=Object(K.d)(),O=Object(p.a)(h,2),v=O[0],f=O[1];return Object(a.jsxs)(wr,{toggle:l,isOpen:o,children:[Object(a.jsxs)(W.a,{tag:yr,selectedServer:c,shortUrl:n,suffix:"visits",children:[Object(a.jsx)(I.a,{icon:V.g,fixedWidth:!0})," Visit stats"]}),Object(a.jsxs)(W.a,{tag:yr,selectedServer:c,shortUrl:n,suffix:"edit",children:[Object(a.jsx)(I.a,{icon:V.m,fixedWidth:!0})," Edit short URL"]}),Object(a.jsxs)(W.a,{onClick:b,children:[Object(a.jsx)(I.a,{icon:V.F,fixedWidth:!0})," QR code"]}),Object(a.jsx)(t,{shortUrl:n,isOpen:j,toggle:b}),Object(a.jsx)(W.a,{divider:!0}),Object(a.jsxs)(W.a,{className:"dropdown-item--danger",onClick:f,children:[Object(a.jsx)(I.a,{icon:V.y,fixedWidth:!0})," Delete short URL"]}),Object(a.jsx)(e,{shortUrl:n,isOpen:v,toggle:f})]})}},_r=function(e,t){return function(r){var n=r.createShortUrl,c=r.shortUrlCreationResult,s=r.resetCreateShortUrl,i=r.selectedServer,o=r.basicMode,l=void 0!==o&&o,u=r.settings.shortUrlCreation,j=Object(M.useMemo)((function(){return function(e){var t,r;return{longUrl:"",tags:[],customSlug:"",title:void 0,shortCodeLength:void 0,domain:"",validSince:void 0,validUntil:void 0,maxVisits:void 0,findIfExists:!1,validateUrl:null!==(t=null===e||void 0===e?void 0:e.validateUrls)&&void 0!==t&&t,forwardQuery:null===(r=null===e||void 0===e?void 0:e.forwardQuery)||void 0===r||r}}(u)}),[u]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(e,{initialState:j,saving:c.saving,selectedServer:i,mode:l?"create-basic":"create",onSave:function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.abrupt("return",n(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(a.jsx)(t,Object(d.a)(Object(d.a)({},c),{},{resetCreateShortUrl:s,canBeClosed:l}))]})}},Ur=r(617),Tr=r(577),Rr=r(578),Er=r(579),Dr=r(547),Lr=r(31),Vr=r(541),Ir=r(32),Fr=function(e){var t=e.children,r=e.type,n=e.className,c=e.small,s=void 0!==c&&c;return Object(a.jsx)(Vr.a,{className:n,children:Object(a.jsx)("div",{className:P()({"col-md-10 offset-md-1":!s,"col-12":s}),children:Object(a.jsx)(Ir.a,{className:P()("text-center",{"bg-main":"success"===r,"bg-danger":"error"===r,"bg-warning":"warning"===r,"text-white":"warning"!==r}),bodyClassName:P()({"p-2":s}),children:t})})})},Ar=function(e){var t,r,n=e.errorData,c=e.fallbackMessage;return Object(a.jsxs)(a.Fragment,{children:[null!==(t=null===n||void 0===n?void 0:n.detail)&&void 0!==t?t:c,(r=n,"INVALID_ARGUMENT"===(null===r||void 0===r?void 0:r.type)&&Object(a.jsxs)("p",{className:"mb-0",children:["Invalid elements: [",n.invalidElements.join(", "),"]"]}))]})},Mr=function(e){var t=e.shortUrl,r=e.toggle,n=e.isOpen,c=e.shortUrlDeletion,s=e.resetDeleteShortUrl,i=e.deleteShortUrl,o=Object(M.useState)(""),l=Object(p.a)(o,2),u=l[0],d=l[1];Object(M.useEffect)((function(){return s}),[]);var j=c.error,b=c.errorData,h=Object(F.a)(s,r),O=Object(Lr.b)((function(){var e=t.shortCode,n=t.domain;i(e,n).then(r).catch(Dr.a)}));return Object(a.jsx)(Ur.a,{isOpen:n,toggle:h,centered:!0,children:Object(a.jsxs)("form",{onSubmit:O,children:[Object(a.jsx)(Tr.a,{toggle:h,children:Object(a.jsx)("span",{className:"text-danger",children:"Delete short URL"})}),Object(a.jsxs)(Rr.a,{children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("b",{className:"text-danger",children:"Caution!"})," You are about to delete a short URL."]}),Object(a.jsx)("p",{children:"This action cannot be undone. Once you have deleted it, all the visits stats will be lost."}),Object(a.jsxs)("p",{children:["Write ",Object(a.jsx)("b",{children:t.shortCode})," to confirm deletion."]}),Object(a.jsx)("input",{type:"text",className:"form-control",placeholder:"Insert the short code (".concat(t.shortCode,")"),value:u,onChange:function(e){return d(e.target.value)}}),j&&Object(a.jsx)(Fr,{type:mt(b)?"warning":"error",small:!0,className:"mt-2",children:Object(a.jsx)(Ar,{errorData:b,fallbackMessage:"Something went wrong while deleting the URL :("})})]}),Object(a.jsxs)(Er.a,{children:[Object(a.jsx)("button",{type:"button",className:"btn btn-link",onClick:h,children:"Cancel"}),Object(a.jsx)("button",{type:"submit",className:"btn btn-danger",disabled:u!==t.shortCode||c.loading,children:c.loading?"Deleting...":"Delete"})]})]})})},Gr=r(220),Pr=function(e){return function(t){var r=t.error,n=t.errorData,c=t.result,s=t.resetCreateShortUrl,i=t.canBeClosed,o=void 0!==i&&i,l=e(),u=Object(p.a)(l,2),d=u[0],j=u[1];if(Object(M.useEffect)((function(){s()}),[]),r)return Object(a.jsxs)(Fr,{type:"error",className:"mt-3",children:[o&&Object(a.jsx)(I.a,{icon:V.P,className:"float-right pointer",onClick:s}),Object(a.jsx)(Ar,{errorData:n,fallbackMessage:"An error occurred while creating the URL :("})]});if(Object(C.a)(c))return null;var b=c.shortUrl;return Object(a.jsxs)(Fr,{type:"success",className:"mt-3",children:[o&&Object(a.jsx)(I.a,{icon:V.P,className:"float-right pointer",onClick:s}),Object(a.jsx)("b",{children:"Great!"})," The short URL is ",Object(a.jsx)("b",{children:b}),Object(a.jsx)(Or.a,{text:b,onCopy:j,children:Object(a.jsxs)("button",{className:"btn btn-light btn-sm create-short-url-result__copy-btn",id:"copyBtn",type:"button",children:[Object(a.jsx)(I.a,{icon:pe.c})," Copy"]})}),Object(a.jsx)(Gr.a,{placement:"left",isOpen:d,target:"copyBtn",children:"Copied!"})]})}},Br=function(e){return function(t){var r=t.orderByColumn,n=t.renderOrderIcon,c=t.shortUrlsList,s=t.onTagClick,i=t.selectedServer,o=t.className,l=c.error,u=c.loading,d=c.shortUrls,j=P()({"short-urls-table__header-cell--with-action":!!r}),b=P()("short-urls-table__header-cell",j),h=P()("table table-hover",o),O=Object(Vt.j)(i);return Object(a.jsxs)("table",{className:h,children:[Object(a.jsx)("thead",{className:"responsive-table__header short-urls-table__header",children:Object(a.jsxs)("tr",{children:[Object(a.jsxs)("th",{className:b,onClick:null===r||void 0===r?void 0:r("dateCreated"),children:["Created at ",null===n||void 0===n?void 0:n("dateCreated")]}),Object(a.jsxs)("th",{className:b,onClick:null===r||void 0===r?void 0:r("shortCode"),children:["Short URL ",null===n||void 0===n?void 0:n("shortCode")]}),!O&&Object(a.jsxs)("th",{className:b,onClick:null===r||void 0===r?void 0:r("longUrl"),children:["Long URL ",null===n||void 0===n?void 0:n("longUrl")]})||Object(a.jsxs)("th",{className:"short-urls-table__header-cell",children:[Object(a.jsxs)("span",{className:j,onClick:null===r||void 0===r?void 0:r("title"),children:["Title ",null===n||void 0===n?void 0:n("title")]}),"\xa0\xa0/\xa0\xa0",Object(a.jsxs)("span",{className:j,onClick:null===r||void 0===r?void 0:r("longUrl"),children:[Object(a.jsx)("span",{className:"indivisible",children:"Long URL"})," ",null===n||void 0===n?void 0:n("longUrl")]})]}),Object(a.jsx)("th",{className:"short-urls-table__header-cell",children:"Tags"}),Object(a.jsx)("th",{className:b,onClick:null===r||void 0===r?void 0:r("visits"),children:Object(a.jsxs)("span",{className:"indivisible",children:["Visits ",null===n||void 0===n?void 0:n("visits")]})}),Object(a.jsx)("th",{className:"short-urls-table__header-cell",children:"\xa0"})]})}),Object(a.jsx)("tbody",{children:l?Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:6,className:"text-center table-danger text-dark",children:"Something went wrong while loading short URLs :("})}):u?Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:6,className:"text-center",children:"Loading..."})}):!u&&Object(N.a)(null===d||void 0===d?void 0:d.data)?Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:6,className:"text-center",children:"No results found"})}):null===d||void 0===d?void 0:d.data.map((function(t){return Object(a.jsx)(e,{shortUrl:t,selectedServer:i,onTagClick:s},t.shortUrl)}))})]})}},Hr=r(580),Wr=r(217),qr=function(e){var t=e.format,r=e.setFormat;return Object(a.jsxs)(J,{text:"Format (".concat(t,")"),children:[Object(a.jsx)(W.a,{active:"png"===t,onClick:function(){return r("png")},children:"PNG"}),Object(a.jsx)(W.a,{active:"svg"===t,onClick:function(){return r("svg")},children:"SVG"})]})},zr=function(e){var t=e.errorCorrection,r=e.setErrorCorrection;return Object(a.jsxs)(J,{text:"Error correction (".concat(t,")"),children:[Object(a.jsxs)(W.a,{active:"L"===t,onClick:function(){return r("L")},children:[Object(a.jsx)("b",{children:"L"}),"ow"]}),Object(a.jsxs)(W.a,{active:"M"===t,onClick:function(){return r("M")},children:[Object(a.jsx)("b",{children:"M"}),"edium"]}),Object(a.jsxs)(W.a,{active:"Q"===t,onClick:function(){return r("Q")},children:[Object(a.jsx)("b",{children:"Q"}),"uartile"]}),Object(a.jsxs)(W.a,{active:"H"===t,onClick:function(){return r("H")},children:[Object(a.jsx)("b",{children:"H"}),"igh"]})]})},Qr=function(e,t){return function(r){var n=r.shortUrl,c=n.shortUrl,s=n.shortCode,i=r.toggle,o=r.isOpen,l=r.selectedServer,u=Object(M.useState)(300),d=Object(p.a)(u,2),j=d[0],b=d[1],h=Object(M.useState)(0),O=Object(p.a)(h,2),v=O[0],f=O[1],g=Object(M.useState)("png"),y=Object(p.a)(g,2),S=y[0],C=y[1],k=Object(M.useState)("L"),_=Object(p.a)(k,2),U=_[0],T=_[1],R=Object(M.useMemo)((function(){return{useSizeInPath:!Object(Vt.h)(l),marginIsSupported:Object(Vt.g)(l),errorCorrectionIsSupported:Object(Vt.i)(l)}}),[l]),E=R.marginIsSupported!==R.errorCorrectionIsSupported,D=Object(M.useMemo)((function(){return function(e,t,r){var n=t.size,c=t.format,a=t.margin,s=t.errorCorrection,i=r.useSizeInPath,o=r.marginIsSupported,l=r.errorCorrectionIsSupported,u="".concat(e,"/qr-code").concat(i?"/".concat(n):""),d=Object(w.b)({size:i?void 0:n,format:c,margin:o&&a>0?a:void 0,errorCorrection:l?s:void 0});return"".concat(u).concat(Object(N.a)(d)?"":"?".concat(d))}(c,{size:j,format:S,margin:v,errorCorrection:U},R)}),[c,j,S,v,U,R]),L=Object(M.useMemo)((function(){return j+v}),[j,v]),F=Object(M.useMemo)((function(){if(!(L<500))return L<800?"lg":"xl"}),[L]);return Object(a.jsxs)(Ur.a,{isOpen:o,toggle:i,centered:!0,size:F,children:[Object(a.jsxs)(Tr.a,{toggle:i,children:["QR code for ",Object(a.jsx)(br.a,{href:c,children:c})]}),Object(a.jsxs)(Rr.a,{children:[Object(a.jsxs)(Vr.a,{children:[Object(a.jsxs)(Hr.a,{className:P()({"col-md-4":E,"col-md-6":!E}),children:[Object(a.jsxs)("label",{className:"mb-0",children:["Size: ",j,"px"]}),Object(a.jsx)("input",{type:"range",className:"form-control-range",value:j,step:10,min:50,max:1e3,onChange:function(e){return b(Number(e.target.value))}})]}),R.marginIsSupported&&Object(a.jsxs)(Hr.a,{className:E?"col-md-4":"col-md-6",children:[Object(a.jsxs)("label",{className:"mb-0",children:["Margin: ",v,"px"]}),Object(a.jsx)("input",{type:"range",className:"form-control-range",value:v,step:1,min:0,max:100,onChange:function(e){return f(Number(e.target.value))}})]}),Object(a.jsx)(Hr.a,{className:E?"col-md-4":"col-md-6",children:Object(a.jsx)(qr,{format:S,setFormat:C})}),R.errorCorrectionIsSupported&&Object(a.jsx)(Hr.a,{className:"col-md-6",children:Object(a.jsx)(zr,{errorCorrection:U,setErrorCorrection:T})})]}),Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsxs)("div",{className:"mb-3",children:[Object(a.jsx)(br.a,{href:D}),Object(a.jsx)(vr,{text:D})]}),Object(a.jsx)("img",{src:D,className:"qr-code-modal__img",alt:"QR code"}),Object(a.jsx)(t,{minVersion:"2.9.0",children:Object(a.jsx)("div",{className:"mt-3",children:Object(a.jsxs)(Wr.a,{block:!0,color:"primary",onClick:Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.saveImage(D,"".concat(s,"-qr-code.").concat(S)));case 1:case"end":return t.stop()}}),t)}))),children:["Download ",Object(a.jsx)(I.a,{icon:V.q,className:"ml-1"})]})})})]})]})]})}},Kr=r(585),Jr=r(581),Zr=r(582),Yr=r(583),Xr=r(584),$r=r(612),en=function(e){var t=e.checked,r=void 0!==t&&t,n=e.onChange,c=void 0===n?Dr.a:n,s=e.className,i=e.children,o=e.type,l=e.inline,u=void 0!==l&&l,d=Object(M.useRef)(Object($r.a)()).current,j={"custom-switch":"switch"===o,"custom-checkbox":"checkbox"===o},b=u?{display:"inline-block"}:{};return Object(a.jsxs)("span",{className:P()("custom-control",j,s),style:b,children:[Object(a.jsx)("input",{type:"checkbox",className:"custom-control-input",id:d,checked:r,onChange:function(e){return c(e.target.checked,e)}}),Object(a.jsx)("label",{className:"custom-control-label",htmlFor:d,children:i})]})},tn=function(e){return Object(a.jsx)(en,Object(d.a)({type:"checkbox"},e))},rn=function(e){var t=e.isOpen,r=e.toggle;return Object(a.jsxs)(Ur.a,{isOpen:t,toggle:r,centered:!0,size:"lg",children:[Object(a.jsx)(Tr.a,{toggle:r,children:"Info"}),Object(a.jsxs)(Rr.a,{children:[Object(a.jsxs)("p",{children:["When the\xa0",Object(a.jsx)("b",{children:Object(a.jsx)("i",{children:'"Use existing URL if found"'})}),"\xa0checkbox is checked, the server will return an existing short URL if it matches provided params."]}),Object(a.jsx)("p",{children:"These are the checks performed by Shlink in order to determine if an existing short URL should be returned:"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"When only the long URL is provided: The most recent match will be returned, or a new short URL will be created if none is found."}),Object(a.jsxs)("li",{children:["When long URL and custom slug and/or domain are provided: Same as in previous case, but it will try to match the short URL using both the long URL and the slug, the long URL and the domain, or the three of them.",Object(a.jsx)("br",{}),"If the slug is being used by another long URL, an error will be returned."]}),Object(a.jsx)("li",{children:"When other params are provided: Same as in previous cases, but it will try to match existing short URLs with all provided data. If any of them does not match, a new short URL will be created"})]})]})]})},nn=function(){var e=Object(K.d)(),t=Object(p.a)(e,2),r=t[0],n=t[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{title:"What does this mean?",children:Object(a.jsx)(I.a,{icon:V.u,style:{cursor:"pointer"},onClick:n})}),Object(a.jsx)(rn,{isOpen:r,toggle:n})]})},cn=function(e){var t=e.className,r=void 0===t?"":t,n=e.placement,c=e.children,s=Object(M.useRef)();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:r,ref:function(e){s.current=e},children:Object(a.jsx)(I.a,{icon:V.u})}),Object(a.jsx)(gr.a,{target:function(){return s.current},placement:n,children:c})]})},an=function(e){var t=e.children,r=e.infoTooltip,n=e.checked,c=e.onChange;return Object(a.jsxs)("p",{children:[Object(a.jsx)(tn,{inline:!0,checked:n,className:r?"mr-2":"",onChange:c,children:t}),r&&Object(a.jsx)(cn,{placement:"right",children:r})]})},sn=Object(F.a)(Jr.a,Object(Zr.a)(/ /g,"-")),on=function(e){return"string"===typeof e?Object(A.default)(e):e},ln=function(e){return{"col-sm-6":e,"col-sm-12":!e}},un=function(e,t){return function(r){var n,c=r.mode,s=r.saving,i=r.onSave,o=r.initialState,l=r.selectedServer,j=Object(M.useState)(o),b=Object(p.a)(j,2),h=b[0],O=b[1],v="edit"===c,f="create-basic"===c,g=Object(Lr.c)(o.title),y=function(){var e=Object(Lr.c)(h.title);return Object(Yr.a)([[function(){return!e&&!g},function(){}],[function(){return!e&&g},function(){return null}],[Xr.a,function(){return h.title}]])()},S=Object(Lr.b)(Object(x.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(Object(d.a)(Object(d.a)({},h),{},{validSince:null!==(t=ie(h.validSince))&&void 0!==t?t:null,validUntil:null!==(r=ie(h.validUntil))&&void 0!==r?r:null,maxVisits:Object(Lr.c)(h.maxVisits)?Number(h.maxVisits):null,title:y()})).then((function(){return!v&&O(o)})).catch((function(){})));case 1:case"end":return e.stop()}}),e)}))));Object(M.useEffect)((function(){O(o)}),[o]);var C=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Object(a.jsx)(Hr.a,Object(d.a)(Object(d.a)({},s),{},{children:Object(a.jsx)(Kr.a,Object(d.a)({id:e,type:n,placeholder:t,value:null!==(r=h[e])&&void 0!==r?r:"",onChange:function(t){return O(Object(d.a)(Object(d.a)({},h),{},Object(u.a)({},e,t.target.value)))}},c))}))},w=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(ye,Object(d.a)({selected:h[e]?on(h[e]):null,placeholderText:t,isClearable:!0,onChange:function(t){return O(Object(d.a)(Object(d.a)({},h),{},Object(u.a)({},e,t)))}},r))})},k=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Hr.a,{children:Object(a.jsx)(Kr.a,{bsSize:"lg",type:"url",placeholder:"URL to be shortened",required:!0,value:h.longUrl,onChange:function(e){return O(Object(d.a)(Object(d.a)({},h),{},{longUrl:e.target.value}))}})}),Object(a.jsxs)(Vr.a,{children:[f&&C("customSlug","Custom slug","text",{bsSize:"lg"},{className:"col-lg-6"}),Object(a.jsx)(Hr.a,{className:f?"col-lg-6":"col-12 mb-0",children:Object(a.jsx)(e,{selectedTags:null!==(n=h.tags)&&void 0!==n?n:[],onChange:function(e){return O(Object(d.a)(Object(d.a)({},h),{},{tags:e.map(sn)}))}})})]})]}),_=Object(Vt.j)(l),U=_||!v,T=P()("mb-3",ln(U)),R=Object(Vt.b)(l),E=Object(Vt.e)(l),D=R||E,L=P()("mb-3",ln(D));return Object(a.jsxs)("form",{className:"short-url-form",onSubmit:S,children:[f&&k,!f&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ir.a,{title:"Basic options",className:"mb-3",children:k}),Object(a.jsxs)(Vr.a,{children:[U&&Object(a.jsx)("div",{className:"col-sm-6 mb-3",children:Object(a.jsxs)(Ir.a,{title:"Customize the short URL",children:[_&&C("title","Title"),!v&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Vr.a,{children:[Object(a.jsx)("div",{className:"col-lg-6",children:C("customSlug","Custom slug","text",{disabled:Object(Lr.c)(h.shortCodeLength)})}),Object(a.jsx)("div",{className:"col-lg-6",children:C("shortCodeLength","Short code length","number",{min:4,disabled:Object(Lr.c)(h.customSlug)})})]}),Object(a.jsx)(Hr.a,{children:Object(a.jsx)(t,{value:h.domain,onChange:function(e){return O(Object(d.a)(Object(d.a)({},h),{},{domain:e}))}})})]})]})}),Object(a.jsx)("div",{className:T,children:Object(a.jsxs)(Ir.a,{title:"Limit access to the short URL",children:[C("maxVisits","Maximum number of visits allowed","number",{min:1}),w("validSince","Enabled since...",{maxDate:h.validUntil?on(h.validUntil):void 0}),w("validUntil","Enabled until...",{minDate:h.validSince?on(h.validSince):void 0})]})})]}),Object(a.jsxs)(Vr.a,{children:[Object(a.jsx)("div",{className:L,children:Object(a.jsxs)(Ir.a,{title:"Extra checks",children:[Object(a.jsx)(an,{infoTooltip:"If checked, Shlink will try to reach the long URL, failing in case it's not publicly accessible.",checked:h.validateUrl,onChange:function(e){return O(Object(d.a)(Object(d.a)({},h),{},{validateUrl:e}))},children:"Validate URL"}),!v&&Object(a.jsxs)("p",{children:[Object(a.jsx)(tn,{inline:!0,className:"mr-2",checked:h.findIfExists,onChange:function(e){return O(Object(d.a)(Object(d.a)({},h),{},{findIfExists:e}))},children:"Use existing URL if found"}),Object(a.jsx)(nn,{})]})]})}),D&&Object(a.jsx)("div",{className:"col-sm-6 mb-3",children:Object(a.jsxs)(Ir.a,{title:"Configure behavior",children:[R&&Object(a.jsx)(an,{infoTooltip:"This short URL will be included in the robots.txt for your Shlink instance, allowing web crawlers (like Google) to index it.",checked:h.crawlable,onChange:function(e){return O(Object(d.a)(Object(d.a)({},h),{},{crawlable:e}))},children:"Make it crawlable"}),E&&Object(a.jsx)(an,{infoTooltip:"When this short URL is visited, any query params appended to it will be forwarded to the long URL.",checked:h.forwardQuery,onChange:function(e){return O(Object(d.a)(Object(d.a)({},h),{},{forwardQuery:e}))},children:"Forward query params on redirect"})]})})]})]}),Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)(Wr.a,{outline:!0,color:"primary",disabled:s||Object(N.a)(h.longUrl),className:"btn-xs-block",children:s?"Saving...":"Save"})})]})}},dn=r(54),jn=function(e){return function(t){var r,n=t.history.goBack,c=t.match.params,s=t.location.search,i=t.settings.shortUrlCreation,o=t.selectedServer,l=t.shortUrlDetail,u=t.getShortUrlDetail,d=t.shortUrlEdition,j=t.editShortUrl,b=l.loading,h=l.error,O=l.errorData,v=l.shortUrl,f=d.saving,g=d.error,y=d.errorData,S=Object(w.a)(s).domain,C=Object(M.useMemo)((function(){return function(e,t){var r,n,c,a,s,i,o=null!==(r=null===t||void 0===t?void 0:t.validateUrls)&&void 0!==r&&r;return e?{longUrl:e.longUrl,tags:e.tags,title:null!==(n=e.title)&&void 0!==n?n:void 0,domain:null!==(c=e.domain)&&void 0!==c?c:void 0,validSince:null!==(a=e.meta.validSince)&&void 0!==a?a:void 0,validUntil:null!==(s=e.meta.validUntil)&&void 0!==s?s:void 0,maxVisits:null!==(i=e.meta.maxVisits)&&void 0!==i?i:void 0,crawlable:e.crawlable,forwardQuery:e.forwardQuery,validateUrl:o}:{longUrl:"",validateUrl:o}}(v,i)}),[v,i]),N=Object(K.d)(),k=Object(p.a)(N,4),_=k[0],U=k[2],T=k[3];return Object(M.useEffect)((function(){u(c.shortCode,S)}),[]),b?Object(a.jsx)(dn.a,{loading:!0}):h?Object(a.jsx)(Fr,{type:"error",children:Object(a.jsx)(Ar,{errorData:O,fallbackMessage:"An error occurred while loading short URL detail :("})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("header",{className:"mb-3",children:Object(a.jsx)(De.a,{body:!0,children:Object(a.jsxs)("h2",{className:"d-sm-flex justify-content-between align-items-center mb-0",children:[Object(a.jsx)(Wr.a,{color:"link",size:"lg",className:"p-0 mr-3",onClick:n,children:Object(a.jsx)(I.a,{icon:V.a})}),Object(a.jsx)("span",{className:"text-center",children:Object(a.jsxs)("small",{children:["Edit ",Object(a.jsx)(br.a,{href:null!==(r=null===v||void 0===v?void 0:v.shortUrl)&&void 0!==r?r:""})]})}),Object(a.jsx)("span",{})]})})}),Object(a.jsx)(e,{initialState:C,saving:f,selectedServer:o,mode:"edit",onSave:function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=2;break}return e.abrupt("return");case 2:T(),j(v.shortCode,v.domain,t).then(U).catch(T);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),g&&Object(a.jsx)(Fr,{type:"error",className:"mt-3",children:Object(a.jsx)(Ar,{errorData:y,fallbackMessage:"An error occurred while updating short URL :("})}),_&&Object(a.jsx)(Fr,{type:"success",className:"mt-3",children:"Short URL properly edited."})]})}},bn="shlink/shortUrlDetail/GET_SHORT_URL_DETAIL_START",hn="shlink/shortUrlDetail/GET_SHORT_URL_DETAIL_ERROR",On="shlink/shortUrlDetail/GET_SHORT_URL_DETAIL",vn={loading:!1,error:!1},fn=ot((Ke={},Object(u.a)(Ke,bn,(function(){return{loading:!0,error:!1}})),Object(u.a)(Ke,hn,(function(e,t){return{loading:!1,error:!0,errorData:t.errorData}})),Object(u.a)(Ke,On,(function(e,t){var r=t.shortUrl;return Object(d.a)({shortUrl:r},vn)})),Ke),vn),mn=function(e){return function(t,r){return function(){var n=Object(x.a)(m.a.mark((function n(c,a){var s,i,o,l,u;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c({type:bn}),n.prev=1,o=a(),l=o.shortUrlsList,null===(s=null===l||void 0===l||null===(i=l.shortUrls)||void 0===i?void 0:i.data.find((function(e){return ht(e,t,r)})))||void 0===s){n.next=7;break}n.t0=s,n.next=10;break;case 7:return n.next=9,e(a).getShortUrl(t,r);case 9:n.t0=n.sent;case 10:u=n.t0,c({shortUrl:u,type:On}),n.next=17;break;case 14:n.prev=14,n.t1=n.catch(1),c({type:hn,errorData:ft(n.t1)});case 17:case"end":return n.stop()}}),n,null,[[1,14]])})));return function(e,t){return n.apply(this,arguments)}}()}},xn=function(e,t,r){e.serviceFactory("ShortUrlsList",jr,"ShortUrlsTable","SearchBar"),e.decorator("ShortUrlsList",t(["selectedServer","shortUrlsListParams","mercureInfo","shortUrlsList"],["listShortUrls","resetShortUrlParams","createNewVisits","loadMercureInfo"])),e.serviceFactory("ShortUrlsTable",Br,"ShortUrlsRow"),e.serviceFactory("ShortUrlsRow",Cr,"ShortUrlsRowMenu","ColorGenerator","useStateFlagTimeout"),e.serviceFactory("ShortUrlsRowMenu",kr,"DeleteShortUrlModal","QrCodeModal"),e.serviceFactory("CreateShortUrlResult",Pr,"useStateFlagTimeout"),e.serviceFactory("ShortUrlForm",un,"TagsSelector","DomainSelector"),e.serviceFactory("CreateShortUrl",_r,"ShortUrlForm","CreateShortUrlResult"),e.decorator("CreateShortUrl",t(["shortUrlCreationResult","selectedServer","settings"],["createShortUrl","resetCreateShortUrl"])),e.serviceFactory("EditShortUrl",jn,"ShortUrlForm"),e.decorator("EditShortUrl",t(["shortUrlDetail","shortUrlEdition","selectedServer","settings"],["getShortUrlDetail","editShortUrl"])),e.serviceFactory("DeleteShortUrlModal",(function(){return Mr})),e.decorator("DeleteShortUrlModal",t(["shortUrlDeletion"],["deleteShortUrl","resetDeleteShortUrl"])),e.serviceFactory("QrCodeModal",Qr,"ImageDownloader","ForServerVersion"),e.decorator("QrCodeModal",t(["selectedServer"])),e.serviceFactory("SearchBar",_e,"ColorGenerator"),e.decorator("SearchBar",r),e.serviceFactory("listShortUrls",qt,"buildShlinkApiClient"),e.serviceFactory("resetShortUrlParams",(function(){return Zt})),e.serviceFactory("createShortUrl",Dt,"buildShlinkApiClient"),e.serviceFactory("resetCreateShortUrl",(function(){return Lt})),e.serviceFactory("deleteShortUrl",Nt,"buildShlinkApiClient"),e.serviceFactory("resetDeleteShortUrl",(function(){return wt})),e.serviceFactory("getShortUrlDetail",mn,"buildShlinkApiClient"),e.serviceFactory("editShortUrl",Gt,"buildShlinkApiClient")},gn=r(289),pn=r.n(gn),yn=r(60),Sn=function(e){var t=e.children,r=e.value,n=e.onChange,c=e.id,s=e.type,i=e.required,o=e.placeholder,l=e.className,u=e.labelClassName,d=Object(M.useRef)(null!==c&&void 0!==c?c:Object($r.a)());return Object(a.jsxs)(Hr.a,{className:null!==l&&void 0!==l?l:"",children:[Object(a.jsxs)("label",{htmlFor:d.current,className:null!==u&&void 0!==u?u:"",children:[t,":"]}),Object(a.jsx)("input",{className:"form-control",type:null!==s&&void 0!==s?s:"text",id:d.current,value:r,required:null===i||void 0===i||i,placeholder:o,onChange:function(e){return n(e.target.value)}})]})},Cn=function(e){return Object(a.jsx)(Sn,Object(d.a)(Object(d.a)({},e),{},{labelClassName:"create-server__label"}))},Nn=function(e){var t=e.onSubmit,r=e.initialValues,n=e.children,c=e.title,s=Object(M.useState)(""),i=Object(p.a)(s,2),o=i[0],l=i[1],u=Object(M.useState)(""),d=Object(p.a)(u,2),j=d[0],b=d[1],h=Object(M.useState)(""),O=Object(p.a)(h,2),v=O[0],f=O[1],m=Object(Lr.b)((function(){return t({name:o,url:j,apiKey:v})}));return Object(M.useEffect)((function(){r&&l(r.name),r&&b(r.url),r&&f(r.apiKey)}),[r]),Object(a.jsxs)("form",{className:"server-form",onSubmit:m,children:[Object(a.jsxs)(Ir.a,{className:"mb-3",title:c,children:[Object(a.jsx)(Cn,{value:o,onChange:l,children:"Name"}),Object(a.jsx)(Cn,{type:"url",value:j,onChange:b,children:"URL"}),Object(a.jsx)(Cn,{value:v,onChange:f,children:"API key"})]}),Object(a.jsx)("div",{className:"text-right",children:n})]})},wn=function(e){var t=e.type;return Object(a.jsx)("div",{className:"mt-3",children:Object(a.jsxs)(Fr,{type:t,children:["success"===t&&"Servers properly imported. You can now select one from the list :)","error"===t&&"The servers could not be imported. Make sure the format is correct."]})})},kn=function(e,t){return function(r){var n=r.servers,c=r.createServer,s=r.history,i=s.push,o=s.goBack,l=!!Object.keys(n).length,u=t(!1,4e3),j=Object(p.a)(u,2),b=j[0],h=j[1],O=t(!1,4e3),v=Object(p.a)(O,2),f=v[0],m=v[1];return Object(a.jsxs)(yn.a,{children:[Object(a.jsxs)(Nn,{title:Object(a.jsx)("h5",{className:"mb-0",children:"Add new server"}),onSubmit:function(e){var t=Object($r.a)();c(Object(d.a)(Object(d.a)({},e),{},{id:t})),i("/server/".concat(t))},children:[!l&&Object(a.jsx)(e,{tooltipPlacement:"top",onImport:h,onImportError:m}),l&&Object(a.jsx)(Wr.a,{outline:!0,onClick:o,children:"Cancel"}),Object(a.jsx)(Wr.a,{outline:!0,color:"primary",className:"ml-2",children:"Create server"})]}),b&&Object(a.jsx)(wn,{type:"success"}),f&&Object(a.jsx)(wn,{type:"error"})]})}},_n=function(e){var t=e.servers,r=e.selectedServer,n=Object(Ee.a)(t);return Object(a.jsxs)(Le.a,{nav:!0,inNavbar:!0,children:[Object(a.jsxs)(z.a,{nav:!0,caret:!0,children:[Object(a.jsx)(I.a,{icon:V.I})," ",Object(a.jsx)("span",{className:"ml-1",children:"Servers"})]}),Object(a.jsx)(Q.a,{right:!0,children:Object(N.a)(n)?Object(a.jsxs)(W.a,{tag:o.b,to:"/server/create",children:[Object(a.jsx)(I.a,{icon:V.E})," ",Object(a.jsx)("span",{className:"ml-1",children:"Add a server"})]}):Object(a.jsxs)(a.Fragment,{children:[n.map((function(e){var t=e.name,n=e.id;return Object(a.jsx)(W.a,{tag:o.b,to:"/server/".concat(n),active:Object(v.a)(r)===n,children:t},n)})),Object(a.jsx)(W.a,{divider:!0}),Object(a.jsxs)(W.a,{tag:o.b,to:"/manage-servers",children:[Object(a.jsx)(I.a,{icon:V.I})," ",Object(a.jsx)("span",{className:"ml-1",children:"Manage servers"})]})]})})]})},Un=function(e){var t=e.server,r=e.toggle,n=e.isOpen,c=e.deleteServer,s=e.history,i=e.redirectHome,o=void 0===i||i;return Object(a.jsxs)(Ur.a,{isOpen:n,toggle:r,centered:!0,children:[Object(a.jsx)(Tr.a,{toggle:r,children:Object(a.jsx)("span",{className:"text-danger",children:"Remove server"})}),Object(a.jsxs)(Rr.a,{children:[Object(a.jsxs)("p",{children:["Are you sure you want to remove ",Object(a.jsx)("b",{children:t?t.name:""}),"?"]}),Object(a.jsx)("p",{children:Object(a.jsx)("i",{children:"No data will be deleted, only the access to this server will be removed from this device. You can create it again at any moment."})})]}),Object(a.jsxs)(Er.a,{children:[Object(a.jsx)("button",{className:"btn btn-link",onClick:r,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-danger",onClick:function(){return c(t),r(),void(o&&s.push("/"))},children:"Delete"})]})]})},Tn=function(e){return function(t){var r=t.server,n=t.className,c=t.children,s=t.textClassName,i=Object(K.d)(),o=Object(p.a)(i,4),l=o[0],u=o[2],d=o[3];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{className:n,onClick:u,children:[!c&&Object(a.jsx)(I.a,{fixedWidth:!0,icon:V.y}),Object(a.jsx)("span",{className:s,children:null!==c&&void 0!==c?c:"Remove this server"})]}),Object(a.jsx)(e,{server:r,isOpen:l,toggle:d})]})}},Rn=r(151),En=function(e){return Object(Rn.a)((function(e){var t=e.editServer,r=e.selectedServer,n=e.history.goBack;if(!Object(v.e)(r))return null;return Object(a.jsx)(yn.a,{children:Object(a.jsxs)(Nn,{title:Object(a.jsxs)("h5",{className:"mb-0",children:['Edit "',r.name,'"']}),initialValues:r,onSubmit:function(e){t(r.id,e),n()},children:[Object(a.jsx)(Wr.a,{outline:!0,className:"mr-2",onClick:n,children:"Cancel"}),Object(a.jsx)(Wr.a,{outline:!0,color:"primary",children:"Save"})]})})}),e)},Dn=function(e){var t=e.importServersFromFile;return function(e){var r=e.createServers,n=e.fileRef,c=e.children,s=e.onImport,i=void 0===s?function(){}:s,o=e.onImportError,l=void 0===o?function(){}:o,u=e.tooltipPlacement,d=void 0===u?"bottom":u,j=e.className,b=void 0===j?"":j,h=null!==n&&void 0!==n?n:Object(M.useRef)(),O=function(){var e=Object(x.a)(m.a.mark((function e(n){var c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target,e.abrupt("return",t(null===(c=a.files)||void 0===c?void 0:c[0]).then(Object(F.a)(r,i)).then((function(){a.value=null})).catch(l));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Wr.a,{outline:!0,id:"importBtn",className:b,onClick:function(){var e;return null===(e=h.current)||void 0===e?void 0:e.click()},children:[Object(a.jsx)(I.a,{icon:V.r,fixedWidth:!0})," ",null!==c&&void 0!==c?c:"Import from file"]}),Object(a.jsxs)(gr.a,{placement:d,target:"importBtn",children:["You can create servers by importing a CSV file with columns ",Object(a.jsx)("b",{children:"name"}),", ",Object(a.jsx)("b",{children:"apiKey"})," and ",Object(a.jsx)("b",{children:"url"}),"."]}),Object(a.jsx)("input",{type:"file",accept:"text/csv",className:"import-servers-btn__csv-select",ref:h,onChange:O})]})}},Ln=r(542),Vn=r(70),In="shlink/selectedServer/SELECT_SERVER",Fn="shlink/selectedServer/RESET_SELECTED_SERVER",An=Object(F.a)((function(e){return"latest"===e?"999.999.999":e}),Object(Vn.c)("1.0.0")),Mn=Object(Ln.a)(Dr.a,function(){var e=Object(x.a)(m.a.mark((function e(t,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r().then((function(e){var t=e.version;return{version:An(t),printableVersion:Object(Vn.b)(t)}})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),Gn=ot((Je={},Object(u.a)(Je,Fn,(function(){return null})),Object(u.a)(Je,In,(function(e,t){return t.selectedServer})),Je),null),Pn=lt(Fn),Bn=function(e,t){return function(r){return function(){var n=Object(x.a)(m.a.mark((function n(c,a){var s,i,o,l,u,j,b,h;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c(Pn()),c(Zt()),s=a(),i=s.servers,o=i[r]){n.next=7;break}return c({type:In,selectedServer:{serverNotFound:!0}}),n.abrupt("return");case 7:return n.prev=7,l=e(o),u=l.health,n.next=11,Mn(r,u);case 11:j=n.sent,b=j.version,h=j.printableVersion,c({type:In,selectedServer:Object(d.a)(Object(d.a)({},o),{},{version:b,printableVersion:h})}),c(t()),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(7),c({type:In,selectedServer:Object(d.a)(Object(d.a)({},o),{},{serverNotReachable:!0})});case 21:case"end":return n.stop()}}),n,null,[[7,18]])})));return function(e,t){return n.apply(this,arguments)}}()}},Hn=r(586),Wn=r(587),qn=r(152),zn=r(314),Qn="shlink/servers/EDIT_SERVER",Kn="shlink/servers/DELETE_SERVER",Jn="shlink/servers/CREATE_SERVERS",Zn="shlink/servers/SET_AUTO_CONNECT",Yn=ot((Ze={},Object(u.a)(Ze,Jn,(function(e,t){var r=t.newServers;return Object(d.a)(Object(d.a)({},e),r)})),Object(u.a)(Ze,Kn,(function(e,t){var r=t.serverId;return Object(Hn.a)(r,e)})),Object(u.a)(Ze,Qn,(function(e,t){var r=t.serverId,n=t.serverData;return e[r]?Object(jt.a)(r,Object(d.a)(Object(d.a)({},e[r]),n),e):e})),Object(u.a)(Ze,Zn,(function(e,t){var r=t.serverId,n=t.autoConnect;return e[r]?n?Object(Wn.a)(Object(Ve.a)(e).map((function(e){var t=Object(p.a)(e,2),n=t[0],c=t[1];return[n,Object(d.a)(Object(d.a)({},c),{},{autoConnect:n===r})]}))):Object(jt.a)(r,Object(d.a)(Object(d.a)({},e[r]),{},{autoConnect:n}),e):e})),Ze),{}),Xn=Object(qn.a)((function(e,t){return Object(jt.a)(t.id,t,e)}),{}),$n=Object(F.a)(Object(zn.a)((function(e){return e.id?e:Object(jt.a)("id",Object($r.a)(),e)})),Xn,(function(e){return{type:Jn,newServers:e}})),ec=function(e){return $n([e])},tc=function(e,t){return{type:Qn,serverId:e,serverData:t}},rc=function(e){var t=e.id;return{type:Kn,serverId:t}},nc=function(e,t){var r=e.id;return{type:Zn,serverId:r,autoConnect:t}},cc=Object(F.a)(Object(O.a)("data"),(function(e){return Array.isArray(e)?e.filter(v.b):[]})),ac=function(e){var t=e.get;return function(){return function(){var e=Object(x.a)(m.a.mark((function e(r){var n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l.a,"/servers.json"));case 2:n=e.sent,c=cc(n),r($n(c));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},sc=function(e){var t=e.minVersion,r=e.maxVersion,n=e.selectedServer,c=e.children;if(!Object(v.d)(n))return null;var s=n.version;return Object(Vn.a)(s,{maxVersion:r,minVersion:t})?Object(a.jsx)(a.Fragment,{children:c}):null},ic=r(165),oc=function(e){return function(t){var r=t.servers,n=t.selectedServer;return Object(a.jsx)(yn.a,{children:Object(a.jsxs)("div",{className:"server-error__container flex-column",children:[Object(a.jsxs)(dn.a,{className:"w-100 mb-3 mb-md-5",type:"error",fullWidth:!0,children:[!Object(v.e)(n)&&"Could not find this Shlink server.",Object(v.e)(n)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Oops! Could not connect to this Shlink server."}),"Make sure you have internet connection, and the server is properly configured and on-line."]})]}),Object(a.jsxs)(ic.a,{servers:Object.values(r),children:["These are the Shlink servers currently configured. Choose one of them or ",Object(a.jsx)(o.b,{to:"/server/create",children:"add a new one"}),"."]}),Object(v.e)(n)&&Object(a.jsx)("div",{className:"container mt-3 mt-md-5",children:Object(a.jsxs)("h5",{children:["Alternatively, if you think you may have miss-configured this server, you can ",Object(a.jsx)(e,{server:n,className:"server-error__delete-btn",children:"remove it"})," or\xa0",Object(a.jsx)(o.b,{to:"/server/".concat(n.id,"/edit"),children:"edit it"}),"."]})})]})})}},lc=r(103),uc=r(588),dc=r(589),jc=r(543),bc=r(544),hc=function(e,t,r){return Ge((function(n){var c,s=n.shortUrlsList,i=n.listShortUrls,l=n.listTags,u=n.tagsList,d=n.selectedServer,j=n.loadVisitsOverview,h=n.visitsOverview,O=s.loading,f=s.shortUrls,m=u.loading,x=h.loading,g=h.visitsCount,p=h.orphanVisitsCount,y=Object(v.a)(d),S=Object(b.g)();return Object(M.useEffect)((function(){i({itemsPerPage:5,orderBy:{dateCreated:"DESC"}}),l(),j()}),[]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Vr.a,{children:[Object(a.jsx)("div",{className:"col-md-6 col-xl-3",children:Object(a.jsxs)(De.a,{className:"overview__card mb-3",body:!0,children:[Object(a.jsx)(uc.a,{tag:"h5",className:"overview__card-title",children:"Visits"}),Object(a.jsx)(dc.a,{tag:"h2",children:x?"Loading...":ar(g)})]})}),Object(a.jsx)("div",{className:"col-md-6 col-xl-3",children:Object(a.jsxs)(De.a,{className:"overview__card mb-3",body:!0,tag:o.b,to:"/server/".concat(y,"/orphan-visits"),children:[Object(a.jsx)(uc.a,{tag:"h5",className:"overview__card-title",children:"Orphan visits"}),Object(a.jsxs)(dc.a,{tag:"h2",children:[Object(a.jsx)(r,{minVersion:"2.6.0",children:x?"Loading...":ar(null!==p&&void 0!==p?p:0)}),Object(a.jsx)(r,{maxVersion:"2.5.*",children:Object(a.jsx)("small",{className:"text-muted",children:Object(a.jsx)("i",{children:"Shlink 2.6 is needed"})})})]})]})}),Object(a.jsx)("div",{className:"col-md-6 col-xl-3",children:Object(a.jsxs)(De.a,{className:"overview__card mb-3",body:!0,tag:o.b,to:"/server/".concat(y,"/list-short-urls/1"),children:[Object(a.jsx)(uc.a,{tag:"h5",className:"overview__card-title",children:"Short URLs"}),Object(a.jsx)(dc.a,{tag:"h2",children:O?"Loading...":ar(null!==(c=null===f||void 0===f?void 0:f.pagination.totalItems)&&void 0!==c?c:0)})]})}),Object(a.jsx)("div",{className:"col-md-6 col-xl-3",children:Object(a.jsxs)(De.a,{className:"overview__card mb-3",body:!0,tag:o.b,to:"/server/".concat(y,"/manage-tags"),children:[Object(a.jsx)(uc.a,{tag:"h5",className:"overview__card-title",children:"Tags"}),Object(a.jsx)(dc.a,{tag:"h2",children:m?"Loading...":ar(u.tags.length)})]})})]}),Object(a.jsxs)(De.a,{className:"mb-3",children:[Object(a.jsxs)(jc.a,{children:[Object(a.jsx)("span",{className:"d-sm-none",children:"Create a short URL"}),Object(a.jsx)("h5",{className:"d-none d-sm-inline",children:"Create a short URL"}),Object(a.jsx)(o.b,{className:"float-right",to:"/server/".concat(y,"/create-short-url"),children:"Advanced options \xbb"})]}),Object(a.jsx)(bc.a,{children:Object(a.jsx)(t,{basicMode:!0})})]}),Object(a.jsxs)(De.a,{children:[Object(a.jsxs)(jc.a,{children:[Object(a.jsx)("span",{className:"d-sm-none",children:"Recently created URLs"}),Object(a.jsx)("h5",{className:"d-none d-sm-inline",children:"Recently created URLs"}),Object(a.jsx)(o.b,{className:"float-right",to:"/server/".concat(y,"/list-short-urls/1"),children:"See all \xbb"})]}),Object(a.jsx)(bc.a,{children:Object(a.jsx)(e,{shortUrlsList:s,selectedServer:d,className:"mb-0",onTagClick:function(e){return S.push("/server/".concat(y,"/list-short-urls/1?tags=").concat(encodeURIComponent(e)))}})})]})]})}),(function(){return[Pe.visits,Pe.orphanVisits]}))},Oc=function(e,t,r,n){return function(c){var s=c.servers,i=Object.values(s),l=Object(M.useState)(i),u=Object(p.a)(l,2),d=u[0],j=u[1],b=d.some((function(e){return!!e.autoConnect})),h=r(!1,4e3),O=Object(p.a)(h,2),v=O[0],f=O[1];return Object(M.useEffect)((function(){j(Object.values(s))}),[s]),Object(a.jsxs)(yn.a,{children:[Object(a.jsx)(B,{className:"mb-3",onChange:function(e){return j(i.filter((function(t){var r=t.name,n=t.url;return"".concat(r," ").concat(n).match(e)})))}}),Object(a.jsxs)(Vr.a,{className:"mb-3",children:[Object(a.jsxs)("div",{className:"col-md-6 d-flex d-md-block mb-2 mb-md-0",children:[Object(a.jsx)(t,{className:"flex-fill",onImportError:f,children:"Import servers"}),i.length>0&&Object(a.jsxs)(Wr.a,{outline:!0,className:"ml-2 flex-fill",onClick:Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.exportServers());case 1:case"end":return t.stop()}}),t)}))),children:[Object(a.jsx)(I.a,{icon:V.q,fixedWidth:!0})," Export servers"]})]}),Object(a.jsx)("div",{className:"col-md-6 text-md-right d-flex d-md-block",children:Object(a.jsxs)(Wr.a,{outline:!0,color:"primary",className:"flex-fill",tag:o.b,to:"/server/create",children:[Object(a.jsx)(I.a,{icon:V.E,fixedWidth:!0})," Add a server"]})})]}),Object(a.jsx)(Ir.a,{children:Object(a.jsxs)("table",{className:"table table-hover mb-0",children:[Object(a.jsx)("thead",{className:"responsive-table__header",children:Object(a.jsxs)("tr",{children:[b&&Object(a.jsx)("th",{style:{width:"50px"}}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{children:"Base URL"}),Object(a.jsx)("th",{})]})}),Object(a.jsxs)("tbody",{children:[!d.length&&Object(a.jsx)("tr",{className:"text-center",children:Object(a.jsx)("td",{colSpan:4,children:"No servers found."})}),d.map((function(e){return Object(a.jsx)(n,{server:e,hasAutoConnect:b},e.id)}))]})]})}),v&&Object(a.jsx)("div",{className:"mt-3",children:Object(a.jsx)(Fr,{type:"error",children:"The servers could not be imported. Make sure the format is correct."})})]})}},vc=function(e){return function(t){var r=t.server,n=t.hasAutoConnect;return Object(a.jsxs)("tr",{className:"responsive-table__row",children:[n&&Object(a.jsx)("td",{className:"responsive-table__cell","data-th":"Auto-connect",children:r.autoConnect&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I.a,{icon:V.h,className:"text-primary",id:"autoConnectIcon"}),Object(a.jsx)(gr.a,{target:"autoConnectIcon",placement:"right",children:"Auto-connect to this server"})]})}),Object(a.jsx)("th",{className:"responsive-table__cell","data-th":"Name",children:Object(a.jsx)(o.b,{to:"/server/".concat(r.id),children:r.name})}),Object(a.jsx)("td",{className:"responsive-table__cell","data-th":"Base URL",children:r.url}),Object(a.jsx)("td",{className:"responsive-table__cell text-right",children:Object(a.jsx)(e,{server:r})})]})}},fc=function(e){return function(t){var r=t.server,n=t.setAutoConnect,c=Object(K.d)(),s=Object(p.a)(c,2),i=s[0],l=s[1],u=Object(K.d)(),d=Object(p.a)(u,4),j=d[0],b=d[2],h=d[3],O="/server/".concat(r.id),v=r.autoConnect,f=v?V.b:pe.b;return Object(a.jsxs)(wr,{isOpen:i,toggle:l,children:[Object(a.jsxs)(W.a,{tag:o.b,to:O,children:[Object(a.jsx)(I.a,{icon:V.D,fixedWidth:!0})," Connect"]}),Object(a.jsxs)(W.a,{tag:o.b,to:"".concat(O,"/edit"),children:[Object(a.jsx)(I.a,{icon:V.m,fixedWidth:!0})," Edit server"]}),Object(a.jsxs)(W.a,{onClick:function(){return n(r,!r.autoConnect)},children:[Object(a.jsx)(I.a,{icon:f,fixedWidth:!0})," ",v?"Do not a":"A","uto-connect"]}),Object(a.jsx)(W.a,{divider:!0}),Object(a.jsxs)(W.a,{className:"dropdown-item--danger",onClick:b,children:[Object(a.jsx)(I.a,{icon:V.y,fixedWidth:!0})," Remove server"]}),Object(a.jsx)(e,{redirectHome:!1,server:r,isOpen:j,toggle:h})]})}},mc=function(e){return"string"===typeof e.url&&"string"===typeof e.apiKey&&"string"===typeof e.name},xc=function(e){return Array.isArray(e)&&e.every(mc)},gc=function e(t,r){var n=this;Object(g.a)(this,e),this.csvJson=t,this.fileReaderFactory=r,this.importServersFromFile=function(){var e=Object(x.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("No file provided");case 2:return r=n.fileReaderFactory(),e.abrupt("return",new Promise((function(e,c){r.addEventListener("loadend",(function(t){try{var r,a,s,i=null!==(r=null===(a=t.target)||void 0===a||null===(s=a.result)||void 0===s?void 0:s.toString())&&void 0!==r?r:"",o=n.csvJson.toObject(i);if(!xc(o))throw new Error("Provided file does not have the right format.");e(o)}catch(t){c(t)}})),r.readAsText(t)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},pc=r(104),yc=function e(t,r,n){var c=this;Object(g.a)(this,e),this.storage=t,this.window=r,this.csvjson=n,this.exportServers=Object(x.a)(m.a.mark((function e(){var t,r,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(Ee.a)(null!==(t=c.storage.get("servers"))&&void 0!==t?t:{}).map(v.f);try{n=c.csvjson.toCSV(r,{headers:"key"}),Object(pc.a)(c.window,n,"shlink-servers.csv")}catch(a){console.error(a)}case 2:case"end":return e.stop()}}),e)})))},Sc=function(e,t,r){e.serviceFactory("ManageServers",Oc,"ServersExporter","ImportServersBtn","useStateFlagTimeout","ManageServersRow"),e.decorator("ManageServers",t(["servers"])),e.serviceFactory("ManageServersRow",vc,"ManageServersRowDropdown"),e.serviceFactory("ManageServersRowDropdown",fc,"DeleteServerModal"),e.decorator("ManageServersRowDropdown",t(null,["setAutoConnect"])),e.serviceFactory("CreateServer",kn,"ImportServersBtn","useStateFlagTimeout"),e.decorator("CreateServer",lc.a),e.decorator("CreateServer",t(["selectedServer","servers"],["createServer","resetSelectedServer"])),e.serviceFactory("EditServer",En,"ServerError"),e.decorator("EditServer",t(["selectedServer"],["editServer","selectServer"])),e.serviceFactory("ServersDropdown",(function(){return _n})),e.decorator("ServersDropdown",t(["servers","selectedServer"])),e.serviceFactory("DeleteServerModal",(function(){return Un})),e.decorator("DeleteServerModal",r),e.decorator("DeleteServerModal",t(null,["deleteServer"])),e.serviceFactory("DeleteServerButton",Tn,"DeleteServerModal"),e.serviceFactory("ImportServersBtn",Dn,"ServersImporter"),e.decorator("ImportServersBtn",t(null,["createServers"])),e.serviceFactory("ForServerVersion",(function(){return sc})),e.decorator("ForServerVersion",t(["selectedServer"])),e.serviceFactory("ServerError",oc,"DeleteServerButton"),e.decorator("ServerError",t(["servers","selectedServer"])),e.serviceFactory("Overview",hc,"ShortUrlsTable","CreateShortUrl","ForServerVersion"),e.decorator("Overview",t(["shortUrlsList","tagsList","selectedServer","mercureInfo","visitsOverview"],["listShortUrls","listTags","createNewVisits","loadMercureInfo","loadVisitsOverview"])),e.constant("csvjson",pn.a),e.constant("fileReaderFactory",(function(){return new FileReader})),e.service("ServersImporter",gc,"csvjson","fileReaderFactory"),e.service("ServersExporter",yc,"Storage","window","csvjson"),e.serviceFactory("selectServer",Bn,"buildShlinkApiClient","loadMercureInfo"),e.serviceFactory("createServer",(function(){return ec})),e.serviceFactory("createServers",(function(){return $n})),e.serviceFactory("deleteServer",(function(){return rc})),e.serviceFactory("editServer",(function(){return tc})),e.serviceFactory("setAutoConnect",(function(){return nc})),e.serviceFactory("fetchServers",ac,"axios"),e.serviceFactory("resetSelectedServer",(function(){return Pn}))},Cc=function(e){var t=e.visits,r=e.goBack,n=e.shortUrl,c=e.children,s=e.title;return Object(a.jsx)("header",{children:Object(a.jsxs)(De.a,{body:!0,children:[Object(a.jsxs)("h2",{className:"d-flex justify-content-between align-items-center mb-0",children:[Object(a.jsx)(Wr.a,{color:"link",size:"lg",className:"p-0 mr-3",onClick:r,children:Object(a.jsx)(I.a,{icon:V.a})}),Object(a.jsx)("span",{className:"text-center d-none d-sm-block",children:Object(a.jsx)("small",{children:s})}),Object(a.jsxs)("span",{className:"badge badge-main ml-3",children:["Visits:"," ",Object(a.jsx)(Sr,{visitsCount:t.length,shortUrl:n})]})]}),Object(a.jsx)("h3",{className:"text-center d-block d-sm-none mb-0 mt-3",children:Object(a.jsx)("small",{children:s})}),c&&Object(a.jsx)("div",{className:"mt-md-2",children:c})]})})},Nc=function(e){var t,r,n=e.shortUrlDetail,c=e.shortUrlVisits,s=e.goBack,i=n.shortUrl,o=n.loading,l=c.visits,u=null!==(t=null===i||void 0===i?void 0:i.shortUrl)&&void 0!==t?t:"",d=null!==(r=null===i||void 0===i?void 0:i.longUrl)&&void 0!==r?r:"",j=null===i||void 0===i?void 0:i.title,b=Object(a.jsxs)(a.Fragment,{children:["Visits for ",Object(a.jsx)(br.a,{href:u})]});return Object(a.jsxs)(Cc,{title:b,goBack:s,visits:l,shortUrl:i,children:[Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{children:["Created: ",i?Object(a.jsxs)("span",{children:[Object(a.jsx)("b",{id:"created",className:"short-url-visits-header__created-at",children:Object(a.jsx)(xr,{date:i.dateCreated,relative:!0})}),Object(a.jsx)(gr.a,{placement:"bottom",target:"created",children:Object(a.jsx)(xr,{date:i.dateCreated})})]}):Object(a.jsx)("small",{children:"Loading..."})]}),Object(a.jsxs)("div",{children:["".concat(j?"Title":"Long URL",": "),o&&Object(a.jsx)("small",{children:"Loading..."}),!o&&Object(a.jsx)(br.a,{href:d,children:null!==j&&void 0!==j?j:d})]})]})},wc=r(605),kc=r(556),_c=r(606),Uc=r(554),Tc=r(113),Rc=r(594),Ec=r(595),Dc=r(597),Lc=r(591),Vc=r(293),Ic=r(592),Fc=r(315),Ac=r(92),Mc=r(593),Gc=r(596),Pc=r(292),Bc=r.n(Pc),Hc=r(590),Wc="Others",qc=["Android Browser","Chrome","Chromium","Firefox","Internet Explorer","Microsoft Edge","Opera","Safari","Samsung Internet for Android","Vivaldi","WeChat"],zc=function(e){var t,r;return Object(Lr.c)(e)?null!==(t=null===(r=e.split("/")[e.includes("://")?2:0])||void 0===r?void 0:r.split(":")[0])&&void 0!==t?t:"":"Direct"},Qc=function(e,t){return Object.values(Object(d.a)(Object(d.a)({},Object(Hc.a)(t,t.map((function(){return 0})))),e))},Kc=function(e){return Object(a.jsx)(en,Object(d.a)({type:"switch"},e))},Jc=function(e,t){var r=e.native,n=Object(p.a)(t,1)[0];null!==r&&void 0!==r&&r.target&&(r.target.style.cursor=n?"pointer":"default")},Zc=function(e){var t=e.dataset,r=e.formattedValue;return"".concat(t.label,": ").concat(ar(r))},Yc=function(e){var t=e.label,r=e.formattedValue;return"".concat(t,": ").concat(ar(r))},Xc=r(46),$c={monthly:"Month",weekly:"Week",daily:"Day",hourly:"Hour"},ea={hourly:function(e){return{hours:e}},daily:function(e){return{days:e}},weekly:function(e){return{weeks:e}},monthly:function(e){return{months:e}}},ta={hourly:Lc.a,daily:Vc.a,weekly:Ic.a,monthly:Fc.a},ra={hourly:function(e){return Object(ee.default)(e,"yyyy-MM-dd HH:00")},daily:function(e){return Object(ee.default)(e,"yyyy-MM-dd")},weekly:function(e){var t=Object(ee.default)(Object(Ac.a)(e),"yyyy-MM-dd"),r=Object(ee.default)(Object(Mc.a)(e),"yyyy-MM-dd");return"".concat(t," - ").concat(r)},monthly:function(e){return Object(ee.default)(e,"yyyy-MM")}},na=function(e,t){return Object(Ec.a)((function(t){return ra[e](Object(A.default)(t.date))}),t)},ca=function(e,t,r,n){if(n)return[Object.keys(t),Object.values(t)];var c=function(e,t){var r=ta[e],n=ra[e],c=Object(A.default)(t[0].date),a=Object(A.default)(t[t.length-1].date),s=r(c,a),i=ea[e];return[n(a)].concat(Object(Ue.a)(Object(Lr.e)(s,(function(e){return n(Object(Gc.a)(a,i(e)))}))))}(r,e);return[c,Qc(t,c)]},aa=function(e,t,r){return{label:t,data:e,fill:!1,tension:.2,borderColor:r,backgroundColor:r}},sa=null,ia=function(e,t,r){return function(n){var c=Object(p.a)(n,1)[0];if(r&&c){var a,s=c.index;if(sa===e[s])r([]),sa=null;else r(e[s]&&t[e[s]]||[]),sa=null!==(a=e[s])&&void 0!==a?a:null}}},oa=function(e){var t=e.title,r=e.visits,n=e.highlightedVisits,c=e.highlightedLabel,s=void 0===c?"Selected":c,i=e.setSelectedVisits,o=Object(M.useState)(r.length>0?function(e){var t,r=new Date,n=Object(A.default)(e);return null!==(t=Object(Yr.a)([[function(){return Object(Vc.a)(r,n)<=2},Object(Rc.a)("hourly")],[function(){return Object(Fc.a)(r,n)<=1},Object(Rc.a)("daily")],[function(){return Object(Fc.a)(r,n)<=6},Object(Rc.a)("weekly")]])())&&void 0!==t?t:"monthly"}(r[r.length-1].date):"monthly"),l=Object(p.a)(o,2),u=l[0],d=l[1],j=Object(K.d)(!0),b=Object(p.a)(j,2),h=b[0],O=b[1],v=Object(M.useMemo)((function(){return function(e,t){return t.reduce((function(t,r){var n,c=ra[e](Object(A.default)(r.date));return t[c]=null!==(n=t[c])&&void 0!==n?n:[],t[c].push(r),t}),{})}(u,r)}),[u,r]),f=Object(M.useMemo)((function(){return na(u,Object(Dc.a)(r))}),[u,r]),m=Object(M.useMemo)((function(){return ca(r,f,u,h)}),[r,u,h]),x=Object(p.a)(m,2),g=x[0],y=x[1],S=Object(M.useMemo)((function(){return Qc(na(u,Object(Dc.a)(n)),g)}),[n,u,g]),C=function(){var e=aa(y,"Visits",Xc.c);return 0===n.length?[e]:[e,aa(S,s,Xc.a)]},N={maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{intersect:!1,axis:"x",callbacks:{label:Zc}}},scales:{y:{beginAtZero:!0,ticks:{precision:0,callback:ar}},x:{title:{display:!0,text:$c[u]}}},onHover:Jc},w=function(){return Object(a.jsx)(Tc.c,{data:{labels:g,datasets:C()},options:N,getElementAtEvent:ia(g,v,i)})};return Object(a.jsxs)(De.a,{children:[Object(a.jsxs)(jc.a,{children:[t,Object(a.jsx)("div",{className:"float-right",children:Object(a.jsxs)(Le.a,{children:[Object(a.jsx)(z.a,{caret:!0,color:"link",className:"btn-sm p-0",children:"Group by"}),Object(a.jsx)(Q.a,{right:!0,children:Object.entries($c).map((function(e){var t=Object(p.a)(e,2),r=t[0],n=t[1];return Object(a.jsx)(W.a,{active:u===r,onClick:function(){return d(r)},children:n},r)}))})]})}),Object(a.jsx)("div",{className:"float-right mr-2",children:Object(a.jsx)(Kc,{checked:h,onChange:O,children:Object(a.jsx)("small",{children:"Skip dates with no visits"})})})]}),Object(a.jsxs)(bc.a,{className:"line-chart-card__body",children:[n.length>0&&w(),0===n.length&&w()]})]})},la=r(598),ua=function(e){var t=e.pagesCount,r=e.currentPage,n=e.setCurrentPage,c=e.centered,s=void 0===c||c;if(t<2)return null;var i=function(e){return function(){return!or(e)&&n(e)}};return Object(a.jsxs)($t.a,{listClassName:P()("flex-wrap mb-0 simple-paginator",{"justify-content-center":s}),children:[Object(a.jsx)(Yt.a,{disabled:r<=1,children:Object(a.jsx)(Xt.a,{previous:!0,tag:"span",onClick:i(r-1)})}),ir(r,t).map((function(e,t){return Object(a.jsx)(Yt.a,{disabled:or(e),active:r===e,children:Object(a.jsx)(Xt.a,{tag:"span",onClick:i(e),children:lr(e)})},ur(e,t))})),Object(a.jsx)(Yt.a,{disabled:r>=t,children:Object(a.jsx)(Xt.a,{next:!0,tag:"span",onClick:i(r+1)})})]})},da=function(e,t){return t.filter((function(t){return function(e,t){var r=e.browser,n=e.os,c=e.referer,a=e.country,s=e.city,i=Object(y.a)(e,["browser","os","referer","country","city"]);return"".concat(r," ").concat(n," ").concat(c," ").concat(a," ").concat(s," ").concat(i.visitedUrl).toLowerCase().includes(t.toLowerCase())}(t,e)}))},ja=function(e,t,r){var n=function(e,t){return Fe(t,e)}(r,t?da(t,e):Object(Ue.a)(e)),c=n.length;return{visitsGroups:Object(la.a)(20,n),total:c}},ba=function(e){var t,r,n=e.visits,c=e.selectedVisits,s=void 0===c?[]:c,i=e.setSelectedVisits,o=e.selectedServer,l=e.matchMedia,u=void 0===l?window.matchMedia:l,d=e.isOrphanVisits,j=void 0!==d&&d,b="visits-table__header-cell visits-table__sticky",h=function(){return u("(max-width: 767px)").matches},O=Object(M.useState)(h()),v=Object(p.a)(O,2),f=v[0],m=v[1],x=Object(M.useState)(void 0),g=Object(p.a)(x,2),y=g[0],S=g[1],C=Object(M.useState)({}),N=Object(p.a)(C,2),w=N[0],k=N[1],_=Object(M.useMemo)((function(){return ja(n,y,w)}),[y,w]),U=Object(M.useRef)(!0),T=Object(M.useState)(1),R=Object(p.a)(T,2),E=R[0],D=R[1],L=20*E,F=L-20,A=Object(Vt.a)(o),G=7+Number(A)+Number(j),H=function(e){return function(){return k({field:e,dir:Ie(e,w.field,w.dir)})}},W=function(e){return Object(a.jsx)(Be,{currentOrder:w,field:e,className:"visits-table__header-icon"})};return Object(M.useEffect)((function(){var e=function(){return m(h())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(M.useEffect)((function(){D(1),!U.current&&i([]),U.current=!1}),[y]),Object(a.jsxs)("table",{className:"table table-bordered table-hover table-sm table-responsive-sm visits-table",children:[Object(a.jsxs)("thead",{className:"visits-table__header",children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{className:"".concat(b," text-center"),onClick:function(){return i(s.length<_.total?_.visitsGroups.flat():[])},children:Object(a.jsx)(I.a,{icon:V.h,className:P()({"text-primary":s.length>0})})}),A&&Object(a.jsxs)("th",{className:"".concat(b," text-center"),onClick:H("potentialBot"),children:[Object(a.jsx)(I.a,{icon:V.G}),W("potentialBot")]}),Object(a.jsxs)("th",{className:b,onClick:H("date"),children:["Date",W("date")]}),Object(a.jsxs)("th",{className:b,onClick:H("country"),children:["Country",W("country")]}),Object(a.jsxs)("th",{className:b,onClick:H("city"),children:["City",W("city")]}),Object(a.jsxs)("th",{className:b,onClick:H("browser"),children:["Browser",W("browser")]}),Object(a.jsxs)("th",{className:b,onClick:H("os"),children:["OS",W("os")]}),Object(a.jsxs)("th",{className:b,onClick:H("referer"),children:["Referrer",W("referer")]}),j&&Object(a.jsxs)("th",{className:b,onClick:H("visitedUrl"),children:["Visited URL",W("visitedUrl")]})]}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:G,className:"p-0",children:Object(a.jsx)(B,{noBorder:!0,large:!1,onChange:S})})})]}),Object(a.jsxs)("tbody",{children:[!(null!==(t=_.visitsGroups[E-1])&&void 0!==t&&t.length)&&Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:G,className:"text-center",children:"No visits found with current filtering"})}),null===(r=_.visitsGroups[E-1])||void 0===r?void 0:r.map((function(e,t){var r=s.includes(e);return Object(a.jsxs)("tr",{style:{cursor:"pointer"},className:P()({"table-active":r}),onClick:function(){return i(r?s.filter((function(t){return t!==e})):[].concat(Object(Ue.a)(s),[e]))},children:[Object(a.jsx)("td",{className:"text-center",children:r&&Object(a.jsx)(I.a,{icon:V.h,className:"text-primary"})}),A&&Object(a.jsx)("td",{className:"text-center",children:e.potentialBot&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I.a,{icon:V.G,id:"botIcon".concat(t)}),Object(a.jsx)(gr.a,{placement:"right",target:"botIcon".concat(t),children:"Potentially a visit from a bot or crawler"})]})}),Object(a.jsx)("td",{children:Object(a.jsx)(xr,{date:e.date})}),Object(a.jsx)("td",{children:e.country}),Object(a.jsx)("td",{children:e.city}),Object(a.jsx)("td",{children:e.browser}),Object(a.jsx)("td",{children:e.os}),Object(a.jsx)("td",{children:e.referer}),j&&Object(a.jsx)("td",{children:e.visitedUrl})]},t)}))]}),_.total>20&&Object(a.jsx)("tfoot",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:G,className:"visits-table__footer-cell visits-table__sticky",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(ua,{pagesCount:Math.ceil(_.total/20),currentPage:E,setCurrentPage:D,centered:f})}),Object(a.jsx)("div",{className:P()("col-md-6",{"d-flex align-items-center flex-row-reverse":!f,"text-center mt-3":f}),children:Object(a.jsxs)("div",{children:["Visits ",Object(a.jsx)("b",{children:ar(F+1)})," to"," ",Object(a.jsx)("b",{children:ar(Object(rr.a)(L,_.total))})," of"," ",Object(a.jsx)("b",{children:ar(_.total)})]})})]})})})})]})},ha=r(618),Oa=r(599),va=r(600),fa=r(601),ma=function(){return Object(a.jsx)(ha.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})},xa=function(e){return 0===e.length?{}:e.length>1?{bounds:e.map(Object(O.a)("latLong"))}:{zoom:10,center:Object(p.a)(e,1)[0].latLong}},ga=function(e){var t=e.toggle,r=e.isOpen,n=e.title,c=e.locations,s=void 0===c?[]:c;return Object(a.jsx)(Ur.a,{toggle:t,isOpen:r,className:"map-modal__modal",contentClassName:"map-modal__modal-content",children:Object(a.jsxs)(Rr.a,{className:"map-modal__modal-body",children:[Object(a.jsxs)("h3",{className:"map-modal__modal-title",children:[n,Object(a.jsx)("button",{type:"button",className:"close",onClick:t,children:"\xd7"})]}),Object(a.jsxs)(Oa.a,Object(d.a)(Object(d.a)({},xa(s)),{},{children:[Object(a.jsx)(ma,{}),s.map((function(e,t){var r=e.cityName,n=e.latLong,c=e.count;return Object(a.jsx)(va.a,{position:n,children:Object(a.jsxs)(fa.a,{children:[Object(a.jsx)("b",{children:c})," visit",c>1?"s":""," from ",Object(a.jsx)("b",{children:r})]})},t)}))]}))]})})},pa=function(e){var t=e.modalTitle,r=e.activeCities,n=e.locations,c=void 0===n?[]:n,s=Object(K.d)(),i=Object(p.a)(s,4),o=i[0],l=i[2],u=i[3],d=Object(K.d)(),j=Object(p.a)(d,3),b=j[0],h=j[1],O=j[2],v=Object(M.useState)([]),f=Object(p.a)(v,2),m=f[0],x=f[1],g=Object(M.useRef)(),y=function(e){return function(){x(e?c.filter((function(e){var t=e.cityName;return r.includes(t)})):c),l()}};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:"btn btn-link open-map-modal-btn__btn",ref:g,onClick:function(){if(!r)return x(c),void l();O()},children:Object(a.jsx)(I.a,{icon:V.x})}),Object(a.jsx)(gr.a,{placement:"left",target:function(){return g.current},children:"Show in map"}),Object(a.jsx)(q.a,{isOpen:b,toggle:h,inNavbar:!0,children:Object(a.jsxs)(Q.a,{right:!0,children:[Object(a.jsx)(W.a,{onClick:y(!1),children:"Show all locations"}),Object(a.jsx)(W.a,{onClick:y(!0),children:"Show locations in current page"})]})}),Object(a.jsx)(ga,{toggle:u,isOpen:o,title:t,locations:m})]})},ya=r(602),Sa=function(e){return e.hasOwnProperty("visitedUrl")},Ca=Object(F.a)(Object(ya.a)((function(e){return Sa(e.visit)?"orphanVisits":"regularVisits"})),(function(e){return Object(d.a)({orphanVisits:[],regularVisits:[]},e)})),Na=function(e,t){return Object(Ec.a)(Object(O.a)(t),e)},wa=function(e){var t,r,n=e.page,c=e.itemsPerPage,a=e.filter,s=e.dateRange;return{page:n,itemsPerPage:c,startDate:null!==(t=(null===s||void 0===s?void 0:s.startDate)&&ie(null===s||void 0===s?void 0:s.startDate))&&void 0!==t?t:void 0,endDate:null!==(r=(null===s||void 0===s?void 0:s.endDate)&&ie(null===s||void 0===s?void 0:s.endDate))&&void 0!==r?r:void 0,excludeBots:(null===a||void 0===a?void 0:a.excludeBots)||void 0}},ka=function(e,t){return!Object(C.a)(e)&&Object(Lr.c)(e[t])},_a=function(e){return"number"===typeof e?e:e?parseFloat(e):0},Ua=function(e){return function(t,r){var n=ka(r,e)?r[e]:"Unknown";t[n]=(t[n]||0)+1}},Ta=Ua("country"),Ra=Ua("city"),Ea=function(e){return e.reduce((function(e,t){return function(e,t){var r=t.os;e[r]=(e[r]||0)+1}(e.os,t),function(e,t){var r=t.browser;e[r]=(e[r]||0)+1}(e.browsers,t),function(e,t){var r=t.referer;e[r]=(e[r]||0)+1}(e.referrers,t),Ta(e.countries,t),Ra(e.cities,t),function(e,t){if(ka(t,"city")&&"Unknown"!==t.city){var r=t.city,n=t.latitude,c=t.longitude,a=e[r]||{cityName:r,count:0,latLong:[_a(n),_a(c)]};a.count++,e[r]=a}}(e.citiesForMap,t),function(e,t){if(function(e){return e.hasOwnProperty("visitedUrl")}(t)){var r=t.visitedUrl;e[r]=(e[r]||0)+1}}(e.visitedUrls,t),e}),{os:{},browsers:{},referrers:{},countries:{},cities:{},citiesForMap:{},visitedUrls:{}})},Da=Object(zn.a)((function(e){var t=e.userAgent,r=e.date,n=e.referer,c=e.visitLocation,a=e.potentialBot,s=void 0!==a&&a,i=Object(d.a)(Object(d.a)({date:r,potentialBot:s},function(e){if(!Object(Lr.c)(e))return{browser:Wc,os:Wc};var t=Bc.a.parse(e),r=t.browser.name,n=t.os.name;return{os:null!==n&&void 0!==n?n:Wc,browser:r&&qc.includes(r)?r:Wc}}(t)),{},{referer:zc(n),country:(null===c||void 0===c?void 0:c.countryName)||"Unknown",city:(null===c||void 0===c?void 0:c.cityName)||"Unknown",latitude:null===c||void 0===c?void 0:c.latitude,longitude:null===c||void 0===c?void 0:c.longitude});return Sa(e)?Object(d.a)(Object(d.a)({},i),{},{type:e.type,visitedUrl:e.visitedUrl}):i})),La=function(e){var t=e.onChange,r=e.selected,n=void 0===r?{}:r,c=e.className,s=e.isOrphanVisits,i=e.botsSupported;if(!i&&!s)return null;var o=n.orphanVisitsType,l=n.excludeBots,u=void 0!==l&&l,j=function(e){return{active:o===e,onClick:function(){return t(Object(d.a)(Object(d.a)({},n),{},{orphanVisitsType:e===(null===n||void 0===n?void 0:n.orphanVisitsType)?void 0:e}))}}};return Object(a.jsxs)(J,{text:"Filters",dropdownClassName:c,className:"mr-3",right:!0,minWidth:250,children:[i&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(W.a,{header:!0,children:"Bots:"}),Object(a.jsx)(W.a,{active:u,onClick:function(){return t(Object(d.a)(Object(d.a)({},n),{},{excludeBots:!(null!==n&&void 0!==n&&n.excludeBots)}))},children:"Exclude potential bots"})]}),i&&s&&Object(a.jsx)(W.a,{divider:!0}),s&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(W.a,{header:!0,children:"Orphan visits type:"}),Object(a.jsx)(W.a,Object(d.a)(Object(d.a)({},j("base_url")),{},{children:"Base URL"})),Object(a.jsx)(W.a,Object(d.a)(Object(d.a)({},j("invalid_short_url")),{},{children:"Invalid short URL"})),Object(a.jsx)(W.a,Object(d.a)(Object(d.a)({},j("regular_404")),{},{children:"Regular 404"}))]}),Object(a.jsx)(W.a,{divider:!0}),Object(a.jsx)(W.a,{disabled:!Object(Lr.c)(n),onClick:function(){return t({})},children:Object(a.jsx)("i",{children:"Clear filters"})})]})},Va=function(e){var t,r,n=e.chart.config,c=null!==(t=n.data)&&void 0!==t?t:{},s=c.labels,i=void 0===s?[]:s,o=c.datasets,l=void 0===o?[]:o,u=Object(p.a)(l,1)[0].backgroundColor,d=(null!==(r=n.options)&&void 0!==r?r:{}).defaultColor;return Object(a.jsx)("ul",{className:"doughnut-chart-legend",children:i.map((function(e,t){var r;return Object(a.jsxs)("li",{className:"doughnut-chart-legend__item d-flex",children:[Object(a.jsx)("div",{className:"doughnut-chart-legend__item-color",style:{backgroundColor:null!==(r=u[t])&&void 0!==r?r:d}}),Object(a.jsx)("small",{className:"doughnut-chart-legend__item-text flex-fill",children:e})]},e)}))})},Ia=function(e){return[{data:e,backgroundColor:["#97BBCD","#F7464A","#46BFBD","#FDB45C","#949FB1","#57A773","#414066","#08B2E3","#B6C454","#DCDCDC","#463730"],borderColor:Object(Xc.h)()?Xc.e:Xc.f,borderWidth:2}]},Fa=Object(M.memo)((function(e){var t=e.stats,r=Object(M.useState)(),n=Object(p.a)(r,2),c=n[0],s=n[1],i=Object(Re.a)(t),o=Object(Ee.a)(t),l={plugins:{legend:{display:!1},tooltip:{intersect:!0,callbacks:{label:Yc}}}},u=function(e,t){return{labels:e,datasets:Ia(t)}}(i,o);return Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-sm-12 col-md-7",children:Object(a.jsx)(Tc.b,{height:300,data:u,options:l,ref:function(e){s(null!==e&&void 0!==e?e:void 0)}})}),Object(a.jsx)("div",{className:"col-sm-12 col-md-5",children:c&&Object(a.jsx)(Va,{chart:c})})]})})),Aa=r(603),Ma=function(e){var t=e.title,r=e.footer,n=e.children;return Object(a.jsxs)(De.a,{children:[Object(a.jsx)(jc.a,{className:"chart-card__header",children:"function"===typeof t?t():t}),Object(a.jsx)(bc.a,{children:n}),r&&Object(a.jsx)(Aa.a,{className:"chart-card__footer--sticky",children:r})]})},Ga=function(e){var t=e.title,r=e.stats;return Object(a.jsx)(Ma,{title:t,children:Object(a.jsx)(Fa,{stats:r})})},Pa=r(128),Ba=r(611),Ha=r(604),Wa=function(e){var t=e.toggleClassName,r=e.ranges,n=e.value,c=e.setValue;return Object(a.jsxs)(Le.a,{children:[Object(a.jsx)(z.a,{caret:!0,color:"link",className:t,children:"Paginate"}),Object(a.jsxs)(Q.a,{right:!0,children:[r.map((function(e){return Object(a.jsxs)(W.a,{active:e===n,onClick:function(){return c(e)},children:[Object(a.jsx)("b",{children:e})," items per page"]},e)})),Object(a.jsx)(W.a,{divider:!0}),Object(a.jsx)(W.a,{disabled:n===1/0,onClick:function(){return c(1/0)},children:Object(a.jsx)("i",{children:"Clear pagination"})})]})]})},qa=function(e){return e.startsWith("hidden")?"":e},za=function(e,t,r){var n={data:e,label:r?"Non-selected":"Visits",backgroundColor:Xc.d,borderColor:Xc.c,borderWidth:2};return t.every((function(e){return 0===e}))?[n]:[n,{label:null!==r&&void 0!==r?r:"Selected",data:t,backgroundColor:Xc.b,borderColor:Xc.a,borderWidth:2}]},Qa=function(e,t){return function(r){var n=Object(p.a)(r,1)[0];t&&n&&t(e[n.index])}},Ka=function(e){var t=e.stats,r=e.highlightedStats,n=e.highlightedLabel,c=e.onClick,s=e.max,i=Object(Re.a)(t).map(qa),o=Object(Ee.a)(function(e){return!!e&&Object.keys(e).length>0}(r)?Object(Re.a)(r).reduce((function(e,t){return e[t]&&(e[t]-=r[t]),e}),Object(d.a)({},t)):t),l=Qc(null!==r&&void 0!==r?r:{},i),u={plugins:{legend:{display:!1},tooltip:{mode:"y",filter:function(e){return""!==e.label},callbacks:{label:Zc}}},scales:{x:{beginAtZero:!0,stacked:!0,max:s,ticks:{precision:0,callback:ar}},y:{stacked:!0}},onHover:Jc,indexAxis:"y"},j=function(e,t,r,n){return{labels:e,datasets:za(t,r,n)}}(i,o,l,n),b=function(e){return e.length>20?10*e.length:void 0}(i),h=function(e){return Object(a.jsx)(Tc.a,{data:j,options:u,height:b,getElementAtEvent:Qa(i,c)},"".concat(b,"_").concat(e))};return Object(a.jsxs)(a.Fragment,{children:[void 0!==r&&h("with_stats"),void 0===r&&h("without_stats")]})},Ja=function(e){return"String"===Object(Pa.a)(e)?Object(Ba.a)(e):e},Za=function(e){return Object(p.a)(e,1)[0]},Ya=function(e){return Object(p.a)(e,2)[1]},Xa=function(e){var t=e.stats,r=e.highlightedStats,n=e.title,c=e.sortingItems,s=e.extraHeaderContent,i=e.withPagination,o=void 0===i||i,l=Object(y.a)(e,["stats","highlightedStats","title","sortingItems","extraHeaderContent","withPagination"]),u=Object(M.useState)({}),j=Object(p.a)(u,2),b=j[0],h=j[1],O=Object(M.useState)(1),v=Object(p.a)(O,2),f=v[0],m=v[1],x=Object(M.useState)(50),g=Object(p.a)(x,2),S=g[0],C=g[1],N=function(e){var t=e[f-1];if(f<e.length)return t;var r=e[0].length;return[].concat(Object(Ue.a)(t),Object(Ue.a)(Object(Lr.e)(r-t.length,(function(e){return["hidden_".concat(e),0]}))))},w=function(e,t,r){var n=function(e,t){var r=Object(Ve.a)(e),n=b.field?Object(Ha.a)(Object(F.a)(b.field===Object.keys(t)[0]?Za:Ya,Ja),r):r;return b.dir&&"ASC"!==b.dir?Object(Dc.a)(n):n}(e,r),c=n.map(Za),s=t&&Object(Ve.a)(Object(d.a)(Object(d.a)({},Object(Hc.a)(c,c.map((function(){return 0})))),t));if(n.length<=S)return{currentPageStats:Object(Wn.a)(n),currentPageHighlightedStats:s&&Object(Wn.a)(s)};var i,o,l=Object(la.a)(S,n),u=s&&Object(la.a)(S,s);return{currentPageStats:Object(Wn.a)(N(l)),currentPageHighlightedStats:u&&Object(Wn.a)(N(u)),pagination:(o=l.length,Object(a.jsx)(ua,{currentPage:f,pagesCount:o,setCurrentPage:m})),max:(i=Math.max.apply(Math,Object(Ue.a)(n.map(Ya))),10*nr(i/10))}}(t,r&&Object.keys(r).length>0?r:void 0,c),k=w.currentPageStats,_=w.currentPageHighlightedStats,U=w.pagination,T=w.max,R=Object.keys(k);return Object(a.jsx)(Ma,{title:function(){return Object(a.jsxs)(a.Fragment,{children:[n,Object(a.jsx)("div",{className:"float-right",children:Object(a.jsx)(Ae,{isButton:!1,right:!0,items:c,order:b,onChange:function(e,t){h({field:e,dir:t}),m(1)}})}),o&&Object.keys(t).length>50&&Object(a.jsx)("div",{className:"float-right",children:Object(a.jsx)(Wa,{toggleClassName:"btn-sm p-0 mr-3",ranges:[50,100,200,500],value:S,setValue:function(e){C(e),m(1)}})}),s&&Object(a.jsx)("div",{className:"float-right",children:s(U?R:void 0)})]})},footer:U,children:Object(a.jsx)(Ka,Object(d.a)({stats:k,highlightedStats:_,max:T},l))})},$a={byTime:{title:"By time",subPath:"",icon:V.d},byContext:{title:"By context",subPath:"/by-context",icon:V.g},byLocation:{title:"By location",subPath:"/by-location",icon:V.x},list:{title:"List",subPath:"/list",icon:V.w}},es=function(e){var t=e.subPath,r=e.title,n=e.icon,c=e.to;return Object(a.jsxs)(kc.a,{tag:o.c,className:"visits-stats__nav-link",to:c,isActive:function(e,r){return r.pathname.endsWith("visits".concat(t))},replace:!0,children:[Object(a.jsx)(I.a,{icon:n}),Object(a.jsx)("span",{className:"ml-2 d-none d-sm-inline",children:r})]})},ts=function(e){var t,r,n=e.children,c=e.visitsInfo,s=e.getVisits,i=e.cancelGetVisits,o=e.baseUrl,l=e.domain,u=e.settings,j=e.exportCsv,h=e.selectedServer,O=e.isOrphanVisits,v=void 0!==O&&O,f=null!==(t=null===(r=u.visits)||void 0===r?void 0:r.defaultInterval)&&void 0!==t?t:"last30Days",m=Object(M.useState)(me(f)),x=Object(p.a)(m,2),g=x[0],y=x[1],S=Object(M.useState)([]),C=Object(p.a)(S,2),w=C[0],k=C[1],_=Object(M.useState)(),U=Object(p.a)(_,2),T=U[0],R=U[1],E=Object(M.useState)({}),D=Object(p.a)(E,2),L=D[0],F=D[1],A=Object(Vt.a)(h),G=function(e){var t=l?"?domain=".concat(l):"";return e?"".concat(o).concat(e).concat(t):"".concat(o).concat(t)},B=c.visits,H=c.loading,W=c.loadingLarge,q=c.error,z=c.errorData,Q=c.progress,K=Object(M.useMemo)((function(){return Da(B)}),[B]),J=Object(M.useMemo)((function(){return Ea(K)}),[K]),Z=J.os,Y=J.browsers,X=J.referrers,$=J.countries,ee=J.cities,te=J.citiesForMap,re=J.visitedUrls,ne=Object(Ee.a)(te),ce=function(e){Ye=void 0,k(e)},ae=function(e){return function(t){var r="".concat(e,"_").concat(t);Ye===r?(k([]),R(void 0),Ye=void 0):(k(K.filter(Object(wc.a)(e,t))),R(t),Ye=r)}};Object(M.useEffect)((function(){return i}),[]),Object(M.useEffect)((function(){s({dateRange:g,filter:L})}),[g,L]);return Object(a.jsxs)(a.Fragment,{children:[n,Object(a.jsx)("section",{className:"mt-3",children:Object(a.jsxs)("div",{className:"row flex-md-row-reverse",children:[Object(a.jsx)("div",{className:"col-lg-7 col-xl-6",children:Object(a.jsxs)("div",{className:"d-md-flex",children:[Object(a.jsx)("div",{className:"flex-fill",children:Object(a.jsx)(Ne,{disabled:H,initialDateRange:f,defaultText:"All visits",onDatesChange:y})}),Object(a.jsx)(La,{className:"ml-0 ml-md-2 mt-3 mt-md-0",isOrphanVisits:v,botsSupported:A,selected:L,onChange:F})]})}),B.length>0&&Object(a.jsx)("div",{className:"col-lg-5 col-xl-6 mt-3 mt-lg-0",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)(Wr.a,{outline:!0,disabled:0===w.length,className:"btn-md-block mr-2",onClick:function(){return ce([])},children:["Clear selection ",w.length>0&&Object(a.jsxs)(a.Fragment,{children:["(",ar(w.length),")"]})]}),Object(a.jsxs)(Wr.a,{outline:!0,color:"primary",className:"btn-md-block",onClick:function(){return j(K)},children:[Object(a.jsx)(I.a,{icon:V.q})," Export (",ar(K.length),")"]})]})})]})}),Object(a.jsx)("section",{className:"mt-3",children:W?Object(a.jsxs)(dn.a,{loading:!0,children:["This is going to take a while... :S",Object(a.jsx)(_c.a,{value:Q,striped:100===Q,className:"mt-3"})]}):H?Object(a.jsx)(dn.a,{loading:!0}):q?Object(a.jsx)(Fr,{type:"error",children:Object(a.jsx)(Ar,{errorData:z,fallbackMessage:"An error occurred while loading visits :("})}):Object(N.a)(B)?Object(a.jsx)(dn.a,{children:"There are no visits matching current filter  :("}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(De.a,{className:"visits-stats__nav p-0 overflow-hidden",body:!0,children:Object(a.jsx)(Uc.a,{pills:!0,fill:!0,children:Object.entries($a).map((function(e){var t=Object(p.a)(e,2),r=t[0],n=t[1];return Object(a.jsx)(es,Object(d.a)(Object(d.a)({},n),{},{to:G(n.subPath)}),r)}))})}),Object(a.jsx)(Vr.a,{children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{exact:!0,path:o,children:Object(a.jsx)("div",{className:"col-12 mt-3",children:Object(a.jsx)(oa,{title:"Visits during time",visits:K,highlightedVisits:w,highlightedLabel:T,setSelectedVisits:ce})})}),Object(a.jsxs)(b.b,{exact:!0,path:"".concat(o).concat($a.byContext.subPath),children:[Object(a.jsx)("div",{className:P()("mt-3 col-lg-6",{"col-xl-4":!v}),children:Object(a.jsx)(Ga,{title:"Operating systems",stats:Z})}),Object(a.jsx)("div",{className:P()("mt-3 col-lg-6",{"col-xl-4":!v}),children:Object(a.jsx)(Ga,{title:"Browsers",stats:Y})}),Object(a.jsx)("div",{className:P()("mt-3",{"col-xl-4":!v,"col-lg-6":v}),children:Object(a.jsx)(Xa,{title:"Referrers",stats:X,withPagination:!1,highlightedStats:Na(w,"referer"),highlightedLabel:T,sortingItems:{name:"Referrer name",amount:"Visits amount"},onClick:ae("referer")})}),v&&Object(a.jsx)("div",{className:"mt-3 col-lg-6",children:Object(a.jsx)(Xa,{title:"Visited URLs",stats:re,highlightedLabel:T,highlightedStats:Na(w,"visitedUrl"),sortingItems:{visitedUrl:"Visited URL",amount:"Visits amount"},onClick:ae("visitedUrl")})})]}),Object(a.jsxs)(b.b,{exact:!0,path:"".concat(o).concat($a.byLocation.subPath),children:[Object(a.jsx)("div",{className:"col-lg-6 mt-3",children:Object(a.jsx)(Xa,{title:"Countries",stats:$,highlightedStats:Na(w,"country"),highlightedLabel:T,sortingItems:{name:"Country name",amount:"Visits amount"},onClick:ae("country")})}),Object(a.jsx)("div",{className:"col-lg-6 mt-3",children:Object(a.jsx)(Xa,{title:"Cities",stats:ee,highlightedStats:Na(w,"city"),highlightedLabel:T,extraHeaderContent:function(e){return ne.length>0&&Object(a.jsx)(pa,{modalTitle:"Cities",locations:ne,activeCities:e})},sortingItems:{name:"City name",amount:"Visits amount"},onClick:ae("city")})})]}),Object(a.jsx)(b.b,{exact:!0,path:"".concat(o).concat($a.list.subPath),children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(ba,{visits:K,selectedVisits:w,setSelectedVisits:ce,isOrphanVisits:v,selectedServer:h})})}),Object(a.jsx)(b.a,{to:o})]})})]})})]})},rs=function(e){var t=e.exportVisits;return Ge((function(e){var r=e.history.goBack,n=e.match,c=n.params,s=n.url,i=e.location.search,o=e.shortUrlVisits,l=e.shortUrlDetail,u=e.getShortUrlVisits,j=e.getShortUrlDetail,b=e.cancelGetShortUrlVisits,h=e.settings,O=e.selectedServer,v=c.shortCode,f=Object(w.a)(i).domain;return Object(M.useEffect)((function(){j(v,f)}),[]),Object(a.jsx)(ts,{getVisits:function(e){return u(v,Object(d.a)(Object(d.a)({},wa(e)),{},{domain:f}))},cancelGetVisits:b,visitsInfo:o,baseUrl:s,domain:f,settings:h,exportCsv:function(e){var r;return t("short-url_".concat(null===(r=l.shortUrl)||void 0===r?void 0:r.shortUrl.replace(/https?:\/\//g,""),"_visits.csv"),e)},selectedServer:O,children:Object(a.jsx)(Nc,{shortUrlDetail:l,shortUrlVisits:o,goBack:r})})}),(function(e){var t=e.match;return[Pe.shortUrlVisits(t.params.shortCode)]}))},ns=r(616),cs=5e3,as=function(e){return e.currentPage>=e.pagesCount},ss=function(e,t){return 100*t/e},is=function(){var e=Object(x.a)(m.a.mark((function e(t,r,n,c,a){var s,i,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:n.start}),s=function(){var e=Object(x.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(r.map(function(){var e=Object(x.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(r,cs).then(Object(O.a)("data")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then(ns.a));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(x.a)(m.a.mark((function e(t){var r,o,l=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:0,!a()){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,s(t[r]);case 5:if(o=e.sent,c({type:n.progress,progress:ss(t.length,r+2)}),!(r<t.length-1)){e.next=13;break}return e.t0=o,e.next=11,i(t,r+1);case 11:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1));case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(x.a)(m.a.mark((function e(){var r,a,s,o,l,u,d=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>0&&void 0!==d[0]?d[0]:1,e.next=3,t(r,cs);case 3:if(a=e.sent,s=a.pagination,o=a.data,s&&!as(s)){e.next=8;break}return e.abrupt("return",o);case 8:return l=Object(er.a)(2,s.pagesCount+1),u=Object(la.a)(4,l),s.pagesCount-1>4&&c({type:n.large}),e.t0=o,e.next=14,i(u);case 14:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.prev=4,e.next=7,o();case 7:l=e.sent,c(Object(d.a)(Object(d.a)({},r),{},{visits:l,type:n.finish})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),c({type:n.error,errorData:ft(e.t0)});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,r,n,c,a){return e.apply(this,arguments)}}(),os="shlink/shortUrlVisits/GET_SHORT_URL_VISITS_START",ls="shlink/shortUrlVisits/GET_SHORT_URL_VISITS_ERROR",us="shlink/shortUrlVisits/GET_SHORT_URL_VISITS",ds="shlink/shortUrlVisits/GET_SHORT_URL_VISITS_LARGE",js="shlink/shortUrlVisits/GET_SHORT_URL_VISITS_CANCEL",bs="shlink/shortUrlVisits/GET_SHORT_URL_VISITS_PROGRESS_CHANGED",hs={visits:[],shortCode:"",domain:void 0,loading:!1,loadingLarge:!1,error:!1,cancelLoad:!1,progress:0},Os=ot((Xe={},Object(u.a)(Xe,os,(function(){return Object(d.a)(Object(d.a)({},hs),{},{loading:!0})})),Object(u.a)(Xe,ls,(function(e,t){var r=t.errorData;return Object(d.a)(Object(d.a)({},hs),{},{error:!0,errorData:r})})),Object(u.a)(Xe,us,(function(e,t){var r=t.visits,n=t.query,c=t.shortCode,a=t.domain;return Object(d.a)(Object(d.a)({},hs),{},{visits:r,shortCode:c,domain:a,query:n})})),Object(u.a)(Xe,ds,(function(e){return Object(d.a)(Object(d.a)({},e),{},{loadingLarge:!0})})),Object(u.a)(Xe,js,(function(e){return Object(d.a)(Object(d.a)({},e),{},{cancelLoad:!0})})),Object(u.a)(Xe,bs,(function(e,t){var r=t.progress;return Object(d.a)(Object(d.a)({},e),{},{progress:r})})),Object(u.a)(Xe,Ot,(function(e,t){var r=t.createdVisits,n=e.shortCode,c=e.domain,a=e.visits,s=e.query,i=void 0===s?{}:s,o=i.startDate,l=i.endDate,u=r.filter((function(e){var t=e.shortUrl,r=e.visit;return t&&ht(t,n,c)&&ue(r.date,o,l)})).map((function(e){return e.visit}));return 0===u.length?e:Object(d.a)(Object(d.a)({},e),{},{visits:[].concat(Object(Ue.a)(u),Object(Ue.a)(a))})})),Xe),hs),vs=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(x.a)(m.a.mark((function n(c,a){var s,i,o,l,u,j;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=e(a),i=s.getShortUrlVisits,o=function(){var e=Object(x.a)(m.a.mark((function e(n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(t,Object(d.a)(Object(d.a)({},r),{},{page:n,itemsPerPage:c})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){return a().shortUrlVisits.cancelLoad},u={shortCode:t,query:r,domain:r.domain},j={start:os,large:ds,finish:us,error:ls,progress:bs},n.abrupt("return",is(o,u,j,c,l));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},fs=lt(js),ms=function(e){var t=e.tagVisits,r=e.goBack,n=e.colorGenerator,c=t.visits,s=t.tag,i=Object(a.jsxs)("span",{className:"d-flex align-items-center justify-content-center",children:[Object(a.jsx)("span",{className:"mr-2",children:"Visits for"}),Object(a.jsx)(H,{text:s,colorGenerator:n})]});return Object(a.jsx)(Cc,{title:i,goBack:r,visits:c})},xs=function(e,t){var r=t.exportVisits;return Ge((function(t){var n=t.history.goBack,c=t.match,s=c.params,i=c.url,o=t.getTagVisits,l=t.tagVisits,u=t.cancelGetTagVisits,d=t.settings,j=t.selectedServer,b=s.tag;return Object(a.jsx)(ts,{getVisits:function(e){return o(b,wa(e))},cancelGetVisits:u,visitsInfo:l,baseUrl:i,settings:d,exportCsv:function(e){return r("tag_".concat(b,"_visits.csv"),e)},selectedServer:j,children:Object(a.jsx)(ms,{tagVisits:l,goBack:n,colorGenerator:e})})}),(function(){return[Pe.visits]}))},gs="shlink/tagVisits/GET_TAG_VISITS_START",ps="shlink/tagVisits/GET_TAG_VISITS_ERROR",ys="shlink/tagVisits/GET_TAG_VISITS",Ss="shlink/tagVisits/GET_TAG_VISITS_LARGE",Cs="shlink/tagVisits/GET_TAG_VISITS_CANCEL",Ns="shlink/tagVisits/GET_TAG_VISITS_PROGRESS_CHANGED",ws={visits:[],tag:"",loading:!1,loadingLarge:!1,error:!1,cancelLoad:!1,progress:0},ks=ot(($e={},Object(u.a)($e,gs,(function(){return Object(d.a)(Object(d.a)({},ws),{},{loading:!0})})),Object(u.a)($e,ps,(function(e,t){var r=t.errorData;return Object(d.a)(Object(d.a)({},ws),{},{error:!0,errorData:r})})),Object(u.a)($e,ys,(function(e,t){var r=t.visits,n=t.tag,c=t.query;return Object(d.a)(Object(d.a)({},ws),{},{visits:r,tag:n,query:c})})),Object(u.a)($e,Ss,(function(e){return Object(d.a)(Object(d.a)({},e),{},{loadingLarge:!0})})),Object(u.a)($e,Cs,(function(e){return Object(d.a)(Object(d.a)({},e),{},{cancelLoad:!0})})),Object(u.a)($e,Ns,(function(e,t){var r=t.progress;return Object(d.a)(Object(d.a)({},e),{},{progress:r})})),Object(u.a)($e,Ot,(function(e,t){var r=t.createdVisits,n=e.tag,c=e.visits,a=e.query,s=void 0===a?{}:a,i=s.startDate,o=s.endDate,l=r.filter((function(e){var t=e.shortUrl,r=e.visit;return(null===t||void 0===t?void 0:t.tags.includes(n))&&ue(r.date,i,o)})).map((function(e){return e.visit}));return Object(d.a)(Object(d.a)({},e),{},{visits:[].concat(Object(Ue.a)(l),Object(Ue.a)(c))})})),$e),ws),_s=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(){var n=Object(x.a)(m.a.mark((function n(c,a){var s,i,o,l,u,j;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=e(a),i=s.getTagVisits,o=function(){var e=Object(x.a)(m.a.mark((function e(n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(t,Object(d.a)(Object(d.a)({},r),{},{page:n,itemsPerPage:c})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){return a().tagVisits.cancelLoad},u={tag:t,query:r},j={start:gs,large:Ss,finish:ys,error:ps,progress:Ns},n.abrupt("return",is(o,u,j,c,l));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},Us=lt(Cs),Ts=function(e){var t=e.orphanVisits,r=e.goBack,n=t.visits;return Object(a.jsx)(Cc,{title:"Orphan visits",goBack:r,visits:n})},Rs=function(e){var t=e.exportVisits;return Ge((function(e){var r=e.history.goBack,n=e.match.url,c=e.getOrphanVisits,s=e.orphanVisits,i=e.cancelGetOrphanVisits,o=e.settings,l=e.selectedServer;return Object(a.jsx)(ts,{getVisits:function(e){var t;return c(wa(e),null===(t=e.filter)||void 0===t?void 0:t.orphanVisitsType)},cancelGetVisits:i,visitsInfo:s,baseUrl:n,settings:o,exportCsv:function(e){return t("orphan_visits.csv",e)},selectedServer:l,isOrphanVisits:!0,children:Object(a.jsx)(Ts,{orphanVisits:s,goBack:r})})}),(function(){return[Pe.orphanVisits]}))},Es="shlink/orphanVisits/GET_ORPHAN_VISITS_START",Ds="shlink/orphanVisits/GET_ORPHAN_VISITS_ERROR",Ls="shlink/orphanVisits/GET_ORPHAN_VISITS",Vs="shlink/orphanVisits/GET_ORPHAN_VISITS_LARGE",Is="shlink/orphanVisits/GET_ORPHAN_VISITS_CANCEL",Fs="shlink/orphanVisits/GET_ORPHAN_VISITS_PROGRESS_CHANGED",As={visits:[],loading:!1,loadingLarge:!1,error:!1,cancelLoad:!1,progress:0},Ms=ot((et={},Object(u.a)(et,Es,(function(){return Object(d.a)(Object(d.a)({},As),{},{loading:!0})})),Object(u.a)(et,Ds,(function(e,t){var r=t.errorData;return Object(d.a)(Object(d.a)({},As),{},{error:!0,errorData:r})})),Object(u.a)(et,Ls,(function(e,t){var r=t.visits,n=t.query;return Object(d.a)(Object(d.a)({},As),{},{visits:r,query:n})})),Object(u.a)(et,Vs,(function(e){return Object(d.a)(Object(d.a)({},e),{},{loadingLarge:!0})})),Object(u.a)(et,Is,(function(e){return Object(d.a)(Object(d.a)({},e),{},{cancelLoad:!0})})),Object(u.a)(et,Fs,(function(e,t){var r=t.progress;return Object(d.a)(Object(d.a)({},e),{},{progress:r})})),Object(u.a)(et,Ot,(function(e,t){var r=t.createdVisits,n=e.visits,c=e.query,a=void 0===c?{}:c,s=a.startDate,i=a.endDate,o=r.filter((function(e){var t=e.visit;return ue(t.date,s,i)})).map((function(e){return e.visit}));return Object(d.a)(Object(d.a)({},e),{},{visits:[].concat(Object(Ue.a)(o),Object(Ue.a)(n))})})),et),As),Gs=function(e,t){return!t||t===e.type},Ps=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return function(){var n=Object(x.a)(m.a.mark((function n(c,a){var s,i,o,l,u,j;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=e(a),i=s.getOrphanVisits,o=function(){var e=Object(x.a)(m.a.mark((function e(n,c){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(Object(d.a)(Object(d.a)({},t),{},{page:n,itemsPerPage:c})).then((function(e){var t=e.data.filter((function(e){return Sa(e)&&Gs(e,r)}));return Object(d.a)(Object(d.a)({},e),{},{data:t})})));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),l=function(){return a().orphanVisits.cancelLoad},u={query:t},j={start:Es,large:Vs,finish:Ls,error:Ds,progress:Fs},n.abrupt("return",is(o,u,j,c,l));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}},Bs=lt(Is),Hs="shlink/visitsOverview/GET_OVERVIEW_START",Ws="shlink/visitsOverview/GET_OVERVIEW_ERROR",qs="shlink/visitsOverview/GET_OVERVIEW",zs={visitsCount:0,orphanVisitsCount:0,loading:!1,error:!1},Qs=ot((tt={},Object(u.a)(tt,Hs,(function(){return Object(d.a)(Object(d.a)({},zs),{},{loading:!0})})),Object(u.a)(tt,Ws,(function(){return Object(d.a)(Object(d.a)({},zs),{},{error:!0})})),Object(u.a)(tt,qs,(function(e,t){var r=t.visitsCount,n=t.orphanVisitsCount;return Object(d.a)(Object(d.a)({},zs),{},{visitsCount:r,orphanVisitsCount:n})})),Object(u.a)(tt,Ot,(function(e,t){var r=e.visitsCount,n=e.orphanVisitsCount,c=void 0===n?0:n,a=Object(y.a)(e,["visitsCount","orphanVisitsCount"]),s=t.createdVisits,i=Ca(s),o=i.regularVisits,l=i.orphanVisits;return Object(d.a)(Object(d.a)({},a),{},{visitsCount:r+o.length,orphanVisitsCount:c+l.length})})),tt),zs),Ks=function(e){return function(){return function(){var t=Object(x.a)(m.a.mark((function t(r,n){var c,a,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:Hs}),t.prev=1,c=e(n),a=c.getVisitsOverview,t.next=5,a();case 5:s=t.sent,r(Object(d.a)({type:qs},s)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),r({type:Ws});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,r){return t.apply(this,arguments)}}()}},Js=function e(t,r){var n=this;Object(g.a)(this,e),this.window=t,this.csvjson=r,this.exportVisits=function(e,t){if(t.length){var r=n.csvjson.toCSV(t,{headers:"key"});Object(pc.a)(n.window,r,e)}}},Zs=function(e,t){e.serviceFactory("MapModal",(function(){return ga})),e.serviceFactory("ShortUrlVisits",rs,"VisitsExporter"),e.decorator("ShortUrlVisits",t(["shortUrlVisits","shortUrlDetail","mercureInfo","settings","selectedServer"],["getShortUrlVisits","getShortUrlDetail","cancelGetShortUrlVisits","createNewVisits","loadMercureInfo"])),e.serviceFactory("TagVisits",xs,"ColorGenerator","VisitsExporter"),e.decorator("TagVisits",t(["tagVisits","mercureInfo","settings","selectedServer"],["getTagVisits","cancelGetTagVisits","createNewVisits","loadMercureInfo"])),e.serviceFactory("OrphanVisits",Rs,"VisitsExporter"),e.decorator("OrphanVisits",t(["orphanVisits","mercureInfo","settings","selectedServer"],["getOrphanVisits","cancelGetOrphanVisits","createNewVisits","loadMercureInfo"])),e.serviceFactory("VisitsParser",(function(){return n})),e.service("VisitsExporter",Js,"window","csvjson"),e.serviceFactory("getShortUrlVisits",vs,"buildShlinkApiClient"),e.serviceFactory("cancelGetShortUrlVisits",(function(){return fs})),e.serviceFactory("getTagVisits",_s,"buildShlinkApiClient"),e.serviceFactory("cancelGetTagVisits",(function(){return Us})),e.serviceFactory("getOrphanVisits",Ps,"buildShlinkApiClient"),e.serviceFactory("cancelGetOrphanVisits",(function(){return Bs})),e.serviceFactory("createNewVisits",(function(){return vt})),e.serviceFactory("loadVisitsOverview",Ks,"buildShlinkApiClient")},Ys=r(294),Xs=r.n(Ys),$s=function(e){var t=e.tag,r=e.colorGenerator;return Object(a.jsx)("div",{style:{backgroundColor:r.getColorForKey(t)},className:"tag-bullet"})},ei=function(e){return{id:e,name:e}},ti=function(e){return function(t){var r,n,c=t.selectedTags,s=t.onChange,i=t.placeholder,o=t.listTags,l=t.tagsList,u=t.settings;Object(M.useEffect)((function(){o()}),[]);var d=null!==(r=null===(n=u.shortUrlCreation)||void 0===n?void 0:n.tagFilteringMode)&&void 0!==r?r:"startsWith";return Object(a.jsx)(Xs.a,{tags:c.map(ei),tagComponent:function(t){var r=t.tag,n=t.onDelete;return Object(a.jsx)(H,{colorGenerator:e,text:r.name,clearable:!0,className:"react-tags__tag",onClose:n})},suggestions:l.tags.filter((function(e){return!c.includes(e)})).map(ei),suggestionComponent:function(t){var r=t.item;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($s,{tag:"".concat(r.name),colorGenerator:e}),r.name]})},allowNew:!0,addOnBlur:!0,placeholderText:null!==i&&void 0!==i?i:"Add tags to the URL",minQueryLength:1,delimiters:["Enter","Tab",","],suggestionsTransform:"includes"===d?function(e,t){return t.filter((function(t){return t.name.includes(e)}))}:void 0,onDelete:function(e){var t=Object(Ue.a)(c);t.splice(e,1),s(t)},onAddition:function(e){var t=e.name;return s(Object(Ue.a)(new Set([].concat(Object(Ue.a)(c),Object(Ue.a)(t.toLowerCase().split(","))))))}})}},ri=r(553),ni=function(e,t,r){return function(n){var c=n.tag,s=n.selectedServer,i=n.displayed,l=n.toggle,u=Object(K.d)(),d=Object(p.a)(u,2),j=d[0],b=d[1],h=Object(K.d)(),O=Object(p.a)(h,2),f=O[0],m=O[1],x=Object(K.d)(),g=Object(p.a)(x,3),y=g[0],S=g[2],C=Object(M.useRef)(),N=Object(v.a)(s);return Object(M.useEffect)((function(){var e;(e=C.current)&&e.scrollWidth>e.clientWidth&&S()}),[C.current]),Object(a.jsxs)(De.a,{className:"tag-card",children:[Object(a.jsxs)(jc.a,{className:"tag-card__header",children:[Object(a.jsx)(Wr.a,{color:"link",size:"sm",className:"tag-card__btn tag-card__btn--last",onClick:b,children:Object(a.jsx)(I.a,{icon:V.Q})}),Object(a.jsx)(Wr.a,{color:"link",size:"sm",className:"tag-card__btn",onClick:m,children:Object(a.jsx)(I.a,{icon:V.C})}),Object(a.jsxs)("h5",{className:"tag-card__tag-title text-ellipsis",title:y?c.tag:void 0,ref:function(e){C.current=null!==e&&void 0!==e?e:void 0},children:[Object(a.jsx)($s,{tag:c.tag,colorGenerator:r}),Object(a.jsx)("span",{className:"tag-card__tag-name",onClick:l,children:c.tag})]})]}),Object(a.jsx)(ri.a,{isOpen:i,children:Object(a.jsxs)(bc.a,{className:"tag-card__body",children:[Object(a.jsxs)(o.b,{to:"/server/".concat(N,"/list-short-urls/1?tags=").concat(encodeURIComponent(c.tag)),className:"btn btn-outline-secondary btn-block d-flex justify-content-between align-items-center mb-1",children:[Object(a.jsxs)("span",{className:"text-ellipsis",children:[Object(a.jsx)(I.a,{icon:V.v,className:"mr-2"}),"Short URLs"]}),Object(a.jsx)("b",{children:ar(c.shortUrls)})]}),Object(a.jsxs)(o.b,{to:"/server/".concat(N,"/tag/").concat(c.tag,"/visits"),className:"btn btn-outline-secondary btn-block d-flex justify-content-between align-items-center",children:[Object(a.jsxs)("span",{className:"text-ellipsis",children:[Object(a.jsx)(I.a,{icon:V.p,className:"mr-2"}),"Visits"]}),Object(a.jsx)("b",{children:ar(c.visits)})]})]})}),Object(a.jsx)(e,{tag:c.tag,toggle:b,isOpen:j}),Object(a.jsx)(t,{tag:c.tag,toggle:m,isOpen:f})]})}},ci=function(e){var t=e.tag,r=e.toggle,n=e.isOpen,c=e.deleteTag,s=e.tagDelete,i=e.tagDeleted,o=s.deleting,l=s.error,u=s.errorData,d=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:i(t),r();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(Ur.a,{toggle:r,isOpen:n,centered:!0,children:[Object(a.jsx)(Tr.a,{toggle:r,children:Object(a.jsx)("span",{className:"text-danger",children:"Delete tag"})}),Object(a.jsxs)(Rr.a,{children:["Are you sure you want to delete tag ",Object(a.jsx)("b",{children:t}),"?",l&&Object(a.jsx)(Fr,{type:"error",small:!0,className:"mt-2",children:Object(a.jsx)(Ar,{errorData:u,fallbackMessage:"Something went wrong while deleting the tag :("})})]}),Object(a.jsxs)(Er.a,{children:[Object(a.jsx)("button",{className:"btn btn-link",onClick:r,children:"Cancel"}),Object(a.jsx)("button",{className:"btn btn-danger",disabled:o,onClick:d,children:o?"Deleting tag...":"Delete tag"})]})]})},ai=r(607),si=r(306),ii=function(e){var t=e.getColorForKey;return function(e){var r=e.tag,n=e.editTag,c=e.toggle,s=e.tagEdited,i=e.isOpen,o=e.tagEdit,l=Object(M.useState)(r),u=Object(p.a)(l,2),d=u[0],j=u[1],b=Object(M.useState)(t(r)),h=Object(p.a)(b,2),O=h[0],v=h[1],f=Object(K.d)(),g=Object(p.a)(f,4),y=g[0],S=g[1],C=g[3],N=o.editing,w=o.error,k=o.errorData,_=Object(Lr.b)(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(r,d,O).then((function(){return s(r,d,O)})).then(c).catch((function(){})));case 1:case"end":return e.stop()}}),e)}))));return Object(a.jsx)(Ur.a,{isOpen:i,toggle:c,centered:!0,onClosed:C,children:Object(a.jsxs)("form",{onSubmit:_,children:[Object(a.jsx)(Tr.a,{toggle:c,children:"Edit tag"}),Object(a.jsxs)(Rr.a,{children:[Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("div",{className:"input-group-prepend",id:"colorPickerBtn",onClick:S,children:Object(a.jsx)("div",{className:"input-group-text edit-tag-modal__color-picker-toggle",style:{backgroundColor:O,borderColor:O},children:Object(a.jsx)(I.a,{icon:V.A,className:"edit-tag-modal__color-icon"})})}),Object(a.jsx)(ai.a,{isOpen:y,toggle:S,target:"colorPickerBtn",placement:"right",children:Object(a.jsx)(si.a,{color:O,disableAlpha:!0,onChange:function(e){var t=e.hex;return v(t)}})}),Object(a.jsx)(Kr.a,{value:d,placeholder:"Tag",required:!0,onChange:function(e){var t=e.target;return j(t.value)}})]}),w&&Object(a.jsx)(Fr,{type:"error",small:!0,className:"mt-2",children:Object(a.jsx)(Ar,{errorData:k,fallbackMessage:"Something went wrong while editing the tag :("})})]}),Object(a.jsxs)(Er.a,{children:[Object(a.jsx)(Wr.a,{type:"button",color:"link",onClick:c,children:"Cancel"}),Object(a.jsx)(Wr.a,{color:"primary",disabled:N,children:N?"Saving...":"Save"})]})]})})}},oi={tag:"Tag",shortUrls:"Short URLs",visits:"Visits"},li=function(e){var t,r=e.mode,n=e.onChange,c=e.renderTitle;return Object(a.jsxs)(J,{text:null!==(t=null===c||void 0===c?void 0:c(r))&&void 0!==t?t:"Display mode: ".concat(r),children:[Object(a.jsxs)(W.a,{active:"cards"===r,onClick:function(){return n("cards")},children:[Object(a.jsx)(I.a,{icon:V.O,fixedWidth:!0,className:"mr-1"})," Cards"]}),Object(a.jsxs)(W.a,{active:"list"===r,onClick:function(){return n("list")},children:[Object(a.jsx)(I.a,{icon:V.c,fixedWidth:!0,className:"mr-1"})," List"]})]})},ui=function(e,t){return Ge((function(r){var n,c,s=r.filterTags,i=r.forceListTags,o=r.tagsList,l=r.selectedServer,u=r.settings,d=Object(M.useState)(null!==(n=null===(c=u.ui)||void 0===c?void 0:c.tagsMode)&&void 0!==n?n:"cards"),j=Object(p.a)(d,2),b=j[0],h=j[1],O=Object(M.useState)({}),v=Object(p.a)(O,2),f=v[0],m=v[1],x=Object(F.a)((function(){return o.filteredTags.map((function(e){var t,r,n,c;return{tag:e,shortUrls:null!==(t=null===(r=o.stats[e])||void 0===r?void 0:r.shortUrlsCount)&&void 0!==t?t:0,visits:null!==(n=null===(c=o.stats[e])||void 0===c?void 0:c.visitsCount)&&void 0!==n?n:0}}))}),(function(e){return Fe(e,f)}));if(Object(M.useEffect)((function(){i()}),[]),o.loading)return Object(a.jsx)(dn.a,{loading:!0});if(o.error)return Object(a.jsx)(Fr,{type:"error",children:Object(a.jsx)(Ar,{errorData:o.errorData,fallbackMessage:"Error loading tags :("})});var g=function(e){return function(){var t=Ie(e,f.field,f.dir);m({field:t?e:void 0,dir:t})}};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{className:"mb-3",onChange:s}),Object(a.jsxs)(Vr.a,{className:"mb-3",children:[Object(a.jsx)("div",{className:"col-lg-6",children:Object(a.jsx)(li,{mode:b,onChange:h})}),Object(a.jsx)("div",{className:"col-lg-6 mt-3 mt-lg-0",children:Object(a.jsx)(Ae,{items:oi,order:f,onChange:function(e,t){return m({field:e,dir:t})}})})]}),function(){if(o.filteredTags.length<1)return Object(a.jsx)(dn.a,{children:"No tags found"});var r=x();return"cards"===b?Object(a.jsx)(e,{sortedTags:r,selectedServer:l}):Object(a.jsx)(t,{sortedTags:r,selectedServer:l,currentOrder:f,orderByColumn:g})}()]})}),(function(){return[Pe.visits]}))},di="shlink/deleteTag/DELETE_TAG_START",ji="shlink/deleteTag/DELETE_TAG_ERROR",bi="shlink/deleteTag/DELETE_TAG",hi="shlink/deleteTag/TAG_DELETED",Oi=ot((rt={},Object(u.a)(rt,di,(function(){return{deleting:!0,error:!1}})),Object(u.a)(rt,ji,(function(e,t){return{deleting:!1,error:!0,errorData:t.errorData}})),Object(u.a)(rt,bi,(function(){return{deleting:!1,error:!1}})),rt),{deleting:!1,error:!1}),vi=function(e){return function(t){return function(){var r=Object(x.a)(m.a.mark((function r(n,c){var a,s;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:di}),a=e(c),s=a.deleteTags,r.prev=2,r.next=5,s([t]);case 5:n({type:bi}),r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(2),n({type:ji,errorData:ft(r.t0)}),r.t0;case 12:case"end":return r.stop()}}),r,null,[[2,8]])})));return function(e,t){return r.apply(this,arguments)}}()}},fi=function(e){return{type:hi,tag:e}},mi="shlink/editTag/EDIT_TAG_START",xi="shlink/editTag/EDIT_TAG_ERROR",gi="shlink/editTag/EDIT_TAG",pi="shlink/editTag/TAG_EDITED",yi=ot((nt={},Object(u.a)(nt,mi,(function(e){return Object(d.a)(Object(d.a)({},e),{},{editing:!0,error:!1})})),Object(u.a)(nt,xi,(function(e,t){var r=t.errorData;return Object(d.a)(Object(d.a)({},e),{},{editing:!1,error:!0,errorData:r})})),Object(u.a)(nt,gi,(function(e,t){return Object(d.a)(Object(d.a)({},Object(h.a)(["oldName","newName"],t)),{},{editing:!1,error:!1})})),nt),{oldName:"",newName:"",editing:!1,error:!1}),Si=function(e,t){return function(r,n,c){return function(){var a=Object(x.a)(m.a.mark((function a(s,i){var o,l;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s({type:mi}),o=e(i),l=o.editTag,a.prev=2,a.next=5,l(r,n);case 5:t.setColorForKey(n,c),s({type:gi,oldName:r,newName:n}),a.next=13;break;case 9:throw a.prev=9,a.t0=a.catch(2),s({type:xi,errorData:ft(a.t0)}),a.t0;case 13:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e,t){return a.apply(this,arguments)}}()}},Ci=function(e,t,r){return{type:pi,oldName:e,newName:t,color:r}},Ni="shlink/tagsList/LIST_TAGS_START",wi="shlink/tagsList/LIST_TAGS_ERROR",ki="shlink/tagsList/LIST_TAGS",_i="shlink/tagsList/FILTER_TAGS",Ui={tags:[],filteredTags:[],stats:{},loading:!1,error:!1},Ti=function(e,t){return function(r){return r===e?t:r}},Ri=function(e,t){return Object(S.a)((function(e){return e===t}),e)},Ei=function(e){return Object.entries(e.reduce((function(e,t){var r=t.shortUrl;return null===r||void 0===r||r.tags.forEach((function(t){e[t]=(e[t]||0)+1})),e}),{}))},Di=ot((ct={},Object(u.a)(ct,Ni,(function(){return Object(d.a)(Object(d.a)({},Ui),{},{loading:!0})})),Object(u.a)(ct,wi,(function(e,t){var r=t.errorData;return Object(d.a)(Object(d.a)({},Ui),{},{error:!0,errorData:r})})),Object(u.a)(ct,ki,(function(e,t){var r=t.tags,n=t.stats;return Object(d.a)(Object(d.a)({},Ui),{},{stats:n,tags:r,filteredTags:r})})),Object(u.a)(ct,hi,(function(e,t){var r=t.tag;return Object(d.a)(Object(d.a)({},e),{},{tags:Ri(e.tags,r),filteredTags:Ri(e.filteredTags,r)})})),Object(u.a)(ct,pi,(function(e,t){var r=t.oldName,n=t.newName;return Object(d.a)(Object(d.a)({},e),{},{tags:e.tags.map(Ti(r,n)).sort(),filteredTags:e.filteredTags.map(Ti(r,n)).sort()})})),Object(u.a)(ct,_i,(function(e,t){var r=t.searchTerm;return Object(d.a)(Object(d.a)({},e),{},{filteredTags:e.tags.filter((function(e){return e.toLowerCase().match(r)}))})})),Object(u.a)(ct,Ot,(function(e,t){var r,n,c=t.createdVisits;return Object(d.a)(Object(d.a)({},e),{},{stats:(r=Ei(c),n=e.stats,r.reduce((function(e,t){var r=Object(p.a)(t,2),n=r[0],c=r[1];if(!e[n])return e;var a=e[n];return a.visitsCount=a.visitsCount+c,e[n]=a,e}),Object(d.a)({},n)))})})),ct),Ui),Li=function(e){return{type:_i,searchTerm:e}},Vi=Math.ceil,Ii=function(e){return function(t){var r=t.sortedTags,n=t.selectedServer,c=Object(M.useState)(),s=Object(p.a)(c,2),i=s[0],o=s[1],l=r.length,u=Object(la.a)(Vi(l/4),r);return Object(a.jsx)(Vr.a,{children:u.map((function(t,r){return Object(a.jsx)("div",{className:"col-md-6 col-xl-3",children:t.map((function(t){return Object(a.jsx)(e,{tag:t,selectedServer:n,displayed:i===t.tag,toggle:function(){return o(i!==t.tag?t.tag:void 0)}},t.tag)}))},r)}))})}},Fi=function(e){return function(t){var r,n=t.sortedTags,c=t.selectedServer,s=t.location,i=t.orderByColumn,o=t.currentOrder,l=Object(M.useRef)(!0),u=Object(w.a)(s.search).page,d=void 0===u?1:u,j=Object(K.a)("page",Number(d)),b=Object(p.a)(j,2),h=b[0],O=b[1],v=Object(la.a)(20,n),f=v.length>1,m=null!==(r=v[h-1])&&void 0!==r?r:[];return Object(M.useEffect)((function(){!l.current&&O(1),l.current=!1}),[n]),Object(M.useEffect)((function(){scrollTo(0,0)}),[h]),Object(a.jsxs)(Ir.a,{bodyClassName:f?"pb-1":"",children:[Object(a.jsxs)("table",{className:"table table-hover mb-0",children:[Object(a.jsxs)("thead",{className:"responsive-table__header",children:[Object(a.jsxs)("tr",{children:[Object(a.jsxs)("th",{className:"tags-table__header-cell",onClick:i("tag"),children:["Tag ",Object(a.jsx)(Be,{currentOrder:o,field:"tag"})]}),Object(a.jsxs)("th",{className:"tags-table__header-cell text-lg-right",onClick:i("shortUrls"),children:["Short URLs ",Object(a.jsx)(Be,{currentOrder:o,field:"shortUrls"})]}),Object(a.jsxs)("th",{className:"tags-table__header-cell text-lg-right",onClick:i("visits"),children:["Visits ",Object(a.jsx)(Be,{currentOrder:o,field:"visits"})]}),Object(a.jsx)("th",{className:"tags-table__header-cell"})]}),Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:4,className:"p-0 border-top-0"})})]}),Object(a.jsxs)("tbody",{children:[0===m.length&&Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:4,className:"text-center",children:"No results found"})}),m.map((function(t){return Object(a.jsx)(e,{tag:t,selectedServer:c},t.tag)}))]})]}),f&&Object(a.jsx)("div",{className:"sticky-card-paginator",children:Object(a.jsx)(ua,{pagesCount:v.length,currentPage:h,setCurrentPage:O})})]},h)}},Ai=function(e,t,r){return function(n){var c=n.tag,s=n.selectedServer,i=Object(K.d)(),l=Object(p.a)(i,2),u=l[0],d=l[1],j=Object(K.d)(),b=Object(p.a)(j,2),h=b[0],O=b[1],f=Object(K.d)(),m=Object(p.a)(f,2),x=m[0],g=m[1],y=Object(v.a)(s);return Object(a.jsxs)("tr",{className:"responsive-table__row",children:[Object(a.jsxs)("th",{className:"responsive-table__cell","data-th":"Tag",children:[Object(a.jsx)($s,{tag:c.tag,colorGenerator:r})," ",c.tag]}),Object(a.jsx)("td",{className:"responsive-table__cell text-lg-right","data-th":"Short URLs",children:Object(a.jsx)(o.b,{to:"/server/".concat(y,"/list-short-urls/1?tags=").concat(encodeURIComponent(c.tag)),children:ar(c.shortUrls)})}),Object(a.jsx)("td",{className:"responsive-table__cell text-lg-right","data-th":"Visits",children:Object(a.jsx)(o.b,{to:"/server/".concat(y,"/tag/").concat(c.tag,"/visits"),children:ar(c.visits)})}),Object(a.jsx)("td",{className:"responsive-table__cell text-lg-right",children:Object(a.jsxs)(wr,{toggle:g,isOpen:x,children:[Object(a.jsxs)(W.a,{onClick:O,children:[Object(a.jsx)(I.a,{icon:V.C,fixedWidth:!0,className:"mr-1"})," Edit"]}),Object(a.jsxs)(W.a,{onClick:d,children:[Object(a.jsx)(I.a,{icon:V.Q,fixedWidth:!0,className:"mr-1"})," Delete"]})]})}),Object(a.jsx)(t,{tag:c.tag,toggle:O,isOpen:h}),Object(a.jsx)(e,{tag:c.tag,toggle:d,isOpen:u})]})}},Mi=function(e,t){e.serviceFactory("TagsSelector",ti,"ColorGenerator"),e.decorator("TagsSelector",t(["tagsList","settings"],["listTags"])),e.serviceFactory("TagCard",ni,"DeleteTagConfirmModal","EditTagModal","ColorGenerator"),e.serviceFactory("DeleteTagConfirmModal",(function(){return ci})),e.decorator("DeleteTagConfirmModal",t(["tagDelete"],["deleteTag","tagDeleted"])),e.serviceFactory("EditTagModal",ii,"ColorGenerator"),e.decorator("EditTagModal",t(["tagEdit"],["editTag","tagEdited"])),e.serviceFactory("TagsCards",Ii,"TagCard"),e.serviceFactory("TagsTableRow",Ai,"DeleteTagConfirmModal","EditTagModal","ColorGenerator"),e.serviceFactory("TagsTable",Fi,"TagsTableRow"),e.decorator("TagsTable",b.h),e.serviceFactory("TagsList",ui,"TagsCards","TagsTable"),e.decorator("TagsList",t(["tagsList","selectedServer","mercureInfo","settings"],["forceListTags","filterTags","createNewVisits","loadMercureInfo"]));var r=function(e){return function(t){return function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){return function(){var r=Object(x.a)(m.a.mark((function r(n,c){var a,s,i,o,l,u,d,j;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=c(),s=a.tagsList,t||!s.loading&&Object(N.a)(s.tags)){r.next=3;break}return r.abrupt("return");case 3:return n({type:Ni}),r.prev=4,i=e(c),o=i.listTags,r.next=8,o();case 8:l=r.sent,u=l.tags,d=l.stats,j=(void 0===d?[]:d).reduce((function(e,t){var r=t.tag,n=t.shortUrlsCount,c=t.visitsCount;return e[r]={shortUrlsCount:n,visitsCount:c},e}),{}),n({tags:u,stats:j,type:ki}),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(4),n({type:wi,errorData:ft(r.t0)});case 19:case"end":return r.stop()}}),r,null,[[4,16]])})));return function(e,t){return r.apply(this,arguments)}}()}}(t.buildShlinkApiClient,e)}};e.factory("listTags",r(!1)),e.factory("forceListTags",r(!0)),e.serviceFactory("filterTags",(function(){return Li})),e.serviceFactory("tagDeleted",(function(){return fi})),e.serviceFactory("tagEdited",(function(){return Ci})),e.serviceFactory("deleteTag",vi,"buildShlinkApiClient"),e.serviceFactory("editTag",Si,"buildShlinkApiClient","ColorGenerator")},Gi=r(299),Pi="shlink/mercure/GET_MERCURE_INFO_START",Bi="shlink/mercure/GET_MERCURE_INFO_ERROR",Hi="shlink/mercure/GET_MERCURE_INFO",Wi=ot((at={},Object(u.a)(at,Pi,(function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!0,error:!1})})),Object(u.a)(at,Bi,(function(e){return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:!0})})),Object(u.a)(at,Hi,(function(e,t){return Object(d.a)(Object(d.a)({},t),{},{loading:!1,error:!1})})),at),{loading:!0,error:!1}),qi=function(e){return function(){return function(){var t=Object(x.a)(m.a.mark((function t(r,n){var c,a,s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r({type:Pi}),c=n(),a=c.settings,s=e(n),i=s.mercureInfo,a.realTimeUpdates.enabled){t.next=6;break}return r({type:Bi}),t.abrupt("return");case 6:return t.prev=6,t.next=9,i();case 9:o=t.sent,r(Object(d.a)({type:Hi,interval:a.realTimeUpdates.interval},o)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),r({type:Bi});case 16:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e,r){return t.apply(this,arguments)}}()}},zi=function(e){e.serviceFactory("loadMercureInfo",qi,"buildShlinkApiClient")},Qi=function(e){var t,r=e.settings.realTimeUpdates,n=e.toggleRealTimeUpdates,c=e.setRealTimeUpdatesInterval;return Object(a.jsxs)(Ir.a,{title:"Real-time updates",className:"h-100",children:[Object(a.jsx)(Hr.a,{children:Object(a.jsxs)(Kc,{checked:r.enabled,onChange:n,children:["Enable or disable real-time updates.",Object(a.jsxs)("small",{className:"form-text text-muted",children:["Real-time updates are currently being ",Object(a.jsx)("b",{children:r.enabled?"processed":"ignored"}),"."]})]})}),Object(a.jsxs)(Hr.a,{className:"mb-0",children:[Object(a.jsx)("label",{className:P()({"text-muted":!r.enabled}),children:"Real-time updates frequency (in minutes):"}),Object(a.jsx)(Kr.a,{type:"number",min:0,placeholder:"Immediate",disabled:!r.enabled,value:(t=r.interval,t?"".concat(t):""),onChange:function(e){var t=e.target;return c(Number(t.value))}}),r.enabled&&Object(a.jsxs)("small",{className:"form-text text-muted",children:[void 0!==r.interval&&r.interval>0&&Object(a.jsxs)("span",{children:["Updates will be reflected in the UI every ",Object(a.jsx)("b",{children:r.interval})," minute",r.interval>1&&"s","."]}),!r.interval&&"Updates will be reflected in the UI as soon as they happen."]})]})]})},Ki=function(e){var t=e.items;return Object(a.jsx)(a.Fragment,{children:t.map((function(e,t){return Object(a.jsx)(Vr.a,{children:e.map((function(e,t){return Object(a.jsx)("div",{className:"col-lg-6 mb-3",children:e},t)}))},t)}))})},Ji=function(e,t,r,n){return function(){return Object(a.jsx)(yn.a,{children:Object(a.jsx)(Ki,{items:[[Object(a.jsx)(r,{}),Object(a.jsx)(n,{})],[Object(a.jsx)(t,{}),Object(a.jsx)(e,{})]]})})}},Zi=r(614),Yi="shlink/realTimeUpdates/SET_SETTINGS",Xi=ot(Object(u.a)({},Yi,(function(e,t){return Object(Zi.a)(e,Object(Hn.a)("type",t))})),{realTimeUpdates:{enabled:!0},shortUrlCreation:{validateUrls:!1},ui:{theme:"light"},visits:{defaultInterval:"last30Days"}}),$i=function(e){return{type:Yi,realTimeUpdates:{enabled:e}}},eo=function(e){return{type:Yi,realTimeUpdates:{interval:e}}},to=function(e){return{type:Yi,shortUrlCreation:e}},ro=function(e){return{type:Yi,ui:e}},no=function(e){return{type:Yi,visits:e}},co=function(e){return"includes"===e?"Suggest tags including input":"Suggest tags starting with input"},ao=function(e){var t,r,n,c,s,i=e.settings,o=e.setShortUrlCreationSettings,l=null!==(t=i.shortUrlCreation)&&void 0!==t?t:{validateUrls:!1},u=function(e){return function(){return o(Object(d.a)(Object(d.a)({},null!==l&&void 0!==l?l:{validateUrls:!1}),{},{tagFilteringMode:e}))}};return Object(a.jsxs)(Ir.a,{title:"Short URLs form",className:"h-100",children:[Object(a.jsx)(Hr.a,{children:Object(a.jsxs)(Kc,{checked:null!==(r=l.validateUrls)&&void 0!==r&&r,onChange:function(e){return o(Object(d.a)(Object(d.a)({},l),{},{validateUrls:e}))},children:["Request validation on long URLs when creating new short URLs.",Object(a.jsxs)("small",{className:"form-text text-muted",children:["The initial state of the ",Object(a.jsx)("b",{children:"Validate URL"})," checkbox will be ",Object(a.jsx)("b",{children:l.validateUrls?"checked":"unchecked"}),"."]})]})}),Object(a.jsx)(Hr.a,{children:Object(a.jsxs)(Kc,{checked:null===(n=l.forwardQuery)||void 0===n||n,onChange:function(e){return o(Object(d.a)(Object(d.a)({},l),{},{forwardQuery:e}))},children:["Make all new short URLs forward their query params to the long URL.",Object(a.jsxs)("small",{className:"form-text text-muted",children:["The initial state of the ",Object(a.jsx)("b",{children:"Forward query params on redirect"})," checkbox will be ",Object(a.jsx)("b",{children:null===(c=l.forwardQuery)||void 0===c||c?"checked":"unchecked"}),"."]})]})}),Object(a.jsxs)(Hr.a,{className:"mb-0",children:[Object(a.jsx)("label",{children:"Tag suggestions search mode:"}),Object(a.jsxs)(J,{text:co(l.tagFilteringMode),children:[Object(a.jsx)(W.a,{active:!l.tagFilteringMode||"startsWith"===l.tagFilteringMode,onClick:u("startsWith"),children:co("startsWith")}),Object(a.jsx)(W.a,{active:"includes"===l.tagFilteringMode,onClick:u("includes"),children:co("includes")})]}),Object(a.jsx)("small",{className:"form-text text-muted",children:(s=l.tagFilteringMode,"includes"===s?Object(a.jsxs)(a.Fragment,{children:["The list of suggested tags will contain those ",Object(a.jsx)("b",{children:"including"})," provided input."]}):Object(a.jsxs)(a.Fragment,{children:["The list of suggested tags will contain those ",Object(a.jsx)("b",{children:"starting with"})," provided input."]}))})]})]})},so=function(e){var t,r,n=e.settings.ui,c=e.setUiSettings;return Object(a.jsxs)(Ir.a,{title:"User interface",className:"h-100",children:[Object(a.jsxs)(Hr.a,{children:[Object(a.jsx)(I.a,{icon:"dark"===(null===n||void 0===n?void 0:n.theme)?V.z:V.L,className:"user-interface__theme-icon"}),Object(a.jsx)(Kc,{checked:"dark"===(null===n||void 0===n?void 0:n.theme),onChange:function(e){var t=e?"dark":"light";c(Object(d.a)(Object(d.a)({},n),{},{theme:t})),Object(Xc.g)(t)},children:"Use dark theme."})]}),Object(a.jsxs)(Hr.a,{className:"mb-0",children:[Object(a.jsx)("label",{children:"Default display mode when managing tags:"}),Object(a.jsx)(li,{mode:null!==(t=null===n||void 0===n?void 0:n.tagsMode)&&void 0!==t?t:"cards",renderTitle:function(e){return Object(Lr.a)(e)},onChange:function(e){return c(Object(d.a)(Object(d.a)({},null!==n&&void 0!==n?n:{theme:"light"}),{},{tagsMode:e}))}}),Object(a.jsxs)("small",{className:"form-text text-muted",children:["Tags will be displayed as ",Object(a.jsx)("b",{children:null!==(r=null===n||void 0===n?void 0:n.tagsMode)&&void 0!==r?r:"cards"}),"."]})]})]})},io=function(e){var t,r=e.onChange,n=e.active,c=e.allText;return Object(a.jsx)(J,{text:null!==(t=Oe(n))&&void 0!==t?t:c,children:Object(a.jsx)(Ce,{allText:c,active:n,onChange:r})})},oo=function(e){var t,r,n=e.settings,c=e.setVisitsSettings;return Object(a.jsx)(Ir.a,{title:"Visits",className:"h-100",children:Object(a.jsxs)(Hr.a,{className:"mb-0",children:[Object(a.jsx)("label",{children:"Default interval to load on visits sections:"}),Object(a.jsx)(io,{allText:"All visits",active:null!==(t=null===(r=n.visits)||void 0===r?void 0:r.defaultInterval)&&void 0!==t?t:"last30Days",onChange:function(e){return c({defaultInterval:e})}})]})})},lo=function(e,t){e.serviceFactory("Settings",Ji,"RealTimeUpdates","ShortUrlCreation","UserInterface","Visits"),e.decorator("Settings",lc.a),e.decorator("Settings",t(null,["resetSelectedServer"])),e.serviceFactory("RealTimeUpdates",(function(){return Qi})),e.decorator("RealTimeUpdates",t(["settings"],["toggleRealTimeUpdates","setRealTimeUpdatesInterval"])),e.serviceFactory("ShortUrlCreation",(function(){return ao})),e.decorator("ShortUrlCreation",t(["settings"],["setShortUrlCreationSettings"])),e.serviceFactory("UserInterface",(function(){return so})),e.decorator("UserInterface",t(["settings"],["setUiSettings"])),e.serviceFactory("Visits",(function(){return oo})),e.decorator("Visits",t(["settings"],["setVisitsSettings"])),e.serviceFactory("toggleRealTimeUpdates",(function(){return $i})),e.serviceFactory("setRealTimeUpdatesInterval",(function(){return eo})),e.serviceFactory("setShortUrlCreationSettings",(function(){return to})),e.serviceFactory("setUiSettings",(function(){return ro})),e.serviceFactory("setVisitsSettings",(function(){return no}))},uo="shlink/domainRedirects/EDIT_DOMAIN_REDIRECTS",jo=function(e){return function(t,r){return function(){var n=Object(x.a)(m.a.mark((function n(c,a){var s,i,o;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c({type:"shlink/domainRedirects/EDIT_DOMAIN_REDIRECTS_START"}),s=e(a),i=s.editDomainRedirects,n.prev=2,n.next=5,i(Object(d.a)({domain:t},r));case 5:o=n.sent,c({type:uo,domain:t,redirects:o}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),c({type:"shlink/domainRedirects/EDIT_DOMAIN_REDIRECTS_ERROR",errorData:ft(n.t0)});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e,t){return n.apply(this,arguments)}}()}},bo="shlink/domainsList/LIST_DOMAINS_START",ho="shlink/domainsList/LIST_DOMAINS_ERROR",Oo="shlink/domainsList/LIST_DOMAINS",vo="shlink/domainsList/FILTER_DOMAINS",fo={domains:[],filteredDomains:[],loading:!1,error:!1},mo=function(e,t){return function(r){return r.domain!==e?r:Object(d.a)(Object(d.a)({},r),{},{redirects:t})}},xo=ot((st={},Object(u.a)(st,bo,(function(){return Object(d.a)(Object(d.a)({},fo),{},{loading:!0})})),Object(u.a)(st,ho,(function(e){var t=e.errorData;return Object(d.a)(Object(d.a)({},fo),{},{error:!0,errorData:t})})),Object(u.a)(st,Oo,(function(e,t){var r=t.domains,n=t.defaultRedirects;return Object(d.a)(Object(d.a)({},fo),{},{domains:r,filteredDomains:r,defaultRedirects:n})})),Object(u.a)(st,vo,(function(e,t){var r=t.searchTerm;return Object(d.a)(Object(d.a)({},e),{},{filteredDomains:e.domains.filter((function(e){return e.domain.toLowerCase().match(r)}))})})),Object(u.a)(st,uo,(function(e,t){var r=t.domain,n=t.redirects;return Object(d.a)(Object(d.a)({},e),{},{domains:e.domains.map(mo(r,n)),filteredDomains:e.filteredDomains.map(mo(r,n))})})),st),fo),go=function(e){return function(){return function(){var t=Object(x.a)(m.a.mark((function t(r,n){var c,a,s,i,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:bo}),c=e(n),a=c.listDomains,t.prev=2,t.next=5,a();case 5:s=t.sent,i=s.data,o=s.defaultRedirects,r({type:Oo,domains:i,defaultRedirects:o}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),r({type:ho,errorData:ft(t.t0)});case 14:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e,r){return t.apply(this,arguments)}}()}},po=function(e){return{type:vo,searchTerm:e}},yo=r(609),So=r(619),Co=function(e){var t=e.listDomains,r=e.value,n=e.domainsList,c=e.onChange,s=Object(K.d)(),i=Object(p.a)(s,4),o=i[0],l=i[2],u=i[3],d=n.domains,j=Object(N.a)(r),b=function(){return c("")};return Object(M.useEffect)((function(){t()}),[]),o?Object(a.jsxs)(yo.a,{children:[Object(a.jsx)(Kr.a,{value:r,placeholder:"Domain",onChange:function(e){return c(e.target.value)}}),Object(a.jsxs)(So.a,{addonType:"append",children:[Object(a.jsx)(Wr.a,{id:"backToDropdown",outline:!0,type:"button",className:"domains-dropdown__back-btn",onClick:Object(F.a)(b,u),children:Object(a.jsx)(I.a,{icon:V.R})}),Object(a.jsx)(gr.a,{target:"backToDropdown",placement:"left",trigger:"hover",children:"Existing domains"})]})]}):Object(a.jsxs)(J,{text:j?"Domain":"Domain: ".concat(r),className:j?"domains-dropdown__toggle-btn":"domains-dropdown__toggle-btn--active",children:[d.map((function(e){var t=e.domain,n=e.isDefault;return Object(a.jsxs)(W.a,{active:r===t||n&&j,onClick:function(){return c(t)},children:[t,n&&Object(a.jsx)("span",{className:"float-right text-muted",children:"default"})]},t)})),Object(a.jsx)(W.a,{divider:!0}),Object(a.jsx)(W.a,{onClick:Object(F.a)(b,l),children:Object(a.jsx)("i",{children:"New domain"})})]})},No=function(e){var t=e.isLast,r=Object(y.a)(e,["isLast"]);return Object(a.jsx)(Sn,Object(d.a)(Object(d.a)({},r),{},{required:!1,type:"url",placeholder:"No redirect",className:t?"mb-0":""}))},wo=function(e){var t,r,n,c,s,i,o=e.isOpen,l=e.toggle,u=e.domain,d=e.editDomainRedirects,j=Object(M.useState)(null!==(t=null===(r=u.redirects)||void 0===r?void 0:r.baseUrlRedirect)&&void 0!==t?t:""),b=Object(p.a)(j,2),h=b[0],O=b[1],v=Object(M.useState)(null!==(n=null===(c=u.redirects)||void 0===c?void 0:c.regular404Redirect)&&void 0!==n?n:""),f=Object(p.a)(v,2),g=f[0],y=f[1],S=Object(M.useState)(null!==(s=null===(i=u.redirects)||void 0===i?void 0:i.invalidShortUrlRedirect)&&void 0!==s?s:""),C=Object(p.a)(S,2),N=C[0],w=C[1],k=Object(Lr.b)(Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d(u.domain,{baseUrlRedirect:Object(Lr.d)(h),regular404Redirect:Object(Lr.d)(g),invalidShortUrlRedirect:Object(Lr.d)(N)}).then(l));case 1:case"end":return e.stop()}}),e)}))));return Object(a.jsx)(Ur.a,{isOpen:o,toggle:l,centered:!0,children:Object(a.jsxs)("form",{onSubmit:k,children:[Object(a.jsxs)(Tr.a,{toggle:l,children:["Edit redirects for ",Object(a.jsx)("b",{children:u.domain})]}),Object(a.jsxs)(Rr.a,{children:[Object(a.jsxs)(No,{value:h,onChange:O,children:[Object(a.jsxs)(cn,{className:"mr-2",placement:"bottom",children:["Visitors accessing the base url, as in ",Object(a.jsxs)("b",{children:["https://",u.domain,"/"]}),", will be redirected to this URL."]}),"Base URL"]}),Object(a.jsxs)(No,{value:g,onChange:y,children:[Object(a.jsxs)(cn,{className:"mr-2",placement:"bottom",children:["Visitors accessing a url not matching a short URL pattern, as in ",Object(a.jsxs)("b",{children:["https://",u.domain,"/???/[...]"]}),", will be redirected to this URL."]}),"Regular 404"]}),Object(a.jsxs)(No,{value:N,isLast:!0,onChange:w,children:[Object(a.jsx)(cn,{className:"mr-2",placement:"bottom",children:"Visitors accessing a url matching a short URL pattern, but not matching an existing short code, will be redirected to this URL."}),"Invalid short URL"]})]}),Object(a.jsxs)(Er.a,{children:[Object(a.jsx)(Wr.a,{color:"link",type:"button",onClick:l,children:"Cancel"}),Object(a.jsx)(Wr.a,{color:"primary",children:"Save"})]})]})})},ko=function(e){var t=e.fallback;return Object(a.jsxs)("span",{className:"text-muted",children:[!t&&Object(a.jsx)("small",{children:"No redirect"}),t&&Object(a.jsxs)(a.Fragment,{children:[t," ",Object(a.jsx)("small",{children:"(as fallback)"})]})]})},_o=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(I.a,{fixedWidth:!0,icon:V.h,className:"text-primary",id:"defaultDomainIcon"}),Object(a.jsx)(gr.a,{target:"defaultDomainIcon",placement:"right",children:"Default domain"})]})},Uo=function(e){var t,r,n,c=e.domain,s=e.editDomainRedirects,i=e.defaultRedirects,o=e.selectedServer,l=Object(K.d)(),u=Object(p.a)(l,2),d=u[0],j=u[1],b=c.domain,h=c.isDefault,O=c.redirects,v=!h||Object(Vt.c)(o);return Object(a.jsxs)("tr",{className:"responsive-table__row",children:[Object(a.jsx)("td",{className:"responsive-table__cell","data-th":"Is default domain",children:h?Object(a.jsx)(_o,{}):""}),Object(a.jsx)("th",{className:"responsive-table__cell","data-th":"Domain",children:b}),Object(a.jsx)("td",{className:"responsive-table__cell","data-th":"Base path redirect",children:null!==(t=null===O||void 0===O?void 0:O.baseUrlRedirect)&&void 0!==t?t:Object(a.jsx)(ko,{fallback:null===i||void 0===i?void 0:i.baseUrlRedirect})}),Object(a.jsx)("td",{className:"responsive-table__cell","data-th":"Regular 404 redirect",children:null!==(r=null===O||void 0===O?void 0:O.regular404Redirect)&&void 0!==r?r:Object(a.jsx)(ko,{fallback:null===i||void 0===i?void 0:i.regular404Redirect})}),Object(a.jsx)("td",{className:"responsive-table__cell","data-th":"Invalid short URL redirect",children:null!==(n=null===O||void 0===O?void 0:O.invalidShortUrlRedirect)&&void 0!==n?n:Object(a.jsx)(ko,{fallback:null===i||void 0===i?void 0:i.invalidShortUrlRedirect})}),Object(a.jsxs)("td",{className:"responsive-table__cell text-right",children:[Object(a.jsx)("span",{id:v?void 0:"defaultDomainBtn",children:Object(a.jsx)(Wr.a,{outline:!0,size:"sm",disabled:!v,onClick:v?j:void 0,children:Object(a.jsx)(I.a,{fixedWidth:!0,icon:v?V.m:V.b})})}),!v&&Object(a.jsxs)(gr.a,{target:"defaultDomainBtn",placement:"left",children:["Redirects for default domain cannot be edited here.",Object(a.jsx)("br",{}),"Use config options or env vars directly on the server."]})]}),Object(a.jsx)(wo,{domain:c,isOpen:d,toggle:j,editDomainRedirects:s})]})},To=["","Domain","Base path redirect","Regular 404 redirect","Invalid short URL redirect",""],Ro=function(e){var t,r=e.listDomains,n=e.domainsList,c=e.filterDomains,s=e.editDomainRedirects,i=e.selectedServer,o=n.filteredDomains,l=n.defaultRedirects,u=n.loading,d=n.error,j=n.errorData,b=null!==l&&void 0!==l?l:null===(t=o.find((function(e){return e.isDefault})))||void 0===t?void 0:t.redirects;if(Object(M.useEffect)((function(){r()}),[]),u)return Object(a.jsx)(dn.a,{loading:!0});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(B,{className:"mb-3",onChange:c}),d?Object(a.jsx)(Fr,{type:"error",children:Object(a.jsx)(Ar,{errorData:j,fallbackMessage:"Error loading domains :("})}):Object(a.jsx)(Ir.a,{children:Object(a.jsxs)("table",{className:"table table-hover mb-0",children:[Object(a.jsx)("thead",{className:"responsive-table__header",children:Object(a.jsx)("tr",{children:To.map((function(e,t){return Object(a.jsx)("th",{children:e},t)}))})}),Object(a.jsxs)("tbody",{children:[o.length<1&&Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:To.length,className:"text-center",children:"No results found"})}),o.map((function(e){return Object(a.jsx)(Uo,{domain:e,editDomainRedirects:s,defaultRedirects:b,selectedServer:i},e.domain)}))]})]})})]})},Eo=function(e,t){e.serviceFactory("DomainSelector",(function(){return Co})),e.decorator("DomainSelector",t(["domainsList"],["listDomains"])),e.serviceFactory("ManageDomains",(function(){return Ro})),e.decorator("ManageDomains",t(["domainsList","selectedServer"],["listDomains","filterDomains","editDomainRedirects"])),e.serviceFactory("listDomains",go,"buildShlinkApiClient"),e.serviceFactory("filterDomains",(function(){return po})),e.serviceFactory("editDomainRedirects",jo,"buildShlinkApiClient")},Do="shlink/appUpdates/APP_UPDATE_AVAILABLE",Lo="shlink/appUpdates/RESET_APP_UPDATE",Vo=ot((it={},Object(u.a)(it,Do,(function(){return!0})),Object(u.a)(it,Lo,(function(){return!1})),it),!1),Io=lt(Do),Fo=lt(Lo),Ao=r(153),Mo=r(610),Go=function(e){var t=e.isOpen,r=e.toggle,n=e.forceUpdate,c=Object(K.d)(),s=Object(p.a)(c,3),i=s[0],o=s[2];return Object(a.jsxs)(Mo.a,{className:"app-update-banner",isOpen:t,toggle:r,tag:Ir.a,color:"secondary",children:[Object(a.jsx)("h4",{className:"mb-4",children:"This app has just been updated!"}),Object(a.jsxs)("p",{className:"mb-0",children:["Restart it to enjoy the new features.",Object(a.jsxs)(Wr.a,{disabled:i,className:"ml-2",color:"secondary",size:"sm",onClick:function(){o(),n()},children:[!i&&Object(a.jsxs)(a.Fragment,{children:["Restart now ",Object(a.jsx)(I.a,{icon:V.M,className:"ml-1"})]}),i&&Object(a.jsx)(a.Fragment,{children:"Restarting..."})]})]})]})},Po=r(33),Bo=function(){var e=Object(x.a)(m.a.mark((function e(){var t,r,n,c,a,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=navigator.serviceWorker)||void 0===r?void 0:r.getRegistrations();case 2:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==t;case 6:if(!e.t0){e.next=10;break}e.t2=t,e.next=11;break;case 10:e.t2=[];case 11:n=e.t2,c=Object(Po.a)(n);try{for(c.s();!(a=c.n()).done;)s=a.value,null===(i=s.waiting)||void 0===i||i.addEventListener("statechange",(function(e){var t;"activated"===(null===(t=e.target)||void 0===t?void 0:t.state)&&window.location.reload()})),null===i||void 0===i||i.postMessage({type:"SKIP_WAITING"})}catch(o){c.e(o)}finally{c.f()}case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ho=function(e,t,r,n,c,s,i,o){return function(l){var u=l.fetchServers,d=l.servers,j=l.settings,h=l.appUpdated,O=l.resetAppUpdate,v="/"===l.location.pathname;return Object(M.useEffect)((function(){var e,t;0===Object.keys(d).length&&u(),Object(Xc.g)(null!==(e=null===(t=j.ui)||void 0===t?void 0:t.theme)&&void 0!==e?e:"light")}),[]),Object(a.jsxs)("div",{className:"container-fluid app-container",children:[Object(a.jsx)(e,{}),Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)("div",{className:P()("shlink-wrapper",{"d-flex d-md-block align-items-center":v}),children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{exact:!0,path:"/",component:t}),Object(a.jsx)(b.b,{exact:!0,path:"/settings",component:s}),Object(a.jsx)(b.b,{exact:!0,path:"/manage-servers",component:i}),Object(a.jsx)(b.b,{exact:!0,path:"/server/create",component:n}),Object(a.jsx)(b.b,{exact:!0,path:"/server/:serverId/edit",component:c}),Object(a.jsx)(b.b,{path:"/server/:serverId",component:r}),Object(a.jsx)(b.b,{component:Ao.a})]})}),Object(a.jsx)("div",{className:"shlink-footer",children:Object(a.jsx)(o,{})})]}),Object(a.jsx)(Go,{isOpen:h,toggle:O,forceUpdate:Bo})]})}},Wo=function(e,t,r){e.serviceFactory("App",Ho,"MainHeader","Home","MenuLayout","CreateServer","EditServer","Settings","ManageServers","ShlinkVersionsContainer"),e.decorator("App",t(["servers","settings","appUpdated"],["fetchServers","resetAppUpdate"])),e.decorator("App",r),e.serviceFactory("appUpdateAvailable",(function(){return Io})),e.serviceFactory("resetAppUpdate",(function(){return Fo}))},qo=new j.a,zo=qo.container,Qo=function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(u.a)({},t,function(e,t){return function(){return e[t].apply(e,arguments)}}(zo,t)))},Ko=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(i.b)(e?Object(h.a)(e):null,t.reduce(Qo,{}))};Wo(qo,Ko,b.h),Object(L.a)(qo,Ko,b.h),D(qo),xn(qo,Ko,b.h),Sc(qo,Ko,b.h),Mi(qo,Ko),Zs(qo,Ko),Object(Gi.a)(qo),zi(qo),lo(qo,Ko),Eo(qo,Ko);var Jo=zo,Zo=r(302),Yo=r(80),Xo=r(223),$o=Object(Yo.c)({servers:Yn,selectedServer:Gn,shortUrlsList:Wt,shortUrlsListParams:Jt,shortUrlCreationResult:Et,shortUrlDeletion:Ct,shortUrlEdition:Mt,shortUrlVisits:Os,tagVisits:ks,orphanVisits:Ms,shortUrlDetail:fn,tagsList:Di,tagDelete:Oi,tagEdit:yi,mercureInfo:Wi,settings:Xi,domainsList:xo,visitsOverview:Qs,appUpdated:Vo}),el=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Yo.d,tl={states:["settings","servers"],namespace:"shlink",namespaceSeparator:".",debounce:300},rl=Object(Yo.e)($o,Object(Xo.load)(tl),el(Object(Yo.a)(Object(Xo.save)(tl),Zo.a))),nl=r(64),cl=r.n(nl),al=r(303),sl=r(304),il=r(305),ol=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ll(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r(534),r(535);delete cl.a.Icon.Default.prototype._getIconUrl,cl.a.Icon.Default.mergeOptions({iconRetinaUrl:al.a,iconUrl:sl.a,shadowUrl:il.a});var ul=Jo.App,dl=Jo.ScrollToTop,jl=Jo.ErrorHandler,bl=Jo.appUpdateAvailable;Object(s.render)(Object(a.jsx)(i.a,{store:rl,children:Object(a.jsx)(o.a,{basename:l.a,children:Object(a.jsx)(jl,{children:Object(a.jsx)(dl,{children:Object(a.jsx)(ul,{})})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){var t;if(new URL(null!==(t="/shlink-web-client/feature/extended-basic-creation-form")?t:"",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/shlink-web-client/feature/extended-basic-creation-form","/service-worker.js");ol?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ll(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):ll(t,e)}))}}({onUpdate:function(){rl.dispatch(bl())}})},54:function(e,t,r){"use strict";var n=r(0),c=r(541),a=r(316),s=r(7),i=r.n(s),o=r(11),l=r(12),u=function(e){return{error:"border-danger",default:""}[e]},d=function(e){return{error:"text-danger",default:"text-muted"}[e]};t.a=function(e){var t=e.className,r=e.children,s=e.loading,j=void 0!==s&&s,b=e.type,h=void 0===b?"default":b,O=e.fullWidth,v=void 0!==O&&O,f=i()({"col-md-12":v,"col-md-10 offset-md-1":!v});return Object(n.jsx)(c.a,{noGutters:!0,className:t,children:Object(n.jsx)("div",{className:f,children:Object(n.jsx)(a.a,{className:u(h),body:!0,children:Object(n.jsxs)("h3",{className:i()("text-center mb-0",d(h)),children:[j&&Object(n.jsx)(l.a,{icon:o.k,spin:!0}),j&&Object(n.jsx)("span",{className:"ml-2",children:null!==r&&void 0!==r?r:"Loading..."}),!j&&r]})})})})}},60:function(e,t,r){"use strict";var n=r(0);t.a=function(e){var t=e.children;return Object(n.jsx)("div",{className:"no-menu-wrapper container-xl",children:t})}},70:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return u}));var n=r(168),c=r(542),a=r(547),s=r(31),i=function(e,t){var r=t.maxVersion,c=t.minVersion;if(!Object(s.c)(e))return!1;var a=!c||Object(n.compare)(e,c,">=");return(!r||Object(n.compare)(e,r,"<="))&&a},o=Object(c.a)(a.a,(function(e){try{return Object(n.compare)(e,e,"=")}catch(t){return!1}})),l=function(e){return o(e)?"v".concat(e):e},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"latest";return function(t){return o(t)?t:e}}}},[[319,1,2]]]);
//# sourceMappingURL=main.51f8986f.chunk.js.map